(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7813],{18451:(t,e,i)=>{"use strict";i.d(e,{F:()=>a});var s=i(74899),r=i(58973),n=i(73526);function a(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"=";if(!e||!i)throw new Error("Need label to add to query.");const r=o(t);if(!r.length)return t;const n=l(e,i,s);return h(t,r,n)}function o(t){const e=s.E2.parse(t),i=[];return e.iterate({enter:e=>{let{to:r,from:a,type:o}=e;if(o.id===s.m6){const e=(0,n._)(t.substring(a,r));return i.push({query:e.query,from:a,to:r}),!1}}}),i}function l(t,e,i){return{label:t,op:i,value:e===1/0?"+Inf":e.toString()}}function h(t,e,i){const s=new r.K;let n="",a=0;for(let r=0;r<e.length;r++){const o=e[r],l=r===e.length-1,h=t.substring(a,o.from),c=l?t.substring(o.to):"";u(o.query.labels,i)||o.query.labels.push(i);n+=h+s.renderQuery(o.query)+c,a=o.to}return n}function u(t,e){return t.find((t=>t.label===e.label&&t.value===e.value))}},73947:(t,e,i)=>{"use strict";i.d(e,{UQ:()=>b,ZK:()=>m,ZP:()=>v});var s=i(82897),r=i(20707),n=i.n(r),a=i(57706),o=i.n(a),l=i(88246),h=i(23214),u=i(84403),c=i(85328),f=i(6116),d=i(38261);function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const g=["job","instance"],m=1e4,O=t=>({label:t}),y=t=>(t.kind="function",t);function b(t,e){if(!e[t])return;const{type:i,help:s}=e[t];return`${i.toUpperCase()}: ${s}`}const x=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/;class v extends h.iL{constructor(t,e){var i;super(),i=this,p(this,"histogramMetrics",void 0),p(this,"timeRange",void 0),p(this,"metrics",void 0),p(this,"metricsMetadata",void 0),p(this,"datasource",void 0),p(this,"labelKeys",[]),p(this,"labelsCache",new(n())({max:10})),p(this,"labelValuesCache",new(n())({max:10})),p(this,"request",(async function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;try{return(await i.datasource.metadataRequest(t,s,r)).data.data}catch(t){console.error(t)}return e})),p(this,"start",(async()=>(this.datasource.lookupsDisabled||(await this.fetchLabels(),this.metrics=await this.fetchLabelValues("__name__")||[],await this.loadMetricsMetadata(),this.histogramMetrics=(0,f.NO)(this.metrics).sort()),[]))),p(this,"provideCompletionItems",(async function(t){let{prefix:e,text:s,value:r,labelKey:n,wrapperClasses:a}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l={suggestions:[]};if(!r)return l;const h=0===r.document.text.length,u=r.document.getTextsAtRange(r.selection),c=1===u.size?u.first().getText():null,f=c?c[r.selection.anchor.offset]:null,d=a.length>3,p=e&&!d,g=!f||")"===f,m=e&&!s.match(/^[\]})\s]+$/)&&g,O=/[+\-*/^%]/,y=s.match(O);return a.includes("context-range")?i.getRangeCompletionItems():a.includes("context-labels")?i.getLabelCompletionItems({prefix:e,text:s,value:r,labelKey:n,wrapperClasses:a}):a.includes("context-aggregation")?i.getAggregationCompletionItems(r):h?i.getEmptyCompletionItems(o):p&&g&&!y?i.getBeginningCompletionItems(o):p&&m?i.getTermCompletionItems():l})),p(this,"getBeginningCompletionItems",(t=>({suggestions:[...this.getEmptyCompletionItems(t).suggestions,...this.getTermCompletionItems().suggestions]}))),p(this,"getEmptyCompletionItems",(t=>{const{history:e}=t,i=[];if(e&&e.length){const t=(0,s.chain)(e).map((t=>t.query.expr)).filter().uniq().take(5).map(O).map((t=>function(t,e){const i=Date.now()-864e5,s=e.filter((e=>e.ts>i&&e.query===t.label)),r=s.length,n=s[0];let a=`Queried ${r} times in the last 24h.`;n&&(a=`${a} Last queried ${(0,l.CQ)(n.ts).fromNow()}.`);return Object.assign({},t,{documentation:a})}(t,e))).value();i.push({searchFunctionType:c.Z.Prefix,skipSort:!0,label:"History",items:t})}return{suggestions:i}})),p(this,"getTermCompletionItems",(()=>{const{metrics:t,metricsMetadata:e}=this,i=[];return i.push({searchFunctionType:c.Z.Prefix,label:"Functions",items:d.r8.map(y)}),t&&t.length&&i.push({label:"Metrics",items:t.map((t=>function(t,e){const i={label:t};return e&&e[t]&&(i.documentation=b(t,e)),i}(t,e))),searchFunctionType:c.Z.Fuzzy}),{suggestions:i}})),p(this,"getAggregationCompletionItems",(async t=>{const e=[];let i;const s=t.document.getBlocks().reduce(((e,s)=>{if(void 0===e)return"";if(!s)return e;const r=null==s?void 0:s.getText();return t.anchorBlock.key===s.key&&(i=t.selection.anchor.offset+e.length),e+r}),""),r=s.lastIndexOf("(",i);let n=s.lastIndexOf("(",r-1),a=s.indexOf(")",n);if(-1===n){const t=s.indexOf(")",i);a=s.indexOf(")",t+1),n=s.lastIndexOf("(",a)}const o={suggestions:e,context:"context-aggregation"};if(-1===n)return o;const l=s.slice(n+1,a).replace(/\[[^\]]+\]$/,""),h=(0,f.rV)(l,l.length-2).selector,u=await this.getSeries(h),d=Object.keys(u);if(d.length>0){const t=(0,f.ZO)(d);e.push({label:`Labels${t}`,items:d.map(O),searchFunctionType:c.Z.Fuzzy})}return o})),p(this,"getLabelCompletionItems",(async t=>{let{text:e,wrapperClasses:i,labelKey:r,value:n}=t;if(!n)return{suggestions:[]};const a=[],o=n.anchorBlock.getText(),l=n.selection.anchor.offset,h=o.substr(l),u=o.substr(0,l),d=e.match(/^(=|=~|!=|!~)/),p=h.match(/^"?[,}]|$/),m=u.match(/(=|=~|!=|!~)$/)&&h.match(/^"/);if(!(d&&p)&&!(p&&!d)||m)return{suggestions:a};let y,b;try{b=(0,f.rV)(o,l),y=b.selector}catch{y="{}"}const x=y.includes("__name__="),v=b?b.labelKeys:[];let $,k={};if(y&&(k=await this.getSeries(y,!x)),0===Object.keys(k).length)return console.warn(`Server did not return any values for selector = ${y}`),{suggestions:a};if(e&&d||i.includes("attr-value")){if(r&&k[r]){$="context-label-values";const t=(0,f.ZO)(k[r]);a.push({label:`Label values for "${r}"${t}`,items:k[r].map(O),searchFunctionType:c.Z.Fuzzy})}}else{const t=k?Object.keys(k):x?null:g;if(t){const e=(0,s.difference)(t,v);if(e.length){$="context-labels";const t=e.map((t=>({label:t}))),i={label:`Labels${(0,f.ZO)(t)}`,items:t,searchFunctionType:c.Z.Fuzzy};a.push(i)}}}return{context:$,suggestions:a}})),p(this,"fetchLabelValues",(async t=>{const e=this.datasource.getTimeRangeParams(),i=`/api/v1/label/${this.datasource.interpolateString(t)}/values`;return await this.request(i,[],e)})),p(this,"getSeriesValues",(async(t,e)=>{if(!this.datasource.hasLabelsMatchAPISupport()){var i;return null!==(i=(await this.getSeries(e))[t])&&void 0!==i?i:[]}return await this.fetchSeriesValuesWithMatch(t,e)})),p(this,"fetchSeriesValuesWithMatch",(async(t,e)=>{var i;const s=t?this.datasource.interpolateString(t):null,r=this.datasource.getTimeRangeParams(),n=Object.assign({},r,e&&{"match[]":e}),a=`/api/v1/label/?${new URLSearchParams({"match[]":null!=s?s:"",start:(0,f.s4)(parseInt(r.start,10)).toString(),end:(0,f.s4)(parseInt(r.end,10)).toString(),name:t}).toString()}/values`;let o=this.labelValuesCache.get(a);return o||(o=await this.request(`/api/v1/label/${s}/values`,[],n),o&&this.labelValuesCache.set(a,o)),null!==(i=o)&&void 0!==i?i:[]})),p(this,"getSeriesLabels",(async(t,e)=>{let i,s;this.datasource.hasLabelsMatchAPISupport()?(e.push({name:"__name__",value:"",op:"!="}),s=await this.fetchSeriesLabelsMatch(t),i=Object.keys(s)):(s=await this.getSeries(t),i=Object.keys(s));const r=new Set(e.map((t=>t.name)));return i.filter((t=>!r.has(t)))})),p(this,"fetchSeriesLabels",(async(t,e)=>{const i=this.datasource.interpolateString(t),s=this.datasource.getTimeRangeParams(),r=Object.assign({},s,{"match[]":i}),n=`/api/v1/series?${new URLSearchParams({"match[]":i,start:(0,f.s4)(parseInt(s.start,10)).toString(),end:(0,f.s4)(parseInt(s.end,10)).toString(),withName:e?"true":"false"}).toString()}`;let a=this.labelsCache.get(n);if(!a){const t=await this.request("/api/v1/series",[],r),{values:i}=(0,f.DY)(t,e);a=i,this.labelsCache.set(n,a)}return a})),p(this,"fetchSeriesLabelsMatch",(async(t,e)=>{const i=this.datasource.interpolateString(t),s=this.datasource.getTimeRangeParams(),r=Object.assign({},s,{"match[]":i}),n="/api/v1/labels",a=`${n}?${new URLSearchParams({"match[]":i,start:(0,f.s4)(parseInt(s.start,10)).toString(),end:(0,f.s4)(parseInt(s.end,10)).toString(),withName:e?"true":"false"}).toString()}`;let o=this.labelsCache.get(a);if(!o){o=(await this.request(n,[],r)).reduce(((t,e)=>Object.assign({},t,{[e]:""})),{}),this.labelsCache.set(a,o)}return o})),p(this,"fetchSeries",(async t=>{const e=this.datasource.getTimeRangeParams(),i=Object.assign({},e,{"match[]":t});return await this.request("/api/v1/series",{},i)})),p(this,"fetchDefaultSeries",(0,s.once)((async()=>{const t=await Promise.all(g.map((t=>this.fetchLabelValues(t))));return g.reduce(((e,i,s)=>Object.assign({},e,{[i]:t[s]})),{})}))),this.datasource=t,this.histogramMetrics=[],this.timeRange={start:0,end:0},this.metrics=[],Object.assign(this,e)}cleanText(t){return t.split(x).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return d.ZP}async loadMetricsMetadata(){this.metricsMetadata=(0,f.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1}))}getLabelKeys(){return this.labelKeys}getRangeCompletionItems(){return{context:"context-range",suggestions:[{label:"Range vector",items:[...d.Ty]}]}}importFromAbstractQuery(t){return(0,f.e5)(t)}exportToAbstractQuery(t){const e=t.expr;if(!e||0===e.length)return{refId:t.refId,labelMatchers:[]};const i=o().tokenize(e,d.ZP),s=(0,f.UO)(i),r=function(t,e){let i="";for(let t in e)if("string"==typeof e[t]){i=e[t];break}return i}(0,i);return r&&r.length>0&&s.push({name:"__name__",operator:u.K2.Equal,value:r}),{refId:t.refId,labelMatchers:s}}async getSeries(t,e){if(this.datasource.lookupsDisabled)return{};try{return"{}"===t?await this.fetchDefaultSeries():await this.fetchSeriesLabels(t,e)}catch(t){return console.error(t),{}}}async getLabelValues(t){return await this.fetchLabelValues(t)}async fetchLabels(){const t=this.datasource.getTimeRangeParams();this.labelFetchTs=Date.now().valueOf();const e=await this.request("/api/v1/labels",[],t);return Array.isArray(e)&&(this.labelKeys=e.slice().sort()),[]}}},6116:(t,e,i)=>{"use strict";i.d(e,{DY:()=>c,I4:()=>m,NO:()=>u,PL:()=>w,U9:()=>$,UO:()=>Q,ZO:()=>x,e5:()=>S,ll:()=>g,o8:()=>O,rV:()=>p,s4:()=>y,tU:()=>k});var s=i(82897),r=i(57706),n=i(84403),a=i(18451),o=i(73947);const l=["__name__"];function h(t,e){if(null==t)return{};var i,s,r={},n=Object.keys(t);for(s=0;s<n.length;s++)i=n[s],e.indexOf(i)>=0||(r[i]=t[i]);return r}const u=t=>{const e=new Set,i=new RegExp("_bucket($|:)");for(let s=0;s<t.length;s++){const r=t[s];i.test(r)&&e.add(r)}return[...e]};function c(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={};t.forEach((t=>{const{__name__:s}=t,r=h(t,l);e&&(i.__name__=i.__name__||new Set,i.__name__.has(s)||i.__name__.add(s)),Object.keys(r).forEach((t=>{i[t]||(i[t]=new Set),i[t].has(r[t])||i[t].add(r[t])}))}));const s={};return b(Object.keys(i)).forEach((t=>{s[t]=b(Array.from(i[t]))})),{values:s,keys:Object.keys(s)}}const f=/\{[^}]*?(\}|$)/,d=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t.match(f)){if(t.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${t}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+t)}const i=t.slice(0,e),s=i.lastIndexOf("{"),r=i.lastIndexOf("}");if(-1===s)throw new Error("Not inside selector, missing open brace: "+i);if(r>-1&&r>s)throw new Error("Not inside selector, previous selector already closed: "+i);const n=t.slice(e),a=n.indexOf("}"),o=a+e,l=n.indexOf("{"),h=l+e;if(-1===o)throw new Error("Not inside selector, missing closing brace in suffix: "+n);if(l>-1&&h<o)throw new Error("Not inside selector, next selector opens before this one closed: "+n);const u=t.slice(s,o),c={};u.replace(d,((i,s,r,n)=>{const a=t.indexOf(i),o=a+s.length+r.length+1,l=a+s.length+r.length+n.length-1;return(e<o||e>l)&&(c[s]={value:n,operator:r}),""}));const p=t.slice(0,s),g=p.match(/[A-Za-z:][\w:]*$/);g&&(c.__name__={value:`"${g[0]}"`,operator:"="});const m=Object.keys(c).sort(),O=m.map((t=>`${t}${c[t].operator}${c[t].value}`)).join(","),y=["{",O,"}"].join("");return{labelKeys:m,selector:y}}function g(t,e){const i=Object.keys(e),s=new RegExp(`(\\s|^)(${i.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),r=t.replace(s,((t,i,s,r)=>`${i}${e[s]}${r}`)).split(/(\+|\-|\*|\/|\%|\^)/),n=/(\)\{|\}\{|\]\{)/,o=r.map((t=>function(t,e){var i;const s=t.match(e);if(!s)return t;const r=null!==(i=s.index)&&void 0!==i?i:0,n=t.slice(0,r+1),o=t.slice(r+1),l=[];o.replace(d,((t,e,i,s)=>(l.push({key:e,operator:i,value:s}),"")));let h=n;return l.filter(Boolean).forEach((t=>{const e=t.value.slice(1,-1);h=(0,a.F)(h,t.key,e,t.operator)})),h}(t,n)));return o.join("")}function m(t){if(!t)return t;const e={},i={};for(const s in t){const r=t[s][0];e[s]=r,"histogram"===r.type&&(i[`${s}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${r.help})`},i[`${s}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${r.help})`},i[`${s}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${r.help})`}),"summary"===r.type&&(i[`${s}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${r.help})`},i[`${s}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${r.help})`})}const s={ALERTS:{type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."}};return Object.assign({},e,i,s)}function O(t){return y(t/1e3)}function y(t){return Math.floor(t/60)}function b(t){return t.slice(0,o.ZK)}function x(t){return t&&t.length>=o.ZK?`, limited to the first ${o.ZK} received items`:""}const v=/[*+?()|\\.\[\]{}^$]/g;function $(t){return t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function k(t){return $(t.replace(v,"\\$&"))}const _={"=":n.K2.Equal,"!=":n.K2.NotEqual,"=~":n.K2.EqualRegEx,"!~":n.K2.NotEqualRegEx},P=(0,s.invert)(_);function w(t){const e=t.labelMatchers.map((t=>{const e=P[t.operator];return e?`${t.name}${e}"${t.value}"`:""})).filter((t=>""!==t)).join(", ");return e?`{${e}}`:""}function S(t){return{refId:t.refId,expr:w(t),range:!0}}function Q(t){const e=[];for(let i in t)if(t[i]instanceof r.Token){let s=t[i];if("context-labels"===s.type){let t="",i="",n="",a=s.content;for(let s in a)if("string"==typeof a[s]){let t;t=a[s],"="!==t&&"!="!==t&&"=~"!==t&&"!~"!==t||(n=t)}else if(a[s]instanceof r.Token)switch(a[s].type){case"label-key":t=a[s].content;break;case"label-value":i=a[s].content,i=i.substring(1,i.length-1);const r=_[n];r&&e.push({name:t,operator:r,value:i})}}}return e}},58973:(t,e,i)=>{"use strict";i.d(e,{K:()=>b,Z:()=>x});var s=i(38261),r=i(22364),n=i(27468),a=i(63472),o=i(16280);function l(t){var e,i,s,r,n,l;return Object.assign({},t,{id:t.id,name:null!==(e=t.name)&&void 0!==e?e:(0,a.t7)(t.id),params:null!==(i=t.params)&&void 0!==i?i:[],defaultParams:null!==(s=t.defaultParams)&&void 0!==s?s:[],category:null!==(r=t.category)&&void 0!==r?r:o.C.Functions,renderer:null!==(n=t.renderer)&&void 0!==n?n:t.params?a.zJ:a.pS,addOperationHandler:null!==(l=t.addOperationHandler)&&void 0!==l?l:a.PP})}function h(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:t,name:(0,a.t7)(t),params:[(0,a.kq)(e)],defaultParams:[e?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.C.RangeFunctions,renderer:c,addOperationHandler:f,changeTypeHandler:u}}function u(t,e){return("$__rate_interval"===t.params[0]&&"$__rate_interval"!==e.defaultParams[0]||"$__interval"===t.params[0]&&"$__interval"!==e.defaultParams[0])&&(t.params=e.defaultParams),t}function c(t,e,i){var s,r;let n=null!==(s=(null!==(r=t.params)&&void 0!==r?r:[])[0])&&void 0!==s?s:"5m";return`${e.id}(${i}[${n}])`}function f(t,e,i){const s={id:t.id,params:t.defaultParams};if(e.operations.length>0){if(i.getOperationDef(e.operations[0].id).addOperationHandler===f)return Object.assign({},e,{operations:[s,...e.operations.slice(1)]})}return Object.assign({},e,{operations:[s,...e.operations]})}function d(t,e){var i;return Object.assign({},e,{binaryQueries:[...null!==(i=e.binaryQueries)&&void 0!==i?i:[],{operator:"/",query:e}]})}function p(t,e,i){if("string"!=typeof t.params[1])throw"The separator must be a string";const s=`"${t.params[1]}"`;return`${t.id}(${i}, "${t.params[0]}", ${s}, "${t.params.slice(2).join(s)}")`}function g(t,e){const i={id:t.id,params:t.defaultParams};return Object.assign({},e,{operations:[...e.operations,i]})}function m(t){return{id:t,name:(0,a.t7)(t),params:[(0,a.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.C.RangeFunctions,renderer:O,addOperationHandler:f}}function O(t,e,i){var s,r;let n=null!==(s=(null!==(r=t.params)&&void 0!==r?r:[])[0])&&void 0!==s?s:"$__interval";return`${e.id}(${i}[${n}])`}var y=i(10054);class b extends y.x{constructor(){super((()=>{const t=[{id:o.G.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.C.Functions,renderer:a.pS,addOperationHandler:a.PP},{id:o.G.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.C.Functions,defaultParams:["","$1","","(.*)"],renderer:a.zJ,addOperationHandler:a.PP},{id:o.G.Ln,name:"Ln",params:[],defaultParams:[],category:o.C.Functions,renderer:a.pS,addOperationHandler:a.PP},h(o.G.Changes),h(o.G.Rate,!0),h(o.G.Irate),h(o.G.Increase,!0),h(o.G.Idelta),h(o.G.Delta),l({id:o.G.HoltWinters,params:[(0,a.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.C.RangeFunctions,renderer:a.e8,addOperationHandler:f,changeTypeHandler:u}),l({id:o.G.PredictLinear,params:[(0,a.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.C.RangeFunctions,renderer:a.e8,addOperationHandler:f,changeTypeHandler:u}),l({id:o.G.QuantileOverTime,params:[(0,a.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.C.RangeFunctions,renderer:a.NZ,addOperationHandler:f,changeTypeHandler:u}),...r.EX,{id:o.G.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.C.BinaryOps,renderer:(t,e,i)=>i,addOperationHandler:d},l({id:o.G.Abs}),l({id:o.G.Absent}),l({id:o.G.Acos,category:o.C.Trigonometric}),l({id:o.G.Acosh,category:o.C.Trigonometric}),l({id:o.G.Asin,category:o.C.Trigonometric}),l({id:o.G.Asinh,category:o.C.Trigonometric}),l({id:o.G.Atan,category:o.C.Trigonometric}),l({id:o.G.Atanh,category:o.C.Trigonometric}),l({id:o.G.Ceil}),l({id:o.G.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),l({id:o.G.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.G.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.G.Cos,category:o.C.Trigonometric}),l({id:o.G.Cosh,category:o.C.Trigonometric}),l({id:o.G.DayOfMonth,category:o.C.Time}),l({id:o.G.DayOfWeek,category:o.C.Time}),l({id:o.G.DaysInMonth,category:o.C.Time}),l({id:o.G.Deg}),h(o.G.Deriv),l({id:o.G.Exp}),l({id:o.G.Floor}),l({id:o.G.Group}),l({id:o.G.Hour}),l({id:o.G.LabelJoin,params:[{name:"Destination Label",type:"string",editor:n.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:n.g}],defaultParams:["",",",""],renderer:p,addOperationHandler:g}),l({id:o.G.Log10}),l({id:o.G.Log2}),l({id:o.G.Minute}),l({id:o.G.Month}),l({id:o.G.Pi,renderer:t=>`${t.id}()`}),l({id:o.G.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:a.pS}),l({id:o.G.Rad}),h(o.G.Resets),l({id:o.G.Round,category:o.C.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),l({id:o.G.Scalar}),l({id:o.G.Sgn}),l({id:o.G.Sin,category:o.C.Trigonometric}),l({id:o.G.Sinh,category:o.C.Trigonometric}),l({id:o.G.Sort}),l({id:o.G.SortDesc}),l({id:o.G.Sqrt}),l({id:o.G.Stddev}),l({id:o.G.Tan,category:o.C.Trigonometric}),l({id:o.G.Tanh,category:o.C.Trigonometric}),l({id:o.G.Time,renderer:t=>`${t.id}()`}),l({id:o.G.Timestamp}),l({id:o.G.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:t=>`${t.id}(${t.params[0]})`}),l({id:o.G.Year}),...(0,a.IT)(o.G.Sum),...(0,a.IT)(o.G.Avg),...(0,a.IT)(o.G.Min),...(0,a.IT)(o.G.Max),...(0,a.IT)(o.G.Count),...(0,a.Z3)(o.G.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(o.G.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(o.G.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),m(o.G.SumOverTime),m(o.G.AvgOverTime),m(o.G.MinOverTime),m(o.G.MaxOverTime),m(o.G.CountOverTime),m(o.G.LastOverTime),m(o.G.PresentOverTime),m(o.G.AbsentOverTime),m(o.G.StddevOverTime)];for(const e of t){const t=s.r8.find((t=>t.insertText===e.id));t&&(e.documentation=t.documentation)}return t})),this.setOperationCategories([o.C.Aggregations,o.C.RangeFunctions,o.C.Functions,o.C.BinaryOps,o.C.Trigonometric,o.C.Time])}getQueryPatterns(){return[{name:"Rate then sum",operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase ",operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]}]}}const x=new b},22364:(t,e,i)=>{"use strict";i.d(e,{EX:()=>o,PX:()=>a,iQ:()=>n});var s=i(63472),r=i(16280);const n=[{id:r.G.Addition,name:"Add scalar",sign:"+"},{id:r.G.Subtraction,name:"Subtract scalar",sign:"-"},{id:r.G.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:r.G.DivideBy,name:"Divide by scalar",sign:"/"},{id:r.G.Modulo,name:"Modulo by scalar",sign:"%"},{id:r.G.Exponent,name:"Exponent",sign:"^"},{id:r.G.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:r.G.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:r.G.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:r.G.LessThan,name:"Less than",sign:"<",comparison:!0},{id:r.G.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:r.G.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],a=n.reduce(((t,e)=>(t[e.sign]={id:e.id,comparison:e.comparison},t)),{}),o=n.map((t=>{const e=[{name:"Value",type:"number"}],i=[2];return t.comparison&&(e.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),i.push(!1)),{id:t.id,name:t.name,params:e,defaultParams:i,alternativesKey:"binary scalar operations",category:r.C.BinaryOps,renderer:(n=t.sign,function(t,e,i){let s=t.params[0],r="";return 2===t.params.length&&(r=t.params[1]?" bool":""),`${i} ${n}${r} ${s}`}),addOperationHandler:s.PP};var n}))},27468:(t,e,i)=>{"use strict";i.d(e,{g:()=>h});var s=i(68404),r=i(86351),n=i(70917),a=i(58973),o=i(63472),l=i(45916);function h(t){let{onChange:e,index:i,operationIndex:h,value:u,query:c,datasource:f}=t;const[d,p]=(0,s.useState)({});return(0,l.jsx)(n.Ph,{inputId:(0,o.i1)(h,i),autoFocus:""===u||void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{p({isLoading:!0});const t=await async function(t,e){let i=t.labels;"prometheus"===e.type&&(i=[{label:"__name__",op:"=",value:t.metric},...t.labels]);const s=a.Z.renderLabels(i),r=await e.languageProvider.fetchSeriesLabels(s);return Object.keys(r).map((t=>({label:t,value:t})))}(c,f);p({options:t,isLoading:void 0})},isLoading:d.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:d.options,value:(0,r.E)(u),onChange:t=>e(i,t.value)})}},73526:(t,e,i)=>{"use strict";i.d(e,{_:()=>a});var s=i(74899),r=i(22364),n=i(38826);function a(t){const e=(0,n.bU)(t),i=s.E2.parse(e).topNode,r={query:{metric:"",labels:[],operations:[]},errors:[]};try{o(e,i,r)}catch(t){console.error(t),t instanceof Error&&r.errors.push({text:t.message})}return function(t){if(0===t.labels.length&&0===t.operations.length&&!t.metric)return!0;return!1}(r.query)&&(r.errors=[]),r}function o(t,e,i){const a=i.query;switch(e.type.id){case s.tz:a.metric=(0,n.KF)(t,e);break;case s.Zm:{a.labels.push(function(t,e){const i=(0,n.KF)(t,e.getChild(s.m0)),r=(0,n.KF)(t,e.getChild(s.e8)),a=(0,n.KF)(t,e.getChild(s.nv)).replace(/"/g,"");return{label:i,op:r,value:a}}(t,e));const r=e.getChild(n._A);r&&i.errors.push((0,n.wf)(t,r));break}case s.lX:!function(t,e,i){const r=i.query,a=e.getChild(s.hT),o=(0,n.KF)(t,a),u=e.getChild(s.yY).getChild(s.mW),c=[];let f="";if(l.includes(o)||o.endsWith("_over_time")){let i=(0,n.KF)(t,e).match(/\[(.+)\]/);null!=i&&i[1]&&(f=i[1],c.push(i[1]))}const d={id:o,params:c};if(r.operations.unshift(d),u){if((0,n.KF)(t,u)===f+"]")return;h(t,u,i,d)}}(t,e,i);break;case s.aZ:!function(t,e,i){const r=i.query,a=e.getChild(s.Ki);let o=(0,n.KF)(t,a);const l=e.getChild(s.Ip),u=[];if(l){l.getChild("By")&&o&&(o=`__${o}_by`);l.getChild(s.yN)&&(o=`__${o}_without`),u.push(...(0,n.ff)(t,l,s.Tm))}const c=e.getChild(s.yY).getChild(s.mW),f={id:o,params:[]};r.operations.unshift(f),h(t,c,i,f),f.params.push(...u)}(t,e,i);break;case s.vU:!function(t,e,i){const a=i.query,l=e.firstChild,h=(0,n.KF)(t,l.nextSibling),u=function(t,e){if(!e)return;if(e.getChild("Bool"))return{isBool:!0,isMatcher:!1};{var i;const r=e.getChild(s.Wc);if(!r)return;return{isMatcher:!0,isBool:!1,matches:(0,n.KF)(t,null===(i=r.getChild(s.XT))||void 0===i?void 0:i.getChild(s.pQ)),matchType:r.getChild(s.On)?"on":"ignoring"}}}(t,e.getChild(s.v3)),c=e.lastChild,f=r.PX[h],d=l.getChild(s.iy),p=c.getChild(s.iy),g=c.getChild(s.vU);d||o(t,l,i);if(p)a.operations.push((0,n.Es)(f,t,c,!(null==u||!u.isBool)));else if(g){const e=(0,n.ge)(c);(null==e?void 0:e.type.id)===s.iy&&a.operations.push((0,n.Es)(f,t,e,!(null==u||!u.isBool))),o(t,c,i)}else{a.binaryQueries=a.binaryQueries||[];const e={operator:h,query:{metric:"",labels:[],operations:[]}};null!=u&&u.isMatcher&&(e.vectorMatchesType=u.matchType,e.vectorMatches=u.matches),a.binaryQueries.push(e),o(t,c,{query:e.query,errors:i.errors})}}(t,e,i);break;case n._A:if(function(t){var e,i,r;return(null===(e=t.prevSibling)||void 0===e?void 0:e.type.id)===s.wi&&(null===(i=t.prevSibling)||void 0===i||null===(r=i.firstChild)||void 0===r?void 0:r.type.id)===s.m6}(e))break;i.errors.push((0,n.wf)(t,e));break;default:{e.type.id===s.Om&&i.errors.push((0,n.wf)(t,e));let r=e.firstChild;for(;r;)o(t,r,i),r=r.nextSibling}}}const l=["changes","rate","irate","increase","delta"];function h(t,e,i,r){if(e)switch(e.type.id){case s.wi:case s.mW:{let s=e.firstChild;for(;s;)h(t,s,i,r),s=s.nextSibling;break}case s.iy:r.params.push(parseFloat((0,n.KF)(t,e)));break;case s.nv:r.params.push((0,n.KF)(t,e).replace(/"/g,""));break;default:o(t,e,i)}}},10054:(t,e,i)=>{"use strict";i.d(e,{x:()=>a});var s=i(2238),r=i(16280);function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a{constructor(t){n(this,"operationsRegistry",void 0),n(this,"categories",[]),this.operationsRegistry=new s.B(t)}setOperationCategories(t){this.categories=t}getOperationsForCategory(t){return this.operationsRegistry.list().filter((e=>e.category===t&&!e.hideFromList))}getAlternativeOperations(t){return this.operationsRegistry.list().filter((e=>e.alternativesKey&&e.alternativesKey===t))}getCategories(){return this.categories}getOperationDef(t){return this.operationsRegistry.getIfExists(t)}renderOperations(t,e){for(const i of e){const e=this.operationsRegistry.getIfExists(i.id);if(!e)throw new Error(`Could not find operation ${i.id} in the registry`);t=e.renderer(i,e,t)}return t}renderBinaryQueries(t,e){if(e)for(const i of e)t=`${this.renderBinaryQuery(t,i)}`;return t}renderBinaryQuery(t,e){let i=t+` ${e.operator} `;return e.vectorMatches&&(i+=`${e.vectorMatchesType}(${e.vectorMatches}) `),i+this.renderQuery(e.query,!0)}renderLabels(t){if(0===t.length)return"";let e="{";for(const i of t)"{"!==e&&(e+=", "),e+=`${i.label}${i.op}"${i.value}"`;return e+"}"}renderQuery(t,e){var i,s,r;let n=`${null!==(i=t.metric)&&void 0!==i?i:""}${this.renderLabels(t.labels)}`;return n=this.renderOperations(n,t.operations),!e&&this.hasBinaryOp(t)&&Boolean(null===(s=t.binaryQueries)||void 0===s?void 0:s.length)&&(n=`(${n})`),n=this.renderBinaryQueries(n,t.binaryQueries),e&&(this.hasBinaryOp(t)||Boolean(null===(r=t.binaryQueries)||void 0===r?void 0:r.length))&&(n=`(${n})`),n}hasBinaryOp(t){return void 0!==t.operations.find((t=>{const e=this.getOperationDef(t.id);return(null==e?void 0:e.category)===r.C.BinaryOps}))}}},63472:(t,e,i)=>{"use strict";i.d(e,{IT:()=>y,NZ:()=>f,PP:()=>p,Sp:()=>$,Z3:()=>b,ZI:()=>P,e8:()=>c,i1:()=>m,j8:()=>_,kq:()=>O,pS:()=>l,t7:()=>g,zJ:()=>h});var s=i(82897),r=i(64681),n=i.n(r),a=i(27468),o=i(16280);function l(t,e,i){const s=d(t,e,i),r=t.id+"(";return i&&s.push(i),r+s.join(", ")+")"}function h(t,e,i){const s=d(t,e,i),r=t.id+"(";return i&&s.unshift(i),r+s.join(", ")+")"}function u(t,e,i,s){var r,n;if(e.params.length<2)throw`Cannot render a function with params of length [${e.params.length}]`;let a=null!==(r=(null!==(n=t.params)&&void 0!==n?n:[])[0])&&void 0!==r?r:"5m";const o=d(Object.assign({},t,{params:t.params.slice(1)}),Object.assign({},e,{params:e.params.slice(1),defaultParams:e.defaultParams.slice(1)}),i),l=t.id+"(";return i&&(s?o.push(`${i}[${a}]`):o.unshift(`${i}[${a}]`)),l+o.join(", ")+")"}function c(t,e,i){return u(t,e,i,!1)}function f(t,e,i){return u(t,e,i,!0)}function d(t,e,i){var s;return(null!==(s=t.params)&&void 0!==s?s:[]).map(((t,i)=>"string"===e.params[i].type?'"'+t+'"':t))}function p(t,e){const i={id:t.id,params:t.defaultParams};return Object.assign({},e,{operations:[...e.operations,i]})}function g(t){return(0,s.capitalize)(t.replace(/_/g," "))}function m(t,e){return`operations.${t}.param.${e}`}function O(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return t&&e.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),e}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[Object.assign({id:t,name:g(t),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:o.C.Aggregations,renderer:l,paramChangedHandler:P(`__${t}_by`),explainHandler:$(t,""),addOperationHandler:p},e),Object.assign({id:`__${t}_by`,name:`${g(t)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:a.g}],defaultParams:[""],alternativesKey:"aggregations by",category:o.C.Aggregations,renderer:x(t),paramChangedHandler:_(t),explainHandler:$(t,"by"),addOperationHandler:p,hideFromList:!0},e),Object.assign({id:`__${t}_without`,name:`${g(t)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:a.g}],defaultParams:[""],alternativesKey:"aggregations by",category:o.C.Aggregations,renderer:v(t),paramChangedHandler:_(t),explainHandler:$(t,"without"),addOperationHandler:p,hideFromList:!0},e)];return i}function b(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=y(t,i);return s[0].params.unshift(...e.params),s[1].params.unshift(...e.params),s[2].params.unshift(...e.params),s[0].defaultParams=e.defaultParams,s[1].defaultParams=[...e.defaultParams,""],s[2].defaultParams=[...e.defaultParams,""],s[1].renderer=k(t),s[2].renderer=k(t),s}function x(t){return function(e,i,s){return`${t} by(${e.params.join(", ")}) (${s})`}}function v(t){return function(e,i,s){return`${t} without(${e.params.join(", ")}) (${s})`}}function $(t,e){return function(i){const s=i.params.map((t=>`\`${t}\``)).join(" and "),r=n()("label",i.params.length);switch(e){case"by":return`Calculates ${t} over dimensions while preserving ${r} ${s}.`;case"without":return`Calculates ${t} over the dimensions ${s}. All other labels are preserved.`;default:return`Calculates ${t} over the dimensions.`}}}function k(t){return function(e,i,s){const r=i.params.findIndex((t=>t.restParam)),n=e.params.slice(0,r),a=e.params.slice(r);return`${t} by(${a.join(", ")}) (${n.map(((t,e)=>"string"===i.params[e].type?`"${t}"`:t)).join(", ")}, ${s})`}}function _(t){return function(e,i,s){return i.params.length<s.params.length?Object.assign({},i,{id:t}):i}}function P(t){return function(e,i,s){return i.params.length===s.params.length?Object.assign({},i,{id:t}):i}}},38826:(t,e,i)=>{"use strict";i.d(e,{Es:()=>c,KF:()=>u,Tt:()=>h,Vl:()=>d,_A:()=>s,bU:()=>o,ff:()=>f,ge:()=>r,wf:()=>n});const s=0;function r(t){return t.firstChild?r(t.firstChild):t}function n(t,e){var i;return{text:u(t,e),from:e.from,to:e.to,parentType:null===(i=e.parent)||void 0===i?void 0:i.name}}const a=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(t){return t.replace(a,((t,e,i,s,r,n,a)=>{const o=s||a;let l=e,h="0";return i&&(l=i,h="1"),r&&(l=r,h="2"),`__V_${h}__`+l+"__V__"+(o?"__F__"+o+"__F__":"")}))}const l=[(t,e)=>`$${t}`,(t,e)=>`[[${t}${e?`:${e}`:""}]]`,(t,e)=>`\${${t}${e?`:${e}`:""}}`];function h(t){return t.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,((t,e,i,s)=>l[parseInt(e,10)](i,s)))}function u(t,e){return e?h(t.substring(e.from,e.to)):""}function c(t,e,i,s){const r=[parseFloat(u(e,i))];return t.comparison&&r.push(s),{id:t.id,params:r}}function f(t,e,i){if(e.type.id===i||e.name===i)return[u(t,e)];const s=[];let r=0,n=e.childAfter(r);for(;n;)s.push(...f(t,n,i)),r=n.to,n=e.childAfter(r);return s}const d=t=>t.split(" ").map((t=>`${t}.*`)).join("")},16280:(t,e,i)=>{"use strict";let s,r;i.d(e,{C:()=>s,G:()=>r}),function(t){t.Aggregations="Aggregations",t.RangeFunctions="Range functions",t.Functions="Functions",t.BinaryOps="Binary operations",t.Trigonometric="Trigonometric",t.Time="Time Functions"}(s||(s={})),function(t){t.Abs="abs",t.Absent="absent",t.AbsentOverTime="absent_over_time",t.Acos="acos",t.Acosh="acosh",t.Asin="asin",t.Asinh="asinh",t.Atan="atan",t.Atanh="atanh",t.Avg="avg",t.AvgOverTime="avg_over_time",t.BottomK="bottomk",t.Ceil="ceil",t.Changes="changes",t.Clamp="clamp",t.ClampMax="clamp_max",t.ClampMin="clamp_min",t.Cos="cos",t.Cosh="cosh",t.Count="count",t.CountOverTime="count_over_time",t.CountScalar="count_scalar",t.CountValues="count_values",t.DayOfMonth="day_of_month",t.DayOfWeek="day_of_week",t.DaysInMonth="days_in_month",t.Deg="deg",t.Delta="delta",t.Deriv="deriv",t.DropCommonLabels="drop_common_labels",t.Exp="exp",t.Floor="floor",t.Group="group",t.HistogramQuantile="histogram_quantile",t.HoltWinters="holt_winters",t.Hour="hour",t.Idelta="idelta",t.Increase="increase",t.Irate="irate",t.LabelJoin="label_join",t.LabelReplace="label_replace",t.Last="last",t.LastOverTime="last_over_time",t.Ln="ln",t.Log10="log10",t.Log2="log2",t.Max="max",t.MaxOverTime="max_over_time",t.Min="min",t.MinOverTime="min_over_time",t.Minute="minute",t.Month="month",t.Pi="pi",t.PredictLinear="predict_linear",t.Present="present",t.PresentOverTime="present_over_time",t.Quantile="quantile",t.QuantileOverTime="quantile_over_time",t.Rad="rad",t.Rate="rate",t.Resets="resets",t.Round="round",t.Scalar="scalar",t.Sgn="sgn",t.Sin="sin",t.Sinh="sinh",t.Sort="sort",t.SortDesc="sort_desc",t.Sqrt="sqrt",t.Stddev="stddev",t.StddevOverTime="stddev_over_time",t.Sum="sum",t.SumOverTime="sum_over_time",t.Tan="tan",t.Tanh="tanh",t.Time="time",t.Timestamp="timestamp",t.TopK="topk",t.Vector="vector",t.Year="year",t.Addition="__addition",t.Subtraction="__subtraction",t.MultiplyBy="__multiply_by",t.DivideBy="__divide_by",t.Modulo="__modulo",t.Exponent="__exponent",t.NestedQuery="__nested_query",t.EqualTo="__equal_to",t.NotEqualTo="__not_equal_to",t.GreaterThan="__greater_than",t.LessThan="__less_than",t.GreaterOrEqual="__greater_or_equal",t.LessOrEqual="__less_or_equal"}(r||(r={}))},20707:t=>{const e="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i="function"==typeof AbortController?AbortController:class{constructor(){this.signal=new n}abort(){this.signal.dispatchEvent("abort")}},s="function"==typeof AbortSignal,r="function"==typeof i.AbortSignal,n=s?AbortSignal:r?i.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(t){if("abort"===t){this.aborted=!0;const e={type:t,target:this};this.onabort(e),this._listeners.forEach((t=>t(e)),this)}}onabort(){}addEventListener(t,e){"abort"===t&&this._listeners.push(e)}removeEventListener(t,e){"abort"===t&&(this._listeners=this._listeners.filter((t=>t!==e)))}},a=new Set,o=(t,e)=>{const i=`LRU_CACHE_OPTION_${t}`;u(i)&&c(i,`${t} option`,`options.${e}`,m)},l=(t,e)=>{const i=`LRU_CACHE_METHOD_${t}`;if(u(i)){const{prototype:s}=m,{get:r}=Object.getOwnPropertyDescriptor(s,t);c(i,`${t} method`,`cache.${e}()`,r)}},h=(...t)=>{"object"==typeof process&&process&&"function"==typeof process.emitWarning?process.emitWarning(...t):console.error(...t)},u=t=>!a.has(t),c=(t,e,i,s)=>{a.add(t);h(`The ${e} is deprecated. Please use ${i} instead.`,"DeprecationWarning",t,s)},f=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),d=t=>f(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?p:null:null;class p extends Array{constructor(t){super(t),this.fill(0)}}class g{constructor(t){if(0===t)return[];const e=d(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class m{constructor(t={}){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:r,updateAgeOnGet:n,updateAgeOnHas:l,allowStale:c,dispose:p,disposeAfter:O,noDisposeOnSet:y,noUpdateTTL:b,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:$,fetchMethod:k,fetchContext:_,noDeleteOnFetchRejection:P,noDeleteOnStaleGet:w}=t,{length:S,maxAge:Q,stale:T}=t instanceof m?{}:t;if(0!==e&&!f(e))throw new TypeError("max option must be a nonnegative integer");const C=e?d(e):Array;if(!C)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=x,this.maxEntrySize=v||this.maxSize,this.sizeCalculation=$||S,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=k||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=_,!this.fetchMethod&&void 0!==_)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new C(e),this.prev=new C(e),this.head=0,this.tail=0,this.free=new g(e),this.initialFill=1,this.size=0,"function"==typeof p&&(this.dispose=p),"function"==typeof O?(this.disposeAfter=O,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!y,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!P,0!==this.maxEntrySize){if(0!==this.maxSize&&!f(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!f(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!T,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!l,this.ttlResolution=f(s)||0===s?s:1,this.ttlAutopurge=!!r,this.ttl=i||Q||0,this.ttl){if(!f(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const t="LRU_CACHE_UNBOUNDED";if(u(t)){a.add(t);h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,m)}}T&&o("stale","allowStale"),Q&&o("maxAge","ttl"),S&&o("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new p(this.max),this.starts=new p(this.max),this.setItemTTL=(t,i,s=e.now())=>{if(this.starts[t]=0!==i?s:0,this.ttls[t]=i,0!==i&&this.ttlAutopurge){const e=setTimeout((()=>{this.isStale(t)&&this.delete(this.keyList[t])}),i+1);e.unref&&e.unref()}},this.updateItemAge=t=>{this.starts[t]=0!==this.ttls[t]?e.now():0};let t=0;const i=()=>{const i=e.now();if(this.ttlResolution>0){t=i;const e=setTimeout((()=>t=0),this.ttlResolution);e.unref&&e.unref()}return i};this.getRemainingTTL=e=>{const s=this.keyMap.get(e);return void 0===s?0:0===this.ttls[s]||0===this.starts[s]?1/0:this.starts[s]+this.ttls[s]-(t||i())},this.isStale=e=>0!==this.ttls[e]&&0!==this.starts[e]&&(t||i())-this.starts[e]>this.ttls[e]}updateItemAge(t){}setItemTTL(t,e,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new p(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,i,s)=>{if(!f(i)){if(!s)throw new TypeError("invalid size value (must be positive integer)");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(i=s(e,t),!f(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.addItemSize=(t,e)=>{this.sizes[t]=e;const i=this.maxSize-this.sizes[t];for(;this.calculatedSize>i;)this.evict(!0);this.calculatedSize+=this.sizes[t]}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,s){if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.head);)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.tail);)e=this.next[e]}isValidIndex(t){return this.keyMap.get(this.keyList[t])===t}*entries(){for(const t of this.indexes())yield[this.keyList[t],this.valList[t]]}*rentries(){for(const t of this.rindexes())yield[this.keyList[t],this.valList[t]]}*keys(){for(const t of this.indexes())yield this.keyList[t]}*rkeys(){for(const t of this.rindexes())yield this.keyList[t]}*values(){for(const t of this.indexes())yield this.valList[t]}*rvalues(){for(const t of this.rindexes())yield this.valList[t]}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const i of this.indexes())if(t(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],e)}forEach(t,e=this){for(const i of this.indexes())t.call(e,this.valList[i],this.keyList[i],this)}rforEach(t,e=this){for(const i of this.rindexes())t.call(e,this.valList[i],this.keyList[i],this)}get prune(){return l("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(const e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){const t=[];for(const i of this.indexes({allowStale:!0})){const s=this.keyList[i],r=this.valList[i],n={value:this.isBackgroundFetch(r)?r.__staleWhileFetching:r};if(this.ttls){n.ttl=this.ttls[i];const t=e.now()-this.starts[i];n.start=Math.floor(Date.now()-t)}this.sizes&&(n.size=this.sizes[i]),t.unshift([s,n])}return t}load(t){this.clear();for(const[i,s]of t){if(s.start){const t=Date.now()-s.start;s.start=e.now()-t}this.set(i,s.value,s)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:s,noDisposeOnSet:r=this.noDisposeOnSet,size:n=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:o=this.noUpdateTTL}={}){if(n=this.requireSize(t,e,n,a),this.maxEntrySize&&n>this.maxEntrySize)return this;let l=0===this.size?void 0:this.keyMap.get(t);if(void 0===l)l=this.newIndex(),this.keyList[l]=t,this.valList[l]=e,this.keyMap.set(t,l),this.next[this.tail]=l,this.prev[l]=this.tail,this.tail=l,this.size++,this.addItemSize(l,n),o=!1;else{const i=this.valList[l];e!==i&&(this.isBackgroundFetch(i)?i.__abortController.abort():r||(this.dispose(i,t,"set"),this.disposeAfter&&this.disposed.push([i,t,"set"])),this.removeItemSize(l),this.valList[l]=e,this.addItemSize(l,n)),this.moveToTail(l)}if(0===i||0!==this.ttl||this.ttls||this.initializeTTLTracking(),o||this.setItemTTL(l,i,s),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const t=this.valList[this.head];return this.evict(!0),t}}evict(t){const e=this.head,i=this.keyList[e],s=this.valList[e];return this.isBackgroundFetch(s)?s.__abortController.abort():(this.dispose(s,i,"evict"),this.disposeAfter&&this.disposed.push([s,i,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(i),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas}={}){const i=this.keyMap.get(t);return void 0!==i&&!this.isStale(i)&&(e&&this.updateItemAge(i),!0)}peek(t,{allowStale:e=this.allowStale}={}){const i=this.keyMap.get(t);if(void 0!==i&&(e||!this.isStale(i))){const t=this.valList[i];return this.isBackgroundFetch(t)?t.__staleWhileFetching:t}}backgroundFetch(t,e,s,r){const n=void 0===e?void 0:this.valList[e];if(this.isBackgroundFetch(n))return n;const a=new i,o={signal:a.signal,options:s,context:r},l=new Promise((e=>e(this.fetchMethod(t,n,o)))).then((e=>(a.signal.aborted||this.set(t,e,o.options),e)),(i=>{if(this.valList[e]===l){!s.noDeleteOnFetchRejection||void 0===l.__staleWhileFetching?this.delete(t):this.valList[e]=l.__staleWhileFetching}if(l.__returned===l)throw i}));return l.__abortController=a,l.__staleWhileFetching=n,l.__returned=null,void 0===e?(this.set(t,l,o.options),e=this.keyMap.get(t)):this.valList[e]=l,l}isBackgroundFetch(t){return t&&"object"==typeof t&&"function"==typeof t.then&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||null===t.__returned)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:n=this.noDisposeOnSet,size:a=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,fetchContext:u=this.fetchContext,forceRefresh:c=!1}={}){if(!this.fetchMethod)return this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s});const f={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:r,noDisposeOnSet:n,size:a,sizeCalculation:o,noUpdateTTL:l,noDeleteOnFetchRejection:h};let d=this.keyMap.get(t);if(void 0===d){const e=this.backgroundFetch(t,d,f,u);return e.__returned=e}{const s=this.valList[d];if(this.isBackgroundFetch(s))return e&&void 0!==s.__staleWhileFetching?s.__staleWhileFetching:s.__returned=s;if(!c&&!this.isStale(d))return this.moveToTail(d),i&&this.updateItemAge(d),s;const r=this.backgroundFetch(t,d,f,u);return e&&void 0!==r.__staleWhileFetching?r.__staleWhileFetching:r.__returned=r}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet}={}){const r=this.keyMap.get(t);if(void 0!==r){const n=this.valList[r],a=this.isBackgroundFetch(n);if(this.isStale(r))return a?e?n.__staleWhileFetching:void 0:(s||this.delete(t),e?n:void 0);if(a)return;return this.moveToTail(r),i&&this.updateItemAge(r),n}}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return l("del","delete"),this.delete}delete(t){let e=!1;if(0!==this.size){const i=this.keyMap.get(t);if(void 0!==i)if(e=!0,1===this.size)this.clear();else{this.removeItemSize(i);const e=this.valList[i];this.isBackgroundFetch(e)?e.__abortController.abort():(this.dispose(e,t,"delete"),this.disposeAfter&&this.disposed.push([e,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(const t of this.rindexes({allowStale:!0})){const e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort();else{const i=this.keyList[t];this.dispose(e,i,"delete"),this.disposeAfter&&this.disposed.push([e,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return l("reset","clear"),this.clear}get length(){return((t,e)=>{const i=`LRU_CACHE_PROPERTY_${t}`;if(u(i)){const{prototype:s}=m,{get:r}=Object.getOwnPropertyDescriptor(s,t);c(i,`${t} property`,`cache.${e}`,r)}})("length","size"),this.size}static get AbortController(){return i}static get AbortSignal(){return n}}t.exports=m},74899:(t,e,i)=>{"use strict";i.d(e,{aZ:()=>L,Ip:()=>D,Ki:()=>q,v3:()=>W,vU:()=>B,f0:()=>ht,M5:()=>lt,wi:()=>R,lX:()=>Y,mW:()=>j,yY:()=>F,hT:()=>Z,Tm:()=>I,pQ:()=>G,XT:()=>M,xb:()=>K,z5:()=>nt,Zm:()=>at,m$:()=>rt,m0:()=>N,e8:()=>ot,uM:()=>H,tz:()=>st,IJ:()=>U,JW:()=>ut,iy:()=>J,On:()=>A,Wc:()=>V,Om:()=>tt,vD:()=>z,nv:()=>et,m6:()=>it,yN:()=>E,E2:()=>X});var s=i(26048),r=i(46433);let n=0;class a{constructor(t,e,i){this.set=t,this.base=e,this.modified=i,this.id=n++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new a([],null,[]);if(e.set.push(e),t)for(let i of t.set)e.set.push(i);return e}static defineModifier(){let t=new l;return e=>e.modified.indexOf(t)>-1?e:l.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let o=0;class l{constructor(){this.instances=[],this.id=o++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find((i=>{return i.base==t&&(s=e,r=i.modified,s.length==r.length&&s.every(((t,e)=>t==r[e])));var s,r}));if(i)return i;let s=[],r=new a(s,t,e);for(let t of e)t.instances.push(r);let n=function(t){let e=[[]];for(let i=0;i<t.length;i++)for(let s=0,r=e.length;s<r;s++)e.push(e[s].concat(t[i]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of n)s.push(l.get(e,t));return r}}const h=new r.md;class u{constructor(t,e,i,s){this.tags=t,this.mode=e,this.context=i,this.next=s}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}u.empty=new u([],2,null);const c=a.define,f=c(),d=c(),p=c(d),g=c(d),m=c(),O=c(m),y=c(m),b=c(),x=c(b),v=c(),$=c(),k=c(),_=c(k),P=c(),w={comment:f,lineComment:c(f),blockComment:c(f),docComment:c(f),name:d,variableName:c(d),typeName:p,tagName:c(p),propertyName:g,attributeName:c(g),className:c(d),labelName:c(d),namespace:c(d),macroName:c(d),literal:m,string:O,docString:c(O),character:c(O),attributeValue:c(O),number:y,integer:c(y),float:c(y),bool:c(m),regexp:c(m),escape:c(m),color:c(m),url:c(m),keyword:v,self:c(v),null:c(v),atom:c(v),unit:c(v),modifier:c(v),operatorKeyword:c(v),controlKeyword:c(v),definitionKeyword:c(v),moduleKeyword:c(v),operator:$,derefOperator:c($),arithmeticOperator:c($),logicOperator:c($),bitwiseOperator:c($),compareOperator:c($),updateOperator:c($),definitionOperator:c($),typeOperator:c($),controlOperator:c($),punctuation:k,separator:c(k),bracket:_,angleBracket:c(_),squareBracket:c(_),paren:c(_),brace:c(_),content:b,heading:x,heading1:c(x),heading2:c(x),heading3:c(x),heading4:c(x),heading5:c(x),heading6:c(x),contentSeparator:c(b),list:c(b),quote:c(b),emphasis:c(b),strong:c(b),link:c(b),monospace:c(b),strikethrough:c(b),inserted:c(),deleted:c(),changed:c(),invalid:c(),meta:P,documentMeta:c(P),annotation:c(P),processingInstruction:c(P),definition:a.defineModifier(),constant:a.defineModifier(),function:a.defineModifier(),standard:a.defineModifier(),local:a.defineModifier(),special:a.defineModifier()},S=(function(t,e){let i=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)i[t.id]=e.class;else i[e.tag.id]=e.class;let{scope:s,all:r=null}=e||{}}([{tag:w.link,class:"tok-link"},{tag:w.heading,class:"tok-heading"},{tag:w.emphasis,class:"tok-emphasis"},{tag:w.strong,class:"tok-strong"},{tag:w.keyword,class:"tok-keyword"},{tag:w.atom,class:"tok-atom"},{tag:w.bool,class:"tok-bool"},{tag:w.url,class:"tok-url"},{tag:w.labelName,class:"tok-labelName"},{tag:w.inserted,class:"tok-inserted"},{tag:w.deleted,class:"tok-deleted"},{tag:w.literal,class:"tok-literal"},{tag:w.string,class:"tok-string"},{tag:w.number,class:"tok-number"},{tag:[w.regexp,w.escape,w.special(w.string)],class:"tok-string2"},{tag:w.variableName,class:"tok-variableName"},{tag:w.local(w.variableName),class:"tok-variableName tok-local"},{tag:w.definition(w.variableName),class:"tok-variableName tok-definition"},{tag:w.special(w.variableName),class:"tok-variableName2"},{tag:w.definition(w.propertyName),class:"tok-propertyName tok-definition"},{tag:w.typeName,class:"tok-typeName"},{tag:w.namespace,class:"tok-namespace"},{tag:w.className,class:"tok-className"},{tag:w.macroName,class:"tok-macroName"},{tag:w.propertyName,class:"tok-propertyName"},{tag:w.operator,class:"tok-operator"},{tag:w.comment,class:"tok-comment"},{tag:w.meta,class:"tok-meta"},{tag:w.invalid,class:"tok-invalid"},{tag:w.punctuation,class:"tok-punctuation"}]),{inf:147,nan:148,bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6}),Q={avg:8,atan2:7,bottomk:9,count:10,count_values:11,group:12,max:13,min:14,quantile:15,stddev:16,stdvar:17,sum:18,topk:19,by:20,without:21,and:22,or:23,unless:24,start:25,end:26},T=function(t){let e=Object.create(null);for(let i in t){let s=t[i];Array.isArray(s)||(s=[s]);for(let t of i.split(" "))if(t){let i=[],r=2,n=t;for(let e=0;;){if("..."==n&&e>0&&e+3==t.length){r=1;break}let s=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(n);if(!s)throw new RangeError("Invalid path: "+t);if(i.push("*"==s[0]?"":'"'==s[0][0]?JSON.parse(s[0]):s[0]),e+=s[0].length,e==t.length)break;let a=t[e++];if(e==t.length&&"!"==a){r=0;break}if("/"!=a)throw new RangeError("Invalid path: "+t);n=t.slice(e)}let a=i.length-1,o=i[a];if(!o)throw new RangeError("Invalid path: "+t);let l=new u(s,r,a>0?i.slice(0,a):null);e[o]=l.sort(e[o])}}return h.add(e)}({LineComment:w.comment,LabelName:w.labelName,StringLiteral:w.string,NumberLiteral:w.number,Duration:w.number,"Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year":w.function(w.variableName),"Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk":w.operatorKeyword,"By Without Bool On Ignoring GroupLeft GroupRight Offset Start End":w.modifier,"And Unless Or":w.logicOperator,"Sub Add Mul Mod Div Atan2 Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At":w.operator,UnaryOp:w.arithmeticOperator,"( )":w.paren,"[ ]":w.squareBracket,"{ }":w.brace,"":w.invalid}),C={__proto__:null,absent_over_time:309,absent:311,abs:313,acos:315,acosh:317,asin:319,asinh:321,atan:323,atanh:325,avg_over_time:327,ceil:329,changes:331,clamp:333,clamp_max:335,clamp_min:337,cos:339,cosh:341,count_over_time:343,days_in_month:345,day_of_month:347,day_of_week:349,day_of_year:351,deg:353,delta:355,deriv:357,exp:359,floor:361,histogram_quantile:363,holt_winters:365,hour:367,idelta:369,increase:371,irate:373,label_replace:375,label_join:377,last_over_time:379,ln:381,log10:383,log2:385,max_over_time:387,min_over_time:389,minute:391,month:393,pi:395,predict_linear:397,present_over_time:399,quantile_over_time:401,rad:403,rate:405,resets:407,round:409,scalar:411,sgn:413,sin:415,sinh:417,sort:419,sort_desc:421,sqrt:423,stddev_over_time:425,stdvar_over_time:427,sum_over_time:429,tan:431,tanh:433,timestamp:435,time:437,vector:439,year:441},X=s.WQ.deserialize({version:14,states:"6bOYQPOOO'OQPOOOOQO'#C{'#C{O'TQPO'#CzQ'`QQOOOOQO'#De'#DeO'ZQPO'#DdOOQO'#FO'#FOO(mQPO'#FUOYQPO'#FQOYQPO'#FTOOQO'#FW'#FWO.lQSO'#FXO.tQQO'#FVOOQO'#FV'#FVOOQO'#Cy'#CyOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{QOQPOOO0_QPO'#C|O0dQPO'#DRO'ZQPO,59fO0kQQO,59fO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO8WQQO,5;hO8]QQO,5;kO8eQPO,5;zOOQO,5:O,5:OOOQO,5;j,5;jO8|QQO,5;lO9TQQO,5;oO:kQPO'#FZO:yQPO,5;sOOQO'#FY'#FYOOQO,5;s,5;sOOQO,5;q,5;qO;RQSO'#C}OOQO,59h,59hO;ZQPO,59mO;cQQO'#DSOOQO,59m,59mOOQO1G/Q1G/QO0_QPO'#DWOAcQPO'#DVOAmQPO'#DVOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOAwQSO1G1SOOQO1G1V1G1VOBPQQO1G1VOBUQPO'#FOOOQO'#Fb'#FbOOQO1G1f1G1fOBaQPO1G1fOOQO1G1W1G1WOOQO'#F['#F[OBfQPO,5;uOBkQSO1G1_OOQO1G1_1G1_OOQO'#DP'#DPOBsQPO,59iOOQO'#DO'#DOOOQO,59i,59iOYQPO,59nOOQO1G/X1G/XOOQO,59r,59rOHnQPO,59qOHuQPO,59qOJ^QQO7+$uOJnQQO7+$uOLSQQO7+$uOLjQQO7+$uONRQQO7+$uOOQO7+&n7+&nONlQQO7+&tOOQO7+&q7+&qONtQPO7+'QOOQO1G1a1G1aOOQO1G1`1G1`OOQO7+&y7+&yONyQSO1G/TOOQO1G/T1G/TO! RQQO1G/YOOQO1G/]1G/]O! ]QPO1G/]OOQO<<J`<<J`O!'RQPO<<J`OOQO<<Jl<<JlOOQO1G/U1G/UOOQO7+$o7+$oOOQO7+$w7+$wOOQOAN?zAN?z",stateData:"!'W~O$[OSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!ZZO#u_O$XVO$YVO$]XO$``O$aaO$bbO$ccO$ddO$eeO$ffO$ggO$hhO$iiO$jjO$kkO$llO$mmO$nnO$ooO$ppO$qqO$rrO$ssO$ttO$uuO$vvO$wwO$xxO$yyO$zzO${{O$||O$}}O%O!OO%P!PO%Q!QO%R!RO%S!SO%T!TO%U!UO%V!VO%W!WO%X!XO%Y!YO%Z!ZO%[![O%]!]O%^!^O%_!_O%`!`O%a!aO%b!bO%c!cO%d!dO%e!eO%f!fO%g!gO%h!hO%i!iO%j!jO%k!kO%l!lO%m!mO%n!nO%o!oO%p!pO%q!qO%r!rO%s!sO%t!tO%wWO%xWO%yVO%{[O~O!ZZO~Od!vOe!vO$]!wO~OU#QOV!zOf!}Og#OOh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O$T#RO%u#PO~O$X#TO$Y#TO%y#TOW#xXX#xXY#xXZ#xX[#xX]#xX^#xX_#xX`#xXa#xXb#xXc#xX!Z#xX#u#xX$X#xX$Y#xX$]#xX$`#xX$a#xX$b#xX$c#xX$d#xX$e#xX$f#xX$g#xX$h#xX$i#xX$j#xX$k#xX$l#xX$m#xX$n#xX$o#xX$p#xX$q#xX$r#xX$s#xX$t#xX$u#xX$v#xX$w#xX$x#xX$y#xX$z#xX${#xX$|#xX$}#xX%O#xX%P#xX%Q#xX%R#xX%S#xX%T#xX%U#xX%V#xX%W#xX%X#xX%Y#xX%Z#xX%[#xX%]#xX%^#xX%_#xX%`#xX%a#xX%b#xX%c#xX%d#xX%e#xX%f#xX%g#xX%h#xX%i#xX%j#xX%k#xX%l#xX%m#xX%n#xX%o#xX%p#xX%q#xX%r#xX%s#xX%t#xX%w#xX%x#xX%y#xX%{#xX~Ot#WO%|#ZO~O%{[OU#yXV#yXf#yXg#yXh#yXx#yX{#yX|#yX}#yX!O#yX!P#yX!Q#yX!R#yX!S#yX!T#yX!U#yX!V#yX$T#yX$W#yX%u#yX$_#yX$^#yX~O$]#]O~O$_#aO~PYOd!vOe!vOUnaVnafnagnahnaxna{na|na}na!Ona!Pna!Qna!Rna!Sna!Tna!Una!Vna$Tna$Wna%una$_na$^na~OP#eOQ#cOR#cOWyPXyPYyPZyP[yP]yP^yP_yP`yPayPbyPcyP!ZyP#uyP$XyP$YyP$]yP$`yP$ayP$byP$cyP$dyP$eyP$fyP$gyP$hyP$iyP$jyP$kyP$lyP$myP$nyP$oyP$pyP$qyP$ryP$syP$tyP$uyP$vyP$wyP$xyP$yyP$zyP${yP$|yP$}yP%OyP%PyP%QyP%RyP%SyP%TyP%UyP%VyP%WyP%XyP%YyP%ZyP%[yP%]yP%^yP%_yP%`yP%ayP%byP%cyP%dyP%eyP%fyP%gyP%hyP%iyP%jyP%kyP%lyP%myP%nyP%oyP%pyP%qyP%ryP%syP%tyP%wyP%xyP%yyP%{yP~O#q#kO~O!P#mO#q#lO~Oi#oOj#oO$XVO$YVO%w#nO%x#nO%yVO~O$_#rO~P'`Ox!zOU#waV#waf#wag#wah#wa{#wa|#wa}#wa!O#wa!P#wa!Q#wa!R#wa!S#wa!T#wa!U#wa!V#wa$T#wa$W#wa%u#wa$_#wa$^#wa~O!V#sO$P#sO$Q#sO$R#sO~O$^#uO%|#vO~Ot#wO$_#zO~O$^#{O$_#|O~O$^vX$_vX~P'`OWyXXyXYyXZyX[yX]yX^yX_yX`yXayXbyXcyX!ZyX#uyX$XyX$YyX$]yX$`yX$ayX$byX$cyX$dyX$eyX$fyX$gyX$hyX$iyX$jyX$kyX$lyX$myX$nyX$oyX$pyX$qyX$ryX$syX$tyX$uyX$vyX$wyX$xyX$yyX$zyX${yX$|yX$}yX%OyX%PyX%QyX%RyX%SyX%TyX%UyX%VyX%WyX%XyX%YyX%ZyX%[yX%]yX%^yX%_yX%`yX%ayX%byX%cyX%dyX%eyX%fyX%gyX%hyX%iyX%jyX%kyX%lyX%myX%nyX%oyX%pyX%qyX%ryX%syX%tyX%wyX%xyX%yyX%{yX~OS$OOT$OO~P;mOQ#cOR#cO~P;mO%v$VO%z$WO~O#q$XO~O$X#TO$Y#TO%y#TO~O$]$YO~O#u$ZO~Ot#WO%|$]O~O$^$^O$_$_O~OWyaXyaYyaZya[ya]ya^ya_ya`yaayabyacya!Zya#uya$Xya$Yya$`ya$aya$bya$cya$dya$eya$fya$gya$hya$iya$jya$kya$lya$mya$nya$oya$pya$qya$rya$sya$tya$uya$vya$wya$xya$yya$zya${ya$|ya$}ya%Oya%Pya%Qya%Rya%Sya%Tya%Uya%Vya%Wya%Xya%Yya%Zya%[ya%]ya%^ya%_ya%`ya%aya%bya%cya%dya%eya%fya%gya%hya%iya%jya%kya%lya%mya%nya%oya%pya%qya%rya%sya%tya%wya%xya%yya%{ya~O$]#]O~PB{OS$bOT$bO$]ya~PB{Ox!zOUwqfwqgwqhwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq$Twq$Wwq%uwq$_wq$^wq~OVwq{wq|wq}wq~PISOV!zO{!zO|!zO}!zO~PISOV!zOx!zO{!zO|!zO}!zO!O!{O!P!{OUwqfwqgwqhwq$Twq$Wwq%uwq$_wq$^wq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~PKOO!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~PKOOV!zOf!}Oh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~OUwqgwq$Twq$Wwq%uwq$_wq$^wq~PMQO#q$dO%v$cO~O$_$eO~Ot#wO$_$gO~O$^vi$_vi~P'`O$]#]OWyiXyiYyiZyi[yi]yi^yi_yi`yiayibyicyi!Zyi#uyi$Xyi$Yyi$`yi$ayi$byi$cyi$dyi$eyi$fyi$gyi$hyi$iyi$jyi$kyi$lyi$myi$nyi$oyi$pyi$qyi$ryi$syi$tyi$uyi$vyi$wyi$xyi$yyi$zyi${yi$|yi$}yi%Oyi%Pyi%Qyi%Ryi%Syi%Tyi%Uyi%Vyi%Wyi%Xyi%Yyi%Zyi%[yi%]yi%^yi%_yi%`yi%ayi%byi%cyi%dyi%eyi%fyi%gyi%hyi%iyi%jyi%kyi%lyi%myi%nyi%oyi%pyi%qyi%ryi%syi%tyi%wyi%xyi%yyi%{yi~O%v$iO~O",goto:"(v$VPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$W$v%S%`%f%r%uP%{&U$vP&X&hPPPPPPPPPPP$v&r'OP'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O$vP'[$v$vP$v$v'k$v'w(W(g(j(pPPP$vP(sQSOQ#UXQ#VYQ#`!wQ$Q#fQ$R#gQ$S#hQ$T#iQ$U#jR$`#{e_OXY!w#f#g#h#i#j#{eROXY!w#f#g#h#i#j#{Q!xRR#b!yQ#^!vQ#}#cQ$a$OR$h$bR#x#]Q#y#]R$f$^Q!yRQ#SUR#b!xR#_!wQ#f!zQ#g!{Q#h!|Q#i!}R#j#OY#d!z!{!|!}#OR$P#eeUOXY!w#f#g#h#i#j#{eTOXY!w#f#g#h#i#j#{d_OXY!w#f#g#h#i#j#{R#p#ReYOXY!w#f#g#h#i#j#{d]OXY!w#f#g#h#i#j#{R!uPd^OXY!w#f#g#h#i#j#{R#[]R#X[Q#Y[R$[#uR#t#WR#q#R",nodeNames:" Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:228,propSources:[T],skippedNodes:[0,27],repeatNodeCount:0,tokenData:"1R~RwX^#lpq#lqr$ars$tst%huv%swx%xxy&gyz&lz{&q{|&v|}&}}!O'S!O!P'Z!P!Q(Z!Q!R(`!R![)W![!]-r!^!_.n!_!`.{!`!a/b!b!c/o!c!}/t!}#O0[#P#Q0a#Q#R0f#R#S/t#S#T0k#T#o/t#o#p0w#q#r0|#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$[~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!V~~$tO$R~~$yU#u~OY$tZr$trs%]s#O$t#O#P%b#P~$t~%bO#u~~%ePO~$t~%mQk~OY%hZ~%h~%xO}~~%}U#u~OY%xZw%xwx%]x#O%x#O#P&a#P~%x~&dPO~%x~&lO$]~~&qO$_~~&vO{~R&}O%xP!OQ~'SO$^~R'ZO%wP!PQP'^P!Q!['aP'fR%yP!Q!['a!g!h'o#X#Y'oP'rR{|'{}!O'{!Q![(RP(OP!Q![(RP(WP%yP!Q![(R~(`O|~R(eZ%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#l#m-W#m#n,iR)]Y%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#m#n,iQ*QP#qQ!Q![*TQ*WS!Q![*T#[#]*d#a#b*x#g#h+lQ*iP#qQ!Q![*lQ*oR!Q![*l#a#b*x#g#h+lQ*}Q#qQ!Q![+T#g#h+gQ+WR!Q![+T#a#b+a#g#h+lQ+dP#g#h+gQ+lO#qQQ+qP#qQ!Q![+tQ+wQ!Q![+t#a#b+aQ,SP#qQ!Q![,VQ,YT!Q![,V#W#X){#[#]*d#a#b*x#g#h+lQ,nP#qQ!Q![,qQ,tU!Q![,q#W#X){#[#]*d#a#b*x#g#h+l#k#l+}P-ZR!Q![-d!c!i-d#T#Z-dP-iR%yP!Q![-d!c!i-d#T#Z-dV-yT%zS!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.YR._T!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.Y~.sP!U~!_!`.v~.{O!T~~/QQ$PP!_!`/W#r#s/]Q/]O!QQ~/bO$Q~~/gP!S~!_!`/j~/oO!R~~/tO$T~V/{T!ZRtS!Q![/t![!].Y!c!}/t#R#S/t#T#o/t~0aO%u~~0fO%v~~0kOx~~0nRO#S0k#S#T%]#T~0k~0|O%{~~1RO%|~",tokenizers:[0,1,2],topRules:{PromQL:[0,28],MetricName:[1,145]},specialized:[{term:57,get:(t,e)=>((t,e)=>S[t.toLowerCase()]||-1)(t)<<1},{term:57,get:(t,e)=>((t,e)=>Q[t.toLowerCase()]||-1)(t)<<1|1},{term:57,get:t=>C[t]||-1}],tokenPrec:0}),A=3,E=21,z=28,R=29,L=30,q=31,D=32,M=33,G=34,I=35,N=36,F=37,j=38,B=39,W=41,V=42,U=53,Y=54,Z=55,K=57,H=124,J=126,tt=128,et=129,it=133,st=134,rt=135,nt=136,at=137,ot=138,lt=139,ht=140,ut=141},46433:(t,e,i)=>{"use strict";i.d(e,{Jq:()=>l,L3:()=>s,Lj:()=>h,_b:()=>T,md:()=>a,mp:()=>d,vj:()=>f});const s=1024;let r=0;class n{constructor(t,e){this.from=t,this.to=e}}class a{constructor(t={}){this.id=r++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=l.match(t)),e=>{let i=t(e);return void 0===i?null:[this,i]}}}a.closedBy=new a({deserialize:t=>t.split(" ")}),a.openedBy=new a({deserialize:t=>t.split(" ")}),a.group=new a({deserialize:t=>t.split(" ")}),a.contextHash=new a({perNode:!0}),a.lookAhead=new a({perNode:!0}),a.mounted=new a({perNode:!0});const o=Object.create(null);class l{constructor(t,e,i,s=0){this.name=t,this.props=e,this.id=i,this.flags=s}static define(t){let e=t.props&&t.props.length?Object.create(null):o,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),s=new l(t.name||"",e,t.id,i);if(t.props)for(let i of t.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[i[0].id]=i[1]}return s}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(a.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let s of i.split(" "))e[s]=t[i];return t=>{for(let i=t.prop(a.group),s=-1;s<(i?i.length:0);s++){let r=e[s<0?t.name:i[s]];if(r)return r}}}}l.none=new l("",Object.create(null),0,8);class h{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let s=null;for(let e of t){let t=e(i);t&&(s||(s=Object.assign({},i.props)),s[t[0].id]=t[1])}e.push(s?new l(i.name,s,i.id,i.flags):i)}return new h(e)}}const u=new WeakMap,c=new WeakMap;var f;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(f||(f={}));class d{constructor(t,e,i,s,r){if(this.type=t,this.children=e,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[t,e]of r)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=this.prop(a.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let i=t.toString();i&&(e&&(e+=","),e+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new _(this.topNode,t)}cursorAt(t,e=0,i=0){let s=u.get(this)||this.topNode,r=new _(s);return r.moveTo(t,e),u.set(this,r._tree),r}get topNode(){return new b(this,0,0,null)}resolve(t,e=0){let i=y(u.get(this)||this.topNode,t,e,!1);return u.set(this,i),i}resolveInner(t,e=0){let i=y(c.get(this)||this.topNode,t,e,!0);return c.set(this,i),i}iterate(t){let{enter:e,leave:i,from:s=0,to:r=this.length}=t;for(let n=this.cursor((t.mode||0)|f.IncludeAnonymous);;){let t=!1;if(n.from<=r&&n.to>=s&&(n.type.isAnonymous||!1!==e(n))){if(n.firstChild())continue;t=!0}for(;t&&i&&!n.type.isAnonymous&&i(n),!n.nextSibling();){if(!n.parent())return;t=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Q(l.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,i)=>new d(this.type,t,e,i,this.propValues)),t.makeTree||((t,e,i)=>new d(l.none,t,e,i)))}static build(t){return function(t){var e;let{buffer:i,nodeSet:r,maxBufferLength:n=s,reused:o=[],minRepeatType:l=r.types.length}=t,h=Array.isArray(i)?new p(i,i.length):i,u=r.types,c=0,f=0;function m(t,e,i,s,a){let{id:d,start:p,end:$,size:k}=h,_=f;for(;k<0;){if(h.next(),-1==k){let e=o[d];return i.push(e),void s.push(p-t)}if(-3==k)return void(c=d);if(-4==k)return void(f=d);throw new RangeError(`Unrecognized record size: ${k}`)}let P,w,S=u[d],T=p-t;if($-p<=n&&(w=x(h.pos-e,a))){let e=new Uint16Array(w.size-w.skip),i=h.pos-w.size,s=e.length;for(;h.pos>i;)s=v(w.start,e,s);P=new g(e,$-w.start,r),T=w.start-t}else{let t=h.pos-k;h.next();let e=[],i=[],s=d>=l?d:-1,r=0,a=$;for(;h.pos>t;)s>=0&&h.id==s&&h.size>=0?(h.end<=a-n&&(y(e,i,p,r,h.end,a,s,_),r=e.length,a=h.end),h.next()):m(p,t,e,i,s);if(s>=0&&r>0&&r<e.length&&y(e,i,p,r,p,a,s,_),e.reverse(),i.reverse(),s>-1&&r>0){let t=O(S);P=Q(S,e,i,0,e.length,0,$-p,t,t)}else P=b(S,e,i,$-p,_-$)}i.push(P),s.push(T)}function O(t){return(e,i,s)=>{let r,n,o=0,l=e.length-1;if(l>=0&&(r=e[l])instanceof d){if(!l&&r.type==t&&r.length==s)return r;(n=r.prop(a.lookAhead))&&(o=i[l]+r.length+n)}return b(t,e,i,s,o)}}function y(t,e,i,s,n,a,o,l){let h=[],u=[];for(;t.length>s;)h.push(t.pop()),u.push(e.pop()+i-n);t.push(b(r.types[o],h,u,a-n,l-a)),e.push(n-i)}function b(t,e,i,s,r=0,n){if(c){let t=[a.contextHash,c];n=n?[t].concat(n):[t]}if(r>25){let t=[a.lookAhead,r];n=n?[t].concat(n):[t]}return new d(t,e,i,s,n)}function x(t,e){let i=h.fork(),s=0,r=0,a=0,o=i.end-n,u={size:0,start:0,skip:0};t:for(let n=i.pos-t;i.pos>n;){let t=i.size;if(i.id==e&&t>=0){u.size=s,u.start=r,u.skip=a,a+=4,s+=4,i.next();continue}let h=i.pos-t;if(t<0||h<n||i.start<o)break;let c=i.id>=l?4:0,f=i.start;for(i.next();i.pos>h;){if(i.size<0){if(-3!=i.size)break t;c+=4}else i.id>=l&&(c+=4);i.next()}r=f,s+=t,a+=c}return(e<0||s==t)&&(u.size=s,u.start=r,u.skip=a),u.size>4?u:void 0}function v(t,e,i){let{id:s,start:r,end:n,size:a}=h;if(h.next(),a>=0&&s<l){let o=i;if(a>4){let s=h.pos-(a-4);for(;h.pos>s;)i=v(t,e,i)}e[--i]=o,e[--i]=n-t,e[--i]=r-t,e[--i]=s}else-3==a?c=s:-4==a&&(f=s);return i}let $=[],k=[];for(;h.pos>0;)m(t.start||0,t.bufferStart||0,$,k,-1);let _=null!==(e=t.length)&&void 0!==e?e:$.length?k[0]+$[0].length:0;return new d(u[t.topID],$.reverse(),k.reverse(),_)}(t)}}d.empty=new d(l.none,[],[],0);class p{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new p(this.buffer,this.index)}}class g{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return l.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],s=this.set.types[e],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),i==(t+=4))return r;let n=[];for(;t<i;)n.push(this.childString(t)),t=this.buffer[t+3];return r+"("+n.join(",")+")"}findChild(t,e,i,s,r){let{buffer:n}=this,a=-1;for(let o=t;o!=e&&!(m(r,s,n[o+1],n[o+2])&&(a=o,i>0));o=n[o+3]);return a}slice(t,e,i,s){let r=this.buffer,n=new Uint16Array(e-t);for(let s=t,a=0;s<e;)n[a++]=r[s++],n[a++]=r[s++]-i,n[a++]=r[s++]-i,n[a++]=r[s++]-t;return new g(n,s-i,this.set)}}function m(t,e,i,s){switch(t){case-2:return i<e;case-1:return s>=e&&i<e;case 0:return i<e&&s>e;case 1:return i<=e&&s>e;case 2:return s>e;case 4:return!0}}function O(t,e){let i=t.childBefore(e);for(;i;){let e=i.lastChild;if(!e||e.to!=i.to)break;e.type.isError&&e.from==e.to?(t=i,i=e.prevSibling):i=e}return t}function y(t,e,i,s){for(var r;t.from==t.to||(i<1?t.from>=e:t.from>e)||(i>-1?t.to<=e:t.to<e);){let e=!s&&t instanceof b&&t.index<0?null:t.parent;if(!e)return t;t=e}let n=s?0:f.IgnoreOverlays;if(s)for(let s=t,a=s.parent;a;s=a,a=s.parent)s instanceof b&&s.index<0&&(null===(r=a.enter(e,i,n))||void 0===r?void 0:r.from)!=s.from&&(t=a);for(;;){let s=t.enter(e,i,n);if(!s)return t;t=s}}class b{constructor(t,e,i,s){this._tree=t,this.from=e,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,s,r=0){for(let n=this;;){for(let{children:o,positions:l}=n._tree,h=e>0?o.length:-1;t!=h;t+=e){let h=o[t],u=l[t]+n.from;if(m(s,i,u,u+h.length))if(h instanceof g){if(r&f.ExcludeBuffers)continue;let a=h.findChild(0,h.buffer.length,e,i-u,s);if(a>-1)return new k(new $(n,h,t,u),null,a)}else if(r&f.IncludeAnonymous||!h.type.isAnonymous||P(h)){let o;if(!(r&f.IgnoreMounts)&&h.props&&(o=h.prop(a.mounted))&&!o.overlay)return new b(o.tree,u,t,n);let l=new b(h,u,t,n);return r&f.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(e<0?h.children.length-1:0,e,i,s)}}if(r&f.IncludeAnonymous||!n.type.isAnonymous)return null;if(t=n.index>=0?n.index+e:e<0?-1:n._parent._tree.children.length,n=n._parent,!n)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,i=0){let s;if(!(i&f.IgnoreOverlays)&&(s=this._tree.prop(a.mounted))&&s.overlay){let i=t-this.from;for(let{from:t,to:r}of s.overlay)if((e>0?t<=i:t<i)&&(e<0?r>=i:r>i))return new b(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new _(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return y(this,t,e,!1)}resolveInner(t,e=0){return y(this,t,e,!0)}enterUnfinishedNodesBefore(t){return O(this,t)}getChild(t,e=null,i=null){let s=x(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return x(this,t,e,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return v(this,t)}}function x(t,e,i,s){let r=t.cursor(),n=[];if(!r.firstChild())return n;if(null!=i)for(;!r.type.is(i);)if(!r.nextSibling())return n;for(;;){if(null!=s&&r.type.is(s))return n;if(r.type.is(e)&&n.push(r.node),!r.nextSibling())return null==s?n:[]}}function v(t,e,i=e.length-1){for(let s=t.parent;i>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}class ${constructor(t,e,i,s){this.parent=t,this.buffer=e,this.index=i,this.start=s}}class k{constructor(t,e,i){this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,e,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.context.start,i);return r<0?null:new k(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,i=0){if(i&f.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new k(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new k(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new k(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new _(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let n=i.buffer[this.index+1],a=i.buffer[this.index+2];t.push(i.slice(s,r,n,a)),e.push(0)}return new d(this.type,t,e,this.to-this.from)}resolve(t,e=0){return y(this,t,e,!1)}resolveInner(t,e=0){return y(this,t,e,!0)}enterUnfinishedNodesBefore(t){return O(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,i=null){let s=x(this,t,e,i);return s.length?s[0]:null}getChildren(t,e=null,i=null){return x(this,t,e,i)}get node(){return this}matchContext(t){return v(this,t)}}class _{constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof b)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:i,buffer:s}=this.buffer;return this.type=e||s.set.types[s.buffer[t]],this.from=i+s.buffer[t+1],this.to=i+s.buffer[t+2],!0}yield(t){return!!t&&(t instanceof b?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],t,e-this.buffer.start,i);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?!(i&f.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&f.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&f.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let t=i<0?0:this.stack[i]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(t)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(s.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:i}=s)}else({index:e,_parent:i}=this._tree);for(;i;({index:e,_parent:i}=i))if(e>-1)for(let s=e+t,r=t<0?-1:i._tree.children.length;s!=r;s+=t){let t=i._tree.children[s];if(this.mode&f.IncludeAnonymous||t instanceof g||!t.type.isAnonymous||P(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let s=this.index,r=this.stack.length;r>=0;){for(let n=t;n;n=n._parent)if(n.index==s){if(s==this.index)return n;e=n,i=r+1;break t}s=this.stack[--r]}for(let t=i;t<this.stack.length;t++)e=new k(this.buffer,e,this.stack[t]);return this.bufferNode=new k(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let s=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&e&&e(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(t){if(!this.buffer)return v(this.node,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let s=t.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return v(this.node,t,s);let n=i[e.buffer[this.stack[r]]];if(!n.isAnonymous){if(t[s]&&t[s]!=n.name)return!1;s--}}return!0}}function P(t){return t.children.some((t=>t instanceof g||!t.type.isAnonymous||P(t)))}const w=new WeakMap;function S(t,e){if(!t.isAnonymous||e instanceof g||e.type!=t)return 1;let i=w.get(e);if(null==i){i=1;for(let s of e.children){if(s.type!=t||!(s instanceof d)){i=1;break}i+=S(t,s)}w.set(e,i)}return i}function Q(t,e,i,s,r,n,a,o,l){let h=0;for(let i=s;i<r;i++)h+=S(t,e[i]);let u=Math.ceil(1.5*h/8),c=[],f=[];return function e(i,s,r,a,o){for(let h=r;h<a;){let r=h,d=s[h],p=S(t,i[h]);for(h++;h<a;h++){let e=S(t,i[h]);if(p+e>=u)break;p+=e}if(h==r+1){if(p>u){let t=i[r];e(t.children,t.positions,0,t.children.length,s[r]+o);continue}c.push(i[r])}else{let e=s[h-1]+i[h-1].length-d;c.push(Q(t,i,s,r,h,d,e,null,l))}f.push(d+o-n)}}(e,i,s,r,0),(o||l)(c,f,a)}class T{startParse(t,e,i){return"string"==typeof t&&(t=new C(t)),i=i?i.length?i.map((t=>new n(t.from,t.to))):[new n(0,0)]:[new n(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let s=this.startParse(t,e,i);for(;;){let t=s.advance();if(t)return t}}}class C{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new a({perNode:!0})},26048:(t,e,i)=>{"use strict";i.d(e,{WQ:()=>_});var s,r=i(46433);class n{constructor(t,e,i,s,r,n,a,o,l,h=0,u){this.p=t,this.stack=e,this.state=i,this.reducePos=s,this.pos=r,this.score=n,this.buffer=a,this.bufferBase=o,this.curContext=l,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let s=t.parser.context;return new n(t,[],e,i,i,0,[],0,s?new a(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let e=t>>19,i=65535&t,{parser:s}=this.p,r=s.dynamicPrecedence(i);if(r&&(this.score+=r),0==e)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let n=this.stack.length-3*(e-1)-(262144&t?6:0),a=this.stack[n-2],o=this.stack[n-1],l=this.bufferBase+this.buffer.length-o;if(i<s.minRepeatTerm||131072&t){let t=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,t,l+4,!0)}if(262144&t)this.state=this.stack[n];else{let t=this.stack[n-3];this.state=s.getGoto(t,i,!0)}for(;this.stack.length>n;)this.stack.pop();this.reduceContext(i,a)}storeNode(t,e,i,s=4,r=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,s=this.buffer.length;if(0==s&&t.parent&&(s=t.bufferBase-t.parent.bufferBase,t=t.parent),s>0&&0==t.buffer[s-4]&&t.buffer[s-1]>-1){if(e==i)return;if(t.buffer[s-2]>=e)return void(t.buffer[s-2]=i)}}if(r&&this.pos!=i){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4])for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,s>4&&(s-=4);this.buffer[r]=t,this.buffer[r+1]=e,this.buffer[r+2]=i,this.buffer[r+3]=s}else this.buffer.push(t,e,i,s)}shift(t,e,i){let s=this.pos;if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let r=t,{parser:n}=this.p;(i>this.pos||e<=n.maxNode)&&(this.pos=i,n.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,s),this.shiftContext(e,s),e<=n.maxNode&&this.buffer.push(e,s,i,4)}else this.pos=i,this.shiftContext(e,s),e<=this.p.parser.maxNode&&this.buffer.push(e,s,i,4)}apply(t,e,i){65536&t?this.reduce(t):this.shift(t,e,i)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let s=this.pos;this.reducePos=this.pos=s+t.length,this.pushState(e,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),s=t.bufferBase+e;for(;t&&s==t.bufferBase;)t=t.parent;return new n(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new o(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==(65536&i))return!0;if(0==i)return!1;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let i=[];for(let s,r=0;r<e.length;r+=2)(s=e[r+1])!=this.state&&this.p.parser.hasAction(s,t)&&i.push(e[r],s);if(this.stack.length<120)for(let t=0;i.length<8&&t<e.length;t+=2){let s=e[t+1];i.some(((t,e)=>1&e&&t==s))||i.push(e[t],s)}e=i}let i=[];for(let t=0;t<e.length&&i.length<4;t+=2){let s=e[t+1];if(s==this.state)continue;let r=this.split();r.pushState(s,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(e[t],this.pos),r.score-=200,i.push(r)}return i}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if(0==(65536&t))return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let i=t>>19,s=65535&t,r=this.stack.length-3*i;if(r<0||e.getGoto(this.stack[r],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new a(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class a{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}!function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(s||(s={}));class o{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,i=t>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let s=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=s}}class l{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new l(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new l(this.stack,this.pos,this.index)}}class h{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const u=new h;class c{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=u,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,s=this.rangeIndex,r=this.pos+t;for(;r<i.from;){if(!s)return null;let t=this.ranges[--s];r-=i.from-t.to,i=t}for(;e<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let t=this.ranges[++s];r+=t.from-i.to,i=t}return r}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,i,s=this.chunkOff+t;if(s>=0&&s<this.chunk.length)e=this.pos+t,i=this.chunk.charCodeAt(s);else{let s=this.resolveOffset(t,1);if(null==s)return-1;if(e=s,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,s=this.range;for(;s.to<=e;)s=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-e)),i=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),i}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=u,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let s of this.ranges){if(s.from>=e)break;s.to>t&&(i+=this.input.read(Math.max(s.from,t),Math.min(s.to,e)))}return i}}class f{constructor(t,e){this.data=t,this.id=e}token(t,e){!function(t,e,i,s){let r=0,n=1<<s,{parser:a}=i.p,{dialect:o}=a;t:for(;0!=(n&t[r]);){let i=t[r+1];for(let s=r+3;s<i;s+=2)if((t[s+1]&n)>0){let i=t[s];if(o.allows(i)&&(-1==e.token.value||e.token.value==i||a.overrides(i,e.token.value))){e.acceptToken(i);break}}let s=e.next,l=0,h=t[r+2];if(!(e.next<0&&h>l&&65535==t[i+3*h-3])){for(;l<h;){let n=l+h>>1,a=i+n+(n<<1),o=t[a],u=t[a+1];if(s<o)h=n;else{if(!(s>=u)){r=t[a+2],e.advance();continue t}l=n+1}}break}r=t[i+3*h-1]}}(this.data,t,e,this.id)}}f.prototype.contextual=f.prototype.fallback=f.prototype.extend=!1;function d(t,e=Uint16Array){if("string"!=typeof t)return t;let i=null;for(let s=0,r=0;s<t.length;){let n=0;for(;;){let e=t.charCodeAt(s++),i=!1;if(126==e){n=65535;break}e>=92&&e--,e>=34&&e--;let r=e-32;if(r>=46&&(r-=46,i=!0),n+=r,i)break;n*=46}i?i[r++]=n:i=new e(n)}return i}const p="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let g=null;var m,O;function y(t,e,i){let s=t.cursor(r.vj.IncludeAnonymous);for(s.moveTo(e);;)if(!(i<0?s.childBefore(e):s.childAfter(e)))for(;;){if((i<0?s.to<e:s.from>e)&&!s.type.isError)return i<0?Math.max(0,Math.min(s.to-1,e-25)):Math.min(t.length,Math.max(s.from+1,e+25));if(i<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return i<0?0:t.length}}!function(t){t[t.Margin=25]="Margin"}(m||(m={}));class b{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?y(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?y(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],s=this.index[e];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[s],a=this.start[e]+i.positions[s];if(a>t)return this.nextStart=a,null;if(n instanceof r.mp){if(a==t){if(a<this.safeFrom)return null;let t=a+n.length;if(t<=this.safeTo){let e=n.prop(r.md.lookAhead);if(!e||t+e<this.fragment.to)return n}}this.index[e]++,a+n.length>=Math.max(this.safeFrom,t)&&(this.trees.push(n),this.start.push(a),this.index.push(0))}else this.index[e]++,this.nextStart=a+n.length}}}class x{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new h))}getActions(t){let e=0,i=null,{parser:s}=t.p,{tokenizers:r}=s,n=s.stateSlot(t.state,3),a=t.curContext?t.curContext.hash:0,o=0;for(let s=0;s<r.length;s++){if(0==(1<<s&n))continue;let l=r[s],h=this.tokens[s];if((!i||l.fallback)&&((l.contextual||h.start!=t.pos||h.mask!=n||h.context!=a)&&(this.updateCachedToken(h,l,t),h.mask=n,h.context=a),h.lookAhead>h.end+25&&(o=Math.max(h.lookAhead,o)),0!=h.value)){let s=e;if(h.extended>-1&&(e=this.addActions(t,h.extended,h.end,e)),e=this.addActions(t,h.value,h.end,e),!l.extend&&(i=h,e>s))break}}for(;this.actions.length>e;)this.actions.pop();return o&&t.setLookAhead(o),i||t.pos!=this.stream.end||(i=new h,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new h,{pos:i,p:s}=t;return e.start=i,e.end=Math.min(i+1,s.stream.end),e.value=i==s.stream.end?s.parser.eofTerm:0,e}updateCachedToken(t,e,i){let s=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(s,t),i),t.value>-1){let{parser:e}=i.p;for(let s=0;s<e.specialized.length;s++)if(e.specialized[s]==t.value){let r=e.specializers[s](this.stream.read(t.start,t.end),i);if(r>=0&&i.p.parser.dialect.allows(r>>1)){0==(1&r)?t.value=r>>1:t.extended=r>>1;break}}}else t.value=0,t.end=this.stream.clipPos(s+1)}putAction(t,e,i,s){for(let e=0;e<s;e+=3)if(this.actions[e]==t)return s;return this.actions[s++]=t,this.actions[s++]=e,this.actions[s++]=i,s}addActions(t,e,i,s){let{state:r}=t,{parser:n}=t.p,{data:a}=n;for(let t=0;t<2;t++)for(let o=n.stateSlot(r,t?2:1);;o+=3){if(65535==a[o]){if(1!=a[o+1]){0==s&&2==a[o+1]&&(s=this.putAction(P(a,o+2),e,i,s));break}o=P(a,o+2)}a[o]==e&&(s=this.putAction(P(a,o+1),e,i,s))}return s}}!function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo"}(O||(O={}));class v{constructor(t,e,i,s){this.parser=t,this.input=e,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new c(e,s),this.tokens=new x(t,this.stream),this.topTerm=t.top[1];let{from:r}=s[0];this.stacks=[n.start(this,t.top[0],r)],this.fragments=i.length&&this.stream.end-r>4*t.bufferLength?new b(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,i=this.stacks,s=this.minStackPos,r=this.stacks=[];for(let n=0;n<i.length;n++){let a=i[n];for(;;){if(this.tokens.mainToken=null,a.pos>s)r.push(a);else{if(this.advanceStack(a,r,i))continue;{t||(t=[],e=[]),t.push(a);let i=this.tokens.getMainToken(a);e.push(i.value,i.end)}}break}}if(!r.length){let e=t&&function(t){let e=null;for(let i of t){let t=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=t&&i.pos>t)&&i.p.parser.stateFlag(i.state,2)&&(!e||e.score<i.score)&&(e=i)}return e}(t);if(e)return this.stackToTree(e);if(this.parser.strict)throw p&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&t){let i=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,r);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(r.length>t)for(r.sort(((t,e)=>e.score-t.score));r.length>t;)r.pop();r.some((t=>t.reducePos>s))&&this.recovering--}else if(r.length>1)t:for(let t=0;t<r.length-1;t++){let e=r[t];for(let i=t+1;i<r.length;i++){let s=r[i];if(e.sameState(s)||e.buffer.length>500&&s.buffer.length>500){if(!((e.score-s.score||e.buffer.length-s.buffer.length)>0)){r.splice(t--,1);continue t}r.splice(i--,1)}}}this.minStackPos=r[0].pos;for(let t=1;t<r.length;t++)r[t].pos<this.minStackPos&&(this.minStackPos=r[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let s=t.pos,{parser:n}=this,a=p?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&s>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,i=e?t.curContext.hash:0;for(let o=this.fragments.nodeAt(s);o;){let s=this.parser.nodeSet.types[o.type.id]==o.type?n.getGoto(t.state,o.type.id):-1;if(s>-1&&o.length&&(!e||(o.prop(r.md.contextHash)||0)==i))return t.useNode(o,s),p&&console.log(a+this.stackID(t)+` (via reuse of ${n.getName(o.type.id)})`),!0;if(!(o instanceof r.mp)||0==o.children.length||o.positions[0]>0)break;let l=o.children[0];if(!(l instanceof r.mp&&0==o.positions[0]))break;o=l}}let o=n.stateSlot(t.state,4);if(o>0)return t.reduce(o),p&&console.log(a+this.stackID(t)+` (via always-reduce ${n.getName(65535&o)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let l=this.tokens.getActions(t);for(let r=0;r<l.length;){let o=l[r++],h=l[r++],u=l[r++],c=r==l.length||!i,f=c?t:t.split();if(f.apply(o,h,u),p&&console.log(a+this.stackID(f)+` (via ${0==(65536&o)?"shift":`reduce of ${n.getName(65535&o)}`} for ${n.getName(h)} @ ${s}${f==t?"":", split"})`),c)return!0;f.pos>s?e.push(f):i.push(f)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return $(t,e),!0}}runRecovery(t,e,i){let s=null,r=!1;for(let n=0;n<t.length;n++){let a=t[n],o=e[n<<1],l=e[1+(n<<1)],h=p?this.stackID(a)+" -> ":"";if(a.deadEnd){if(r)continue;if(r=!0,a.restart(),p&&console.log(h+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))continue}let u=a.split(),c=h;for(let t=0;u.forceReduce()&&t<10;t++){if(p&&console.log(c+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,i))break;p&&(c=this.stackID(u)+" -> ")}for(let t of a.recoverByInsert(o))p&&console.log(h+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,i);this.stream.end>a.pos?(l==a.pos&&(l++,o=0),a.recoverByDelete(o,l),p&&console.log(h+this.stackID(a)+` (via recover-delete ${this.parser.getName(o)})`),$(a,i)):(!s||s.score<a.score)&&(s=a)}return s}stackToTree(t){return t.close(),r.mp.build({buffer:l.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(g||(g=new WeakMap)).get(t);return e||g.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function $(t,e){for(let i=0;i<e.length;i++){let s=e[i];if(s.pos==t.pos&&s.sameState(t))return void(e[i].score<t.score&&(e[i]=t))}e.push(t)}class k{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||0==this.disabled[t]}}class _ extends r._b{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let i=0;i<t.repeatNodeCount;i++)e.push("");let i=Object.keys(t.topRules).map((e=>t.topRules[e][1])),s=[];for(let t=0;t<e.length;t++)s.push([]);function n(t,e,i){s[t].push([e,e.deserialize(String(i))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=r.md[t]);for(let i=1;i<e.length;){let s=e[i++];if(s>=0)n(s,t,e[i++]);else{let r=e[i+-s];for(let a=-s;a>0;a--)n(e[i++],t,r);i++}}}this.nodeSet=new r.Lj(e.map(((e,n)=>r.Jq.define({name:n>=this.minRepeatTerm?void 0:e,id:n,props:s[n],top:i.indexOf(n)>-1,error:0==n,skipped:t.skippedNodes&&t.skippedNodes.indexOf(n)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=r.L3;let a=d(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(S),this.states=d(t.states,Uint32Array),this.data=d(t.stateData),this.goto=d(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new f(a,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let s=new v(this,t,e,i);for(let r of this.wrappers)s=r(s,t,e,i);return s}getGoto(t,e,i=!1){let s=this.goto;if(e>=s[0])return-1;for(let r=s[e+1];;){let e=s[r++],n=1&e,a=s[r++];if(n&&i)return a;for(let i=r+(e>>1);r<i;r++)if(s[r]==t)return a;if(n)return-1}}hasAction(t,e){let i=this.data;for(let s=0;s<2;s++)for(let r,n=this.stateSlot(t,s?2:1);;n+=3){if(65535==(r=i[n])){if(1!=i[n+1]){if(2==i[n+1])return P(i,n+2);break}r=i[n=P(i,n+2)]}if(r==e||0==r)return P(i,n+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let i=this.stateSlot(t,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])return!1;i=P(this.data,i+2)}if(e==P(this.data,i+1))return!0}}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=P(this.data,i+2)}if(0==(1&this.data[i+2])){let t=this.data[i+1];e.some(((e,i)=>1&i&&e==t))||e.push(this.data[i],t)}}return e}overrides(t,e){let i=w(this.data,this.tokenPrecTable,e);return i<0||w(this.data,this.tokenPrecTable,t)<i}configure(t){let e=Object.assign(Object.create(_.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let i=t.tokenizers.find((t=>t.from==e));return i?i.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((i,s)=>{let r=t.specializers.find((t=>t.from==i.external));if(!r)return i;let n=Object.assign(Object.assign({},i),{external:r.to});return e.specializers[s]=S(n),n}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map((()=>!1));if(t)for(let s of t.split(" ")){let t=e.indexOf(s);t>=0&&(i[t]=!0)}let s=null;for(let t=0;t<e.length;t++)if(!i[t])for(let i,r=this.dialects[e[t]];65535!=(i=this.data[r++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[i]=1;return new k(t,i,s)}static deserialize(t){return new _(t)}}function P(t,e){return t[e]|t[e+1]<<16}function w(t,e,i){for(let s,r=e;65535!=(s=t[r]);r++)if(s==i)return r-e;return-1}function S(t){if(t.external){let e=t.extend?1:0;return(i,s)=>t.external(i,s)<<1|e}return t.get}}}]);
//# sourceMappingURL=7813.5cd812cba89df626be3d.js.map