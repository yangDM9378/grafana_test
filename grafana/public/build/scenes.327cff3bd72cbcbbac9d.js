"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[207],{98214:(e,t,i)=>{i.r(t),i.d(t,{SceneListPage:()=>o,default:()=>d});i(68404);var n=i(68522),s=i(1129),a=i(37417),r=i(69618),l=i(45916);const o=e=>{let{}=e;const t=(0,r.F)();return(0,l.jsx)(a.T,{navId:"scenes",children:(0,l.jsx)(a.T.Contents,{children:(0,l.jsx)(n.Stack,{direction:"column",children:t.map((e=>(0,l.jsx)(s.Z,{href:`/scenes/${e.state.title}`,children:(0,l.jsx)(s.Z.Heading,{children:e.state.title})},e.state.title)))})})})},d=o},79759:(e,t,i)=>{i.r(t),i.d(t,{ScenePage:()=>r,default:()=>l});i(68404);var n,s=i(69618),a=i(45916);const r=e=>{const t=(0,s.H)(e.match.params.name);return t?(0,a.jsx)(t.Component,{model:t}):n||(n=(0,a.jsx)("h2",{children:"Scene not found"}))},l=r},69618:(e,t,i)=>{i.d(t,{H:()=>xt,F:()=>mt});var n=i(12717),s=i(68404),a=i(97370),r=i(65737),l=i(1696),o=i(80998),d=i(14143),c=i(37417),u=i(96209),h=i(95484),g=i(44288),p=i(25317),f=i(80589),b=i(82897),w=i(98142);function v(e,t){return t.getVariables()?(w.J7.lastIndex=0,e.replace(w.J7,((e,i,n,s,a,r,l)=>{const o=m(i||n||a,t);if(!o)return e;const d=o.getValue(r);return(0,b.isArray)(d)?"not supported yet":String(d)}))):e}function m(e,t){const i=t.state.$variables;if(!i)return t.parent?m(e,t.parent):null;const n=i.getByName(e);return n||(t.parent?m(e,t.parent):null)}var y=i(52423),x=i(16755),C=i(45916);function S(e){let{model:t,children:i}=e;const n=(0,x.wW)(j),s=t.getSceneEditor(),{hoverObject:a,selectedObject:r}=s.useState();let l=n.wrapper;return(null==a?void 0:a.ref)===t&&(l+=" "+n.hover),(null==r?void 0:r.ref)===t&&(l+=" "+n.selected),(0,C.jsx)("div",{style:{},className:l,onMouseEnter:()=>s.onMouseEnterObject(t),onMouseLeave:()=>s.onMouseLeaveObject(t),onClick:e=>{e.stopPropagation(),s.onSelectObject(t)},children:i})}const j=e=>({wrapper:(0,y.css)({display:"flex",flexGrow:1,padding:8,border:`1px dashed ${e.colors.primary.main}`,cursor:"pointer"}),hover:(0,y.css)({border:`1px solid ${e.colors.primary.border}`}),selected:(0,y.css)({border:`1px solid ${e.colors.error.border}`})}),z=["model","isEditing"];function R(e){var t;let{model:i,isEditing:n}=e,a=function(e,t){if(null==e)return{};var i,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,z);const r=null!==(t=i.constructor.Component)&&void 0!==t?t:I,l=(0,C.jsx)(r,Object.assign({},a,{model:i,isEditing:n}));return(0,s.useEffect)((()=>(i.isActive||i.activate(),()=>{i.isActive&&i.deactivate()})),[i]),i._renderCount+=1,n?(0,C.jsx)(S,{model:i,children:l}):l}function I(e){return null}var O,k,_,D=i(54209);class A extends D.R{}function $(e,t){for(const i of Object.values(e))if(i instanceof V&&t(i),Array.isArray(i))for(const e of i)e instanceof V&&t(e)}function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_="scene-object-state-change",(k="type")in(O=A)?Object.defineProperty(O,k,{value:_,enumerable:!0,configurable:!0,writable:!0}):O[k]=_;class V{constructor(e){T(this,"_isActive",!1),T(this,"_subject",new u.x),T(this,"_state",void 0),T(this,"_events",new p.F),T(this,"_renderCount",0),T(this,"_parent",void 0),T(this,"_subs",new h.w0),T(this,"_variableDependency",void 0),e.key||(e.key=(0,g.Z)()),this._state=e,this._subject.next(e),this.setParent()}get state(){return this._state}get isActive(){return this._isActive}get parent(){return this._parent}get variableDependency(){return this._variableDependency}get Component(){return R}get Editor(){var e;return null!==(e=this.constructor.Editor)&&void 0!==e?e:()=>null}setParent(){$(this._state,(e=>e._parent=this))}subscribeToState(e){return this._subject.subscribe(e)}subscribeToEvent(e,t){return this._events.subscribe(e,t)}setState(e){const t=this._state;this._state=Object.assign({},this._state,e),this.setParent(),this._subject.next(this._state),this.publishEvent(new A({prevState:t,newState:this._state,partialUpdate:e,changedObject:this}),!0)}publishEvent(e,t){this._events.publish(e),t&&this.parent&&this.parent.publishEvent(e,t)}getRoot(){return this._parent?this._parent.getRoot():this}activate(){this._isActive=!0;const{$data:e,$variables:t}=this.state;e&&!e.isActive&&e.activate(),t&&!t.isActive&&t.activate()}deactivate(){this._isActive=!1;const{$data:e,$variables:t}=this.state;e&&e.isActive&&e.deactivate(),t&&t.isActive&&t.deactivate(),this._events.removeAllListeners(),this._subs.unsubscribe(),this._subs=new h.w0,this._subject.complete(),this._subject=new u.x}useState(){return function(e){const t=(0,f.N)();return(0,s.useEffect)((()=>{const i=e.subscribeToState({next:t});return()=>i.unsubscribe()}),[e,t]),e.state}(this)}getTimeRange(){const{$timeRange:e}=this.state;if(e)return e;if(this.parent)return this.parent.getTimeRange();throw new Error("No time range found in scene tree")}getData(){const{$data:e}=this.state;if(e)return e;if(this.parent)return this.parent.getData();throw new Error("No data found in scene tree")}getVariables(){return this.state.$variables?this.state.$variables:this.parent?this.parent.getVariables():void 0}getLayout(){if("SceneFlexLayout"===this.constructor.name||"SceneGridLayout"===this.constructor.name)return this;if(this.parent)return this.parent.getLayout();throw new Error("No layout found in scene tree")}getSceneEditor(){const{$editor:e}=this.state;if(e)return e;if(this.parent)return this.parent.getSceneEditor();throw new Error("No editor found in scene tree")}forceRender(){this.setState({})}clone(e){return function(e,t){const i=Object.assign({},e.state);for(const e in i){const t=i[e];if(t instanceof V&&(i[e]=t.clone()),Array.isArray(t)){const n=[];for(const e of t)e instanceof V?n.push(e.clone()):n.push(e);i[e]=n}}return Object.assign(i,t),new e.constructor(i)}(this,e)}interpolate(e){return e&&this._variableDependency&&0!==this._variableDependency.getNames().size?v(e,this):e}}var E=i(80795);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class P{constructor(e){N(this,"locationListenerUnsub",void 0),N(this,"stateChangeSub",void 0),N(this,"onLocationUpdate",(e=>{})),N(this,"onStateChanged",(e=>{let{payload:t}=e;const i=t.changedObject;if("getUrlState"in i){const e=i.getUrlState();E.E1.partial(e,!0)}})),this.stateChangeSub=e.subscribeToEvent(A,this.onStateChanged),this.locationListenerUnsub=E.E1.getHistory().listen(this.onLocationUpdate)}cleanUp(){this.stateChangeSub.unsubscribe(),this.locationListenerUnsub()}}function L(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class q extends V{constructor(){super(...arguments),L(this,"urlSyncManager",void 0)}activate(){super.activate(),this.urlSyncManager=new P(this)}deactivate(){super.deactivate(),this.urlSyncManager.cleanUp()}}L(q,"Component",(function(e){let{model:t}=e;const{title:i,layout:n,actions:s=[],isEditing:u,$editor:h,subMenu:g}=t.useState(),p=(null!=s?s:[]).map((e=>(0,C.jsx)(e.Component,{model:e},e.state.key)));h&&p.push((0,C.jsx)(l.h,{icon:"cog",variant:u?"primary":"default",onClick:()=>t.setState({isEditing:!t.state.isEditing})}));const f=r.v.featureToggles.topnav?(0,C.jsx)(d.A,{actions:p}):(0,C.jsx)(o.X,{title:i,children:p});return(0,C.jsx)(c.T,{navId:"scenes",pageNav:{text:i},layout:a.Qz.Canvas,toolbar:f,children:(0,C.jsxs)("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",gap:"8px"},children:[g&&(0,C.jsx)(g.Component,{model:g}),(0,C.jsxs)("div",{style:{flexGrow:1,display:"flex",gap:"8px",overflow:"auto"},children:[(0,C.jsx)(n.Component,{model:n,isEditing:u}),h&&(0,C.jsx)(h.Component,{model:h,isEditing:u})]})]})})}));var U=i(65678),M=i(4645);function F(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G{constructor(e,t){var i;F(this,"_state",void 0),F(this,"_dependencies",new Set),F(this,"_statePaths",void 0),F(this,"_onReferencedVariableValueChanged",void 0),F(this,"scanCount",0),F(this,"defaultHandlerReferencedVariableValueChanged",(()=>{this._sceneObject.forceRender()})),this._sceneObject=e,this._statePaths=t.statePaths,this._onReferencedVariableValueChanged=null!==(i=t.onReferencedVariableValueChanged)&&void 0!==i?i:this.defaultHandlerReferencedVariableValueChanged}hasDependencyOn(e){return this.getNames().has(e)}variableValuesChanged(e){const t=this.getNames();for(const i of e)if(t.has(i.state.name))return void this._onReferencedVariableValueChanged()}getNames(){const e=this._state,t=this._state=this._sceneObject.state;if(!e)return this.scanStateForDependencies(this._state),this._dependencies;if(t!==e)if(this._statePaths){for(const i of this._statePaths)if(t[i]!==e[i]){this.scanStateForDependencies(t);break}}else this.scanStateForDependencies(t);return this._dependencies}scanStateForDependencies(e){if(this._dependencies.clear(),this.scanCount+=1,this._statePaths)for(const t of this._statePaths){const i=e[t];i&&this.extractVariablesFrom(i)}else this.extractVariablesFrom(e)}extractVariablesFrom(e){w.J7.lastIndex=0;const t=("string"!=typeof e?H(e):e).matchAll(w.J7);if(t)for(const e of t){const[,t,i,,n]=e,s=t||i||n;this._dependencies.add(s)}}}const H=e=>{try{return JSON.stringify(e,null)}catch(e){console.error(e)}return""};function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class J extends V{constructor(){super(...arguments),B(this,"_variableDependency",new G(this,{statePaths:["text"]}))}}B(J,"Editor",(function(e){let{model:t}=e;const{fontSize:i}=t.useState();return(0,C.jsx)(U.g,{label:"Font size",children:(0,C.jsx)(M.I,{type:"number",defaultValue:i,onBlur:e=>t.setState({fontSize:parseInt(e.currentTarget.value,10)})})})})),B(J,"Component",(e=>{let{model:t}=e;const{text:i,fontSize:n=20,align:s="left",key:a}=t.useState(),r={fontSize:n,display:"flex",flexGrow:1,alignItems:"center",padding:16,justifyContent:s};return(0,C.jsx)("div",{style:r,"data-testid":a,children:t.interpolate(i)})}));var W=i(28173);class K extends V{}class Q extends V{activate(){super.activate(),this._subs.add(this.getData().subscribeToState({next:e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.state)===W.Gu.Done&&this.performRepeat(e.data)}}))}performRepeat(e){const t=this.state.layout.state.children[0],i=[];for(const n of e.series){const s=t.clone({key:`${i.length}`,$data:new K({data:Object.assign({},e,{series:[n]})})});i.push(s)}this.state.layout.setState({children:i})}}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(Q,"Component",(e=>{let{model:t,isEditing:i}=e;const{layout:n}=t.useState();return(0,C.jsx)(n.Component,{model:n,isEditing:i})}));var Z=i(21084),Y=i(21162),X=i(34759);class ee extends V{}function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(ee,"Component",(function(e){let{model:t}=e;const{hidePicker:i}=t.useState(),n=t.getTimeRange(),s=n.useState();if(i)return null;return(0,C.jsxs)(Z.R,{alignment:"right",children:[(0,C.jsx)(X.a,{value:s,onChange:n.onTimeRangeChange,timeZone:"browser",fiscalYearStartMonth:0,onMoveBackward:()=>{},onMoveForward:()=>{},onZoom:()=>{},onChangeTimeZone:()=>{},onChangeFiscalYearStartMonth:()=>{}}),(0,C.jsx)(Y.dP,{onRefresh:n.onRefresh,onIntervalChanged:n.onIntervalChanged})]})}));te(class extends V{},"Component",(e=>{let{model:t}=e;const i=t.useState();return(0,C.jsx)(l.h,{onClick:i.onClick,icon:i.icon})}));class ie extends V{}te(ie,"Component",(e=>{let{model:t}=e;const i=t.useState();return(0,C.jsx)(M.I,{defaultValue:i.value,width:8,onBlur:e=>{t.state.onChange(parseInt(e.currentTarget.value,10))}})}));var ne,se=i(89050),ae=i(88246),re=i(76308),le=i(20317),oe=i(99500);function de(e){let{layoutKey:t,className:i}=e;return(0,C.jsx)("div",{className:`${i} grid-drag-handle-${t}`,style:{width:"20px",height:"20px",cursor:"move"},children:ne||(ne=(0,C.jsx)(oe.J,{name:"draggabledots"}))})}const ce=["title","pluginId","options","fieldConfig"];function ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class he extends V{constructor(){super(...arguments),ue(this,"_variableDependency",new G(this,{statePaths:["title"]})),ue(this,"onSetTimeRange",(e=>{this.getTimeRange().setState({raw:{from:(0,ae.zh)(e.from),to:(0,ae.zh)(e.to)},from:(0,ae.zh)(e.from),to:(0,ae.zh)(e.to)})}))}}function ge(e){let{model:t}=e;const i=t.useState(),{title:n,pluginId:s,options:a,fieldConfig:r}=i,l=function(e,t){if(null==e)return{};var i,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(i,ce),{data:o}=t.getData().useState(),d=t.getLayout(),c=!!d.state.isDraggable&&l.isDraggable,u=(0,C.jsx)(de,{layoutKey:d.state.key}),h=t.interpolate(n);return(0,C.jsx)(se.Z,{children:e=>{let{width:i,height:n}=e;return i<3||n<3?null:(0,C.jsx)(le.fm,{title:h,width:i,height:n,leftItems:c?[u]:void 0,children:(e,i)=>(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(re.$,{title:"Raw data",pluginId:s,width:e,height:i,data:o,options:a,fieldConfig:r,onOptionsChange:()=>{},onChangeTimeRange:t.onSetTimeRange})})})}})}ue(he,"Component",ge),ue(he,"Editor",(function(e){let{model:t}=e;const{title:i}=t.useState();return(0,C.jsx)(U.g,{label:"Title",children:(0,C.jsx)(M.I,{defaultValue:i,onBlur:e=>t.setState({title:e.currentTarget.value})})})})),ge.displayName="ScenePanelRenderer";var pe=i(37625);function fe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class be extends V{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}}function we(e){let{item:t,direction:i,isEditing:n}=e;const{size:s}=t.useState();return(0,C.jsx)("div",{style:ve(i,s),children:(0,C.jsx)(t.Component,{model:t,isEditing:n})})}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{xSizing:i="fill",ySizing:n="fill"}=t,s={display:"flex",flexDirection:e,minWidth:t.minWidth,minHeight:t.minHeight};return"column"===e?(t.height?s.height=t.height:s.flexGrow="fill"===n?1:0,t.width?s.width=t.width:s.alignSelf="fill"===i?"stretch":"flex-start"):(t.height?s.height=t.height:s.alignSelf="fill"===n?"stretch":"flex-start",t.width?s.width=t.width:s.flexGrow="fill"===i?1:0),s}function me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}fe(be,"Component",(function(e){let{model:t,isEditing:i}=e;const{direction:n="row",children:s}=t.useState();return(0,C.jsx)("div",{style:{flexGrow:1,flexDirection:n,display:"flex",gap:"8px"},children:s.map((e=>(0,C.jsx)(we,{item:e,direction:n,isEditing:i},e.state.key)))})})),fe(be,"Editor",(function(e){let{model:t}=e;const{direction:i="row"}=t.useState();return(0,C.jsx)(U.g,{label:"Direction",children:(0,C.jsx)(pe.S,{options:[{icon:"arrow-right",value:"row"},{icon:"arrow-down",value:"column"}],value:i,onChange:e=>t.setState({direction:e})})})}));class ye extends V{constructor(){super(...arguments),me(this,"onTimeRangeChange",(e=>{this.setState(e)})),me(this,"onRefresh",(()=>{this.setState(Object.assign({},this.state))})),me(this,"onIntervalChanged",(e=>{}))}getUrlState(){return{from:this.state.raw.from,to:this.state.raw.to}}updateFromUrl(e){}}var xe,Ce=i(43033);function Se(e){let{model:t}=e;return(0,C.jsx)(Ce.u,{id:"props",title:"Properties",forceOpen:1,children:(0,C.jsx)(t.Editor,{model:t},t.state.key)})}function je(e){return void 0!==e.useState}function ze(e){let{node:t,selectedObject:i}=e;const n=(0,x.wW)(Re),s=t.useState();let a=[];for(const e of Object.keys(s)){const t=s[e];je(t)&&a.push(t)}if("children"in s)for(const e of s.children)a.push(e);const r=t.constructor.name,l=i===t;return(0,C.jsxs)("div",{className:n.node,children:[(0,C.jsxs)("div",{className:n.header,onClick:()=>t.getSceneEditor().onSelectObject(t),children:[(0,C.jsx)("div",{className:n.icon,children:a.length>0&&(xe||(xe=(0,C.jsx)(oe.J,{name:"angle-down",size:"sm"})))}),(0,C.jsx)("div",{className:(0,y.cx)(n.name,l&&n.selected),children:r})]}),a.length>0&&(0,C.jsx)("div",{className:n.children,children:a.map((e=>(0,C.jsx)(ze,{node:e,selectedObject:i},e.state.key)))})]})}const Re=e=>({node:(0,y.css)({display:"flex",flexGrow:0,cursor:"pointer",flexDirection:"column",padding:"2px 4px"}),header:(0,y.css)({display:"flex",fontWeight:500}),name:(0,y.css)({}),selected:(0,y.css)({color:e.colors.error.text}),icon:(0,y.css)({width:e.spacing(3),color:e.colors.text.secondary}),children:(0,y.css)({display:"flex",flexDirection:"column",paddingLeft:8})});class Ie extends V{get Component(){return Oe}onMouseEnterObject(e){this.setState({hoverObject:{ref:e}})}onMouseLeaveObject(e){e.parent?this.setState({hoverObject:{ref:e.parent}}):this.setState({hoverObject:void 0})}onSelectObject(e){this.setState({selectedObject:{ref:e}})}}function Oe(e){let{model:t,isEditing:i}=e;const{selectedObject:n}=t.useState(),s=(0,x.wW)(ke);return i?(0,C.jsxs)("div",{className:s.container,children:[(0,C.jsx)("div",{className:s.tree,children:(0,C.jsx)(ze,{node:t.parent,selectedObject:null==n?void 0:n.ref})}),n&&(0,C.jsx)(Se,{model:n.ref})]}):null}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(Ie,"Component",Oe);const ke=e=>({container:(0,y.css)({display:"flex",flexGrow:0,border:`1px solid ${e.colors.border.weak}`,background:e.colors.background.primary,width:e.spacing(40),cursor:"pointer",flexDirection:"column"}),tree:(0,y.css)({padding:e.spacing(.25,1)})});var _e=i(54316),De=i(85699),Ae=i(42833),$e=i(59558),Te=i(8343);function Ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ee extends V{constructor(){super(...arguments),Ve(this,"querySub",void 0),Ve(this,"_variableDependency",new G(this,{statePaths:["queries"],onReferencedVariableValueChanged:()=>this.runQueries()}))}activate(){super.activate();const e=this.getTimeRange();this._subs.add(e.subscribeToState({next:e=>{this.runWithTimeRange(e)}})),this.state.data||this.runQueries()}deactivate(){super.deactivate(),this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0)}runQueries(){const e=this.getTimeRange();this.runWithTimeRange(e.state)}async runWithTimeRange(e){const t=(0,b.cloneDeep)(this.state.queries),i={app:_e.zj.Dashboard,requestId:(0,$e.t)(),timezone:"browser",panelId:1,dashboardId:1,range:e,interval:"1s",intervalMs:1e3,targets:(0,b.cloneDeep)(this.state.queries),maxDataPoints:500,scopedVars:{},startTime:Date.now()};try{var n;const s=await async function(e,t){if(e&&e.query)return e;return await(0,Ae.ak)().get(e,t)}(t[0].datasource,i.scopedVars);i.targets=i.targets.map((e=>(e.datasource||(e.datasource=s.getRef()),e)));const a=s.interval,r=De.calculateInterval(e,null!==(n=i.maxDataPoints)&&void 0!==n?n:1e3,a);i.scopedVars=Object.assign({},i.scopedVars,{__interval:{text:r.interval,value:r.interval},__interval_ms:{text:r.intervalMs.toString(),value:r.intervalMs}}),i.interval=r.interval,i.intervalMs=r.intervalMs,this.querySub=(0,Te.v7)(s,i).subscribe({next:e=>{console.log("set data",e,e.state),this.setState({data:e})}})}catch(e){console.error("PanelQueryRunner Error",e)}}}function Ne(e){return new Ee({queries:[Object.assign({refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"},e)]})}function Pe(){const e=Ne({seriesCount:2,alias:"__server_names",scenarioId:"random_walk"});return new q({title:"Panel repeater test",layout:new Q({layout:new be({direction:"column",children:[new be({direction:"row",size:{minHeight:200},children:[new he({pluginId:"timeseries",title:"Title",options:{legend:{displayMode:"hidden"}}}),new he({size:{width:300},pluginId:"stat",fieldConfig:{defaults:{displayName:"Last"},overrides:[]},options:{graphMode:"none"}})]})]})}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:e,actions:[new ie({value:"2",onChange:t=>{e.setState({queries:[Object.assign({},e.state.queries[0],{seriesCount:t})]}),e.runQueries()}}),new ee({})]})}var Le=i(97717),qe=i.n(Le),Ue=i(42949);function Me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Fe extends V{constructor(e){super(Object.assign({isDraggable:!0},e,{children:Be(e.children)})),Me(this,"_skipOnLayoutChange",!1),Me(this,"onLayoutChange",(e=>{if(this._skipOnLayoutChange)this._skipOnLayoutChange=!1;else{for(const n of e){const e=this.getSceneLayoutChild(n.i),s={x:n.x,y:n.y,width:n.w,height:n.h};t=e.state.size,i=s,(t.x!==i.x||t.y!==i.y||t.width!==i.width||t.height!==i.height)&&e.setState({size:Object.assign({},e.state.size,s)})}var t,i;this.setState({children:Be(this.state.children)})}})),Me(this,"onResizeStop",((e,t,i)=>{const n=this.getSceneLayoutChild(i.i);n.setState({size:Object.assign({},n.state.size,{width:i.w,height:i.h})})})),Me(this,"onDragStop",((e,t,i)=>{const n=this.getSceneLayoutChild(i.i);e=Je(e);for(let t=0;t<e.length;t++){const i=e[t],n=this.getSceneLayoutChild(i.i),s=n.state.size;(null==s?void 0:s.x)===i.x&&(null==s?void 0:s.y)===i.y||n.setState({size:Object.assign({},n.state.size,{x:i.x,y:i.y})})}const s=e.findIndex((e=>e.i===i.i)),a=this.findGridItemSceneParent(e,s-1);let r=this.state.children;a!==n.parent&&(r=this.moveChildTo(n,a)),this.setState({children:Be(r)}),this._skipOnLayoutChange=!0}))}toggleRow(e){var t,i,n;if(!e.state.isCollapsed)return e.setState({isCollapsed:!0}),void this.setState({});const s=e.state.children;if(0===s.length)return e.setState({isCollapsed:!1}),void this.setState({});const a=null===(t=e.state.size)||void 0===t?void 0:t.y,r=(null!==(i=null===(n=s[0].state.size)||void 0===n?void 0:n.y)&&void 0!==i?i:a)-(a+1);let l=a;for(const e of s){var o,d;const t=Object.assign({},e.state.size);t.y=null!==(o=t.y)&&void 0!==o?o:a,t.y-=r,t.y>(null===(d=e.state.size)||void 0===d?void 0:d.y)&&e.setState({size:t}),l=Math.max(l,Number(t.y)+Number(t.height))}const c=l-a-1;for(const t of this.state.children){var u;if((null===(u=t.state.size)||void 0===u?void 0:u.y)>a&&this.pushChildDown(t,c),t instanceof Ge&&t!==e)for(const e of t.state.children){var h;(null===(h=e.state.size)||void 0===h?void 0:h.y)>a&&this.pushChildDown(e,c)}}e.setState({isCollapsed:!1}),this.setState({})}getSceneLayoutChild(e){for(const t of this.state.children){if(t.state.key===e)return t;if(t instanceof Ge)for(const i of t.state.children)if(i.state.key===e)return i}throw new Error("Scene layout child not found for GridItem")}pushChildDown(e,t){var i;e.setState({size:Object.assign({},e.state.size,{y:(null===(i=e.state.size)||void 0===i?void 0:i.y)+t})})}findGridItemSceneParent(e,t){for(let i=t;i>=0;i--){const t=e[i],n=this.getSceneLayoutChild(t.i);if(n instanceof Ge)return n.state.isCollapsed?this:n}return this}moveChildTo(e,t){const i=e.parent;let n=this.state.children;const s=e.clone({key:e.state.key});if(i instanceof Ge){const a=i.clone({children:i.state.children.filter((t=>t.state.key!==e.state.key))});if(n=n.map((e=>e===i?a:e)),t instanceof Ge){const e=t.clone({children:[...t.state.children,s]});n=n.map((i=>i===t?e:i))}else n=[...n,s]}else{n=n.filter((t=>t.state.key!==e.state.key));const i=t.clone({children:[...t.state.children,s]});n=n.map((e=>e===t?i:e))}return n}toGridCell(e){var t,i;const n=e.state.size;let s=null!==(t=n.x)&&void 0!==t?t:0,a=null!==(i=n.y)&&void 0!==i?i:0;const r=Number.isInteger(Number(n.width))?Number(n.width):Ue.kh,l=Number.isInteger(Number(n.height))?Number(n.height):Ue.kh;let o=Boolean(e.state.isDraggable),d=Boolean(e.state.isResizable);return e instanceof Ge&&(o=!!e.state.isCollapsed,d=!1),{i:e.state.key,x:s,y:a,h:l,w:r,isResizable:d,isDraggable:o}}buildGridLayout(e){let t=[];for(const e of this.state.children)if(t.push(this.toGridCell(e)),e instanceof Ge&&!e.state.isCollapsed)for(const i of e.state.children)t.push(this.toGridCell(i));return t=Je(t),e<768?(this._skipOnLayoutChange=!0,t.map((e=>Object.assign({},e,{w:24})))):(this._skipOnLayoutChange=!1,t)}}Me(Fe,"Component",(function(e){let{model:t}=e;const{children:i}=t.useState();return function(e){if(e.find((e=>!e.state.size||void 0===e.state.size.height||void 0===e.state.size.width||void 0===e.state.size.x||void 0===e.state.size.y)))throw new Error("All children must have a size specified")}(i),(0,C.jsx)(se.Z,{disableHeight:!0,children:e=>{let{width:i}=e;if(0===i)return null;const n=t.buildGridLayout(i);return(0,C.jsx)("div",{style:{width:`${i}px`,height:"100%"},children:(0,C.jsx)(qe(),{width:i,isDraggable:i>768,isResizable:!1,containerPadding:[0,0],useCSSTransforms:!1,margin:[Ue.hD,Ue.hD],cols:Ue.cz,rowHeight:Ue.K3,draggableHandle:`.grid-drag-handle-${t.state.key}`,layout:n,onDragStop:t.onDragStop,onResizeStop:t.onResizeStop,onLayoutChange:t.onLayoutChange,isBounded:!1,children:n.map((e=>{const i=t.getSceneLayoutChild(e.i);return(0,C.jsx)("div",{style:{display:"flex"},children:(0,C.jsx)(i.Component,{model:i},i.state.key)},i.state.key)}))})})}})}));class Ge extends V{constructor(e){super(Object.assign({isResizable:!1,isDraggable:!0,isCollapsible:!0},e,{size:Object.assign({},e.size,{x:0,height:1,width:Ue.cz})})),Me(this,"onCollapseToggle",(()=>{if(!this.state.isCollapsible)return;const e=this.parent;if(!(e&&e instanceof Fe))throw new Error("SceneGridRow must be a child of SceneGridLayout");e.toggleRow(this)}))}}Me(Ge,"Component",(function(e){let{model:t}=e;const i=(0,x.wW)(He),{isCollapsible:n,isCollapsed:s,isDraggable:a,title:r}=t.useState(),l=t.getLayout(),o=(0,C.jsx)(de,{layoutKey:l.state.key});return(0,C.jsx)("div",{className:i.row,children:(0,C.jsxs)("div",{className:(0,y.cx)(i.rowHeader,s&&i.rowHeaderCollapsed),children:[(0,C.jsxs)("div",{onClick:t.onCollapseToggle,className:i.rowTitleWrapper,children:[n&&(0,C.jsx)(oe.J,{name:s?"angle-right":"angle-down"}),(0,C.jsx)("span",{className:i.rowTitle,children:r})]}),a&&s&&(0,C.jsx)("div",{children:o})]})})}));const He=e=>({row:(0,y.css)({width:"100%",height:"100%",position:"relative",zIndex:0,display:"flex",flexDirection:"column"}),rowHeader:(0,y.css)({width:"100%",height:"30px",display:"flex",justifyContent:"space-between",marginBottom:"8px",border:"1px solid transparent"}),rowTitleWrapper:(0,y.css)({display:"flex",alignItems:"center",cursor:"pointer"}),rowHeaderCollapsed:(0,y.css)({marginBottom:"0px",background:e.colors.background.primary,border:`1px solid ${e.colors.border.weak}`,borderRadius:e.shape.borderRadius(1)}),rowTitle:(0,y.css)({fontSize:e.typography.h6.fontSize,fontWeight:e.typography.h6.fontWeight})});function Be(e){return[...e].sort(((e,t)=>{var i,n,s,a;return(null===(i=e.state.size)||void 0===i?void 0:i.y)-(null===(n=t.state.size)||void 0===n?void 0:n.y)||(null===(s=e.state.size)||void 0===s?void 0:s.x)-(null===(a=t.state.size)||void 0===a?void 0:a.x)}))}function Je(e){return[...e].sort(((e,t)=>e.y-t.y||e.x-t.x))}function We(){const e=new ye((0,n.JK)()),t=(0,ae.CQ)(),i=new ye({from:(0,ae.CQ)(t).subtract(1,"year"),to:t,raw:{from:"now-1y",to:"now"}});return new q({title:"Grid with rows and different queries and time ranges",layout:new Fe({children:[new Ge({$timeRange:i,$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk_table"}]}),title:"Row A - has its own query, last year time range",key:"Row A",isCollapsed:!0,size:{y:0},children:[new he({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1",isResizable:!0,isDraggable:!0,size:{x:0,y:1,width:12,height:5}}),new he({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2",isResizable:!0,isDraggable:!0,size:{x:0,y:5,width:6,height:5}})]}),new he({$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",seriesCount:10}]}),isResizable:!0,isDraggable:!0,pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query",size:{x:0,y:12,width:6,height:10}})]}),$editor:new Ie({}),$timeRange:e,$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]})}var Ke=i(68522),Qe=i(8006);function Ze(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ye extends V{constructor(){super(...arguments),Ze(this,"onToggle",(()=>{this.setState({isCollapsed:!this.state.isCollapsed,size:Object.assign({},this.state.size,{ySizing:this.state.isCollapsed?"fill":"content"})})})),Ze(this,"onRemove",(()=>{const e=this.parent;"children"in e.state&&e.setState({children:e.state.children.filter((e=>e!==this))})}))}}Ze(Ye,"Component",(function(e){let{model:t,isEditing:i}=e;const{title:n,isCollapsed:s,canCollapse:a,canRemove:r,layout:o,actions:d}=t.useState(),c=(0,x.wW)(Xe),u=(null!=d?d:[]).map((e=>(0,C.jsx)(e.Component,{model:e},e.state.key)));r&&u.push((0,C.jsx)(l.h,{icon:"times",variant:"default",onClick:t.onRemove,"aria-label":"Remove scene"},"remove-button"));return(0,C.jsxs)("div",{className:c.row,children:[(0,C.jsxs)("div",{className:c.rowHeader,children:[(0,C.jsxs)(Ke.Stack,{gap:0,children:[(0,C.jsx)("div",{className:c.title,role:"heading","aria-level":1,children:n}),a&&(0,C.jsx)("div",{className:c.toggle,children:(0,C.jsx)(Qe.zx,{size:"sm",icon:s?"angle-down":"angle-up",fill:"text",variant:"secondary","aria-label":s?"Expand scene":"Collapse scene",onClick:t.onToggle})})]}),(0,C.jsx)("div",{className:c.actions,children:u})]}),!s&&(0,C.jsx)(o.Component,{model:o,isEditing:i})]})}));const Xe=e=>({row:(0,y.css)({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(1),cursor:"pointer"}),toggle:(0,y.css)({}),title:(0,y.css)({fontSize:e.typography.h5.fontSize}),rowHeader:(0,y.css)({display:"flex",alignItems:"center",gap:e.spacing(2)}),actions:(0,y.css)({display:"flex",alignItems:"center",gap:e.spacing(1),justifyContent:"flex-end",flexGrow:1})});class et extends V{}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(et,"Component",(function(e){let{model:t}=e;const{children:i}=t.useState();return(0,C.jsx)("div",{style:{display:"flex",gap:"16px"},children:i.map((e=>(0,C.jsx)(e.Component,{model:e},e.state.key)))})}));var tt=i(51389),it=i(25004),nt=i(21888);class st extends V{}function at(e){let{variable:t}=e;const i=t.useState();return i.hide===tt.bU.hideVariable?null:(0,C.jsxs)("div",{className:"gf-form",children:[(0,C.jsx)(rt,{state:i}),(0,C.jsx)(t.Component,{model:t})]})}function rt(e){var t;let{state:i}=e;if(i.hide===tt.bU.hideLabel)return null;const n=`var-${i.key}`,s=null!==(t=i.label)&&void 0!==t?t:i.name;return i.description?(0,C.jsx)(nt.u,{content:i.description,placement:"bottom",children:(0,C.jsx)("label",{className:"gf-form-label gf-form-label--variable","data-testid":it.wl.pages.Dashboard.SubMenu.submenuItemLabels(s),htmlFor:n,children:s})}):(0,C.jsx)("label",{className:"gf-form-label gf-form-label--variable","data-testid":it.wl.pages.Dashboard.SubMenu.submenuItemLabels(s),htmlFor:n,children:s})}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(st,"Component",(function(e){let{model:t}=e;const i=t.getVariables().useState();return(0,C.jsx)(C.Fragment,{children:i.variables.map((e=>(0,C.jsx)(at,{variable:e},e.state.key)))})}));class lt extends D.R{}function ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(lt,"type","scene-variable-changed-value");class dt extends V{constructor(){super(...arguments),ot(this,"variablesThatHaveChanged",new Set),ot(this,"variablesToUpdate",new Set),ot(this,"updating",new Map),ot(this,"onVariableValueChanged",(e=>{const t=e.payload;if(this.variablesThatHaveChanged.add(t),!this.updating.has(t)){for(const e of this.state.variables)e.variableDependency&&e.variableDependency.hasDependencyOn(t.state.name)&&this.variablesToUpdate.add(e);this.updateNextBatch()}}))}getByName(e){return this.state.variables.find((t=>t.state.name===e))}activate(){super.activate(),this._subs.add(this.subscribeToEvent(lt,this.onVariableValueChanged)),this.validateAndUpdateAll()}deactivate(){super.deactivate(),this.variablesToUpdate.clear();for(const e of this.updating.values())e.subscription.unsubscribe()}updateNextBatch(){if(0===this.variablesToUpdate.size&&this.variablesThatHaveChanged.size>0)this.notifyDependentSceneObjects();else for(const e of this.variablesToUpdate){if(!e.validateAndUpdate)throw new Error("Variable added to variablesToUpdate but does not have validateAndUpdate");this.hasDependendencyInUpdateQueue(e)||this.updating.set(e,{variable:e,subscription:e.validateAndUpdate().subscribe({next:()=>this.validateAndUpdateCompleted(e),error:t=>this.handleVariableError(e,t)})})}}validateAndUpdateCompleted(e){const t=this.updating.get(e);null==t||t.subscription.unsubscribe(),this.updating.delete(e),this.variablesToUpdate.delete(e),this.updateNextBatch()}handleVariableError(e,t){e.setState({loading:!1,error:t})}hasDependendencyInUpdateQueue(e){if(!e.variableDependency)return!1;for(const i of this.variablesToUpdate.values()){var t;if(null!==(t=e.variableDependency)&&void 0!==t&&t.hasDependencyOn(i.state.name))return!0}return!1}validateAndUpdateAll(){for(const e of this.state.variables)e.validateAndUpdate&&this.variablesToUpdate.add(e);this.updateNextBatch()}notifyDependentSceneObjects(){this.parent&&(this.traverseSceneAndNotify(this.parent),this.variablesThatHaveChanged.clear())}traverseSceneAndNotify(e){this!==e&&(e.variableDependency&&e.variableDependency.variableValuesChanged(this.variablesThatHaveChanged),$(e.state,(e=>this.traverseSceneAndNotify(e))))}}var ct=i(46060),ut=i(70030),ht=i(70917);function gt(e){let{model:t}=e;const{value:i,key:n,loading:s,isMulti:a,options:r}=t.useState();return a?(0,C.jsx)(ht.NU,{id:n,placeholder:"Select value",width:"auto",value:(0,b.isArray)(i)?i:[i],allowCustomValue:!0,isLoading:s,options:r,onChange:t.onMultiValueChange}):(0,C.jsx)(ht.Ph,{id:n,placeholder:"Select value",width:"auto",value:i,allowCustomValue:!0,isLoading:s,options:r,onChange:t.onSingleValueChange})}var pt=i(2101);function ft(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class bt extends V{constructor(){super(...arguments),ft(this,"onSingleValueChange",(e=>{this.changeValueAndPublishChangeEvent(e.value,e.label)})),ft(this,"onMultiValueChange",(e=>{this.changeValueAndPublishChangeEvent(e.map((e=>e.value)),e.map((e=>e.label)))}))}validateAndUpdate(){return this.getValueOptions({}).pipe((0,pt.U)((e=>(this.updateValueGivenNewOptions(e),{}))))}updateValueGivenNewOptions(e){if(0===e.length)return void this.setStateHelper({value:"?",loading:!1});e.find((e=>e.value===this.state.value))?this.setStateHelper({loading:!1}):this.changeValueAndPublishChangeEvent(e[0].value,e[0].label)}getValue(){return this.state.value}getValueText(){return Array.isArray(this.state.text)?this.state.text.join(" + "):this.state.text}changeValueAndPublishChangeEvent(e,t){e===this.state.value&&t===this.state.text||(this.setStateHelper({value:e,text:t,loading:!1}),this.publishEvent(new lt(this),!0))}setStateHelper(e){this.setState(e)}}function wt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class vt extends bt{constructor(){super(...arguments),wt(this,"completeUpdate",new u.x),wt(this,"isGettingValues",!0),wt(this,"_variableDependency",new G(this,{statePaths:["query"]}))}getValueOptions(e){const{delayMs:t}=this.state;return new ct.y((e=>{let i;return this.setState({loading:!0}),this.completeUpdate.subscribe({next:()=>{e.next(this.issueQuery())}}),t&&(i=setTimeout((()=>this.signalUpdateCompleted()),t)),this.isGettingValues=!0,()=>{clearTimeout(i),this.isGettingValues=!1}}))}issueQuery(){const e=v(this.state.query,this),t=(0,ut.H)(e).map((e=>({label:e.name,value:e.name})));return this.setState({issuedQuery:e,options:t}),t}signalUpdateCompleted(){this.completeUpdate.next(1)}}function mt(){return[new q({title:"Flex layout test",layout:new be({direction:"row",children:[new he({size:{minWidth:"70%"},pluginId:"timeseries",title:"Dynamic height and width"}),new be({direction:"column",children:[new he({pluginId:"timeseries",title:"Fill height"}),new he({pluginId:"timeseries",title:"Fill height"}),new J({size:{ySizing:"content"},text:"Size to content",fontSize:20,align:"center"}),new he({size:{height:300},pluginId:"timeseries",title:"Fixed height"})]})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:Ne(),actions:[new ee({})]}),Pe(),new q({title:"Nested Scene demo",layout:new be({direction:"column",children:[(e="Inner scene",new Ye({title:e,canRemove:!0,canCollapse:!0,layout:new be({direction:"row",children:[new he({key:"3",pluginId:"timeseries",title:"Data"})]}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]})),new he({key:"3",pluginId:"timeseries",title:"Panel 3"})]}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]}),new q({title:"Scene with rows",layout:new be({direction:"column",children:[new Ye({title:"Overview",canCollapse:!0,layout:new be({direction:"row",children:[new he({pluginId:"timeseries",title:"Fill height"}),new he({pluginId:"timeseries",title:"Fill height"})]})}),new Ye({title:"More server details",canCollapse:!0,layout:new be({direction:"row",children:[new he({pluginId:"timeseries",title:"Fill height"}),new he({pluginId:"timeseries",title:"Fill height"})]})})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:Ne(),actions:[new ee({})]}),new q({title:"Grid layout test",layout:new Fe({children:[new he({isResizable:!0,isDraggable:!0,pluginId:"timeseries",title:"Draggable and resizable",size:{x:0,y:0,width:12,height:10}}),new he({pluginId:"timeseries",title:"No drag and no resize",isResizable:!1,isDraggable:!1,size:{x:12,y:0,width:12,height:10}}),new be({direction:"column",isDraggable:!0,isResizable:!0,size:{x:6,y:11,width:12,height:10},children:[new he({size:{ySizing:"fill"},pluginId:"timeseries",title:"Child of flex layout"}),new he({size:{ySizing:"fill"},pluginId:"timeseries",title:"Child of flex layout"})]})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]}),new q({title:"Grid with row layout test",layout:new Fe({children:[new Ge({title:"Row A",key:"Row A",isCollapsed:!0,size:{y:0},children:[new he({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1",isResizable:!0,isDraggable:!0,size:{x:0,y:1,width:12,height:5}}),new he({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2",isResizable:!0,isDraggable:!0,size:{x:0,y:5,width:6,height:5}})]}),new Ge({title:"Row B",key:"Row B",isCollapsed:!0,size:{y:1},children:[new he({pluginId:"timeseries",title:"Row B Child1",key:"Row B Child1",isResizable:!1,isDraggable:!0,size:{x:0,y:2,width:12,height:5}}),new he({pluginId:"timeseries",title:"Row B Child2",key:"Row B Child2",isResizable:!1,isDraggable:!0,size:{x:0,y:7,width:6,height:5}})]}),new he({isResizable:!0,isDraggable:!0,pluginId:"timeseries",title:"Outsider",key:"Outsider",size:{x:2,y:12,width:12,height:10}})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]}),new q({title:"Grid with rows and different queries",layout:new Fe({children:[new Ge({$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk_table"}]}),title:"Row A - has its own query",key:"Row A",isCollapsed:!0,size:{y:0},children:[new he({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1",isResizable:!0,isDraggable:!0,size:{x:0,y:1,width:12,height:5}}),new he({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2",isResizable:!0,isDraggable:!0,size:{x:0,y:5,width:6,height:5}})]}),new Ge({title:"Row B - uses global query",key:"Row B",isCollapsed:!0,size:{y:1},children:[new he({pluginId:"timeseries",title:"Row B Child1",key:"Row B Child1",isResizable:!1,isDraggable:!0,size:{x:0,y:2,width:12,height:5}}),new he({$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",seriesCount:10}]}),pluginId:"timeseries",title:"Row B Child2 with data",key:"Row B Child2",isResizable:!1,isDraggable:!0,size:{x:0,y:7,width:6,height:5}})]}),new he({$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",seriesCount:10}]}),isResizable:!0,isDraggable:!0,pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query",size:{x:0,y:12,width:6,height:10}}),new he({isResizable:!0,isDraggable:!0,pluginId:"timeseries",title:"Outsider, uses global query",key:"Outsider-global-query",size:{x:6,y:12,width:12,height:10}})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]}),We(),new q({title:"Multiple grid layouts test",layout:new be({children:[new Fe({children:[new he({size:{x:0,y:0,width:12,height:10},isDraggable:!0,isResizable:!0,pluginId:"timeseries",title:"Dragabble and resizable"}),new he({isResizable:!1,isDraggable:!0,size:{x:12,y:0,width:12,height:10},pluginId:"timeseries",title:"Draggable only"}),new be({isResizable:!0,isDraggable:!0,size:{x:6,y:11,width:12,height:10},direction:"column",children:[new he({size:{ySizing:"fill"},pluginId:"timeseries",title:"Fill height"}),new he({size:{ySizing:"fill"},pluginId:"timeseries",title:"Fill height"})]})]}),new Fe({children:[new he({size:{x:0,y:0,width:12,height:10},isDraggable:!0,pluginId:"timeseries",title:"Fill height"}),new he({isResizable:!1,isDraggable:!0,size:{x:12,y:0,width:12,height:10},pluginId:"timeseries",title:"Fill height"}),new be({size:{x:6,y:11,width:12,height:10},direction:"column",children:[new he({size:{ySizing:"fill"},isDraggable:!0,pluginId:"timeseries",title:"Fill height"}),new he({isDraggable:!0,size:{ySizing:"fill"},pluginId:"timeseries",title:"Fill height"})]})]})]}),$editor:new Ie({}),$timeRange:new ye((0,n.JK)()),$data:new Ee({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk"}]}),actions:[new ee({})]}),new q({title:"Variables",$variables:new dt({variables:[new vt({name:"server",query:"A.*",value:"server",text:"",delayMs:1e3,options:[]}),new vt({name:"pod",query:"A.$server.*",value:"pod",delayMs:1e3,text:"",options:[]}),new vt({name:"handler",query:"A.$server.$pod.*",value:"handler",delayMs:1e3,text:"",options:[]})]}),layout:new be({direction:"row",children:[new be({children:[new he({pluginId:"timeseries",title:"handler: $handler",$data:Ne({alias:"handler: $handler"})}),new J({size:{width:"40%"},text:"server - pod: ${server} - ${pod}",fontSize:20,align:"center"})]})]}),$timeRange:new ye((0,n.JK)()),actions:[new ee({})],subMenu:new et({children:[new st({})]})})];var e}wt(vt,"Component",(e=>{let{model:t}=e;return(0,C.jsx)(gt,{model:t})}));const yt={};function xt(e){if(yt[e])return yt[e];const t=mt().find((t=>t.state.title===e));return t&&(yt[e]=t),t}},70030:(e,t,i)=>{function n(e,t){const i=["A","B","C"],s=[];if(t>5)return[];for(const a of i){const i=`${e}${a}`;s.push({name:i,children:n(i,t+1)})}return s}function s(e,t,i){if(i>=t.length)return e;if("*"===t[i])return e;const n=t[i];let a=[],r=[n];n.startsWith("{")&&(r=n.replace(/\{|\}/g,"").split(","));for(const n of e)for(const e of r)if(-1!==e.indexOf("*")){const r=e.replace("*","");new RegExp(`^${r}.*`,"gi").test(n.name)&&(a=a.concat(s([n],t,i+1)))}else n.name===e&&(a=a.concat(s(n.children,t,i+1)));return a}function a(e){if(0===e.indexOf("value"))return[{name:e,children:[]}];return s(n("",0),e.split("."),0)}i.d(t,{H:()=>a})}}]);
//# sourceMappingURL=scenes.327cff3bd72cbcbbac9d.js.map