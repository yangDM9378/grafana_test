"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5981],{53338:(e,a,s)=>{s.d(a,{Z:()=>o});var n=s(68404),t=s(39106),r=s(8006),i=s(45916);class o extends n.PureComponent{render(){const{searchQuery:e,linkButton:a,setSearchQuery:s,target:n,placeholder:o="Search by name or type"}=this.props,c={href:null==a?void 0:a.href,disabled:null==a?void 0:a.disabled};return n&&(c.target=n),(0,i.jsxs)("div",{className:"page-action-bar",children:[(0,i.jsx)("div",{className:"gf-form gf-form--grow",children:(0,i.jsx)(t.H,{value:e,onChange:s,placeholder:o})}),a&&(0,i.jsx)(r.Qj,Object.assign({},c,{children:a.title}))]})}}},20232:(e,a,s)=>{s.r(a),s.d(a,{default:()=>V});var n=s(68404),t=s(70356),r=s(79195),i=s(64850),o=s(54069),c=s(37417),l=s(52423),d=s(16755),u=s(38953),g=s(69104),p=s(1129),h=s(45916);const x=e=>({sourcesList:l.css`
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
    list-style: none;
    margin-bottom: 80px;
  `,card:l.css`
    height: 90px;
    padding: 0px 24px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.6);
  `,cardContent:l.css`
    display: flex;
    align-items: center;
  `,logoWrapper:l.css`
    display: flex;
    justify-content: center;
    margin-right: 8px;
    width: 32px;
    height: 32px;
    img {
      max-width: 100%;
      max-height: 100%;
      align-self: center;
    }
  `,label:l.css`
    color: ${e.colors.text.primary};
    margin-bottom: 0;
  `}),m=e=>{let{items:a}=e;const s=(0,d.wW)(x);return(0,h.jsx)("ul",{className:s.sourcesList,children:a.map((e=>(0,h.jsx)(p.Z,{className:s.card,href:e.url,children:(0,h.jsx)(p.Z.Heading,{children:(0,h.jsxs)("div",{className:s.cardContent,children:[e.logo&&(0,h.jsx)("div",{className:s.logoWrapper,children:(0,h.jsx)("img",{src:e.logo,alt:`logo of ${e.name}`})}),(0,h.jsx)("h4",{className:s.label,children:e.name})]})})},e.id)))})};var f=s(99500);const j=e=>({categoryHeader:l.css`
    align-items: center;
    display: flex;
    margin-bottom: 24px;
  `,categoryLabel:l.css`
    margin-bottom: 0px;
    margin-left: 8px;
  `}),v=e=>{let{iconName:a,label:s}=e;const n=(0,d.wW)(j);return(0,h.jsxs)("div",{className:n.categoryHeader,children:[(0,h.jsx)(f.J,{name:a,size:"xl"}),(0,h.jsx)("h3",{className:n.categoryLabel,children:s})]})},y=()=>({noResults:l.css`
    text-align: center;
    padding: 50px 0;
    font-style: italic;
  `}),S=()=>{const e=(0,d.wW)(y);return(0,h.jsx)("p",{className:e.noResults,children:"No results matching your query were found."})};var b,C=s(4645);const N=()=>({searchContainer:l.css`
    display: flex;
    margin: 16px 0;
    justify-content: space-between;
  `}),w=e=>{let{onChange:a}=e;const s=(0,d.wW)(N);return(0,h.jsx)("div",{className:s.searchContainer,children:(0,h.jsx)(C.I,{onChange:a,prefix:b||(b=(0,h.jsx)(f.J,{name:"search"})),placeholder:"Search all","aria-label":"Search all"})})};var D,T,P;const L=()=>({spacer:l.css`
    height: 16px;
  `});function Z(){const[e,a]=(0,n.useState)(""),s=(0,d.wW)(L),{isLoading:t,error:r,plugins:i}=(0,g.GE)({query:e,filterBy:""}),c=(0,n.useMemo)((()=>i.map((e=>({id:e.id,name:e.name,logo:e.info.logos.small,url:o.Z6.DataSourcesDetails.replace(":id",e.id)})))),[i]),l=(0,n.useMemo)((()=>!t&&!r&&i.length<1),[t,r,i]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{onChange:e=>{a(e.currentTarget.value.toLowerCase())}}),(0,h.jsx)("div",{className:s.spacer}),D||(D=(0,h.jsx)(v,{iconName:"database",label:"Data sources"})),t?T||(T=(0,h.jsx)(u.u,{text:"Loading..."})):r?(0,h.jsxs)("p",{children:["Error: ",r.message]}):(0,h.jsx)(m,{items:c}),l&&(P||(P=(0,h.jsx)(S,{})))]})}var I,k;function A(){return I||(I=(0,h.jsx)(c.T,{navId:"connections-connect-data",children:(0,h.jsx)(c.T.Contents,{children:(0,h.jsx)(Z,{})})}))}function Q(){const e="standalone-plugin-page-/connections/connect-data",a=(0,i.v9)((e=>e.navIndex)),s=Boolean(a[e])?e:"connections-connect-data";return(0,h.jsx)(c.T,{navId:s,pageNav:{text:"Datasource details",subTitle:"This is going to be the details page for a datasource",active:!0},children:k||(k=(0,h.jsx)(c.T.Contents,{children:"Data Source Details (no exposed component from plugins yet)"}))})}var W,_=s(38484);function F(){return W||(W=(0,h.jsx)(c.T,{navId:"connections-your-connections-datasources",children:(0,h.jsx)(c.T.Contents,{children:(0,h.jsx)(_.c,{})})}))}var H=s(7685),E=s(46216);function B(){const{uid:e}=(0,t.UO)(),a=(0,t.TH)(),s=(0,E.wl)(e),n=(0,g.bJ)(s.type),r=new URLSearchParams(a.search).get("page");return(0,h.jsx)(c.T,{navId:"connections-your-connections-datasources",pageNav:{text:s.name,subTitle:`Type: ${null==n?void 0:n.name}`,active:!0},children:(0,h.jsx)(c.T.Contents,{children:(0,h.jsx)(H.H,{uid:e,pageId:r})})})}var U,z,R=s(14514);function M(){return(0,h.jsx)(c.T,{navId:"connections-your-connections-datasources",pageNav:{text:"Add data source",subTitle:"Choose a data source type",active:!0},children:U||(U=(0,h.jsx)(c.T.Contents,{children:(0,h.jsx)(R.x,{})}))})}function V(){const e=(0,i.v9)((e=>e.navIndex)),a=Boolean(e["standalone-plugin-page-/connections/connect-data"]);return(0,h.jsx)(r.Vj.Provider,{value:{New:o.Z6.DataSourcesNew,List:o.Z6.DataSources,Edit:o.Z6.DataSourcesEdit,Dashboards:o.Z6.DataSourcesDashboards},children:(0,h.jsxs)(t.rs,{children:[(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.Base,component:F}),(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.YourConnections,component:F}),(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.DataSources,component:F}),(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.DataSourcesDetails,component:Q}),(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.DataSourcesNew,component:M}),(0,h.jsx)(t.AW,{exact:!0,path:o.Z6.DataSourcesEdit,component:B}),!a&&(0,h.jsx)(t.AW,{path:o.Z6.ConnectData,component:A}),z||(z=(0,h.jsx)(t.AW,{component:F}))]})})}},38484:(e,a,s)=>{s.d(a,{c:()=>S});var n,t,r,i=s(52423),o=s(68404),c=s(65737),l=s(16755),d=s(1129),u=s(51028),g=s(75442),p=s(71031),h=s(68374),x=s(64850),m=s(79195),f=s(53338),j=s(45916);function v(){const e=(0,x.I0)(),a=(0,o.useCallback)((a=>e((0,m.zT)(a))),[e]),s=(0,x.v9)((e=>{let{dataSources:a}=e;return(0,m.IO)(a)})),n=h.Vt.hasPermission(x.bW.DataSourcesCreate);return(0,j.jsx)(y,{searchQuery:s,setSearchQuery:a,canCreateDataSource:n})}function y(e){let{searchQuery:a,setSearchQuery:s,canCreateDataSource:n}=e;const t={href:(0,m.d7)().New,title:"Add data source",disabled:!n};return(0,j.jsx)(f.Z,{searchQuery:a,setSearchQuery:s,linkButton:t},"action-bar")}function S(){(0,m.zJ)();const e=(0,x.v9)((e=>(0,m.mt)(e.dataSources))),a=(0,x.v9)((e=>{let{dataSources:a}=e;return(0,m.r7)(a)})),s=(0,x.v9)((e=>{let{dataSources:a}=e;return a.hasFetched})),n=h.Vt.hasPermission(x.bW.DataSourcesCreate);return(0,j.jsx)(b,{dataSources:e,dataSourcesCount:a,isLoading:!s,hasCreateRights:n})}function b(e){let{dataSources:a,dataSourcesCount:s,isLoading:i,hasCreateRights:o}=e;const h=(0,l.wW)(C),x=(0,m.d7)();return i?n||(n=(0,j.jsx)(p.Z,{})):0===s?(0,j.jsx)(g.Z,{buttonDisabled:!o,title:"No data sources defined",buttonIcon:"database",buttonLink:x.New,buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"}):(0,j.jsxs)(j.Fragment,{children:[t||(t=(0,j.jsx)(v,{})),(0,j.jsx)("ul",{className:h.list,children:a.map((e=>{const a=c.v.appSubUrl+x.Edit.replace(/:uid/gi,e.uid);return(0,j.jsx)("li",{children:(0,j.jsxs)(d.Z,{href:a,children:[(0,j.jsx)(d.Z.Heading,{children:e.name}),(0,j.jsx)(d.Z.Figure,{children:(0,j.jsx)("img",{src:e.typeLogoUrl,alt:"",height:"40px",width:"40px",className:h.logo})}),(0,j.jsx)(d.Z.Meta,{children:[e.typeName,e.url,e.isDefault&&(r||(r=(0,j.jsx)(u.V,{name:"default",colorIndex:1},"default-tag")))]})]})},e.uid)}))})]})}const C=()=>({list:(0,i.css)({listStyle:"none",display:"grid"}),logo:(0,i.css)({objectFit:"contain"})})},14514:(e,a,s)=>{s.d(a,{x:()=>I});s(68404);var n,t=s(39106),r=s(8006),i=s(71031),o=s(52423),c=s(15546),l=s(25004),d=s(16755),u=s(89902),g=s(89645),p=s(54761),h=s(38437),x=s(69104),m=s(45916);function f(){const e=(0,x.UQ)(),{isLoading:a}=(0,x.ZV)(),s=(0,d.wW)(v);return a||0===e.length?null:(0,m.jsx)(u.v,{"aria-label":l.wl.pages.PluginsList.signatureErrorNotice,severity:"warning",urlTitle:"Read more about plugin signing",url:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",children:(0,m.jsxs)("div",{children:[n||(n=(0,m.jsx)("p",{children:"Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins."})),"The following plugins are disabled and not shown in the list below:",(0,m.jsx)(g.a,{items:e,className:s.list,renderItem:e=>(0,m.jsx)("div",{className:s.wrapper,children:(0,m.jsxs)(p.Lh,{spacing:"sm",justify:"flex-start",align:"center",children:[(0,m.jsx)("strong",{children:e.pluginId}),(0,m.jsx)(h.o,{status:j(e.errorCode),className:s.badge})]})})})]})})}function j(e){switch(e){case c.w2.invalidSignature:return c.Xy.invalid;case c.w2.missingSignature:return c.Xy.missing;case c.w2.modifiedSignature:return c.Xy.modified;default:return c.Xy.missing}}function v(e){return{list:(0,o.css)({listStyleType:"circle"}),wrapper:(0,o.css)({marginTop:e.spacing(1)}),badge:(0,o.css)({marginTop:0})}}var y,S=s(64850),b=s(1129);function C(e){var a,s;let{onClick:n,dataSourcePlugin:t}=e;const i="phantom"===t.module,c=!i&&!t.unlicensed,u=(null===(a=t.info)||void 0===a||null===(s=a.links)||void 0===s?void 0:s.length)>0?t.info.links[0]:null,g=(0,d.wW)(N);return(0,m.jsxs)(b.Z,{className:(0,o.cx)(g.card,"card-parent"),onClick:c?n:()=>{},children:[(0,m.jsx)(b.Z.Heading,{className:g.heading,"aria-label":l.wl.pages.AddDataSource.dataSourcePluginsV2(t.name),children:t.name}),(0,m.jsx)(b.Z.Figure,{align:"center",className:g.figure,children:(0,m.jsx)("img",{className:g.logo,src:t.info.logos.small,alt:""})}),(0,m.jsx)(b.Z.Description,{className:g.description,children:t.info.description}),!i&&(0,m.jsx)(b.Z.Meta,{className:g.meta,children:(0,m.jsx)(h.o,{status:t.signature})}),(0,m.jsx)(b.Z.Actions,{className:g.actions,children:u&&(0,m.jsx)(r.Qj,{"aria-label":`${t.name}, learn more.`,href:`${u.url}?utm_source=grafana_add_ds`,icon:"external-link-alt",onClick:e=>e.stopPropagation(),rel:"noopener",target:"_blank",variant:"secondary",children:u.name})})]})}function N(e){return{heading:(0,o.css)({fontSize:e.v1.typography.heading.h5,fontWeight:"inherit"}),figure:(0,o.css)({width:"inherit",marginRight:"0px","> img":{width:e.spacing(7)}}),meta:(0,o.css)({marginTop:"6px",position:"relative"}),description:(0,o.css)({margin:"0px",fontSize:e.typography.size.sm}),actions:(0,o.css)({position:"relative",alignSelf:"center",marginTop:"0px",opacity:0,".card-parent:hover &, .card-parent:focus-within &":{opacity:1}}),card:(0,o.css)({gridTemplateAreas:'\n        "Figure   Heading   Actions"\n        "Figure Description Actions"\n        "Figure    Meta     Actions"\n        "Figure     -       Actions"'}),logo:(0,o.css)({marginRight:e.v1.spacing.lg,marginLeft:e.v1.spacing.sm,width:e.spacing(7),maxHeight:e.spacing(7)})}}function w(e){let{dataSourcePlugins:a,onClickDataSourceType:s}=e;return a&&a.length?(0,m.jsx)(g.a,{items:a,getItemKey:e=>e.id.toString(),renderItem:e=>(0,m.jsx)(C,{dataSourcePlugin:e,onClick:()=>s(e)}),className:o.css`
        > li {
          margin-bottom: 2px;
        }
      `}):null}function D(e){let{categories:a,onClickDataSourceType:s}=e;return(0,m.jsxs)(m.Fragment,{children:[a.map((e=>{let{id:a,title:n,plugins:t}=e;return(0,m.jsxs)("div",{className:"add-data-source-category",children:[(0,m.jsx)("div",{className:"add-data-source-category__header",id:a,children:n}),(0,m.jsx)(w,{dataSourcePlugins:t,onClickDataSourceType:s})]},a)})),y||(y=(0,m.jsx)("div",{className:"add-data-source-more",children:(0,m.jsx)(r.Qj,{variant:"secondary",href:"https://grafana.com/plugins?type=datasource&utm_source=grafana_add_ds",target:"_blank",rel:"noopener",children:"Find more data source plugins on grafana.com"})}))]})}var T,P,L,Z=s(79195);function I(){(0,Z.OU)();const e=(0,S.I0)(),a=(0,S.v9)((e=>(0,Z.I5)(e.dataSources))),s=(0,S.v9)((e=>e.dataSources.dataSourceTypeSearchQuery)),n=(0,S.v9)((e=>e.dataSources.isLoadingDataSources)),t=(0,S.v9)((e=>e.dataSources.categories)),r=(0,Z.nH)();return(0,m.jsx)(k,{dataSources:a,dataSourceCategories:t,searchQuery:s,isLoading:n,onAddDataSource:r,onSetSearchQuery:a=>e((0,Z.Ht)(a))})}function k(e){let{dataSources:a,dataSourceCategories:s,searchQuery:n,isLoading:o,onAddDataSource:c,onSetSearchQuery:l}=e;const d=(0,Z.d7)();return o?T||(T=(0,m.jsx)(i.Z,{})):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"page-action-bar",children:[(0,m.jsx)(t.H,{value:n,onChange:l,placeholder:"Filter by name or type"}),P||(P=(0,m.jsx)("div",{className:"page-action-bar__spacer"})),(0,m.jsx)(r.Qj,{href:d.List,fill:"outline",variant:"secondary",icon:"arrow-left",children:"Cancel"})]}),!n&&(L||(L=(0,m.jsx)(f,{}))),(0,m.jsxs)("div",{children:[n&&(0,m.jsx)(w,{dataSourcePlugins:a,onClickDataSourceType:c}),!n&&(0,m.jsx)(D,{categories:s,onClickDataSourceType:c})]})]})}},69104:(e,a,s)=>{s.d(a,{iY:()=>Q,bt:()=>L,ZV:()=>P,GE:()=>b,UQ:()=>N,bJ:()=>C,x3:()=>w,IS:()=>Z,y9:()=>T,S1:()=>D,wq:()=>I});var n=s(68404),t=s(64850),r=s(13467),i=s(71482),o=s(45919),c=s(4387),l=s(56949),d=s(95796);const u=e=>e.plugins,g=(0,c.P1)(u,(e=>{let{items:a}=e;return a})),p=(0,c.P1)(u,(e=>{let{settings:a}=e;return a.displayMode})),{selectAll:h,selectById:x}=o.CD.getSelectors(g),m=(e,a)=>(0,c.P1)((e=>(0,c.P1)(h,(a=>a.filter((a=>"installed"===e?a.isInstalled:!a.isCore)))))(e),(e=>e.filter((e=>"all"===a||e.type===a)))),f=(e,a,s)=>(0,c.P1)(m(a,s),(e=>(0,c.P1)(h,(a=>""===e?[]:a.filter((a=>{const s=[];return a.name&&s.push(a.name.toLowerCase()),a.orgName&&s.push(a.orgName.toLowerCase()),s.some((a=>a.includes((0,l.x6)(e).toLowerCase())))})))))(e),((a,s)=>""===e?a:s)),j=(0,c.P1)(h,(e=>e?e.filter((e=>Boolean(e.error))).map((e=>({pluginId:e.id,errorCode:e.error}))):[])),v=e=>(0,c.P1)(u,(a=>{let{requests:s={}}=a;return s[e]})),y=e=>(0,c.P1)(v(e),(e=>(null==e?void 0:e.status)===d.eE.Pending)),S=e=>(0,c.P1)(v(e),(e=>(null==e?void 0:e.status)===d.eE.Rejected?null==e?void 0:e.error:null)),b=e=>{let{query:a="",filterBy:s="installed",filterByType:n="all",sortBy:i=r.Nh.nameAsc}=e;k();const o=(0,t.v9)(f(a,s,n)),{isLoading:c,error:l}=P();return{isLoading:c,error:l,plugins:(0,r.AA)(o,i)}},C=e=>(k(),A(e),(0,t.v9)((a=>x(a,e)))),N=()=>(k(),(0,t.v9)(j)),w=()=>{const e=(0,t.I0)();return(a,s,n)=>e((0,i.N9)({id:a,version:s,isUpdating:n}))},D=()=>{const e=(0,t.I0)();return a=>e((0,i.Tz)(a))},T=()=>null===(0,t.v9)(S(i.tQ.typePrefix)),P=()=>({isLoading:(0,t.v9)(y(i.Qd.typePrefix)),error:(0,t.v9)(S(i.Qd.typePrefix))}),L=()=>({isLoading:(0,t.v9)(y(i.DD.typePrefix)),error:(0,t.v9)(S(i.DD.typePrefix))}),Z=()=>({isInstalling:(0,t.v9)(y(i.N9.typePrefix)),error:(0,t.v9)(S(i.N9.typePrefix))}),I=()=>({isUninstalling:(0,t.v9)(y(i.Tz.typePrefix)),error:(0,t.v9)(S(i.Tz.typePrefix))}),k=()=>{const e=(0,t.I0)(),a=(0,t.v9)((s=i.Qd.typePrefix,(0,c.P1)(v(s),(e=>void 0===e))));var s;(0,n.useEffect)((()=>{a&&e((0,i.Qd)())}),[])},A=e=>{const a=(0,t.I0)(),s=(0,t.v9)((a=>x(a,e))),r=!(0,t.v9)(y(i.DD.typePrefix))&&s&&!s.details;(0,n.useEffect)((()=>{r&&a((0,i.DD)(e))}),[s])},Q=()=>{const e=(0,t.I0)();return{displayMode:(0,t.v9)(p),setDisplayMode:a=>e((0,o.UC)(a))}}}}]);
//# sourceMappingURL=Connections.ea939eb6e6530ed87427.js.map