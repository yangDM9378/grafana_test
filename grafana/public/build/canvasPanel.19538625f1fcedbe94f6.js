/*! For license information please see canvasPanel.19538625f1fcedbe94f6.js.LICENSE.txt */
"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{64896:(t,e,n)=>{n.d(e,{f:()=>i});n(68404);var r=n(15013),o=n(45916);const i=t=>{let{onChange:e,options:n,label:i}=t;return(0,o.jsx)(r.b,{icon:"plus",label:i,variant:"secondary",options:n,onChange:e,isFullWidth:!0})}},35434:(t,e,n)=>{n.r(e),n.d(e,{addStandardCanvasEditorOptions:()=>wf,plugin:()=>Df});var r=n(18151),o=n(15399),i=n(82897),a=n(68404),s=n(14667),l=n(7370);let c,u;!function(t){t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom"}(c||(c={})),function(t){t.ElementManagement="element-management",t.SelectedElement="selected-element"}(u||(u={}));var d,f=n(8577),p=n(65001),h=n(45916);function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const g=10,m=50,b={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>d||(d=(0,h.jsx)("div",{children:"FRAME!"}))};class y extends p.f{constructor(t,e,n){var r;super(b,t,n),r=this,v(this,"elements",[]),v(this,"scene",void 0),v(this,"doAction",(function(t,e){var n;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];switch(t){case c.Delete:r.elements=r.elements.filter((t=>t!==e)),r.scene.byName.delete(e.options.name),r.scene.save(),r.reinitializeMoveable();break;case c.Duplicate:if("frame"===e.item.id)return void console.log("Can not duplicate frames (yet)",t,e);const l=(0,i.cloneDeep)(e.options);if(a){var s;const{constraint:t,placement:n}=e.options,{vertical:r,horizontal:o}=null!=t?t:{},i=null!==(s=Object.assign({},n))&&void 0!==s?s:{};switch(r){case f.fJ.Top:null==i.top?i.top=25:i.top+=g;break;case f.fJ.Bottom:null==i.bottom?i.bottom=100:i.bottom-=g;break;case f.fJ.TopBottom:null==i.top?i.top=25:i.top+=g,null==i.bottom?i.bottom=100:i.bottom-=g;break;case f.fJ.Center:null!=i.top&&(i.top-=g)}switch(o){case f._5.Left:null==i.left?i.left=m:i.left+=g;break;case f._5.Right:null==i.right?i.right=m:i.right-=g;break;case f._5.LeftRight:null==i.left?i.left=m:i.left+=g,null==i.right?i.right=m:i.right-=g;break;case f._5.Center:null!=i.left&&(i.left-=g)}l.placement=i}const u=new p.f(e.item,l,r);u.updateData(r.scene.context),o&&(u.options.name=r.scene.getNextElementName()),r.elements.push(u),r.scene.byName.set(u.options.name,u),r.scene.save(),r.reinitializeMoveable();break;case c.MoveTop:case c.MoveBottom:null===(n=e.parent)||void 0===n||n.doMove(e,t);break;default:return void console.log("DO action",t,e)}})),this.options=t,this.parent=n,this.scene=e;let{elements:o}=this.options;o||(this.options.elements=o=[]);for(const t of o)if("frame"===t.type)this.elements.push(new y(t,e,this));else{var a;const e=null!==(a=s.Jk.getIfExists(t.type))&&void 0!==a?a:l.C;this.elements.push(new p.f(e,t,this))}}isRoot(){return!1}updateData(t){super.updateData(t);for(const e of this.elements)e.updateData(t)}reorder(t,e){const n=Array.from(this.elements),[r]=n.splice(t,1);n.splice(e,0,r),this.elements=n,this.reinitializeMoveable()}reorderTree(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Array.from(this.elements),o=this.elements.indexOf(t),i=n?this.elements.length-1:this.elements.indexOf(e),[a]=r.splice(o,1);r.splice(i,0,a),this.elements=r,this.reinitializeMoveable()}doMove(t,e){const n=this.elements.filter((e=>e!==t));e===c.MoveBottom?n.unshift(t):n.push(t),this.elements=n,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout((()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled)))}render(){return(0,h.jsx)("div",{ref:this.initElement,children:this.elements.map((t=>t.render()))},this.UID)}visit(t){super.visit(t);for(const e of this.elements)t(e)}getSaveModel(){return Object.assign({},this.options,{elements:this.elements.map((t=>t.getSaveModel()))})}}var x=n(16527),E=n(95484),S=n(80795),C=n(27783),w=n(52423);function D(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function M(t,e){return function(n){n&&(t[e]=n)}}function k(t,e,n){return function(r){r&&(t[e][n]=r)}}function O(t,e){return function(n){var r=n.prototype;t.forEach((function(t){e(r,t)}))}}var R=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,o=n.indexOf(t),i=-1===o?n.length:o;n[i]=t,r[i]=e},t}(),_=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),P="function"==typeof Map,T=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var A=function(){function t(t,e,n,r,o,i,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=o,this.maintained=i,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach((function(t){var e=t[0],o=t[1],i=new T;n[e]=i,r[o]=i})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var o=t[0],i=t[1];if(o===i)return[0,0];var a=n[o],s=r[i-1],l=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[l,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,r){var o=t[0],i=t[1],a=e[r],s=a[0],l=a[1];if(o!==i)return n.push([s,l]),!0})),this.cachePureChanged=n},t}();function N(t,e,n){var r=P?Map:n?_:R,o=n||function(t){return t},i=[],a=[],s=[],l=t.map(o),c=e.map(o),u=new r,d=new r,f=[],p=[],h={},v=[],g=0,m=0;return l.forEach((function(t,e){u.set(t,e)})),c.forEach((function(t,e){d.set(t,e)})),l.forEach((function(t,e){var n=d.get(t);void 0===n?(++m,a.push(e)):h[n]=m})),c.forEach((function(t,e){var n=u.get(t);void 0===n?(i.push(e),++g):(s.push([n,e]),m=h[e]||0,f.push([n-m,e-g]),p.push(e===n),n!==e&&v.push([n,e]))})),a.reverse(),new A(t,e,i,a,v,s,f,p)}var B=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=N(this.list,e,this.findKeyCallback);return this.list=e,n},t}();const j=B;var z="undefined",I=(typeof document!==z&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),G=1e-7;function K(t){return t&&"object"==typeof t}function F(t){return Array.isArray(t)}function L(t){return"string"==typeof t}function W(t){return"function"==typeof t}function Y(t,e,n,r,o){return H(t,e,n)?n:function(t,e,n,r,o){for(var i,a=function(n){var a=e[n].trim();if(a===t.close&&!H(t,e,n))return{value:n};var s=n,l=Q(o,(function(t){return t.open===a}));if(l&&(s=Y(l,e,n,r,o)),-1===s)return i=n,"break";i=n=s},s=n;s<r;++s){var l=a(s);if(s=i,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,r,o)}function H(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function X(t,e){var n=L(e)?{separator:e}:e,r=n.separator,o=void 0===r?",":r,i=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=void 0===s?a:s,c=n.openCloseCharacters,u=void 0===c?I:c,d=u.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),f=new RegExp("(\\s*"+o+"\\s*|"+d+"|\\s+)","g"),p=t.split(f).filter(Boolean),h=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b,y=function(t){var e=p[t].trim(),n=t,r=Q(u,(function(t){return t.open===e})),s=Q(u,(function(t){return t.close===e}));if(r){if(-1!==(n=Y(r,p,t,h,u))&&l)return m()&&i?(b=t,"break"):(v.push(p.slice(t,n+1).join("")),t=n,i?(b=t,"break"):(b=t,"continue"))}else{if(s&&!H(s,p,t))throw new Error("invalid format: "+s.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(e,o)&&!a)return m(),i?(b=t,"break"):(b=t,"continue")}-1===n&&(n=h-1),g.push(p.slice(t,n+1).join("")),b=t=n},x=0;x<h;++x){var E=y(x);if(x=b,"break"===E)break}return g.length&&v.push(g.join("")),v}function q(t){return X(t,",")}function V(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function U(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function Z(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,r){return""+n+e+r.toLowerCase()}))}function $(){return Date.now?Date.now():(new Date).getTime()}function J(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}function Q(t,e,n){var r=J(t,e);return r>-1?t[r]:n}function tt(t,e){return e?Math.round(t/e)*e:t}var et=function(t,e){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},et(t,e)};function nt(t,e){function n(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var rt=function(){return rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rt.apply(this,arguments)};function ot(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function it(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function at(t,e){var n=Object.keys(t),r=Object.keys(e),o=N(n,r,(function(t){return t})),i={},a={},s={};return o.added.forEach((function(t){var n=r[t];i[n]=e[n]})),o.removed.forEach((function(e){var r=n[e];a[r]=t[r]})),o.maintained.forEach((function(r){var o=r[0],i=n[o],a=[t[i],e[i]];t[i]!==e[i]&&(s[i]=a)})),{added:i,removed:a,changed:s}}function st(t){t.forEach((function(t){t()}))}function lt(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function ct(t,e,n,r){return L(t)||"number"==typeof t?new gt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?mt:t.type.prototype.render?St:xt)(t.type,e,n,r,t.ref,t.props)}function ut(t){var e=[];return t.forEach((function(t){e=e.concat(F(t)?ut(t):t)})),e}function dt(t){var e=t.className,n=ot(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function ft(t,e){if(!e)return t;for(var n in e)typeof t[n]===z&&(t[n]=e[n]);return t}function pt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e||{},i=o.key,a=o.ref,s=ot(o,["key","ref"]);return{type:t,key:i,ref:a,props:rt(rt({},s),{children:ut(n).filter((function(t){return null!=t&&!1!==t}))})}}var ht=function(){function t(t,e,n,r,o,i){void 0===i&&(i={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=o,this.props=i,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!L(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var o=this.props;return L(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?o:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function vt(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}nt(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(ht),mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}nt(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return it(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;if(r){var o=this._hasSVG();this._isSVG=o;var i=this.props.portalContainer;if(!i){var a=this.type;i=o?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)}this.base=i}kt(this,this._providers,this.props.children,t,null);var s=this.base,l=vt(e),c=l.attributes,u=l.events,d=vt(this.props),f=d.attributes,p=d.events;return function(t,e,n){var r=at(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in o)n.setAttribute(s,o[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in i)n.removeAttribute(s)}(dt(c),dt(f),s),function(t,e,n){var r=at(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in i)n.removeEventListener(s);for(var s in o)n.addEventListener(s,o[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in i)n.removeEventListener(s)}(u,p,this),function(t,e,n){var r=n.style,o=at(t,e),i=o.added,a=o.removed,s=o.changed;for(var l in i){var c=Z(l,"-");r.setProperty?r.setProperty(c,i[l]):r[c]=i[l]}for(var l in s)c=Z(l,"-"),r.setProperty?r.setProperty(c,s[l][1]):r[c]=s[l][1];for(var l in a)c=Z(l,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},s),t.push((function(){r?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=bt(this.container);return t&&"ownerSVGElement"in t},e}(ht);function bt(t){if(!t)return null;var e=t.base;return e instanceof Node?e:bt(t.container)}function yt(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?yt(e[0].base):null}var xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}nt(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return kt(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(ht),Et=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}nt(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(ht),St=function(t){function e(e,n,r,o,i,a){return void 0===a&&(a={}),t.call(this,e,n,r,o,i,ft(a,e.defaultProps))||this}nt(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(ft(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e){var n=this;this.props=ft(this.props,this.type.defaultProps);var r=!this.base;r?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,i=o.state,a=o.render();a&&a.props&&!a.props.children.length&&(a.props.children=this.props.children),kt(this,this._providers,a?[a]:[],t),t.push((function(){r?(n._mounted(),o.componentDidMount()):(n._updated(),o.componentDidUpdate(e,i))}))},n._setState=function(t){var e=this.base;e&&t&&(e.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(ht),Ct=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=rt(rt({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout((function(){r.$_timer=0,r.$_setState(e,n)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;kt(r.container,[r],[r.original],n,rt(rt({},this.state),this.$_state),e)&&(t&&n.push(t),st(n))},t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return it(this.props,t)||it(this.state,e)},e}(Ct),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}nt(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new Et(n),Ot(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Ot(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Ot(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(wt);function Mt(t,e,n){var r=n.map((function(t){return L(t)?null:t.key})),o=N(lt(e.map((function(t){return t.key}))),lt(r),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var n=t[0],r=t[1],o=e.splice(n,1)[0];e.splice(r,0,o);var i=yt(o.base),a=yt(e[r+1]&&e[r+1].base);i&&i.parentNode.insertBefore(i,a)})),o.added.forEach((function(o){e.splice(o,0,ct(n[o],r[o],o,t))}));var i=o.maintained.filter((function(o){o[0];var i=o[1],a=n[i],s=e[i];return(L(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(i,1,ct(a,r[i],i,t)),!0):(s.index=i,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(o.added,i.map((function(t){t[0];return t[1]})))}function kt(t,e,n,r,o,i){var a=Mt(t,e,n),s=e.filter((function(t,e){return t._update(r,n[e],o,i)})),l=bt(t);return l&&a.reverse().forEach((function(n){var r=e[n],o=yt(r.base);if(o&&l!==o&&!o.parentNode){var i=function(t,e){for(var n=t._providers,r=n.length,o=e.index+1;o<r;++o){var i=yt(n[o].base);if(i)return i}return null}(t,r);l.insertBefore(o,i)}})),s.length>0}function Ot(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Et(e)),function(t,e,n){var r=[];kt(t,t._providers,e,r,n),st(r)}(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function Rt(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Ot(t,e,r),n&&n()}function _t(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Pt(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Tt(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function At(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function Nt(t){return t.replace(/_/g,".")}function Bt(t,e){var n=null,r="-1";return _t(t,(function(t){var o=Tt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!o||t.brand)&&(n=t,r=o[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=Tt("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=Nt(r),!0)})),{preset:n,version:r}}function jt(t,e){var n={brand:"",version:"-1"};return _t(t,(function(t){var r=zt(e,t);return!!r&&(n.brand=t.id,n.version=t.versionAlias||r.version,"-1"!==n.version)})),n}function zt(t,e){return Pt(t,(function(t){var n=t.brand;return Tt(""+e.test,n.toLowerCase())}))}var It=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Gt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Kt=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ft=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Lt=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Wt(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,o=n[0],i={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!jt(Ft,n).brand},a={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&_t(Kt,(function(t){return zt(n,t)}));var s=jt(Gt,n);if(i.chromium=!!s.brand,i.chromiumVersion=s.version,!i.chromium){var l=jt(Kt,n);i.webkit=!!l.brand,i.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=Pt(Lt,(function(t){return new RegExp(""+t.test,"g").exec(c)}));a.name=u?u.id:c,a.version=t.platformVersion}var d=jt(It,n);return d.brand&&(i.name=d.brand,i.version=t?t.uaFullVersion:d.version),"Linux armv8l"===navigator.platform?a.name="android":i.webkit&&(a.name=r?"ios":"mac"),"ios"===a.name&&i.webview&&(i.version="-1"),a.version=Nt(a.version),i.version=Nt(i.version),a.majorVersion=parseInt(a.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:a,isMobile:r,isHints:!0}}function Yt(t){var e=function(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Bt(Ft,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},i=Bt(It,e),a=i.preset,s=i.version,l=Bt(Lt,e),c=l.preset,u=l.version,d=Bt(Gt,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=Bt(Kt,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(o.name=c.id,o.version=u,o.majorVersion=parseInt(u,10)),a&&(r.name=a.id,r.version=s,r.webview&&"ios"===o.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:o,isMobile:n,isHints:!1}}function Ht(t){return void 0===t&&At()?Wt():Yt(t)}const Xt=Ht;var qt="undefined",Vt=typeof window!==qt,Ut=(typeof document!==qt&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),Zt=1e-7,$t={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Jt(t,e,n,r){return(t*r+e*n)/(n+r)}function Qt(t){return typeof t===qt}function te(t){return t&&"object"==typeof t}function ee(t){return Array.isArray(t)}function ne(t){return"string"==typeof t}function re(t){return"number"==typeof t}function oe(t){return"function"==typeof t}function ie(t,e,n,r,o){return ae(t,e,n)?n:function(t,e,n,r,o){for(var i,a=function(n){var a=e[n].trim();if(a===t.close&&!ae(t,e,n))return{value:n};var s=n,l=he(o,(function(t){return t.open===a}));if(l&&(s=ie(l,e,n,r,o)),-1===s)return i=n,"break";i=n=s},s=n;s<r;++s){var l=a(s);if(s=i,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,r,o)}function ae(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function se(t,e){var n=ne(e)?{separator:e}:e,r=n.separator,o=void 0===r?",":r,i=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=void 0===s?a:s,c=n.openCloseCharacters,u=void 0===c?Ut:c,d=u.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),f=new RegExp("(\\s*"+o+"\\s*|"+d+"|\\s+)","g"),p=t.split(f).filter(Boolean),h=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b,y=function(e){var n=p[e].trim(),r=e,s=he(u,(function(t){return t.open===n})),c=he(u,(function(t){return t.close===n}));if(s){if(-1!==(r=ie(s,p,e,h,u))&&l)return m()&&i?(b=e,"break"):(v.push(p.slice(e,r+1).join("")),e=r,i?(b=e,"break"):(b=e,"continue"))}else{if(c&&!ae(c,p,e)){var d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(u);return d.splice(u.indexOf(c),1),{value:se(t,{separator:o,isSeparateFirst:i,isSeparateOnlyOpenClose:a,isSeparateOpenClose:l,openCloseCharacters:d})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(n,o)&&!a)return m(),i?(b=e,"break"):(b=e,"continue")}-1===r&&(r=h-1),g.push(p.slice(e,r+1).join("")),b=e=r},x=0;x<h;++x){var E=y(x);if(x=b,"object"==typeof E)return E.value;if("break"===E)break}return g.length&&v.push(g.join("")),v}function le(t){return se(t,"")}function ce(t){return se(t,",")}function ue(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function de(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function fe(){return Date.now?Date.now():(new Date).getTime()}function pe(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}function he(t,e,n){var r=pe(t,e);return r>-1?t[r]:n}var ve=function(){var t=fe(),e=Vt&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=fe();return window.setTimeout((function(){e(n-t)}),1e3/60)}}(),ge=function(){var t=Vt&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function me(t){return Object.keys(t)}function be(t,e){var n=de(t),r=n.value,o=n.unit;if(te(e)){var i=e[o];if(i){if(oe(i))return i(r);if($t[o])return $t[o](r,i)}}else if("%"===o)return r*e/100;return $t[o]?$t[o](r):r}function ye(t,e,n){return Math.max(e,Math.min(t,n))}function xe(t,e,n,r){return void 0===r&&(r=t[0]/t[1]),[[De(e[0],Zt),De(e[0]/r,Zt)],[De(e[1]*r,Zt),De(e[1],Zt)]].filter((function(t){return t.every((function(t,r){var o=e[r],i=De(o,Zt);return n?t<=o||t<=i:t>=o||t>=i}))}))[0]||t}function Ee(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Se(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=Math.atan2(r,n);return o>=0?o:o+2*Math.PI}function Ce(t){var e=function(t){return[0,1].map((function(e){return Ee(t.map((function(t){return t[e]})))}))}(t),n=Se(e,t[0]),r=Se(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function we(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function De(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Me(t,e){return t.forEach((function(n,r){t[r]=De(t[r],e)})),t}function ke(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Oe(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Re(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function _e(t,e,n,r,o,i){for(var a=0;a<o;++a){var s=n+a*o,l=r+a*o;t[s]+=t[l]*i,e[s]+=e[l]*i}}function Pe(t,e,n,r,o){for(var i=0;i<o;++i){var a=n+i*o,s=r+i*o,l=t[a],c=e[a];t[a]=t[s],t[s]=l,e[a]=e[s],e[s]=c}}function Te(t,e,n,r,o){for(var i=0;i<r;++i){var a=n+i*r;t[a]/=o,e[a]/=o}}function Ae(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),o=0;o<n;++o)r[o*n+e-1]=0,r[(e-1)*n+o]=0;return r[(e-1)*(n+1)]=1,r}function Ne(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Je(e),o=0;o<e;++o){var i=e*o+o;if(!tt(n[i],G))for(var a=o+1;a<e;++a)if(n[e*o+a]){Pe(n,r,o,a,e);break}if(!tt(n[i],G))return[];Te(n,r,o,e,n[i]);for(a=0;a<e;++a){var s=a,l=n[a+o*e];tt(l,G)&&o!==a&&_e(n,r,s,o,e,-l)}}return r}function Be(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],o=0;o<e-1;++o)n[o]=t[e*(e-1)+o]/r;return n[e-1]=0,n}function je(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ze(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Je(n),o=Math.min(e,n),i=0;i<o-1;++i){for(var a=0;a<o-1;++a)r[i*n+a]=t[i*e+a];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Ie(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Je(t);return e.forEach((function(e){r=Ge(r,e,t)})),r}function Ge(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],o=t.length/n,i=e.length/o;if(!o)return e;if(!i)return t;for(var a=0;a<n;++a)for(var s=0;s<i;++s){r[s*n+a]=0;for(var l=0;l<o;++l)r[s*n+a]+=t[l*n+a]*e[s*o+l]}return r}function Ke(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),o=0;o<n;++o)r[o]=r[o]+e[o];return r}function Fe(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),o=0;o<n;++o)r[o]=r[o]-e[o];return r}function Le(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function We(t,e,n){void 0===n&&(n=e.length);var r=Ge(t,e,n),o=r[n-1];return r.map((function(t){return t/o}))}function Ye(t,e){return Ge(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function He(t,e){return Ge(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Xe(t,e){return Ge(t,$e(e,4))}function qe(t,e){var n=e[0],r=void 0===n?1:n,o=e[1],i=void 0===o?1:o,a=e[2];return Ge(t,[r,0,0,0,0,i,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function Ve(t,e){return We($e(e,3),je(t,3))}function Ue(t,e){var n=e[0],r=void 0===n?0:n,o=e[1],i=void 0===o?0:o,a=e[2];return Ge(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,void 0===a?0:a,1],4)}function Ze(t,e){return Ge(t,e,4)}function $e(t,e){var n=Math.cos(t),r=Math.sin(t),o=Je(e);return o[0]=n,o[1]=r,o[e]=-r,o[e+1]=n,o}function Je(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Qe(t,e){for(var n=Je(e),r=Math.min(t.length,e-1),o=0;o<r;++o)n[(e+1)*o]=t[o];return n}function tn(t,e){for(var n=Je(e),r=Math.min(t.length,e-1),o=0;o<r;++o)n[e*(e-1)+o]=t[o];return n}function en(t,e,n,r,o,i,a,s){var l=t[0],c=t[1],u=e[0],d=e[1],f=n[0],p=n[1],h=r[0],v=r[1],g=o[0],m=o[1],b=i[0],y=i[1],x=a[0],E=a[1],S=s[0],C=s[1],w=Ne([l,0,u,0,f,0,h,0,c,0,d,0,p,0,v,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,h,0,c,0,d,0,p,0,v,0,1,0,1,0,1,0,1,-g*l,-m*l,-b*u,-y*u,-x*f,-E*f,-S*h,-C*h,-g*c,-m*c,-b*d,-y*d,-x*p,-E*p,-S*v,-C*v],8);if(!w.length)return[];var D=Ge(w,[g,m,b,y,x,E,S,C],8);return D[8]=1,ze(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var o=0;o<e;++o)n[o*e+r]=t[e*r+o];return n}(D),3,4)}function nn(t){return on(an(t))}function rn(t,e){var n=We(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function on(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))})),e}function an(t){return(F(t)?t:X(t,"")).map((function(t){var e=V(t),n=e.prefix,r=e.value,o=null,i=n,a="";if("translate"===n||"translateX"===n||"translate3d"===n){var s=q(r).map((function(t){return parseFloat(t)})),l=s[0],c=s[1],u=void 0===c?0:c,d=s[2];o=Ue,a=[l,u,void 0===d?0:d]}else if("translateY"===n){o=Ue,a=[0,u=parseFloat(r),0]}else if("translateZ"===n){o=Ue,a=[0,0,parseFloat(r)]}else if("scale"===n||"scale3d"===n){var f=q(r).map((function(t){return parseFloat(t)})),p=f[0],h=f[1],v=void 0===h?p:h,g=f[2];o=qe,a=[p,v,void 0===g?1:g]}else if("scaleX"===n){o=qe,a=[p=parseFloat(r),1,1]}else if("scaleY"===n){o=qe,a=[1,v=parseFloat(r),1]}else if("scaleZ"===n){o=qe,a=[1,1,parseFloat(r)]}else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var m=U(r),b=m.unit,y=m.value;"rotate"===n||"rotateZ"===n?(i="rotateZ",o=Xe):"rotateX"===n?o=Ye:"rotateY"===n&&(o=He),a="rad"===b?y:y*Math.PI/180}else if("matrix3d"===n)o=Ze,a=q(r).map((function(t){return parseFloat(t)}));else if("matrix"===n){var x=q(r).map((function(t){return parseFloat(t)}));o=Ze,a=[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}else i="";return{name:n,functionName:i,value:r,matrixFunction:o,functionValue:a}}))}var sn=function(t,e){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},sn(t,e)};var ln,cn="function"==typeof Map?void 0:(ln=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++ln)});function un(t,e){return N(t,e,cn)}const dn=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,cn)||this}return function(t,e){function n(){this.constructor=t}sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(j);var fn="undefined",pn=(typeof document!==fn&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),hn=1e-7;function vn(t){return t&&"object"==typeof t}function gn(t){return"string"==typeof t}function mn(t,e,n,r,o){return bn(t,e,n)?n:function(t,e,n,r,o){for(var i,a=function(n){var a=e[n].trim();if(a===t.close&&!bn(t,e,n))return{value:n};var s=n,l=Dn(o,(function(t){return t.open===a}));if(l&&(s=mn(l,e,n,r,o)),-1===s)return i=n,"break";i=n=s},s=n;s<r;++s){var l=a(s);if(s=i,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,r,o)}function bn(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function yn(t,e){var n=gn(e)?{separator:e}:e,r=n.separator,o=void 0===r?",":r,i=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=void 0===s?a:s,c=n.openCloseCharacters,u=void 0===c?pn:c,d=u.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),f=new RegExp("(\\s*"+o+"\\s*|"+d+"|\\s+)","g"),p=t.split(f).filter(Boolean),h=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b,y=function(t){var e=p[t].trim(),n=t,r=Dn(u,(function(t){return t.open===e})),s=Dn(u,(function(t){return t.close===e}));if(r){if(-1!==(n=mn(r,p,t,h,u))&&l)return m()&&i?(b=t,"break"):(v.push(p.slice(t,n+1).join("")),t=n,i?(b=t,"break"):(b=t,"continue"))}else{if(s&&!bn(s,p,t))throw new Error("invalid format: "+s.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(e,o)&&!a)return m(),i?(b=t,"break"):(b=t,"continue")}-1===n&&(n=h-1),g.push(p.slice(t,n+1).join("")),b=t=n},x=0;x<h;++x){var E=y(x);if(x=b,"break"===E)break}return g.length&&v.push(g.join("")),v}function xn(t){return yn(t,",")}function En(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function Sn(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function Cn(){return Date.now?Date.now():(new Date).getTime()}function wn(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}function Dn(t,e,n){var r=wn(t,e);return r>-1?t[r]:n}function Mn(t,e,n){return Math.max(e,Math.min(t,n))}function kn(t,e,n,r){return void 0===r&&(r=t[0]/t[1]),[[Pn(e[0],hn),Pn(e[0]/r,hn)],[Pn(e[1]*r,hn),Pn(e[1],hn)]].filter((function(t){return t.every((function(t,r){var o=e[r],i=Pn(o,hn);return n?t<=o||t<=i:t>=o||t>=i}))}))[0]||t}function On(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=Math.atan2(r,n);return o>=0?o:o+2*Math.PI}function Rn(t){var e=function(t){return[0,1].map((function(e){return function(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}(t.map((function(t){return t[e]})))}))}(t),n=On(e,t[0]),r=On(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function _n(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Pn(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Tn(t,e,n,r){t.addEventListener(e,n,r)}function An(t,e,n,r){t.removeEventListener(e,n,r)}function Nn(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function Bn(t){return Pn(t,hn)}function jn(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function zn(t,e){var n=e.width,r=e.height,o=e.left,i=e.top,a=In(t),s=a.minX,l=a.minY,c=a.maxX,u=a.maxY,d=n/(c-s),f=r/(u-l);return t.map((function(t){return[o+(t[0]-s)*d,i+(t[1]-l)*f]}))}function In(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Gn(t,e,n){var r=t[0],o=t[1],i=In(e),a=i.minX,s=i.maxX,l=[[a,o],[s,o]],c=Kn(l[0],l[1]),u=Wn(e),d=[];if(u.forEach((function(e){var n,r=Kn(e[0],e[1]),i=e[0];(n=r,c.every((function(t,e){return 0===Bn(t-n[e])})))?d.push({pos:t,line:e,type:"line"}):Ln(Fn(c,r),[l,e]).forEach((function(t){e.some((function(e){return r=t,!Bn((n=e)[0]-r[0])&&!Bn(n[1]-r[1]);var n,r}))?d.push({pos:t,line:e,type:"point"}):0!==Bn(i[1]-o)&&d.push({pos:t,line:e,type:"intersection"})}))})),!n&&Dn(d,(function(t){return t[0]===r})))return!0;var f=0,p={};return d.forEach((function(t){var e=t.pos,n=t.type,i=t.line;if(!(e[0]>r))if("intersection"===n)++f;else{if("line"===n)return;if("point"===n){var a=Dn(i,(function(t){return t[1]!==o})),s=p[e[0]],l=a[1]>o?1:-1;s?s!==l&&++f:p[e[0]]=l}}})),f%2==1}function Kn(t,e){var n=t[0],r=t[1],o=e[0]-n,i=e[1]-r;Math.abs(o)<hn&&(o=0),Math.abs(i)<hn&&(i=0);var a=0,s=0,l=0;return o?i?(s=1,l=-(a=-i/o)*n-r):(s=1,l=-r):i&&(a=-1,l=n),[a,s,l]}function Fn(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],s=e[2],l=0===n&&0===i,c=0===r&&0===a,u=[];if(l&&c)return[];if(l){var d=-o/r;return d!==-s/a?[]:[[-1/0,d],[1/0,d]]}if(c){var f=-o/n;return f!==-s/i?[]:[[f,-1/0],[f,1/0]]}if(0===n)u=[[p=-(a*(h=-o/r)+s)/i,h]];else if(0===i){u=[[p=-(r*(h=-s/a)+o)/n,h]]}else if(0===r){u=[[p=-o/n,h=-(i*p+s)/a]]}else if(0===a){u=[[p=-s/i,h=-(n*p+o)/r]]}else{var p,h;u=[[p=(r*s-a*o)/(a*n-r*i),h=-(n*p+o)/r]]}return u.map((function(t){return[t[0],t[1]]}))}function Ln(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),r=[];if(2===t.length){var o=t[0],i=o[0],a=o[1];if(Bn(i-t[1][0])){if(!Bn(a-t[1][1])){var s=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),l=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(Bn(s-l)>0)return[];r=[[s,a],[l,a]]}}else{var c=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),u=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(Bn(c-u)>0)return[];r=[[i,c],[i,u]]}}return r.length||(r=t.filter((function(t){var e=t[0],r=t[1];return n.every((function(t){return 0<=Bn(e-t[0][0])&&0<=Bn(t[0][1]-e)&&0<=Bn(r-t[1][0])&&0<=Bn(t[1][1]-r)}))}))),r.map((function(t){return[Bn(t[0]),Bn(t[1])]}))}function Wn(t){return Nn(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function Yn(t,e){var n=t.slice(),r=e.slice();-1===Rn(n)&&n.reverse(),-1===Rn(r)&&r.reverse();var o=Wn(n),i=Wn(r),a=o.map((function(t){return Kn(t[0],t[1])})),s=i.map((function(t){return Kn(t[0],t[1])})),l=[];a.forEach((function(t,e){var n=o[e],a=[];s.forEach((function(r,o){var s=Ln(Fn(t,r),[n,i[o]]);a.push.apply(a,s.map((function(t){return{index1:e,index2:o,pos:t,type:"intersection"}})))})),a.sort((function(t,e){return _n(n[0],t.pos)-_n(n[0],e.pos)})),l.push.apply(l,a),Gn(n[1],r)&&l.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),i.forEach((function(t,e){if(Gn(t[1],n)){var r=!1,o=wn(l,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===o&&(r=!1,o=wn(l,(function(t){var n=t.index1,o=t.index2;return-1===n&&o+1===e?(r=!0,!1):!!r}))),-1===o?l.push({index1:-1,index2:e,pos:t[1],type:"inside"}):l.splice(o,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var c={};return l.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!c[n]&&(c[n]=!0,!0)}))}function Hn(t,e){return Yn(t,e).map((function(t){return t.pos}))}var Xn=function(){return Xn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Xn.apply(this,arguments)};var qn=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(K(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(K(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var o=J(r,(function(t){return t.listener===e}));o>-1&&r.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Xn({listener:e},n))},t}();const Vn=qn;var Un=function(t,e){return Un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Un(t,e)};var Zn=function(){return Zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Zn.apply(this,arguments)};function $n(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Jn(t){return t?L(t)?document.querySelector(t):W(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const Qn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e}!function(t,e){function n(){this.constructor=t}Un(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=Jn(e.container);if(n){var r=0,o=0,i=0,a=0;if(n===document.body)i=window.innerWidth,a=window.innerHeight;else{var s=n.getBoundingClientRect();r=s.top,o=s.left,i=s.width,a=s.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:o,width:i,height:a},this._prevScrollPos=this._getScrollPosition([0,0],e)}else this._flag=!1},n.drag=function(t,e){if(this._flag){var n=t.clientX,r=t.clientY,o=e.threshold,i=void 0===o?0:o,a=this._startRect,s=this._startPos,l=[0,0];return a.top>r-i?(s[1]>a.top||r<s[1])&&(l[1]=-1):a.top+a.height<r+i&&(s[1]<a.top+a.height||r>s[1])&&(l[1]=1),a.left>n-i?(s[0]>a.left||n<s[0])&&(l[0]=-1):a.left+a.width<n+i&&(s[0]<a.left+a.width||n>s[0])&&(l[0]=1),clearTimeout(this._timer),!(!l[0]&&!l[1])&&this._continueDrag(Zn(Zn({},e),{direction:l,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,o=t.direction,i=t.throttleTime,a=void 0===i?0:i,s=t.inputEvent,l=t.isDrag,c=this._getScrollPosition(o||[0,0],t),u=c[0]-r[0],d=c[1]-r[1],f=o||[u?Math.abs(u)/u:0,d?Math.abs(d)/d:0];return this._prevScrollPos=c,!(!u&&!d)&&(this.trigger("move",{offsetX:f[0]?u:0,offsetY:f[1]?d:0,inputEvent:s}),a&&l&&(this._timer=window.setTimeout((function(){e._continueDrag(t)}),a)),!0)},n.dragEnd=function(){clearTimeout(this._timer)},n._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?$n:r)({container:Jn(n),direction:t})},n._continueDrag=function(t){var e=this,n=t.container,r=t.direction,o=t.throttleTime,i=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var l=$(),c=Math.max(o+this._prevTime-l,0);if(c>0)return this._timer=window.setTimeout((function(){e._continueDrag(t)}),c),!1;this._prevTime=l;var u=this._getScrollPosition(r,t);return this._prevScrollPos=u,a&&(this._isWait=!0),this.trigger("scroll",{container:Jn(n),direction:r,inputEvent:s}),this._isWait=!1,i||this.checkScroll(Zn(Zn({},t),{prevScrollPos:u,direction:r,inputEvent:s}))}},e}(Vn);var tr=function(t,e){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},tr(t,e)};var er=function(){return er=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},er.apply(this,arguments)};function nr(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],r=n[0]-e[0],o=n[1]-e[1],((i=Math.atan2(o,r))>=0?i:i+2*Math.PI)/Math.PI);var e,n,r,o,i}function rr(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ar(t[r]));return n}(t.touches):[ar(t)]:[]}function or(t,e,n){var r=n.length,o=sr(t,r),i=o.clientX,a=o.clientY,s=o.originalClientX,l=o.originalClientY,c=sr(e,r),u=c.clientX,d=c.clientY,f=sr(n,r);return{clientX:s,clientY:l,deltaX:i-u,deltaY:a-d,distX:i-f.clientX,distY:a-f.clientY}}function ir(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ar(t){return{clientX:t.clientX,clientY:t.clientY}}function sr(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var o=t[r];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var lr=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),nr(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),nr(t)-nr(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=or(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,o=n.deltaY;return this.movement+=Math.sqrt(r*r+o*o),this.prevClients=t,n},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(n,r){return or([t[r]],[e[r]],[n])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=sr(t,this.length),r=sr(this.prevClients,this.length),o=n.clientX-r.clientX,i=n.clientY-r.clientY;return Math.sqrt(o*o+i*i)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),ir(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),ir(t)/ir(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),cr=["textarea","input"],ur=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.data={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._dragFlag=!1,r._isMouseEvent=!1,r._isSecondaryButton=!1,r._preventMouseEvent=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=r.options,o=n.container,i=n.pinchOutside,a=n.preventWheelClick,s=n.preventRightClick,l=n.preventDefault,c=n.checkInput,u=n.preventClickEventOnDragStart,d=n.preventClickEventOnDrag,f=n.preventClickEventByCondition,p=r.isTouch,h=!r.flag;if(r._isSecondaryButton=3===t.which||2===t.button,a&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return r.stop(),!1;if(h){var v=document.activeElement,g=t.target;if(g){var m=g.tagName.toLowerCase(),b=cr.indexOf(m)>-1,y=g.isContentEditable;if(b||y){if(c||v===g)return!1;if(v&&y&&v.isContentEditable&&v.contains(g))return!1}else if((l||"touchstart"===t.type)&&v){var x=v.tagName.toLowerCase();(v.isContentEditable||cr.indexOf(x)>-1)&&v.blur()}(u||d||f)&&Tn(window,"click",r._onClick,!0)}r.clientStores=[new lr(rr(t))],r.flag=!0,r.isDrag=!1,r._dragFlag=!0,r.data={},r.doubleFlag=Cn()-r.prevTime<200,r._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!r._isMouseEvent&&r._preventMouseEvent&&(r._preventMouseEvent=!1),!1===(r._preventMouseEvent||r.emit("dragStart",er(er({data:r.data,datas:r.data,inputEvent:t,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}})))&&r.stop(),r._isMouseEvent&&r.flag&&l&&t.preventDefault()}if(!r.flag)return!1;var E=0;if(h?(r._attchDragEvent(),p&&i&&(E=setTimeout((function(){Tn(o,"touchstart",r.onDragStart,{passive:!1})})))):p&&i&&An(o,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(E),h&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var n=r.options.preventDefault;!r._isMouseEvent&&n&&t.preventDefault();var o=rr(t),i=r.moveClients(o,t,!1);if(r._dragFlag){if(r.pinchFlag||i.deltaX||i.deltaY)if(!1===(r._preventMouseEvent||r.emit("drag",er(er({},i),{isScroll:!!e,inputEvent:t}))))return void r.stop();r.pinchFlag&&r.onPinch(t,o)}r.getCurrentStore().getPosition(o,!0)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,o=e.container,i=e.preventClickEventOnDrag,a=e.preventClickEventOnDragStart,s=e.preventClickEventByCondition,l=r.isDrag;(i||a||s)&&requestAnimationFrame((function(){r._allowClickEvent()})),s||a||!i||l||r._allowClickEvent(),r.isTouch&&n&&An(o,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t);var c=(null==t?void 0:t.touches)?rr(t):[];0!==c.length&&r.options.keepDragging?r._addStore(new lr(c)):r.flag=!1;var u=r._getPosition(),d=Cn(),f=!l&&r.doubleFlag;r.prevTime=l||f?0:d,r.flag||(r._dettachDragEvent(),r._preventMouseEvent||r.emit("dragEnd",er({data:r.data,datas:r.data,isDouble:f,isDrag:l,isClick:!l,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,inputEvent:t},u)),r.clientStores=[],r._isMouseEvent||(r._preventMouseEvent=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){r._preventMouseEvent=!1}))}))))}},r.onBlur=function(){r.onDragEnd()},r._allowClickEvent=function(){An(window,"click",r._onClick,!0)},r._onClick=function(t){r._allowClickEvent(),r._preventMouseEvent=!1;var e=r.options.preventClickEventByCondition;(null==e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},r._onContextMenu=function(t){r.options.preventRightClick?r.onDragEnd(t):t.preventDefault()},r._passCallback=function(){};var o=[].concat(e);r.options=er({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var i=r.options,a=i.container,s=i.events,l=i.checkWindowBlur;if(r.isTouch=s.indexOf("touch")>-1,r.isMouse=s.indexOf("mouse")>-1,r.targets=o,r.isMouse&&(o.forEach((function(t){Tn(t,"mousedown",r.onDragStart),Tn(t,"mousemove",r._passCallback)})),Tn(a,"contextmenu",r._onContextMenu)),l&&Tn(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};o.forEach((function(t){Tn(t,"touchstart",r.onDragStart,c),Tn(t,"touchmove",r._passCallback,c)}))}return r}!function(t,e){function n(){this.constructor=t}tr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},n.move=function(t,e){var n=t[0],r=t[1],o=this.getCurrentStore().prevClients;return this.moveClients(o.map((function(t){var e=t.clientX,o=t.clientY;return{clientX:e+n,clientY:o+r,originalClientX:e,originalClientY:o}})),e,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventData=function(t){var e=this.data;for(var n in t)e[n]=t[n];return this},n.setEventDatas=function(t){return this.setEventData(t)},n.getCurrentEvent=function(t){return er(er({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},n.getEventData=function(){return this.data},n.getEventDatas=function(){return this.data},n.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),An(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){An(e,"mousedown",t.onDragStart)})),An(n,"contextmenu",this._onContextMenu)),this.isTouch&&(e.forEach((function(e){An(e,"touchstart",t.onDragStart)})),An(n,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},n.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var n=new lr(rr(t));this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",er(er({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",er(er({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",er(er({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t}))}},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,e,n){var r=this._getPosition(t,n);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),er(er({data:this.data,datas:this.data},r),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e})},n._addStore=function(t){this.clientStores.splice(0,0,t)},n._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce((function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t}),n),o=r.distX,i=r.distY;return er(er({},n),{distX:o,distY:i})},n._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this.isMouse&&(Tn(t,"mousemove",this.onDrag),Tn(t,"mouseup",this.onDragEnd)),this.isTouch&&(Tn(t,"touchmove",this.onDrag,e),Tn(t,"touchend",this.onDragEnd,e),Tn(t,"touchcancel",this.onDragEnd,e))},n._dettachDragEvent=function(){var t=this.options.container;this.isMouse&&(An(t,"mousemove",this.onDrag),An(t,"mouseup",this.onDragEnd)),this.isTouch&&(An(t,"touchstart",this.onDragStart),An(t,"touchmove",this.onDrag),An(t,"touchend",this.onDragEnd),An(t,"touchcancel",this.onDragEnd))},e}(Vn);const dr=ur;var fr=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function pr(t,e,n,r){var o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?q(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t})).join(", ")+" {"}))}(t,e,n),(r||document.head||document.body).appendChild(o),o}const hr=function(t){var e,n="rCS"+fr(t).toString(36),r=0;return{className:n,inject:function(o,i){void 0===i&&(i={});var a,s=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(o),l=0===r;return(s||l)&&(a=pr(n,t,i,s)),l&&(e=a),s||++r,{destroy:function(){s?(o.removeChild(a),a=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var vr=function(t,e){return vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},vr(t,e)};function gr(t,e){function n(){this.constructor=t}vr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mr=function(){return mr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},mr.apply(this,arguments)};var br=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}gr(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["className","cspNonce","portalContainer"]),i=this.injector.className,a=this.tag,s={};return"simple-1.1.0".indexOf("simple")>-1&&r&&(s={portalContainer:r}),pt(a,mr({ref:M(this,"element"),"data-styled-id":i,className:n+" "+i},s,o))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(Ct);const yr=function(t,e){var n=hr(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=n,r.tag=t,r}return gr(r,e),r}(br)};var xr=function(t,e){return xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},xr(t,e)};function Er(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Sr=function(){return Sr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Sr.apply(this,arguments)};function Cr(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function wr(t,e){var n;return Sr({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}var Dr,Mr,kr=Xt(),Or=kr.browser.webkit,Rr=Or&&(Dr="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Mr=/applewebkit\/([^\s]+)/g.exec(Dr.userAgent.toLowerCase()))&&parseFloat(Mr[1])<605),_r="firefox"===kr.browser.name,Pr=parseInt(kr.browser.webkitVersion,10)>=612||parseInt(kr.browser.version,10)>=15,Tr="moveable-",Ar="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n\t").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),n=45*Math.round(t/45)%180,r="ns-resize";return 135===n?r="nwse-resize":45===n?r="nesw-resize":90===n&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}(t),"\n}\n")})).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Rr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),Nr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Br=1e-7,jr=1e-9,zr=Math.pow(10,10),Ir=-zr,Gr=["n","w","s","e"],Kr=["n","w","s","e","nw","ne","sw","se"],Fr={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Lr={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Wr={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Yr=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets"];function Hr(t,e,n,r,o,i){void 0===i&&(i="draggable");var a=e.gestos[i].move(n,t.inputEvent),s=a.originalDatas||a.datas,l=s[i]||(s[i]={});return Sr(Sr({},o?ui(e,a):a),{isPinch:!!r,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var Xr=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Sr(Sr({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function qr(t,e){var n=e.clientX,r=e.clientY,o=e.datas,i=t.state,a=i.moveableClientRect,s=i.rootMatrix,l=i.is3d,c=i.pos1,u=Fe(ci(s,[n-a.left,r-a.top],l?4:3),c),d=to({datas:o,distX:u[0],distY:u[1]});return[d[0],d[1]]}function Vr(t,e){var n=e.datas,r=t.state,o=r.allMatrix,i=r.beforeMatrix,a=r.is3d,s=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=a?4:3;n.is3d=a,n.matrix=o,n.targetMatrix=d,n.beforeMatrix=i,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=Ne(o,p),n.inverseBeforeMatrix=Ne(i,p),n.absoluteOrigin=je(Ke([s,l],c),p),n.startDragBeforeDist=We(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=We(n.inverseMatrix,n.absoluteOrigin,p)}function Ur(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,o=n.transformIndex,i=r.nextTransforms,a=i.length,s=r.nextTransformAppendedIndexes,l=0;-1===o?(l=i.length,n.transformIndex=l):l=he(s,(function(t){return t.index===o&&t.functionName===e}))?o:o+s.filter((function(t){return t.index<o})).length;var c=function(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),o=t[e]||"",i=e<0?[]:t.slice(e),a=e<0?[]:t.slice(e+1),s=an(n),l=an(r),c=an([o]),u=an(i),d=an(a),f=on(s),p=on(l),h=on(u),v=on(d),g=Ge(f,h,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:p,targetFunctionMatrix:on(c),afterFunctionMatrix:h,afterFunctionMatrix2:v,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:o,afterFunctionTexts:i,afterFunctionTexts2:a}}(i,l),u=c.targetFunction,d="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):a>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Cr(Cr([],s,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function Zr(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function $r(t){var e=t.datas,n=Qr({datas:e,distX:t.distX,distY:t.distY});return We(Jr(e,function(t,e){for(var n=Je(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}([n[0],n[1]],4)),je([0,0,0],4),4)}function Jr(t,e,n){var r=t.beforeTransform,o=t.afterTransform,i=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,l=n?Ge(s,e,4):Ge(e,s,4),c=Ge(Ne(n?i:r,4),l,4);return Ge(c,Ne(n?a:o,4),4)}function Qr(t){var e=t.datas,n=t.distX,r=t.distY,o=e.inverseBeforeMatrix,i=e.is3d,a=e.startDragBeforeDist,s=i?4:3;return Fe(We(o,Ke(e.absoluteOrigin,[n,r]),s),a)}function to(t,e){var n=t.datas,r=t.distX,o=t.distY,i=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=s?4:3;return Fe(We(e?i:a,Ke(n.absoluteOrigin,[r,o]),u),e?l:c)}function eo(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function no(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,o=[Jt(t[0][0],t[1][0],n,1-n),Jt(t[0][1],t[1][1],n,1-n)],i=[Jt(t[2][0],t[3][0],n,1-n),Jt(t[2][1],t[3][1],n,1-n)];return[Jt(o[0],i[0],r,1-r),Jt(o[1],i[1],r,1-r)]}function ro(t,e,n,r){return Ge(t,Eo(e,r,n),r)}function oo(t){var e=lo(t);return{setTransform:function(n,r){void 0===r&&(r=-1),e.startTransforms=ee(n)?n:le(n),ao(t,r)},setTransformIndex:function(e){ao(t,e)}}}function io(t,e){ao(t,pe(lo(t).startTransforms,(function(t){return 0===t.indexOf("".concat(e,"("))})))}function ao(t,e){var n=lo(t),r=t.datas;if(r.transformIndex=e,-1!==e){var o=n.startTransforms[e];if(o){var i=an([o]);r.startValue=i[0].functionValue}}}function so(t,e){lo(t).nextTransforms=le(e)}function lo(t){return t.originalDatas.beforeRenderable}function co(t){return t.originalDatas.beforeRenderable.nextTransforms}function uo(t){return co(t).join(" ")}function fo(t){return lo(t).nextStyle}function po(t,e,n,r,o){so(o,e);var i=Ta.drag(t,Hr(o,t.state,n,r,!1)),a=i?i.transform:e;return Sr(Sr({transform:e,drag:i},$o({transform:a},o)),{afterTransform:a})}function ho(t,e,n,r,o){var i=t.state,a=i.left,s=i.top,l=t.props.groupable,c=function(t,e,n){var r=t.transformOrigin,o=t.offsetMatrix,i=t.is3d,a=e.beforeTransform,s=e.afterTransform,l=i?4:3;return ro(o,ze(Ge(Ge(a,nn([n]),4),s,4),4,l),r,l)}(t.state,o,e),u=l?a:0,d=l?s:0,f=Fe(r,vo(t,n,c));return Fe(f,[u,d])}function vo(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,o=r.width,i=r.height,a=r.is3d?4:3;return Ao(n,[o/2*(1+e[0]),i/2*(1+e[1])],a)}function go(t,e,n,r,o,i){var a=t.props.groupable,s=t.state,l=s.transformOrigin,c=s.offsetMatrix,u=s.is3d,d=s.width,f=s.height,p=s.left,h=s.top,v=i.fixedDirection,g=i.nextTargetMatrix||s.targetMatrix,m=u?4:3,b=function(t,e,n,r,o,i){return void 0===r&&(r=e),void 0===o&&(o=n),void 0===i&&(i=[0,0]),t?t.map((function(t,a){var s=de(t),l=s.value,c=s.unit,u=a?o:r,d=a?n:e;return"%"===t||isNaN(l)?d*(u?i[a]/u:0):"%"!==c?l:d*l/100})):i}(o,e,n,d,f,l),y=a?p:0,x=a?h:0,E=function(t,e,n,r,o,i){var a=no(No(e,n,r,o),i);return[t[0]-a[0],t[1]-a[1]]}(r,ro(c,g,b,m),e,n,m,v);return Fe(E,[y,x])}function mo(t,e){return no(Uo(t.state),e)}function bo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D.apply(void 0,Cr([Tr],t,!1))}function yo(t){t()}function xo(t){return t&&"none"!==t?te(t)?t:nn(t):[1,0,0,1,0,0]}function Eo(t,e,n){return Ie(e,tn(n,e),t,tn(n.map((function(t){return-t})),e))}function So(t){return Co(ri(t,":before")).map((function(e,n){var r=de(e),o=r.value,i=r.unit;return o*function(t,e,n){return"%"===e?Po(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,i,0===n)}))}function Co(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function wo(t,e){void 0===e&&(e=ri(t));var n=e.transform;if(n&&"none"!==n)return e.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var o=r.length;if(!o)return"";for(var i=[],a=function(t){var e=r[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},s=0;s<o;++s)a(s);return i.join(" ")}return""}function Do(t,e,n){var r,o,i,a,s=document.body,l=!1;if(!t||n)i=t;else{var c=null===(r=null==t?void 0:t.assignedSlot)||void 0===r?void 0:r.parentElement,u=t.parentElement;c?(l=!0,a=u,i=c):i=u}for(var d=!1,f=t===e||i===e,p="relative";i&&i!==s;){e===i&&(f=!0);var h=ri(i),v=i.tagName.toLowerCase(),g=wo(i,h),m=h.willChange;if(p=h.position,"svg"===v||"static"!==p||g&&"none"!==g||"transform"===m)break;var b=null===(o=null==t?void 0:t.assignedSlot)||void 0===o?void 0:o.parentNode,y=i.parentNode;b&&(l=!0,a=y);var x=b||y;if(x&&11===x.nodeType){i=x.host,d=!0;break}i=x,p="relative"}return{hasSlot:l,parentSlotElement:a,isCustomElement:d,isStatic:"static"===p,isEnd:f||!i||i===s,offsetParent:i||s}}function Mo(t,e,n){var r,o,i,a=t.tagName.toLowerCase(),s=t.offsetLeft,l=t.offsetTop,c=Qt(s),u=!c;return u||"svg"===a?i=(o=Co(n).map((function(t){return parseFloat(t)}))).slice():(i=(o=Rr?So(t):Co(n).map((function(t){return parseFloat(t)}))).slice(),u=!0,r=function(t,e,n){if(!t.getBBox||!n&&"g"===t.tagName.toLowerCase())return[0,0,0,0];var r=t.getBBox(),o=Po(t.ownerSVGElement),i=r.x-o.x,a=r.y-o.y;return[i,a,e[0]-i,e[1]-a]}(t,o,t===e&&"g"===e.tagName.toLowerCase()),s=r[0],l=r[1],o[0]=r[2],o[1]=r[3]),{tagName:a,isSVG:c,hasOffset:u,offset:[s||0,l||0],origin:o,targetOrigin:i}}function ko(t,e,n){void 0===n&&(n=ri(t));var r=ri(document.body),o=r.position;if(!(e||o&&"static"!==o))return[0,0];var i=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(a=0),"auto"===n.left&&"auto"===n.right||(i=0)),[i,a]}function Oo(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=ze(e,3,4))}))}function Ro(t){for(var e=t.parentElement,n=!1;e;){var r=ri(e).transform;if(r&&"none"!==r){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function _o(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Le(t,!e).join(","),")")}function Po(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,o=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:o.x,y:o.y,width:o.width||e,height:o.height||n,clientWidth:e,clientHeight:n}}function To(t,e){var n=Po(t),r=n.width,o=n.height,i=n.clientWidth,a=n.clientHeight,s=i/r,l=a/o,c=t.preserveAspectRatio.baseVal,u=c.align,d=c.meetOrSlice,f=[0,0],p=[s,l],h=[0,0];if(1!==u){var v=(u-2)%3,g=Math.floor((u-2)/3);f[0]=r*v/2,f[1]=o*g/2;var m=2===d?Math.max(l,s):Math.min(s,l);p[0]=m,p[1]=m,h[0]=(i-r)/2*v,h[1]=(a-o)/2*g}var b=Qe(p,e);return b[e*(e-1)]=h[0],b[e*(e-1)+1]=h[1],Eo(b,e,f)}function Ao(t,e,n){return We(t,je(e,n),n)}function No(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return Ao(t,e,r)}))}function Bo(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,e),o=Math.min.apply(Math,n),i=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:o,right:i,bottom:a,width:i-r,height:a-o}}function jo(t,e,n,r){return Bo(No(t,e,n,r))}function zo(t,e,n,r){var o=16===t.length?4:3,i=No(t,n,r,o),a=i[0],s=a[0],l=a[1],c=i[1],u=c[0],d=c[1],f=i[2],p=f[0],h=f[1],v=i[3],g=v[0],m=v[1],b=Ao(t,e,o),y=b[0],x=b[1],E=Math.min(s,u,p,g),S=Math.min(l,d,h,m),C=Math.max(s,u,p,g);return s=s-E||0,{left:E,top:S,right:C,bottom:Math.max(l,d,h,m),origin:[y=y-E||0,x=x-S||0],pos1:[s,l=l-S||0],pos2:[u=u-E||0,d=d-S||0],pos3:[p=p-E||0,h=h-S||0],pos4:[g=g-E||0,m=m-S||0],direction:Ce(i)}}function Io(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Go(t,e){return Io([e[0]-t[0],e[1]-t[1]])}function Ko(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=Se(t,e));var o=Go(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(o,"px")}}function Fo(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n.length,i=n.reduce((function(t,e){return t+e[0]}),0)/o,a=n.reduce((function(t,e){return t+e[1]}),0)/o;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Lo(t,e){var n=t[e];return te(n)?Sr(Sr({},t),n):t}function Wo(t,e){void 0===e&&(e=t?ri(t):null);var n=t&&!Qt(t.offsetWidth),r=0,o=0,i=0,a=0,s=0,l=0,c=0,u=0,d=0,f=0,p=0,h=0,v=1/0,g=1/0,m=1/0,b=1/0,y=!1;if(t)if(n||"svg"===t.tagName.toLowerCase()){var x=t.style,E="border-box"===e.boxSizing,S=parseFloat(e.borderLeftWidth)||0,C=parseFloat(e.borderRightWidth)||0,w=parseFloat(e.borderTopWidth)||0,D=parseFloat(e.borderBottomWidth)||0,M=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),k=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),O=M+(S+C),R=k+(w+D),_=e.position,P=0,T=0;if("clientLeft"in t){var A=null;if("absolute"===_)A=Do(t,document.body,!1).offsetParent;else A=t.parentElement;if(A){var N=ri(A);P=parseFloat(N.width),T=parseFloat(N.height)}}d=Math.max(M,be(e.minWidth,P)||0),f=Math.max(k,be(e.minHeight,T)||0),v=be(e.maxWidth,P),g=be(e.maxHeight,T),isNaN(v)&&(v=1/0),isNaN(g)&&(g=1/0);var B=be(x.width,0)||0,j=be(x.height,0)||0,z=parseFloat(e.width)||0,I=parseFloat(e.height)||0;s=parseFloat(e.width),l=parseFloat(e.height),r=c=Math.abs(z-B)<1?ye(d,B||s,v):z,o=u=Math.abs(I-j)<1?ye(f,j||l,g):I,i=c,a=u,E?(m=v,b=g,p=d,h=f,c=r-O,u=o-R):(m=v+O,b=g+R,p=d+O,h=f+R,r=c+O,o=u+R),i=c+M,a=u+k}else{var G=t.getBBox();y=!0,s=r=G.width,l=o=G.height,c=r,u=o,i=r,a=o}return{svg:y,offsetWidth:r,offsetHeight:o,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,cssWidth:s,cssHeight:l,minWidth:d,minHeight:f,maxWidth:v,maxHeight:g,minOffsetWidth:p,minOffsetHeight:h,maxOffsetWidth:m,maxOffsetHeight:b}}function Yo(t,e){return Se(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Ho(t,e){var n,r=0,o=0,i=0,a=0;if(t)if(t===document.body||t===document.documentElement){i=window.innerWidth,a=window.innerHeight;var s=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];r=(n=[-s[0],-s[1]])[0],o=n[1]}else{var l=t.getBoundingClientRect();r=l.left,o=l.top,i=l.width,a=l.height}var c={left:r,top:o,width:i,height:a,right:r+i,bottom:o+a};return t&&e&&(c.clientLeft=t.clientLeft,c.clientTop=t.clientTop,c.clientWidth=t.clientWidth,c.clientHeight=t.clientHeight,c.scrollWidth=t.scrollWidth,c.scrollHeight=t.scrollHeight,c.overflow="visible"!==ri(t).overflow),c}function Xo(t,e,n,r){var o;if(t)o=t;else if(e)o=[0,0];else{o=qo(n.target,r)}return o}function qo(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,r){var o=[0,0];return r.indexOf("w")>-1&&(o[0]=-1),r.indexOf("e")>-1&&(o[0]=1),r.indexOf("n")>-1&&(o[1]=-1),r.indexOf("s")>-1&&(o[1]=1),o}}}function Vo(t,e){return[Ke(e,t[0]),Ke(e,t[1]),Ke(e,t[2]),Ke(e,t[3])]}function Uo(t){var e=t.left,n=t.top;return Vo([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Zo(t,e){var n;null===(n=t[e])||void 0===n||n.unset(),t[e]=null}function $o(t,e){if(e){var n=lo(e);n.nextStyle=Sr(Sr({},n.nextStyle),t)}return{style:t,cssText:me(t).map((function(e){return"".concat((n=e,r="-",void 0===r&&(r="-"),n.replace(/([a-z])([A-Z])/g,(function(t,e,n){return""+e+r+n.toLowerCase()}))),": ").concat(t[e],";");var n,r})).join("")}}function Jo(t,e,n){var r=e.afterTransform||e.transform;return Sr(Sr({},$o(Sr(Sr(Sr({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function Qo(t,e,n,r){var o=e.datas;o.datas||(o.datas={});var i=Sr(Sr({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:o.datas,stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return o.isStartEvent?r||(o.lastEvent=i):o.isStartEvent=!0,i}function ti(t,e,n){var r=e.datas,o="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Sr(Sr({isDrag:o},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function ei(t,e,n){t._emitter.on(e,n)}function ni(t,e,n,r){return t.triggerEvent(e,n,r)}function ri(t,e){return window.getComputedStyle(t,e)}function oi(t,e,n){var r={},o={};return t.filter((function(t){var i=t.name;if(r[i]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(o[t.ableGroup])return!1;o[t.ableGroup]=!0}return r[i]=!0,!0}))}function ii(t,e){return t===e||null==t&&null==e}function ai(t,e){var n=[],r=[];return t.forEach((function(o,i){var a=e(o,i,t),s=r.indexOf(a),l=n[s]||[];-1===s&&(r.push(a),n.push(l)),l.push(o)})),n}function si(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function li(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function ci(t,e,n){return We(Ne(t,n),je(e,n),n)}function ui(t,e){var n,r=t.is3d?4:3;return n=ci(t.rootMatrix,[e.distX,e.distY],r),e.distX=n[0],e.distY=n[1],e}function di(t,e,n,r,o){return Fe(Ao(t,Ke(n,e),o),r)}function fi(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function pi(t){return Math.abs(t)<=Br?0:t}function hi(t){return function(e){if(!e.isDragging(t))return"";var n=function(t,e){var n,r=t.targetGesto,o=t.controlGesto;return(null==r?void 0:r.isFlag())&&(n=r.getEventData()[e]),!n&&(null==o?void 0:o.isFlag())&&(n=o.getEventData()[e]),n||{}}(e,t),r=n.deg;return r?bo("view-".concat(t,"-dragging"),"view-control-rotation".concat(r)):""}}function vi(t,e){return void 0===e&&(e=[t]),function(n,r){if(r.isRequest)return!!e.some((function(t){return r.requestAble===t}))&&r.parentDirection;var o=r.inputEvent.target;return ke(o,bo("direction"))&&(!t||ke(o,bo(t)))}}function gi(t){var e={};for(var n in t)e[t[n]]=n;return e}function mi(t,e){return t?t instanceof Element?t:ne(t)?e?document.querySelector(t):t:oe(t)?t():"current"in t?t.current:t:null}function bi(t,e){return t?(!(n=t)||!te(n)||n instanceof Element||!ee(n)&&!("length"in n)?[t]:[].slice.call(t)).reduce((function(t,n){return ne(n)&&e?Cr(Cr([],t,!0),[].slice.call(document.querySelectorAll(n)),!0):(ee(n)?t.push(bi(n,e)):t.push(mi(n,e)),t)}),[]):[];var n}function yi(t,e){var n=t.rootMatrix,r=t.is3d,o=Ne(n,r?4:3);return r||(o=ze(o,3,4)),o[12]=0,o[13]=0,o[14]=0,rn(o,e)}function xi(t,e,n,r,o){var i=t[0],a=t[1],s=0,l=0;if(o&&i&&a){var c=Se([0,0],e),u=Se([0,0],r),d=Io(e),f=Math.cos(c-u)*d;if(r[0])if(r[1]){var p=2*r[0]*i,h=2*r[1]*a,v=Io([p+e[0],h+e[1]])-Io([p,h]),g=Se([0,0],[n,1]);s=Math.cos(g)*v,l=Math.sin(g)*v}else l=(s=f)/n;else s=(l=f)*n}else s=r[0]*e[0],l=r[1]*e[1];return[s,l]}function Ei(t,e,n,r){var o,i=n.ratio,a=n.startOffsetWidth,s=n.startOffsetHeight,l=0,c=0,u=r.distX,d=r.distY,f=r.parentDistance,p=r.parentDist,h=r.parentScale,v=n.fixedDirection,g=[0,1].map((function(e){return Math.abs(t[e]-v[e])})),m=[0,1].map((function(t){var e=g[t];return 0!==e&&(e=2/e),e}));if(p)l=p[0],c=p[1],e&&(l?c||(c=l/i):l=c*i);else if(h)l=(h[0]-1)*a,c=(h[1]-1)*s;else if(f){var b=a*g[0],y=s*g[1],x=Io([b,y]);l=f/x*b*m[0],c=f/x*y*m[1]}else{var E=to({datas:n,distX:u,distY:d});E=m.map((function(t,e){return E[e]*t})),l=(o=xi([a,s],E,i,t,e))[0],c=o[1]}return{distWidth:l,distHeight:c}}var Si=wr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,o=e.angle,i=e.originalDatas,a=t.props,s=a.pinchable,l=a.ables;if(!s)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),d=(!0===s?t.controlAbles:l.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[u]})),f=Qo(t,e,{});r&&(f.targets=r);var p=ni(t,c,f);n.isPinch=!1!==p,n.ables=d;var h=n.isPinch;return!!h&&(d.forEach((function(n){if(i[n.name]=i[n.name]||{},n[u]){var r=Sr(Sr({},e),{datas:i[n.name],parentRotate:o,isPinch:!0});n[u](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(t,e){var n=e.datas,r=e.scale,o=e.distance,i=e.originalDatas,a=e.inputEvent,s=e.targets,l=e.angle;if(n.isPinch){var c=o*(1-1/r),u=Qo(t,e,{});s&&(u.targets=s);var d="onPinch".concat(s?"Group":"");ni(t,d,u);var f=n.ables,p="drag".concat(s?"Group":"","Control");return f.forEach((function(n){n[p]&&n[p](t,Sr(Sr({},e),{datas:i[n.name],inputEvent:a,parentDistance:c,parentRotate:l,isPinch:!0}))})),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,o=e.inputEvent,i=e.targets,a=e.originalDatas;if(n.isPinch){var s="onPinch".concat(i?"Group":"","End"),l=ti(t,e,{isDrag:r});i&&(l.targets=i),ni(t,s,l);var c=n.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach((function(n){n[u]&&n[u](t,Sr(Sr({},e),{isDrag:r,datas:a[n.name],inputEvent:o,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Sr(Sr({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Sr(Sr({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Sr(Sr({},e),{targets:t.props.targets}))}});function Ci(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var o=r.groupable;o.childDatas=o.childDatas||[];var i=o.childDatas;return t.moveables.map((function(t,r){return i[r]=i[r]||{},i[r][e]=i[r][e]||{},Sr(Sr({},n),{datas:i[r][e],originalDatas:i[r]})}))}function wi(t,e,n,r,o,i,a){var s=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=o.isPinch,u=o.datas,d=Ci(t,e.name,o),f=t.moveables,p=d.map((function(t,o){var d=f[o],p=d.state,h=p.gestos,v=t;if(s)v=new Xr(a).dragStart(r,t);else{if(h[a]||(h[a]=u.childGestos[o]),!h[a])return;v=Hr(t,p,r,c,i,a)}var g=e[n](d,Sr(Sr({},v),{parentFlag:!0}));return l&&(h[a]=null),g}));return s&&(u.childGestos=f.map((function(t){return t.state.gestos[a]}))),p}function Di(t,e,n,r,o,i){void 0===o&&(o=function(t,e){return e});var a=!!n.match(/End$/g),s=Ci(t,e.name,r),l=t.moveables;return s.map((function(t,r){var s,c=l[r];s=o(c,t);var u=e[n](c,Sr(Sr({},s),{parentFlag:!0}));return u&&i&&i(c,t,u,r),a&&(c.state.gestos={}),u}))}var Mi=["left","right","center"],ki=["top","bottom","middle"],Oi={start:"left",end:"right",center:"center"},Ri={start:"top",end:"bottom",center:"middle"};function _i(t,e){var n=t.props,r=n.snappable,o=n.bounds,i=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,d=u.guidelines,f=u.enableSnap;return!(!r||!f||e&&!0!==r&&r.indexOf(e)<0)&&!!(l||c||o||i||d&&d.length||a&&a.length||s&&s.length)}function Pi(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Ti(t,e){var n=function(t,e){var n=Pi(t),r={};for(var o in n)o in e&&n[o]&&(r[o]=e[o]);return r}(t,e),r=ki.filter((function(t){return t in n})),o=Mi.filter((function(t){return t in n}));return{horizontal:r.map((function(t){return n[t]})),vertical:o.map((function(t){return n[t]}))}}function Ai(t,e,n,r){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var o=t[r];if(!Qt(o))return o}return t[n]}(r,t.props.snapThreshold,5);return Ni(t.state.guidelines,e,n,o)}function Ni(t,e,n,r){return{vertical:zi(t,"vertical",e,r),horizontal:zi(t,"horizontal",n,r)}}function Bi(t,e,n){var r=Ti(t.props.snapDirections,e);return Ai(t,r.vertical,r.horizontal,n)}function ji(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],o=r.offset,i=r.dist,a=r.guideline;return{isSnap:e,offset:o,dist:i,pos:n.pos,guideline:a}}function zi(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===e?0:1,i=n.map((function(n,i){var a=t.map((function(t){var e=t.pos,r=n-e[o];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var n=t.guideline,o=t.dist;return!(n.type!==e||o>r)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:i,guidelineInfos:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),a=i.length>0;return{isSnap:a,index:a?i[0].index:-1,posInfos:i}}function Ii(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return no(e,t)}));else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return no(e,t)})):(r=function(t,e){return eo(e).map((function(e){return t[e]}))}(e,n),r.length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]));else for(var o=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)r.push(o[i]),r.push([(o[i][0]+o[i+1][0])/2,(o[i][1]+o[i+1][1])/2]);return Ai(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),1)}function Gi(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Br?1:r<Br?-1:n-r}function Ki(t,e){return t.slice().sort((function(t,n){var r=t.sign[e],o=n.sign[e],i=t.offset[e],a=n.offset[e];return r?o?Gi({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:a}):-1:1}))[0]}function Fi(t,e){var n=Ee([e[0][0],e[1][0]]),r=Ee([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Li(t,e){var n,r,o=e[0],i=e[1],a=i[0]-o[0],s=i[1]-o[1];if(Math.abs(a)<Br&&(a=0),Math.abs(s)<Br&&(s=0),a)if(s){n=s/a*(t[0]-o[0])+o[1],r=t[1]}else n=o[1],r=t[1];else n=o[0],r=t[0];return n-r}function Wi(t,e,n,r){return void 0===r&&(r=Br),t.every((function(t){var o=Li(t,e);return o<=0===n||Math.abs(o)<=r}))}function Yi(t,e,n,r,o){return void 0===o&&(o=0),r&&e-o<=t||!r&&t<=n+o?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Hi(t,e,n,r,o,i){var a=e[0],s=e[1],l=t[0],c=n[0],u=n[1],d=pi(u[1]-c[1]),f=s,p=a,h=-a/s;if(!pi(u[0]-c[0])){if(i&&!p)return{isBound:!1,offset:0};if(f)return Yi(h*(c[0]-l[0])+l[1],c[1],u[1],r,o);var v=c[0]-l[0];return{isBound:g=Math.abs(v)<=(o||0),offset:g?v:0}}if(!d){if(i&&!f)return{isBound:!1,offset:0};if(p)return Yi((c[1]-l[1])/h+l[0],c[0],u[0],r,o);var g;v=c[1]-l[1];return{isBound:g=Math.abs(v)<=(o||0),offset:g?v:0}}return{isBound:!1,offset:0}}function Xi(t,e,n){return e.map((function(e){var r=function(t,e){var n=e.line,r=e.centerSign,o=e.verticalSign,i=e.horizontalSign,a=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,d=s.height,f=[[l,c],[l,c+d]],p=[[l,c],[l+u,c]],h=[[l+u,c],[l+u,c+d]],v=[[l,c+d],[l+u,c+d]];if(Wi([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Hi(n,a,p,o),m=Hi(n,a,v,o),b=Hi(n,a,f,i),y=Hi(n,a,h,i),x=g.isBound&&m.isBound,E=g.isBound||m.isBound,S=b.isBound&&y.isBound,C=b.isBound||y.isBound,w=li(g.offset,m.offset),D=li(b.offset,y.offset),M=[0,0],k=!1,O=!1;return Math.abs(D)<Math.abs(w)?(M=[w,0],k=E,O=x):(M=[0,D],k=C,O=S),{isAllBound:O,isVerticalBound:E,isHorizontalBound:C,isBound:k,offset:M}}(t,e),o=r.isBound,i=r.offset,a=r.isVerticalBound,s=r.isHorizontalBound,l=e.multiple,c=to({datas:n,distX:i[0],distY:i[1]}).map((function(t,e){return t*(l[e]?2/l[e]:0)}));return{sign:l,isBound:o,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:c}}))}function qi(t,e,n){var r,o=Xi(t,Vi(t,e,[0,0],!1).map((function(t){return Sr(Sr({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),n),i=Ki(o,0),a=Ki(o,1),s=0,l=0,c=i.isVerticalBound||a.isVerticalBound,u=i.isHorizontalBound||a.isHorizontalBound;return(c||u)&&(r=function(t,e){var n=t.datas,r=t.distX,o=t.distY,i=n.beforeMatrix,a=n.matrix,s=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=s?4:3;return Fe(We(e?i:a,Ke(e?l:c,[r,o]),d),u)}({datas:n,distX:-i.offset[0],distY:-a.offset[1]}),s=r[0],l=r[1]),{vertical:{isBound:c,offset:s},horizontal:{isBound:u,offset:l}}}function Vi(t,e,n,r){var o=t.state,i=No(o.allMatrix,100,100,o.is3d?4:3),a=no(i,[0,0]);return function(t,e){var n=[],r=t[0],o=t[1];return r&&o?n.push([[0,2*o],t,[-r,o]],[[2*r,0],t,[r,-o]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):o?(n.push([[0,2*o],[1,o],[-1,o]]),e&&n.push([[-1,0],[-1,o],[-1,-o]],[[1,0],[1,o],[1,-o]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(n,r).map((function(t){var n=t[0],r=t[1],o=t[2],s=[no(i,r),no(i,o)],l=function(t){var e=t[0],n=t[1],r=n[0]-e[0],o=n[1]-e[1];Math.abs(r)<Zt&&(r=0),Math.abs(o)<Zt&&(o=0);var i=0,a=0,s=0;return r?o?(a=1,s=(i=-o/r)*e[0]-e[1]):(a=1,s=-e[1]):(i=-1,s=e[0]),[i,a,s].map((function(t){return De(t,Zt)}))}(s),c=Fi(a,s),u=c.vertical,d=c.horizontal;return{multiple:n,centerSign:Li(a,s)<=0,verticalSign:u,horizontalSign:d,lineConstants:l,line:[no(e,r),no(e,o)]}}))}function Ui(t,e,n,r){var o=r?t.map((function(t){return Ve(t,r)})):t;return[[o[0],o[1]],[o[1],o[3]],[o[3],o[2]],[o[2],o[0]]].some((function(t){var r=Li(n,t)<=0;return!Wi(e,t,r)}))}function Zi(t,e,n,r,o){var i=t.props.innerBounds,a=o*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,c=i.width,u=i.height,d=s-r[0],f=s+c-r[0],p=l-r[1],h=l+u-r[1],v=[[d,p],[f,p],[d,h],[f,h]],g=no(n,[0,0]);if(!Ui(n,v,g,0))return[];var m=[],b=v.map((function(t){return[Io(t),Se([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=Se([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],o=n[1]-e[1];if(!r)return[e[0],0];if(!o)return[0,e[1]];var i=o/r,a=-i*e[0]+e[1];return[-a/(i+1/i),a/(i*i+1)]}(t)),r=function(t){var e=t[0],n=t[1],r=n[0]-e[0],o=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!o)return Math.abs(e[1]);var i=o/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);m.push.apply(m,b.filter((function(t){var e=t[0];return e&&r<=e})).map((function(t){var e=t[0],o=t[1],i=Math.acos(e?r/e:0);return[a+(o+i)-n,a+(o-i)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Ui(e,v,g,t)})).map((function(t){return De(180*t/Math.PI,Br)})))})),m}function $i(t,e,n){var r=t||{},o=r.position,i=void 0===o?"client":o,a=r.left,s=void 0===a?-1/0:a,l=r.top,c=void 0===l?-1/0:l,u=r.right,d=void 0===u?1/0:u,f=r.bottom,p={position:i,left:s,top:c,right:d,bottom:void 0===f?1/0:f};return{vertical:Qi(p,e,!0),horizontal:Qi(p,n,!1)}}function Ji(t,e){var n=t.state,r=n.containerClientRect,o=r.clientHeight,i=r.clientWidth,a=r.clientLeft,s=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,p=e||t.props.bounds||{},h="css"===(p.position||"client"),v=p.left,g=void 0===v?-1/0:v,m=p.top,b=void 0===m?-1/0:m,y=p.right,x=void 0===y?h?-1/0:1/0:y,E=p.bottom,S=void 0===E?h?-1/0:1/0:E;return h&&(x=i+d-c-x,S=o+f-u-S),{left:g+c-a,right:x+c-a,top:b+u-s,bottom:S+u-s}}function Qi(t,e,n){var r=t[n?"left":"top"],o=t[n?"right":"bottom"],i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),s=[];return r+1>i&&s.push({isBound:!0,offset:i-r,pos:r}),o-1<a&&s.push({isBound:!0,offset:a-o,pos:o}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function ta(t,e,n){return(n?t.map((function(t){return Ve(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function ea(t,e,n,r,o){if(!t.props.bounds)return[];var i=o*Math.PI/180,a=Ji(t),s=a.left,l=a.top,c=a.right,u=a.bottom,d=s-r[0],f=c-r[0],p=l-r[1],h=u-r[1],v={left:d,top:p,right:f,bottom:h};if(!ta(n,v,0))return[];var g=[];return[[d,0],[f,0],[p,1],[h,1]].forEach((function(t){var r=t[0],o=t[1];n.forEach((function(t){var n=Se([0,0],t);g.push.apply(g,function(t,e,n){var r=Io(t),o=Math.sqrt(r*r-e*e)||0;return[o,-o].sort((function(e,r){return Math.abs(e-t[n?0:1])-Math.abs(r-t[n?0:1])})).map((function(t){return Se([0,0],n?[t,e]:[e,t])}))}(t,r,o).map((function(t){return i+t-n})).filter((function(t){return!ta(e,v,t)})).map((function(t){return De(180*t/Math.PI,Br)})))}))})),g}function na(t,e){return function(t,e){var n,r=t.direction,o=t.classNames,i=t.size,a=t.pos,s=t.zoom,l=t.key,c="horizontal"===r,u=c?"Y":"X";return e.createElement("div",{key:l,className:o.join(" "),style:(n={},n[c?"width":"height"]="".concat(i),n.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),n)})}(Sr(Sr({},t),{classNames:Cr([bo("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(De(t,.1),"px")}))}),e)}function ra(t,e,n,r,o,i,a,s){var l=t.props.zoom;return n.map((function(t,n){var c=t.type,u=t.pos,d=[0,0];return d[a]=r,d[a?0:1]=-o+u,na({key:"".concat(e,"TargetGuideline").concat(n),classNames:[bo("target","bold",c)],posValue:d,sizeValue:i,zoom:l,direction:e},s)}))}function oa(t,e,n,r,o,i){var a=t.props,s=a.zoom,l=a.isDisplayInnerSnapDigit,c="horizontal"===e?Oi:Ri,u=o[c.start],d=o[c.end];return n.filter((function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(l&&n){var r=n.rect;if(r[c.start]<=u&&d<=r[c.end])return!1}return!0})).map((function(t,n){var o=t.pos,a=t.size,l=t.element,c=t.className,u=[-r[0]+o[0],-r[1]+o[1]];return na({key:"".concat(e,"-default-guideline-").concat(n),classNames:l?[bo("bold"),c]:[bo("normal"),c],direction:e,posValue:u,sizeValue:a,zoom:s},i)}))}function ia(t,e,n,r,o,i,a,s){var l,c=t.props,u=c.snapDigit,d=void 0===u?0:u,f=c.isDisplaySnapDigit,p=void 0===f||f,h=c.snapDistFormat,v=void 0===h?function(t,e){return t}:h,g=c.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",y=Math.abs(o),x=p?parseFloat(y.toFixed(d)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:bo("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[b]="".concat(y,"px"),l)},na({direction:e,classNames:[bo(n),a],size:"100%",posValue:[0,0],sizeValue:y,zoom:g},s),s.createElement("div",{className:bo("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},x>0?v(x,e):""))}function aa(t,e,n,r,o){var i=t.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach((function(s){var l=e.filter((function(t){return t.type===s})),c="vertical"===s?1:0,u=c?0:1,d=function(t,e,n,r){var o="vertical"===t?0:1,i="vertical"===t?1:0,a=o?Oi:Ri,s=n[a.start],l=n[a.end];return ai(e,(function(t){return t.pos[o]})).map((function(e){var n=[],c=[];return e.forEach((function(e){var u,d,f=e.element,p=e.elementRect.rect;if(p[a.end]<s)n.push(e);else if(l<p[a.start])c.push(e);else if(p[a.start]<=s&&l<=p[a.end]&&r){var h=e.pos,v={element:f,rect:Sr(Sr({},p),(u={},u[a.end]=p[a.start],u))},g={element:f,rect:Sr(Sr({},p),(d={},d[a.start]=p[a.end],d))},m=[0,0],b=[0,0];m[o]=h[o],m[i]=h[i],b[o]=h[o],b[i]=h[i]+e.size,n.push({type:t,pos:m,size:0,elementRect:v}),c.push({type:t,pos:b,size:0,elementRect:g})}})),n.sort((function(t,e){return e.pos[i]-t.pos[i]})),c.sort((function(t,e){return t.pos[i]-e.pos[i]})),{total:e,start:n,end:c,inner:[]}}))}(s,l,r,i),f=c?Ri:Oi,p=c?Oi:Ri,h=r[f.start],v=r[f.end];d.forEach((function(e){var i=e.total,l=e.start,d=e.end,g=e.inner,m=n[u]+i[0].pos[u]-r[p.start],b=r;l.forEach((function(e){var r=e.elementRect.rect,i=b[f.start]-r[f.end];if(i>0){var l=[0,0];l[c]=n[c]+b[f.start]-h-i,l[u]=m,a.push(ia(t,s,"dashed",a.length,i,l,e.className,o))}b=r})),b=r,d.forEach((function(e){var r=e.elementRect.rect,i=r[f.start]-b[f.end];if(i>0){var l=[0,0];l[c]=n[c]+b[f.end]-h,l[u]=m,a.push(ia(t,s,"dashed",a.length,i,l,e.className,o))}b=r})),g.forEach((function(e){var r=e.elementRect.rect,i=h-r[f.start],l=r[f.end]-v,d=[0,0],p=[0,0];d[c]=n[c]-i,d[u]=m,p[c]=n[c]+v-h,p[u]=m,a.push(ia(t,s,"dashed",a.length,i,d,e.className,o)),a.push(ia(t,s,"dashed",a.length,l,p,e.className,o))}))}))})),a}function sa(t,e,n,r,o){var i=function(t,e,n,r){var o=e[0]-t[0],i=e[1]-t[1];if(Math.abs(o)<Zt&&(o=0),Math.abs(i)<Zt&&(i=0),!o)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var a=i/o,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!i)return{isOutside:!1,offset:[0,0]};var a=we(t,e),s=we(i,t),l=we(i,e),c=s>a||l>a,u=to({datas:o,distX:i[0],distY:i[1]});return{offset:[u[0],u[1]],isOutside:c}}function la(t,e){return t.isBound?t.offset:e.isSnap?ji(e).offset:0}function ca(t,e,n,r,o,i){if(!_i(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Vo(i.absolutePoses,[e,n]),s=Bo(a),l=s.left,c=s.right,u=s.top,d=s.bottom,f={horizontal:a.map((function(t){return t[1]})),vertical:a.map((function(t){return t[0]}))},p=ua(t,o,Ti(Pi(t.props.snapDirections),{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),f),h=p.vertical,v=p.horizontal,g=qi(t,a,i),m=g.vertical,b=g.horizontal,y=h.isSnap,x=v.isSnap,E=h.isBound||m.isBound,S=v.isBound||b.isBound,C=function(t,e,n,r,o){var i=e[0],a=e[1],s=n[0],l=n[1],c=r[0],u=r[1],d=o[0],f=o[1],p=-d,h=-f;if(t&&i&&a){p=0,h=0;var v=[];if(s&&l?v.push([0,f],[d,0]):s?v.push([d,0]):l?v.push([0,f]):c&&u?v.push([0,f],[d,0]):c?v.push([d,0]):u&&v.push([0,f]),v.length){v.sort((function(t,e){return Io(Fe([i,a],t))-Io(Fe([i,a],e))}));var g=v[0];if(g[0]&&Math.abs(i)>Zt)p=-g[0],h=a*Math.abs(i+p)/Math.abs(i)-a;else if(g[1]&&Math.abs(a)>Zt){var m=a;h=-g[1],p=i*Math.abs(a+h)/Math.abs(m)-i}if(t&&l&&s)if(Math.abs(p)>Zt&&Math.abs(p)<Math.abs(d))p*=b=Math.abs(d)/Math.abs(p),h*=b;else if(Math.abs(h)>Zt&&Math.abs(h)<Math.abs(f)){var b;p*=b=Math.abs(f)/Math.abs(h),h*=b}else p=li(-d,p),h=li(-f,h)}}else p=i||s?-d:0,h=a||l?-f:0;return[p,h]}(r,[e,n],[E,S],[y,x],[li(h.offset,m.offset),li(v.offset,b.offset)]);return[{isBound:E,isSnap:y,offset:C[0]},{isBound:S,isSnap:x,offset:C[1]}]}function ua(t,e,n,r){void 0===r&&(r=n);var o=$i(Ji(t),r.vertical,r.horizontal),i=o.horizontal,a=o.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ai(t,n.vertical,n.horizontal),l=s.horizontal,c=s.vertical,u=la(i[0],l),d=la(a[0],c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:i,snap:l},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:a,snap:c}}}function da(t,e,n,r,o){var i=$i(e,n,r),a=i.horizontal,s=i.vertical,l=Ni(t,n,r,o),c=l.horizontal,u=l.vertical,d=la(a[0],c),f=la(s[0],u),p=Math.abs(d),h=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:h,bounds:s,snap:u}}}function fa(t,e,n,r,o,i){return n.map((function(n){var a=n[0],s=n[1],l=no(e,a),c=no(e,s),u=r?function(t,e,n,r){var o=function(t,e,n){var r=Ji(t),o=r.left,i=r.top,a=r.right,s=r.bottom,l=n[0],c=n[1],u=Fe(n,e),d=u[0],f=u[1];Math.abs(d)<Br&&(d=0),Math.abs(f)<Br&&(f=0);var p=f>0,h=d>0,v={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(0===d&&0===f)return{vertical:v,horizontal:g};if(0===d)p?s<c&&(g.pos=s,g.offset=c-s):i>c&&(g.pos=i,g.offset=c-i);else if(0===f)h?a<l&&(v.pos=a,v.offset=l-a):o>l&&(v.pos=o,v.offset=l-o);else{var m=f/d,b=n[1]-m*l,y=0,x=0,E=!1;h&&a<=l?(y=m*a+b,x=a,E=!0):!h&&l<=o&&(y=m*o+b,x=o,E=!0),E&&(y<i||y>s)&&(E=!1),E||(p&&s<=c?(x=((y=s)-b)/m,E=!0):!p&&c<=i&&(x=((y=i)-b)/m,E=!0)),E&&(v.isBound=!0,v.pos=x,v.offset=l-x,g.isBound=!0,g.pos=y,g.offset=c-y)}return{vertical:v,horizontal:g}}(t,e,n),i=o.horizontal,a=o.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],o=n[1],i=e[0],a=e[1],s=Fe(n,e),l=s[0],c=s[1],u=c>0,d=l>0;l=pi(l),c=pi(c);var f={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:f,horizontal:p};var h=Ai(t,l?[r]:[],c?[o]:[]),v=h.vertical,g=h.horizontal;v.posInfos.filter((function(t){var e=t.pos;return d?e>=i:e<=i})),g.posInfos.filter((function(t){var e=t.pos;return u?e>=a:e<=a})),v.isSnap=v.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=ji(v),b=m.isSnap,y=m.guideline,x=ji(g),E=x.isSnap,S=x.guideline,C=E?S.pos[1]:0,w=b?y.pos[0]:0;if(0===l)E&&(p.isSnap=!0,p.pos=S.pos[1],p.offset=o-p.pos);else if(0===c)b&&(f.isSnap=!0,f.pos=w,f.offset=r-w);else{var D=c/l,M=n[1]-D*r,k=0,O=0,R=!1;b?(k=D*(O=w)+M,R=!0):E&&(O=((k=C)-M)/D,R=!0),R&&(f.isSnap=!0,f.pos=O,f.offset=r-O,p.isSnap=!0,p.pos=k,p.offset=o-k)}return{vertical:f,horizontal:p}}(t,e,n),l=s.horizontal,c=s.vertical,u=pa(i,l),d=pa(a,c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:d,dist:p}}}(t,l,c,o):ua(t,o,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal,f=d.offset,p=d.isBound,h=d.isSnap,v=u.vertical,g=v.offset,m=v.isBound,b=v.isSnap,y=Fe(s,a);if(!g&&!f)return{isBound:m||p,isSnap:b||h,sign:y,offset:[0,0]};var x=function(t,e,n,r){var o=Se(t,e)/Math.PI*180,i=n.vertical,a=i.isBound,s=i.isSnap,l=i.dist,c=n.horizontal,u=c.isBound,d=c.isSnap,f=o%180,p=f<3||f>177,h=f>87&&f<93;return c.dist<l&&(a||s&&!h&&(!r||!p))?"vertical":!u&&(!d||p||r&&h)?"":"horizontal"}(l,c,u,r);if(!x)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===x,S=[0,0];return S=(S=r||1!==Math.abs(s[0])||1!==Math.abs(s[1])||a[0]===s[0]||a[1]===s[1]?sa(l,c,-(E?g:f),E,i).offset:to({datas:i,distX:-g,distY:-f})).map((function(t,e){return t*(y[e]?2/y[e]:0)})),{sign:y,isBound:E?m:p,isSnap:E?b:h,offset:S}}))}function pa(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function ha(t){var e=t.state,n=e.snapOffset,r=e.containerClientRect,o=r.overflow,i=r.scrollHeight,a=r.scrollWidth,s=r.clientHeight,l=r.clientWidth,c=r.clientLeft,u=r.clientTop,d=t.props,f=d.snapGap,p=void 0===f||f,h=d.verticalGuidelines,v=d.horizontalGuidelines,g=d.snapThreshold,m=void 0===g?5:g,b=d.snapGridWidth,y=void 0===b?0:b,x=d.snapGridHeight,E=void 0===x?0:x,S=d.maxSnapElementGuidelineDistance,C=void 0===S?1/0:S,w=Bo(Uo(t.state)),D=w.top,M=w.left,k=w.bottom,O=w.right,R={top:D,left:M,bottom:k,right:O,center:(M+O)/2,middle:(D+k)/2},_=function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var o=(e.elementRects||[]).filter((function(t){return!t.refresh})),i=r.map((function(t){return te(t)&&"element"in t?Sr(Sr({},t),{element:mi(t.element,!0)}):{element:mi(t,!0)}})).filter((function(t){return t.element})),a=un(o.map((function(t){return t.element})),i.map((function(t){return t.element}))),s=a.maintained,l=a.added,c=[];s.forEach((function(t){var e=t[0],n=t[1];c[n]=o[e]})),function(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,o=n.targetClientRect,i=o.top,a=o.left,s=n.rootMatrix,l=n.is3d?4:3,c=function(t,e,n){var r=Ao(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}(s,r,l),u=c[0],d=c[1],f=In(Uo(n)),p=f.minX,h=f.minY,v=Fe([p,h],ci(s,[a-u,i-d],l)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),g=v[0],m=v[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),n=e.left-u,r=e.top-d,o=r+e.height,i=n+e.width,a=ci(s,[n,r],l),c=a[0],f=a[1],p=ci(s,[i,o],l),h=p[0],v=p[1];return Sr(Sr({},t),{rect:{left:c+g,right:h+g,top:f+m,bottom:v+m,center:(c+h)/2+g,middle:(f+v)/2+m}})}))}(t,l.map((function(t){return i[t]}))).map((function(t,e){c[l[e]]=t})),e.elementRects=c;var u=Pi(t.props.elementSnapDirections),d=[];return c.forEach((function(t){var e=t.element,n=t.top,r=void 0===n?u.top:n,o=t.left,i=void 0===o?u.left:o,a=t.right,s=void 0===a?u.right:a,l=t.bottom,c=void 0===l?u.bottom:l,f=t.center,p=void 0===f?u.center:f,h=t.middle,v=void 0===h?u.middle:h,g=t.className,m=t.rect,b=Ti({top:r,right:s,left:i,bottom:c,center:p,middle:v},m),y=b.horizontal,x=b.vertical,E=m.top,S=m.left,C=m.right-S,w=m.bottom-E,D=[C,w];x.forEach((function(n){d.push({type:"vertical",element:e,pos:[De(n,.1),E],size:w,sizes:D,className:g,elementRect:t})})),y.forEach((function(n){d.push({type:"horizontal",element:e,pos:[S,De(n,.1)],size:C,sizes:D,className:g,elementRect:t})}))})),d}(t),P=Cr([],_,!0);return p&&P.push.apply(P,function(t,e,n){var r=t.props,o=r.maxSnapElementGuidelineDistance,i=void 0===o?1/0:o,a=r.maxSnapElementGapDistance,s=void 0===a?1/0:a,l=t.state.elementRects,c=[];return[["vertical",Oi,Ri],["horizontal",Ri,Oi]].forEach((function(t){var r=t[0],o=t[1],a=t[2],u=e[o.start],d=e[o.end],f=e[o.center],p=e[a.start],h=e[a.end];function v(t){var e=t.rect;return e[o.end]<u+n?u-e[o.end]:d-n<e[o.start]?e[o.start]-d:-1}var g=l.filter((function(t){var e=t.rect;return!(e[a.start]>h||e[a.end]<p)&&v(t)>0})).sort((function(t,e){return v(t)-v(e)})),m=[];g.forEach((function(t){g.forEach((function(e){if(t!==e){var n=t.rect,r=e.rect,o=n[a.start],i=n[a.end],s=r[a.start];o>r[a.end]||s>i||m.push([t,e])}}))})),m.forEach((function(t){var a=t[0],l=t[1],p=a.rect,h=l.rect,v=p[o.start],g=p[o.end],m=h[o.start],b=h[o.end],y=0,x=0,E=!1,S=!1,C=!1;if(g<=u&&d<=m){if(S=!0,x=g+(y=(m-g-(d-u))/2)+(d-u)/2,Math.abs(x-f)>n)return}else if(g<m&&b<u+n){if(E=!0,x=b+(y=m-g),Math.abs(x-u)>n)return}else{if(!(g<m&&d-n<v))return;if(C=!0,x=v-(y=m-g),Math.abs(x-d)>n)return}y&&va(e,h,r,i)&&(y>s||c.push({type:r,pos:"vertical"===r?[x,0]:[0,x],element:l.element,size:0,className:l.className,isStart:E,isCenter:S,isEnd:C,gap:y,hide:!0,gapRects:[a,l]}))}))})),c}(t,R,m)),P.push.apply(P,function(t,e,n,r,o,i){void 0===o&&(o=0);void 0===i&&(i=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,De(s-i,.1)],size:n,hide:!0});if(t)for(s=0;s<=n;s+=t)a.push({type:"vertical",pos:[De(s-o,.1),0],size:r,hide:!0});return a}(y,E,o?a:l,o?i:s,c,u)),P.push.apply(P,ga(v||!1,h||!1,o?a:l,o?i:s,c,u,n)),P=P.filter((function(t){var e=t.element,n=t.elementRect,r=t.type;if(!e||!n)return!0;var o=n.rect;return va(R,o,r,C)})),P}function va(t,e,n,r){return"horizontal"===n?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:"vertical"!==n||(Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom)}function ga(t,e,n,r,o,i,a){void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],l=a.left,c=a.top,u=a.bottom,d=n+a.right-l,f=r+u-c;return t&&t.forEach((function(t){var e=te(t)?t:{pos:t};s.push({type:"horizontal",pos:[l,De(e.pos-i+c,.1)],size:d,className:e.className})})),e&&e.forEach((function(t){var e=te(t)?t:{pos:t};s.push({type:"vertical",pos:[De(e.pos-o+l,.1),c],size:f,className:e.className})})),s}function ma(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.state.container,r=t.props.snapContainer||n,o=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(n!==r){var a=mi(r,!0);if(a){var s=Ho(a),l=yi(e,[s.left-o.left,s.top-o.top]),c=yi(e,[s.right-o.right,s.bottom-o.bottom]);i.left=De(l[0],1e-5),i.top=De(l[1],1e-5),i.right=De(c[0],1e-5),i.bottom=De(c[1],1e-5)}}e.snapOffset=i,e.guidelines=ha(t),e.enableSnap=!0}}function ba(t,e,n,r,o,i){var a=No(t,e,n,i?4:3);return Vo(a,Fe(o,no(a,r)))}function ya(t,e,n,r,o,i){var a=function(t,e,n){var r=[];if(n)1!==Math.abs(e[0])||1!==Math.abs(e[1])?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var o=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(n){var i=[t*o[0],n*o[1]];e[0]===i[0]&&e[1]===i[1]||r.push([e,i])}))}))}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach((function(n){r.push([[e[0],-1],[n*t[0],-1]],[[e[0],0],[n*t[0],0]],[[e[0],1],[n*t[0],1]])})):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach((function(n){r.push([[-1,e[1]],[-1,n*t[1]]],[[0,e[1]],[0,n*t[1]]],[[1,e[1]],[1,n*t[1]]])}));return r}(n,i.fixedDirection,r),s=Vi(t,e,n,r),l=Cr(Cr([],fa(t,e,a,r,o,i),!0),Xi(t,s,i),!0),c=Ki(l,0),u=Ki(l,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function xa(t,e,n,r,o,i,a,s){for(var l=Uo(t.state),c=t.props.keepRatio,u=0,d=0,f=0;f<2;++f){var p=ya(t,e(u,d),o,c,a,s),h=p.width,v=p.height,g=h.isBound,m=v.isBound,b=h.offset,y=v.offset;if(1===f&&(g||(b=0),m||(y=0)),0===f&&a&&!g&&!m)return[0,0];if(c){var x=Math.abs(b)*(n?1/n:1),E=Math.abs(y)*(r?1/r:1);(g&&m?x<E:m||!g&&x<E)?b=n*y/r:y=r*b/n}u+=b,d+=y}if(o[0]&&o[1]){var S=function(t,e,n,r,o){var i=[-n[0],-n[1]],a=t.state,s=a.width,l=a.height,c=t.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=c.left,h=void 0===p?-1/0:p,v=c.top,g=void 0===v?-1/0:v,m=c.right,b=void 0===m?1/0:m,y=c.bottom,x=void 0===y?1/0:y;f.forEach((function(t){var n=t[0]!==i[0],a=t[1]!==i[1],c=no(e,t),f=360*Se(r,c)/Math.PI;if(a){var p=c.slice();(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(p[1]=r[1]);var v=sa(r,p,(r[1]<c[1]?x:g)-c[1],!1,o),m=v.offset[1],y=v.isOutside;isNaN(m)||(d=l+(y?1:-1)*Math.abs(m))}if(n){p=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(p[0]=r[0]);var E=sa(r,p,(r[0]<c[0]?b:h)-c[0],!0,o),S=E.offset[0],C=E.isOutside;isNaN(S)||(u=s+(C?1:-1)*Math.abs(S))}}))}return{maxWidth:u,maxHeight:d}}(t,l,o,i,s),C=S.maxWidth,w=S.maxHeight,D=function(t,e,n,r,o,i,a,s,l){var c=no(e,a),u=ua(t,s,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(f||d){var p=to({datas:l,distX:-f,distY:-d}),h=p[0],v=p[1];return[Math.min(o||1/0,n+a[0]*h)-n,Math.min(i||1/0,r+a[1]*v)-r]}return[0,0]}(t,e(u,d).map((function(t){return t.map((function(t){return De(t,1e-4)}))})),n+u,r+d,C,w,o,a,s);u+=b=D[0],d+=y=D[1]}return[u,d]}function Ea(t,e,n,r,o){if(!_i(t,"scalable"))return[0,0];var i=o.startOffsetWidth,a=o.startOffsetHeight,s=o.fixedPosition,l=o.fixedDirection,c=o.is3d,u=xa(t,(function(t,n){return ba(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,o=t.is3d?4:3;return ro(r,Ge(t.targetMatrix,Qe(e,o),o),n,o)}(o,Ke(e,[t/i,n/a])),i,a,l,s,c)}),i,a,n,s,r,o);return[u[0]/i,u[1]/a]}function Sa(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function Ca(t,e,n,r,o,i){var a=$i(Ji(t,i),e,n),s=a.vertical,l=a.horizontal;s.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),l.forEach((function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=[n.pos1,n.pos2,n.pos3,n.pos4],o=no(r,[0,0]),i=e.left,a=e.top,s=e.width,l=e.height,c=[[i,a],[i,a+l]],u=[[i,a],[i+s,a]],d=[[i+s,a],[i+s,a+l]],f=[[i,a+l],[i+s,a+l]],p=Vi(t,r,[0,0],!1),h=[],v=[],g={top:!1,bottom:!1,left:!1,right:!1};return p.forEach((function(t){var e=t.line,n=t.lineConstants,r=Fi(o,e),p=r.horizontal,m=r.vertical,b=Hi(e,n,u,m,1,!0),y=Hi(e,n,f,m,1,!0),x=Hi(e,n,c,p,1,!0),E=Hi(e,n,d,p,1,!0);b.isBound&&!g.top&&(h.push(a),g.top=!0),y.isBound&&!g.bottom&&(h.push(a+l),g.bottom=!0),x.isBound&&!g.left&&(v.push(i),g.left=!0),E.isBound&&!g.right&&(v.push(i+s),g.right=!0)})),{horizontal:h,vertical:v}}(t),u=c.vertical,d=c.horizontal;u.forEach((function(t){pe(r,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||r.push({type:"bounds",pos:t})})),d.forEach((function(t){pe(o,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||o.push({type:"bounds",pos:t})}))}var wa=vi("",["resizable","scalable"]),Da={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,o=n.left,i=n.pos1,a=n.pos2,s=n.pos3,l=n.pos4,c=n.snapRenderInfo;if(!c||!_i(t,""))return[];n.guidelines=ha(t);var u=Math.min(i[0],a[0],s[0],l[0]),d=Math.min(i[1],a[1],s[1],l[1]),f=c.externalPoses||[],p=Uo(t.state),h=[],v=[],g=[],m=[],b=[],y=Bo(p),x=y.width,E=y.height,S=y.top,C=y.left,w=y.bottom,D=y.right,M={left:C,right:D,top:S,bottom:w,center:(C+D)/2,middle:(S+w)/2},k=f.length>0,O=k?Bo(f):{};if(!c.request){if(c.direction&&b.push(Ii(t,p,c.direction)),c.snap){var R=Bo(p);c.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),b.push(Bi(t,R,1))}k&&(c.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),b.push(Bi(t,O,1))),b.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;h.push.apply(h,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),v.push.apply(v,n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),g.push.apply(g,Sa(e)),m.push.apply(m,Sa(n))}))}Ca(t,[C,D],[S,w],h,v),k&&Ca(t,[O.left,O.right],[O.top,O.bottom],h,v,c.externalBounds);var _=Cr(Cr([],g,!0),m,!0),P=_.filter((function(t){return t.element&&!t.gapRects})),T=_.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));return ni(t,"onSnap",{guidelines:_.filter((function(t){return!t.element})),elements:P,gaps:T},!0),Cr(Cr(Cr(Cr(Cr(Cr([],aa(t,P,[u,d],M,e),!0),function(t,e,n,r,o){var i=[];return["horizontal","vertical"].forEach((function(a){var s=e.filter((function(t){return t.type===a})).slice(0,1),l="vertical"===a?0:1,c=l?0:1,u=l?Ri:Oi,d=l?Oi:Ri,f=r[u.start],p=r[u.end],h=r[d.start],v=r[d.end];s.forEach((function(e){var r=e.gap,a=e.gapRects,s=Math.max.apply(Math,Cr([h],a.map((function(t){return t.rect[d.start]})),!1)),g=Math.min.apply(Math,Cr([v],a.map((function(t){return t.rect[d.end]})),!1)),m=(s+g)/2;s!==g&&m!==(h+v)/2&&a.forEach((function(e){var a=e.rect,s=e.className,d=[n[0],n[1]];if(a[u.end]<f)d[l]+=a[u.end]-f;else{if(!(p<a[u.start]))return;d[l]+=a[u.start]-f-r}d[c]+=m-h,i.push(ia(t,l?"vertical":"horizontal","gap",i.length,r,d,s,o))}))}))})),i}(t,T,[u,d],M,e),!0),oa(t,"horizontal",m,[o,r],M,e),!0),oa(t,"vertical",g,[o,r],M,e),!0),ra(t,"horizontal",v,u,r,x,0,e),!0),ra(t,"vertical",h,d,o,E,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ma(t)},drag:function(t){t.state.guidelines=ha(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!wa(t,e)&&!Ga(t,e))||(!e.isRequest&&e.inputEvent?ke(e.inputEvent.target,bo("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ma(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ma(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Ma(t,e,n,r){var o=t.getState(),i=o.renderPoses,a=o.rotation,s=o.direction,l=Lo(t.props,e).zoom,c=s>0?1:-1,u=a/Math.PI*180,d={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var p=f.renderDirectionMap;return n.forEach((function(t){var e=t.dir;d[e]=!0})),n.map((function(t){var n=t.data,o=t.classNames,s=t.dir,f=Lr[s];if(!f||!d[s])return null;p[s]=!0;var h=(De(u,15)+c*Wr[s]+720)%180,v={};return me(n).forEach((function(t){v["data-".concat(t)]=n[t]})),r.createElement("div",Sr({className:bo.apply(void 0,Cr(["control","direction",s,e],o,!1)),"data-rotation":h,"data-direction":s},v,{key:"direction-".concat(s),style:Fo.apply(void 0,Cr([a,l],f.map((function(t){return i[t]})),!1))}))}))}function ka(t,e,n,r){var o=Lo(t.props,n).renderDirections,i=void 0===o?e:o;return i?Ma(t,n,(!0===i?Kr:i).map((function(t){return{data:{},classNames:[],dir:t}})),r):[]}function Oa(t,e,n,r,o,i){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var l=Se(n,r),c=e?De(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:bo.apply(void 0,Cr(["line","direction",e?"edge":"",e],a,!1)),"data-rotation":c,"data-line-key":i,"data-direction":e,style:Ko(n,r,o,l)})}function Ra(t,e,n,r,o){return(!0===n?Gr:n).map((function(n,i){var a=Lr[n],s=a[0],l=a[1];if(null!=l)return Oa(t,n,r[s],r[l],o,"".concat(e,"Edge").concat(i),e)})).filter(Boolean)}function _a(t){return function(e,n){var r=Lo(e.props,t).edge;return r&&(!0===r||r.length)?Cr(Cr([],Ra(n,t,r,e.getState().renderPoses,e.props.zoom),!0),function(t,e,n){return ka(t,["nw","ne","sw","se"],e,n)}(e,t,n),!0):Pa(e,t,n)}}function Pa(t,e,n){return ka(t,Kr,e,n)}var Ta={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,o=n.zoom,i=t.getState(),a=i.dragInfo,s=i.beforeOrigin;if(!r||!a)return[];var l=a.dist;if(!l[0]&&!l[1])return[];var c=Io(l),u=Se(l,[0,0]);return[e.createElement("div",{className:bo("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(u,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,o=e.parentGesto,i=t.state,a=i.target,s=i.gestos;if(s.draggable)return!1;s.draggable=o||t.targetGesto;var l=ri(a);n.datas={},n.left=parseFloat(l.left||"")||0,n.top=parseFloat(l.top||"")||0,n.bottom=parseFloat(l.bottom||"")||0,n.right=parseFloat(l.right||"")||0,n.startValue=[0,0],Vr(t,e),io(e,"translate"),function(t,e){e.absolutePoses=Uo(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=Qo(t,e,Sr({set:function(t){n.startValue=t}},oo(e)));return!1!==(r||ni(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){if(e){Ur(e,"translate");var n=e.datas,r=e.parentEvent,o=e.parentFlag,i=e.isPinch,a=e.isRequest,s=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,d=n.prevDist,f=n.prevBeforeDist,p=n.startValue;if(u){s&&(l+=s[0],c+=s[1]);var h=t.props,v=h.parentMoveable,g=r?0:h.throttleDrag||0,m=r?0:h.throttleDragRotate||0,b=!1,y=0;if(!r&&m>0&&(l||c)){var x=h.startDragRotate||0,E=De(x+180*Se([0,0],[l,c])/Math.PI,m)-x,S=c*Math.abs(Math.cos((E-90)/180*Math.PI)),C=Io([l*Math.abs(Math.cos(E/180*Math.PI)),S]);y=E*Math.PI/180,l=C*Math.cos(y),c=C*Math.sin(y)}if(!i&&!r&&!o&&(!m||l||c)){var w=ca(t,l,c,m,a||s,n),D=w[0],M=w[1],k=D.isSnap,O=D.isBound,R=D.offset,_=M.isSnap,P=M.isBound;b=k||_||O||P,l+=R,c+=M.offset}var T=Ke(Qr({datas:n,distX:l,distY:c}),p),A=Ke($r({datas:n,distX:l,distY:c}),p);m||b||(Me(A,g),Me(T,g)),Me(A,Br),Me(T,Br);var N=Fe(T,p),B=Fe(A,p),j=Fe(B,d),z=Fe(N,f);n.prevDist=B,n.prevBeforeDist=N,n.passDelta=j,n.passDist=B;var I=n.left+N[0],G=n.top+N[1],K=n.right-N[0],F=n.bottom-N[1],L=Zr(n,"translate(".concat(A[0],"px, ").concat(A[1],"px)"),"translate(".concat(B[0],"px, ").concat(B[1],"px)"));if(so(e,L),t.state.dragInfo.dist=r?[0,0]:B,r||v||!j.every((function(t){return!t}))||!z.some((function(t){return!t}))){var W=t.state,Y=W.width,H=W.height,X=Qo(t,e,Sr({transform:L,dist:B,delta:j,translate:A,beforeDist:N,beforeDelta:z,beforeTranslate:T,left:I,top:G,right:K,bottom:F,width:Y,height:H,isPinch:i},$o({transform:L},e)));return!r&&ni(t,"onDrag",X),X}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,Sr(Sr({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var o=ti(t,e,{});return!n&&ni(t,"onDragEnd",o),o}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,o=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var a=wi(t,this,"dragStart",[r||0,o||0],e,!1,"draggable"),s=ni(t,"onDragGroupStart",Sr(Sr({},i),{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=wi(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n){var o=Sr({targets:t.props.targets,events:r},n);return ni(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=wi(t,this,"dragEnd",[0,0],e,!1,"draggable");return ni(t,"onDragGroupEnd",ti(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,o=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?o=t.y-n.top:"deltaY"in t&&(o+=t.deltaY),{datas:e,distX:r,distY:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Aa=vi("resizable"),Na={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:_a("resizable"),dragControlCondition:Aa,viewClassName:hi("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,o=e.isPinch,i=e.isGroup,a=e.parentDirection,s=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,d=Xo(a,o,r,l),f=t.state,p=f.target,h=f.width,v=f.height,g=f.gestos;if(!d||!p)return!1;if(g.resizable)return!1;g.resizable=s||t.controlGesto,!o&&Vr(t,e),l.datas={},l.direction=d,l.startOffsetWidth=h,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.cssWidth,l.startHeight=f.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";function b(t){l.ratio=t&&isFinite(t)?t:0}function y(t){l.fixedDirection=t,l.fixedPosition=no(l.startPositions,t)}function x(t){l.minSize=[be("".concat(t[0]),0)||0,be("".concat(t[1]),0)||0]}function E(t){var e=[t[0]||1/0,t[1]||1/0];re(e[0])&&!isFinite(e[0])||(e[0]=be("".concat(e[0]),0)||1/0),re(e[1])&&!isFinite(e[1])||(e[1]=be("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=m&&ne(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=null!==(n=null==e?void 0:e.parentIsWidth)&&void 0!==n?n:!d[0]&&!d[1]||d[0]||!d[1],l.startPositions=Uo(t.state),b(h/v),y(c||[-d[0],-d[1]]),l.setFixedDirection=y,l.setMin=x,l.setMax=E;var S=Qo(t,e,{direction:d,startRatio:l.ratio,set:function(t){var e=t[0],n=t[1];l.startWidth=e,l.startHeight=n},setMin:x,setMax:E,setRatio:b,setFixedDirection:y,setOrigin:function(t){l.transformOrigin=t},dragStart:Ta.dragStart(t,(new Xr).dragStart([0,0],e))}),C=u||ni(t,"onResizeStart",S);return l.startFixedDirection=l.fixedDirection,!1!==C&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),!!l.isResize&&S},dragControl:function(t,e){var n,r=e.datas,o=e.parentFlag,i=e.isPinch,a=e.parentKeepRatio,s=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,d=e.parentEvent,f=e.resolveMatrix,p=r.isResize,h=r.transformOrigin,v=r.startWidth,g=r.startHeight,m=r.prevWidth,b=r.prevHeight,y=r.minSize,x=r.maxSize,E=r.ratio,S=r.startOffsetWidth,C=r.startOffsetHeight,w=r.isWidth;if(p){if(f){var D=t.state.is3d,M=r.startOffsetMatrix,k=r.startTransformOrigin,O=D?4:3,R=nn(co(e)),_=Math.sqrt(R.length);O!==_&&(R=ze(R,_,O));var P=ro(M,R,k,O),T=No(P,S,C,O);r.startPositions=T,r.nextTargetMatrix=R,r.nextAllMatrix=P}var A=Lo(t.props,"resizable"),N=A.resizeFormat,B=A.throttleResize,j=void 0===B?o?0:1:B,z=A.parentMoveable,I=A.keepRatioFinally,G=r.direction,K=G,F=0,L=0;G[0]||G[1]||(K=[1,1]);var W=E&&(null!=a?a:A.keepRatio)||!1,Y=rt(),H=Y[0],X=Y[1];d||(r.setFixedDirection(r.fixedDirection),ni(t,"onBeforeResize",Qo(t,e,{startFixedDirection:r.startFixedDirection,setFixedDirection:function(t){var e;return r.setFixedDirection(t),e=rt(),H=e[0],X=e[1],[H,X]},boundingWidth:H,boundingHeight:X,setSize:function(t){H=t[0],X=t[1]}},!0)));var q=s;s||(q=!o&&i?mo(t,[0,0]):r.fixedPosition);var V=[0,0];if(i||(V=function(t,e,n,r,o,i,a){if(!_i(t,"resizable"))return[0,0];var s=a.fixedDirection,l=a.nextAllMatrix,c=t.state,u=c.allMatrix,d=c.is3d;return xa(t,(function(t,r){return ba(l||u,e+t,n+r,s,o,d)}),e,n,r,o,i,a)}(t,H,X,G,q,c,r)),l&&(!l[0]&&(V[0]=0),!l[1]&&(V[1]=0)),W){K[0]&&K[1]&&V[0]&&V[1]&&(Math.abs(V[0])>Math.abs(V[1])?V[1]=0:V[0]=0);var U=!V[0]&&!V[1];U&&ot(),K[0]&&!K[1]||V[0]&&!V[1]||U&&w?(H+=V[0],X=H/E):(!K[0]&&K[1]||!V[0]&&V[1]||U&&!w)&&(X+=V[1],H=X*E)}else H+=V[0],X+=V[1],H=Math.max(0,H),X=Math.max(0,X);n=function(t,e,n,r){if(!r)return t.map((function(t,r){return ye(t,e[r],n[r])}));var o=t[0],i=t[1],a=!0===r?o/i:r,s=xe(t,e,!1,a),l=s[0],c=s[1],u=xe(t,n,!0,a),d=u[0],f=u[1];return o<l||i<c?(o=l,i=c):(o>d||i>f)&&(o=d,i=f),[o,i]}([H,X],y,x,!!W&&E),H=n[0],X=n[1],ot(),W&&(u||I)&&(w?X=H/E:H=X*E);var Z=[(F=H-S)-m,(L=X-C)-b];r.prevWidth=F,r.prevHeight=L;var $=go(t,H,X,q,h,r);if(z||!Z.every((function(t){return!t}))||!$.every((function(t){return!t}))){var J=Ta.drag(t,Hr(e,t.state,$,!!i,!1,"draggable")),Q=J.transform,tt=v+F,et=g+L,nt=Qo(t,e,Sr({width:tt,height:et,offsetWidth:Math.round(H),offsetHeight:Math.round(X),startRatio:E,boundingWidth:H,boundingHeight:X,direction:G,dist:[F,L],delta:Z,isPinch:!!i,drag:J},Jo({style:{width:"".concat(tt,"px"),height:"".concat(et,"px")},transform:Q},J,e)));return!d&&ni(t,"onResize",nt),nt}}function rt(){var t=r.fixedDirection,n=Ei(K,W,r,e);F=n.distWidth,L=n.distHeight;var o=K[0]-t[0]||W?Math.max(S+F,Br):S,i=K[1]-t[1]||W?Math.max(C+L,Br):C;return W&&S&&C&&(w?i=o/E:o=i*E),[o,i]}function ot(){var t;N&&(t=N([H,X]),H=t[0],X=t[1]),H=De(H,j),X=De(X,j)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,o=n.startOffsetWidth,i=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var l=t.state,c=l.width-(o+a),u=l.height-(i+s),d=Math.abs(c)>3,f=Math.abs(u)>3;return d&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),f&&(n.startHeight+=u,n.startOffsetHeight+=u,n.prevHeight+=u),d||f?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var o=ti(t,e,{});return!r&&ni(t,"onResizeEnd",o),o}},dragGroupControlCondition:Aa,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Sr(Sr({},e),{isGroup:!0}));if(!r)return!1;var o=Ci(t,"resizable",e);function i(e,r){var o=n.fixedDirection,i=n.fixedPosition,a=no(r.datas.startPositions||Uo(e.state),o),s=We($e(-t.rotation/180*Math.PI,3),[a[0]-i[0],a[1]-i[1],1],3),l=s[0],c=s[1];return r.datas.originalX=l,r.datas.originalY=c,r}var a=n.startOffsetWidth,s=n.startOffsetHeight;function l(){var t=n.minSize;o.forEach((function(e){var n=e.datas,r=n.minSize,o=n.startOffsetWidth,i=n.startOffsetHeight,l=a*(o?r[0]/o:0),c=s*(i?r[1]/i:0);t[0]=Math.max(t[0],l),t[1]=Math.max(t[1],c)}))}function c(){var t=n.maxSize;o.forEach((function(e){var n=e.datas,r=n.maxSize,o=n.startOffsetWidth,i=n.startOffsetHeight,l=a*(o?r[0]/o:0),c=s*(i?r[1]/i:0);t[0]=Math.min(t[0],l),t[1]=Math.min(t[1],c)}))}var u=Di(t,this,"dragControlStart",e,(function(t,e){return i(t,e)}));l(),c();var d=function(t){r.setFixedDirection(t),u.forEach((function(e,n){e.setFixedDirection(t),i(e.moveable,o[n])}))};n.setFixedDirection=d;var f=Sr(Sr({},r),{targets:t.props.targets,events:u.map((function(t){return Sr(Sr({},t),{setMin:function(e){t.setMin(e),l()},setMax:function(e){t.setMax(e),c()}})})),setFixedDirection:d,setMin:function(t){r.setMin(t),l()},setMax:function(t){r.setMax(t),c()}}),p=ni(t,"onResizeGroupStart",f);return n.isResize=!1!==p,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Lo(t.props,"resizable");ei(t,"onBeforeResize",(function(n){ni(t,"onBeforeResizeGroup",Qo(t,e,Sr(Sr({},n),{targets:r.targets}),!0))}));var o=this.dragControl(t,Sr(Sr({},e),{isGroup:!0}));if(o){var i=o.boundingWidth,a=o.boundingHeight,s=o.dist,l=r.keepRatio,c=[i/(i-s[0]),a/(a-s[1])],u=n.fixedPosition,d=Di(t,this,"dragControl",e,(function(e,n){var r=We($e(t.rotation/180*Math.PI,3),[n.datas.originalX*c[0],n.datas.originalY*c[1],1],3),o=r[0],i=r[1];return Sr(Sr({},n),{parentDist:null,parentScale:c,dragClient:Ke(u,[o,i]),parentKeepRatio:l})})),f=Sr({targets:r.targets,events:d},o);return ni(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=Di(t,this,"dragControlEnd",e);return ni(t,"onResizeGroupEnd",ti(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,o=t.getRect();return{isControl:!0,requestStart:function(t){var n;return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(n=null==t?void 0:t.horizontal)||void 0===n||n}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Ba(t,e,n,r,o){var i=t.props.groupable,a=t.state,s=a.is3d?4:3,l=e.origin,c=Ao(t.state.rootMatrix,Fe([l[0],l[1]],i?[0,0]:[a.left,a.top]),s),u=Ke([o.left,o.top],c);e.startAbsoluteOrigin=u,e.prevDeg=Se(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=we(u,[n,r])}function ja(t,e,n){var r=n.defaultDeg,o=n.prevDeg,i=o%360,a=Math.floor(o/360);i<0&&(i+=360),i>t&&i>270&&t<90?++a:i<t&&i<90&&t>270&&--a;var s=e*(360*a+t-r);return n.prevDeg=r+s,s}function za(t,e,n,r){return ja(Se(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Ia(t,e,n,r,o,i){var a=t.props.throttleRotate,s=void 0===a?0:a,l=n.prevSnapDeg,c=0,u=!1;if(i){var d=function(t,e,n){if(!_i(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,o=e.pos2,i=e.pos3,a=e.pos4,s=e.origin,l=n*Math.PI/180,c=[r,o,i,a].map((function(t){return Fe(t,s)})),u=c.map((function(t){return Ve(t,l)})),d=Cr(Cr([],ea(t,c,u,s,n),!0),Zi(t,c,u,s,n),!0);d.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)}));var f=d.length>0;return{isSnap:f,rotation:f?d[0]:n}}(t,e,r);u=d.isSnap,c=o+d.rotation}u||(c=De(o+r,s));var f=c-o;return n.prevSnapDeg=f,[f-l,f,c]}function Ga(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(ke(n,bo("rotation-control"))||ke(n,bo("around-control"))||ke(n,bo("control"))&&ke(n,bo("rotatable")))return!0;var r=t.props.rotationTarget;return!!r&&bi(r,!0).some((function(t){return!!t&&(n===t||n.contains(t))}))}var Ka=Kr.map((function(t){var e="",n="",r="center",o="center";return t.indexOf("n")>-1&&(e="top: -20px;",o="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",o="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(o,";\n    }")})).join("\n"),Fa=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Ka,"\n"),La={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Fa],viewClassName:function(t){return t.isDragging("rotatable")?bo("view-rotation-dragging"):""},render:function(t,e){var n=Lo(t.props,"rotatable"),r=n.rotatable,o=n.rotationPosition,i=n.zoom,a=n.renderDirections,s=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,d=c.direction;if(!r)return null;var f=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];if("none"!==t){var s=(t||"top").split("-"),l=s[0],c=s[1],u=[r,o];"left"===l?u=[i,r]:"right"===l?u=[o,a]:"bottom"===l&&(u=[a,i]);var d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=Yo(u,n);if(c){var p="top"===c||"left"===c,h="bottom"===l||"left"===l;d=u[p&&!h||!p&&h?0:1]}return[d,f]}}(o,u,d),p=[];if(f){var h=f[0],v=f[1];p.push(e.createElement("div",{key:"rotation",className:bo("rotation"),style:{transform:"translate(-50%) translate(".concat(h[0],"px, ").concat(h[1],"px) rotate(").concat(v,"rad)")}},e.createElement("div",{className:bo("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:bo("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}if(a){var g=me(l||{}),m={};g.forEach((function(t){l[t].forEach((function(e){m[e]=t}))}));var b=[];ee(a)&&(b=a.map((function(t){var e=m[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),p.push.apply(p,Ma(t,"rotatable",b,e))}return s&&p.push.apply(p,function(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),o=r.renderPoses,i=r.rotation,a=r.direction,s=n.renderDirectionMap,l=t.props.zoom,c=a>0?1:-1,u=i/Math.PI*180;return me(s).map((function(t){var n=Lr[t];if(!n)return null;var r=(De(u,15)+c*Wr[t]+720)%180;return e.createElement("div",{className:bo("around-control"),"data-rotation":r,"data-direction":t,key:"direction-around-".concat(t),style:Fo.apply(void 0,Cr([i,l],n.map((function(t){return o[t]})),!1))})}))}(t,e)),p},dragControlCondition:Ga,dragControlStart:function(t,e){var n,r,o=e.datas,i=e.clientX,a=e.clientY,s=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,d=t.state,f=d.target,p=d.left,h=d.top,v=d.direction,g=d.beforeDirection,m=d.targetTransform,b=d.moveableClientRect,y=d.offsetMatrix,x=d.targetMatrix,E=d.allMatrix,S=d.width,C=d.height;if(!u&&!f)return!1;var w=t.getRect();o.rect=w,o.transform=m,o.left=p,o.top=h;var D=function(e){o.fixedDirection=e,o.fixedPosition=vo(t,e),j&&j.setFixedDirection(e)},M=i,k=a;if(u||c||l){var O=s||0;o.beforeInfo={origin:w.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},o.afterInfo=Sr(Sr({},o.beforeInfo),{origin:w.origin}),o.absoluteInfo=Sr(Sr({},o.beforeInfo),{origin:w.origin,startValue:O})}else{var R=null===(r=e.inputEvent)||void 0===r?void 0:r.target;if(R){var _=R.getAttribute("data-direction")||"",P=Fr[_];if(P){o.isControl=!0,o.isAroundControl=ke(R,bo("around-control")),o.controlDirection=P;var T=R.getAttribute("data-resolve");T&&(o.resolveAble=T);var A=function(t,e,n){var r=16===t.length?4:3,o=e.map((function(e){return Ao(t,e,r)})),i=n.left,a=n.top;return o.map((function(t){return[t[0]+i,t[1]+a]}))}(d.rootMatrix,d.renderPoses,b);n=no(A,P),M=n[0],k=n[1]}}o.beforeInfo={origin:w.beforeOrigin},o.afterInfo={origin:w.origin},o.absoluteInfo={origin:w.origin,startValue:w.rotation};var N=D;D=function(e){var n=d.is3d?4:3,r=no([[0,0],[S,0],[0,C],[S,C]],e),i=Ke(Be(x,n),r),a=i[0],s=i[1],l=We(y,je([a,s],n)),c=We(E,je([r[0],r[1]],n));N(e),o.beforeInfo.origin=l,o.afterInfo.origin=c,o.absoluteInfo.origin=c,Ba(t,o.beforeInfo,M,k,b),Ba(t,o.afterInfo,M,k,b),Ba(t,o.absoluteInfo,M,k,b)}}o.startClientX=M,o.startClientY=k,o.direction=v,o.beforeDirection=g,o.startValue=0,o.datas={},io(e,"rotate");var B=!1,j=!1;o.isControl&&o.resolveAble&&("resizable"===o.resolveAble&&(j=Na.dragControlStart(t,Sr(Sr({},new Xr("resizable").dragStart([0,0],e)),{parentDirection:o.controlDirection,parentFixedDirection:o.fixedDirection}))));j||(B=Ta.dragStart(t,(new Xr).dragStart([0,0],e))),D(function(t){var e=t.state,n=e.width,r=e.height,o=e.transformOrigin;return[o[0]/(n/2)-1,o[1]/(r/2)-1]}(t));var z=Qo(t,e,Sr(Sr({set:function(t){o.startValue=t*Math.PI/180},setFixedDirection:D},oo(e)),{dragStart:B,resizeStart:j})),I=ni(t,"onRotateStart",z);return o.isRotate=!1!==I,d.snapRenderInfo={request:e.isRequest},!!o.isRotate&&z},dragControl:function(t,e){var n,r,o,i=e.datas,a=e.distX,s=e.distY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,d=e.groupDelta,f=i.beforeDirection,p=i.beforeInfo,h=i.afterInfo,v=i.absoluteInfo,g=i.isRotate,m=i.startValue,b=i.rect,y=i.startClientX,x=i.startClientY;if(g){Ur(e,"rotate");var E,S,C,w,D,M,k,O,R,_=function(t){return zo(t.datas.beforeTransform,[50,50],100,100).direction}(e),P=f*_,T=t.props.parentMoveable,A=180/Math.PI*m,N=v.startValue,B=!1,j=y+a,z=x+s;if(!c&&"parentDist"in e){var I=e.parentDist;S=I,D=I,O=I}else u||c?(S=ja(l,f,p),D=ja(l,P,h),O=ja(l,P,v)):(S=za(j,z,f,p),D=za(j,z,P,h),O=za(j,z,P,v),B=!0);if(ni(t,"onBeforeRotate",Qo(t,e,{beforeRotation:C=A+S,rotation:M=A+D,absoluteRotation:R=N+O,setRotation:function(t){S=D=t-A,O=D}},!0)),E=(n=Ia(t,b,p,S,A,B))[0],S=n[1],C=n[2],w=(r=Ia(t,b,h,D,A,B))[0],D=r[1],M=r[2],k=(o=Ia(t,b,v,O,N,B))[0],O=o[1],R=o[2],k||w||E||T){var G=Zr(i,"rotate(".concat(M,"deg)"),"rotate(".concat(D,"deg)")),K=function(t,e,n){var r=n.fixedDirection,o=n.fixedPosition;return ho(t,"rotate(".concat(e,"deg)"),r,o,n)}(t,D,i),F=Fe(Ke(d||[0,0],K),i.prevInverseDist||[0,0]);i.prevInverseDist=K,i.requestValue=null;var L=po(t,G,F,u,e),W=L,Y=we([j,z],v.startAbsoluteOrigin)-v.startDist,H=void 0;if("resizable"===i.resolveAble){var X=Na.dragControl(t,Sr(Sr({},Hr(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:Y}));X&&(H=X,W=Jo(W,X,e))}var q=Qo(t,e,Sr(Sr({delta:w,dist:D,rotate:M,rotation:M,beforeDist:S,beforeDelta:E,beforeRotate:C,beforeRotation:C,absoluteDist:O,absoluteDelta:k,absoluteRotate:R,absoluteRotation:R,isPinch:!!u,resize:H},L),W));return ni(t,"onRotate",q),q}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ti(t,e,{});return ni(t,"onRotateEnd",r),r}},dragGroupControlCondition:Ga,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,o=r.left,i=r.top,a=r.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(n.beforeDirection*t.rotation);var l=Di(t,this,"dragControlStart",e,(function(t,e){var n=t.state,r=n.left,s=n.top,l=n.beforeOrigin,c=Ke(Fe([r,s],[o,i]),Fe(l,a));return e.datas.startGroupClient=c,e.datas.groupClient=c,Sr(Sr({},e),{parentRotate:0})})),c=ni(t,"onRotateGroupStart",Sr(Sr({},s),{targets:t.props.targets,events:l}));return n.isRotate=!1!==c,!!n.isRotate&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){ei(t,"onBeforeRotate",(function(n){ni(t,"onBeforeRotateGroup",Qo(t,e,Sr(Sr({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var o=n.beforeDirection,i=r.beforeDist,a=i/180*Math.PI,s=Di(t,this,"dragControl",e,(function(t,e){var n=e.datas.startGroupClient,r=e.datas.groupClient,s=r[0],l=r[1],c=Ve(n,a*o),u=c[0],d=c[1],f=[u-s,d-l];return e.datas.groupClient=[u,d],Sr(Sr({},e),{parentRotate:i,groupDelta:f})}));t.rotation=o*r.beforeRotation;var l=Sr({targets:t.props.targets,events:s,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},r);return ni(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=Di(t,this,"dragControlEnd",e);return ni(t,"onRotateGroupEnd",ti(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Wa=vi("scalable"),Ya={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:_a("scalable"),dragControlCondition:Wa,viewClassName:hi("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,o=e.inputEvent,i=Xo(e.parentDirection,r,o,n),a=t.state,s=a.width,l=a.height,c=a.targetTransform,u=a.target,d=a.pos1,f=a.pos2,p=a.pos4;if(!i||!u)return!1;r||Vr(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=i,n.startOffsetWidth=s,n.startOffsetHeight=l,n.startValue=[1,1];var h=we(d,f),v=we(f,p),g=!i[0]&&!i[1]||i[0]||!i[1];function m(t){n.ratio=t&&isFinite(t)?t:0}function b(t){n.fixedDirection=t,n.fixedPosition=no(n.startPositions,t)}n.scaleWidth=h,n.scaleHeight=v,n.scaleXRatio=h/s,n.scaleYRatio=v/l,io(e,"scale"),n.isWidth=g,n.startPositions=Uo(t.state),n.setFixedDirection=b,m(we(d,f)/we(f,p)),b([-i[0],-i[1]]);var y=Qo(t,e,Sr(Sr({direction:i,set:function(t){n.startValue=t},setRatio:m,setFixedDirection:b},oo(e)),{dragStart:Ta.dragStart(t,(new Xr).dragStart([0,0],e))})),x=ni(t,"onScaleStart",y);return n.startFixedDirection=n.fixedDirection,!1!==x&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&y},dragControl:function(t,e){Ur(e,"scale");var n=e.datas,r=e.parentKeepRatio,o=e.parentFlag,i=e.isPinch,a=e.dragClient,s=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,d=n.startOffsetHeight,f=n.isScale,p=n.startValue,h=n.isWidth,v=n.ratio;if(!f)return!1;var g=t.props,m=g.throttleScale,b=g.parentMoveable,y=c;c[0]||c[1]||(y=[1,1]);var x=v&&(null!=r?r:g.keepRatio)||!1,E=t.state;function S(){var t=Ei(y,x,n,e),r=t.distWidth,o=t.distHeight,i=(u+r)/u,a=(d+o)/d;return i=y[0]||x?i*p[0]:p[0],a=y[1]||x?a*p[1]:p[1],0===i&&(i=(l[0]>0?1:-1)*jr),0===a&&(a=(l[1]>0?1:-1)*jr),[i,a]}var C=S();if(!i&&t.props.groupable){var w=(E.snapRenderInfo||{}).direction;ee(w)&&(w[0]||w[1])&&(E.snapRenderInfo={direction:c,request:e.isRequest})}ni(t,"onBeforeScale",Qo(t,e,{scale:C,setFixedDirection:function(t){return n.setFixedDirection(t),C=S()},startFixedDirection:n.startFixedDirection,setScale:function(t){C=t}},!0));var D=[C[0]/p[0],C[1]/p[1]],M=a,k=[0,0];if(a||(M=!o&&i?mo(t,[0,0]):n.fixedPosition),i||(k=Ea(t,D,c,s,n)),x){y[0]&&y[1]&&k[0]&&k[1]&&(Math.abs(k[0]*u)>Math.abs(k[1]*d)?k[1]=0:k[0]=0);var O=!k[0]&&!k[1];if(O&&(h?D[0]=De(D[0]*p[0],m)/p[0]:D[1]=De(D[1]*p[1],m)/p[1]),y[0]&&!y[1]||k[0]&&!k[1]||O&&h){D[0]+=k[0];var R=u*D[0]*p[0]/v;D[1]=R/d/p[1]}else if(!y[0]&&y[1]||!k[0]&&k[1]||O&&!h){D[1]+=k[1];var _=d*D[1]*p[1]*v;D[0]=_/u/p[0]}}else D[0]+=k[0],D[1]+=k[1],k[0]||(D[0]=De(D[0]*p[0],m)/p[0]),k[1]||(D[1]=De(D[1]*p[1],m)/p[1]);0===D[0]&&(D[0]=(l[0]>0?1:-1)*jr),0===D[1]&&(D[1]=(l[1]>0?1:-1)*jr);var P,T,A=[D[0]/l[0],D[1]/l[1]];T=p,C=[(P=D)[0]*T[0],P[1]*T[1]];var N=function(t,e,n,r,o){return ho(t,"scale(".concat(e.join(", "),")"),n,r,o)}(t,D,n.fixedDirection,M,n),B=Fe(N,n.prevInverseDist||[0,0]);if(n.prevDist=D,n.prevInverseDist=N,C[0]===l[0]&&C[1]===l[1]&&B.every((function(t){return!t}))&&!b)return!1;var j=Zr(n,"scale(".concat(C.join(", "),")"),"scale(".concat(D.join(", "),")")),z=Qo(t,e,Sr({offsetWidth:u,offsetHeight:d,direction:c,scale:C,dist:D,delta:A,isPinch:!!i},po(t,j,B,i,e)));return ni(t,"onScale",z),z},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ti(t,e,{});return ni(t,"onScaleEnd",r),r},dragGroupControlCondition:Wa,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var o=Ci(t,"resizable",e);function i(e,r){var o=n.fixedDirection,i=n.fixedPosition,a=no(r.datas.startPositions||Uo(e.state),o),s=We($e(-t.rotation/180*Math.PI,3),[a[0]-i[0],a[1]-i[1],1],3),l=s[0],c=s[1];return r.datas.originalX=l,r.datas.originalY=c,r}n.moveableScale=t.scale;var a=Di(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),s=function(t){r.setFixedDirection(t),a.forEach((function(e,n){e.setFixedDirection(t),i(e.moveable,o[n])}))};n.setFixedDirection=s;var l=Sr(Sr({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=ni(t,"onScaleGroupStart",l);return n.isScale=!1!==c,!!n.isScale&&l},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){ei(t,"onBeforeScale",(function(n){ni(t,"onBeforeScaleGroup",Qo(t,e,Sr(Sr({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var o=n.moveableScale;t.scale=[r.scale[0]*o[0],r.scale[1]*o[1]];var i=t.props.keepRatio,a=r.dist,s=r.scale,l=n.fixedPosition,c=Di(t,this,"dragControl",e,(function(e,n){var r=We($e(t.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),o=r[0],c=r[1];return Sr(Sr({},n),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:Ke(l,[o,c])})})),u=Sr({targets:t.props.targets,events:c},r);return ni(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=Di(t,this,"dragControlEnd",e);return ni(t,"onScaleGroupEnd",ti(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ha(t,e){return t.map((function(t,n){return Jt(t,e[n],1,2)}))}function Xa(t,e,n){var r=Se(t,e),o=Se(t,n)-r;return o>=0?o:o+2*Math.PI}var qa={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:hi("warpable"),render:function(t,e){var n=t.props,r=n.resizable,o=n.scalable,i=n.warpable,a=n.zoom;if(r||o||!i)return[];var s=t.state,l=s.pos1,c=s.pos2,u=s.pos3,d=s.pos4,f=Ha(l,c),p=Ha(c,l),h=Ha(l,u),v=Ha(u,l),g=Ha(u,d),m=Ha(d,u),b=Ha(c,d),y=Ha(d,c);return Cr([e.createElement("div",{className:bo("line"),key:"middeLine1",style:Ko(f,g,a)}),e.createElement("div",{className:bo("line"),key:"middeLine2",style:Ko(p,m,a)}),e.createElement("div",{className:bo("line"),key:"middeLine3",style:Ko(h,b,a)}),e.createElement("div",{className:bo("line"),key:"middeLine4",style:Ko(v,y,a)})],Pa(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return ke(n,bo("direction"))&&ke(n,bo("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,o=t.props.target,i=qo(r.target,n);if(!i||!o)return!1;var a=t.state,s=a.transformOrigin,l=a.is3d,c=a.targetTransform,u=a.targetMatrix,d=a.width,f=a.height,p=a.left,h=a.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=l?u:ze(u,3,4),n.targetInverseMatrix=Ae(Ne(n.warpTargetMatrix,4),3,4),n.direction=i,n.left=p,n.top=h,n.poses=[[0,0],[d,0],[0,f],[d,f]].map((function(t){return Fe(t,s)})),n.nextPoses=n.poses.map((function(t){var e=t[0],r=t[1];return We(n.warpTargetMatrix,[e,r,0,1],4)})),n.startValue=Je(4),n.prevMatrix=Je(4),n.absolutePoses=Uo(a),n.posIndexes=eo(i),Vr(t,e),io(e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:i},!1!==ni(t,"onWarpStart",Qo(t,e,Sr({set:function(t){n.startValue=t}},oo(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,o=e.distX,i=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(Ur(e,"matrix3d"),_i(t,"warpable")){var p=d.map((function(t){return f[t]}));p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var h=ua(t,r,{horizontal:p.map((function(t){return t[1]+i})),vertical:p.map((function(t){return t[0]+o}))}),v=h.horizontal,g=h.vertical;i-=v.offset,o-=g.offset}var m=to({datas:n,distX:o,distY:i},!0),b=n.nextPoses.slice();if(d.forEach((function(t){b[t]=Ke(b[t],m)})),!Nr.every((function(t){return e=t.map((function(t){return u[t]})),n=t.map((function(t){return b[t]})),r=Xa(e[0],e[1],e[2]),o=Xa(n[0],n[1],n[2]),i=Math.PI,!(r>=i&&o<=i||r<=i&&o>=i);var e,n,r,o,i})))return!1;var y=en(u[0],u[2],u[1],u[3],b[0],b[2],b[1],b[3]);if(!y.length)return!1;var x=Jr(n,Ge(a,y,4),!0),E=Ge(Ne(s,4),x,4);n.prevMatrix=x;var S=Ge(c,x,4),C=Zr(n,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return so(e,C),ni(t,"onWarp",Qo(t,e,{delta:E,matrix:S,dist:x,multiply:Ge,transform:C})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,ni(t,"onWarpEnd",ti(t,e,{})),r)}},Va=bo("area-pieces"),Ua=bo("area-piece"),Za=bo("avoid"),$a=bo("view-dragging");function Ja(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,o=n.height;Re(e,Za),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(o,"px")}}function Qa(t){return t.createElement("div",{key:"area_pieces",className:Va},t.createElement("div",{className:Ua}),t.createElement("div",{className:Ua}),t.createElement("div",{className:Ua}),t.createElement("div",{className:Ua}))}var ts={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,o=n.dragArea,i=n.groupable,a=n.passDragArea,s=t.getState(),l=s.width,c=s.height,u=s.renderPoses,d=a?bo("area","pass"):bo("area");if(i)return[e.createElement("div",{key:"area",ref:M(t,"areaElement"),className:d}),Qa(e)];if(!r||!o)return[];var f=en([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=f.length?_o(f,!0):"none";return[e.createElement("div",{key:"area",ref:M(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:p}}),Qa(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,o=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var i=t.areaElement,a=t.state,s=a.moveableClientRect,l=a.renderPoses,c=a.rootMatrix,u=a.is3d,d=s.left,f=s.top,p=Bo(l),h=p.left,v=p.top,g=p.width,m=p.height,b=ci(c,[r-d,o-f],u?4:3),y=b[0],x=b[1],E=[{left:h,top:v,width:g,height:(x-=v)-10},{left:h,top:v,width:(y-=h)-10,height:m},{left:h,top:v+x+10,width:g,height:m-x-10},{left:h+y+10,top:v,width:g-y-10,height:m}],S=[].slice.call(i.nextElementSibling.children);E.forEach((function(t,e){S[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),Oe(i,Za),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Ja(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Ja(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Ja(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ve((function(){e.disableNativeEvent=!1}))}},es=wr("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),o=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:bo("control","origin"),style:Fo(i,n,o),key:"beforeOrigin"})]}});function ns(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var rs={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,o=new Qn,i=mi(r,!0);e.datas.dragScroll=o;var a=e.isControl?"controlGesto":"targetGesto",s=e.targets;o.on("scroll",(function(n){var r=n.container,o=n.direction,i=Qo(t,e,{scrollContainer:r,direction:o}),a=s?"onScrollGroup":"onScroll";s&&(i.targets=s),ni(t,a,i)})).on("move",(function(n){var r=n.offsetX,o=n.offsetY;t[a].scrollBy(r,o,e.inputEvent,!1)})),o.dragStart(e,{container:i})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,o=r.scrollContainer,i=void 0===o?t.getContainer():o,a=r.scrollThreshold,s=void 0===a?0:a,l=r.getScrollPosition,c=void 0===l?ns:l;return n.drag(e,{container:i,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Sr(Sr({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Sr(Sr({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Sr(Sr({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Sr(Sr({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Sr(Sr({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Sr(Sr({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Sr(Sr({},e),{targets:t.props.targets}))}},os={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object},events:{}},is=wr("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},o=r.left,i=void 0===o?0:o,a=r.top,s=void 0===a?0:a,l=r.right,c=void 0===l?0:l,u=r.bottom,d=void 0===u?0:u,f=t.getState(),p=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],v=[];return i>0&&v.push([0,2]),s>0&&v.push([0,1]),c>0&&v.push([1,3]),d>0&&v.push([2,3]),v.map((function(t,n){var r=t[0],o=t[1],i=en([0,0],[100,0],[0,100],[100,100],h[r],h[o],p[r],p[o]);if(i.length)return e.createElement("div",{key:"padding".concat(n),className:bo("padding"),style:{transform:_o(i,!0)}})}))}}),as=["nw","ne","se","sw"];function ss(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var ls=[1,2,5,6],cs=[0,3,4,7],us=[1,-1,-1,1],ds=[1,1,-1,-1];function fs(t,e,n,r,o,i,a,s){void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=n),void 0===s&&(s=r);var l=[],c=!1,u=t.filter((function(t){return!t.virtual})),d=u.map((function(t){var u=t.horizontal,d=t.vertical,f=t.pos;if(d&&!c&&(c=!0,l.push("/")),c){var p=Math.max(0,1===d?f[1]-i:s-f[1]);return l.push(fi(p,r,e)),p}p=Math.max(0,1===u?f[0]-o:a-f[0]);return l.push(fi(p,n,e)),p}));return{radiusPoses:u,styles:l,raws:d}}function ps(t){for(var e=[0,0],n=[0,0],r=t.length,o=0;o<r;++o){var i=t[o];i.sub&&(i.horizontal&&(0===e[1]&&(e[0]=o),e[1]=o-e[0]+1,n[0]=o+1),i.vertical&&(0===n[1]&&(n[0]=o),n[1]=o-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function hs(t,e,n,r,o,i,a){var s,l,c,u;void 0===i&&(i=[0,0]),void 0===a&&(a=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,p=t.slice(0,f),h=t.slice(f+1),v=p.length,g=h.length,m=g>0,b=p[0],y=void 0===b?"0px":b,x=p[1],E=void 0===x?y:x,S=p[2],C=void 0===S?y:S,w=p[3],D=void 0===w?E:w,M=h[0],k=void 0===M?y:M,O=h[1],R=void 0===O?m?k:E:O,_=h[2],P=void 0===_?m?k:C:_,T=h[3],A=void 0===T?m?R:D:T,N=[y,E,C,D].map((function(t){return be(t,e)})),B=[k,R,P,A].map((function(t){return be(t,n)})),j=N.slice(),z=B.slice();s=ss([j[0],j[1]],e),j[0]=s[0],j[1]=s[1],l=ss([j[3],j[2]],e),j[3]=l[0],j[2]=l[1],c=ss([z[0],z[3]],n),z[0]=c[0],z[3]=c[1],u=ss([z[1],z[2]],n),z[1]=u[0],z[2]=u[1];var I=a?j:j.slice(0,Math.max(i[0],v)),G=a?z:z.slice(0,Math.max(i[1],g));return Cr(Cr([],I.map((function(t,e){var i=as[e];return{virtual:e>=v,horizontal:us[e],vertical:0,pos:[r+t,o+(-1===ds[e]?n:0)],sub:!0,raw:N[e],direction:i}})),!0),G.map((function(t,n){var i=as[n];return{virtual:n>=g,horizontal:0,vertical:ds[n],pos:[r+(-1===us[n]?e:0),o+t],sub:!0,raw:B[n],direction:i}})),!0)}var vs=[[0,-1,"n"],[1,0,"e"]],gs=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ms(t,e,n){var r=t.props.clipRelative,o=t.state,i=o.width,a=o.height,s=e,l=s.type,c=s.poses,u="rect"===l,d="circle"===l;if("polygon"===l)return n.map((function(t){return"".concat(fi(t[0],i,r)," ").concat(fi(t[1],a,r))}));if(u||"inset"===l){var f=n[1][1],p=n[3][0],h=n[7][0],v=n[5][1];if(u)return[f,p,v,h].map((function(t){return"".concat(t,"px")}));var g=[f,i-p,a-v,h].map((function(t,e){return fi(t,e%2?i:a,r)}));if(n.length>8){var m=Fe(n[4],n[0]),b=m[0],y=m[1];g.push.apply(g,Cr(["round"],fs(c.slice(8).map((function(t,e){return Sr(Sr({},t),{pos:n[e]})})),r,b,y,h,f,p,v).styles,!1))}return g}if(d||"ellipse"===l){var x=n[0],E=fi(Math.abs(n[1][1]-x[1]),d?Math.sqrt((i*i+a*a)/2):a,r);return(g=d?[E]:[fi(Math.abs(n[2][0]-x[0]),i,r),E]).push("at",fi(x[0],i,r),fi(x[1],a,r)),g}}function bs(t,e,n,r){var o=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return gs.map((function(t){var e=t[0],n=t[1],r=t[2],a=o[e+1],s=i[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[a,s]}}))}function ys(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach((function(t){var r=t.pos;e[0]=Math.min(e[0],r[0]),e[1]=Math.max(e[1],r[0]),n[0]=Math.min(n[0],r[1]),n[1]=Math.max(n[1],r[1])})),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function xs(t,e,n,r,o){var i,a,s,l,c,u,d,f=o;if(!f){var p=ri(t),h=p.clipPath;f="none"!==h?h:p.clip}if(f&&"none"!==f&&"auto"!==f||(f=r)){var v=ue(f),g=v.prefix,m=void 0===g?f:g,b=v.value,y=void 0===b?"":b,x="circle"===m,E=" ";if("polygon"===m){E=",";var S=(k=ce(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),o=r[0],i=r[1];return{vertical:1,horizontal:1,pos:[be(o,e),be(i,n)]}}));return{type:m,clipText:f,poses:S,splitter:E}}if(x||"ellipse"===m){var C="",w="",D=0,M=0,k=le(y);if(x){var O;O=void 0===(i=k[0])?"50%":i,C=void 0===(a=k[2])?"50%":a,w=void 0===(s=k[3])?"50%":s,D=be(O,Math.sqrt((e*e+n*n)/2)),M=D}else{var R,_;R=void 0===(l=k[0])?"50%":l,_=void 0===(c=k[1])?"50%":c,C=void 0===(u=k[3])?"50%":u,w=void 0===(d=k[4])?"50%":d,D=be(R,e),M=be(_,n)}var P=[be(C,e),be(w,n)];S=Cr([{vertical:1,horizontal:1,pos:P,direction:"nesw"}],vs.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[P[0]+t[0]*D,P[1]+t[1]*M]}})),!0);return{type:m,clipText:f,radiusX:D,radiusY:M,left:P[0]-D,top:P[1]-M,poses:S,splitter:E}}if("inset"===m){var T=(k=le(y||"0 0 0 0")).indexOf("round"),A=(T>-1?k.slice(0,T):k).length,N=k.slice(A+1),B=k.slice(0,A),j=B[0],z=B[1],I=void 0===z?j:z,G=B[2],K=void 0===G?j:G,F=B[3],L=void 0===F?I:F,W=[j,K].map((function(t){return be(t,n)})),Y=W[0],H=W[1],X=[L,I].map((function(t){return be(t,e)})),q=X[0],V=X[1],U=e-V,Z=n-H,$=hs(N,U-q,Z-Y,q,Y);return{type:"inset",clipText:f,poses:S=Cr(Cr([],bs(Y,U,Z,q),!0),$,!0),top:Y,left:q,right:U,bottom:Z,radius:N,splitter:E}}if("rect"===m){E=",";var J=(k=ce(y||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map((function(t){return de(t).value}));return{type:"rect",clipText:f,poses:S=bs(Y=J[0],V=J[1],H=J[2],q=J[3]),top:Y,right:V,bottom:H,left:q,values:k,splitter:E}}}}function Es(t,e){var n=qr(t,e),r=n[0],o=n[1],i=e.datas,a=i.clipPath,s=i.clipIndex,l=a,c=l.type,u=l.poses,d=l.splitter,f=u.map((function(t){return t.pos}));if("polygon"===c)f.splice(s,0,[r,o]);else{if("inset"!==c)return;var p=ls.indexOf(s),h=cs.indexOf(s),v=u.length;if(function(t,e,n,r,o,i,a,s,l,c,u){void 0===c&&(c=0),void 0===u&&(u=0);var d=ps(t.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var h=1===us[r]?i-c:s-i,v=f[1];v<=r;++v){var g=1===ds[v]?u:l,m=0;if(r===v?m=i:0===v?m=c+h:-1===us[v]&&(m=s-(e[n][0]-c)),t.splice(n+v,0,{horizontal:us[v],vertical:0,pos:[m,g]}),e.splice(n+v,0,[m,g]),0===v)break}else if(o>-1){var b=1===ds[o]?a-u:l-a;if(0===f[1]&&0===p[1]){var y=[c+b,u];t.push({horizontal:us[0],vertical:0,pos:y}),e.push(y)}var x=p[0];for(v=p[1];v<=o&&(m=1===us[v]?c:s,g=0,o===v?g=a:0===v?g=u+b:1===ds[v]?g=e[n+x][1]:-1===ds[v]&&(g=l-(e[n+x][1]-u)),t.push({horizontal:0,vertical:ds[v],pos:[m,g]}),e.push([m,g]),0!==v);++v);}}(u,f,8,p,h,r,o,f[4][0],f[4][1],f[0][0],f[0][1]),v===u.length)return}var g=ms(t,a,f);ni(t,"onClip",Qo(t,e,{clipEventType:"added",clipType:c,poses:f,clipStyles:g,clipStyle:"".concat(c,"(").concat(g.join(d),")"),distX:0,distY:0}))}function Ss(t,e){var n=e.datas,r=n.clipPath,o=n.clipIndex,i=r,a=i.type,s=i.poses,l=i.splitter,c=s.map((function(t){return t.pos})),u=c.length;if("polygon"===a)s.splice(o,1),c.splice(o,1);else{if("inset"!==a)return;if(o<8)return;if(function(t,e,n,r,o){void 0===o&&(o=e.length);var i=ps(t.slice(r)),a=i.horizontalRange,s=i.verticalRange,l=n-r,c=0;if(0===l)c=o;else if(l>0&&l<a[1])c=a[1]-l;else{if(!(l>=s[0]))return;c=s[0]+s[1]-l}t.splice(n,c),e.splice(n,c)}(s,c,o,8,u),u===s.length)return}var d=ms(t,r,c);ni(t,"onClip",Qo(t,e,{clipEventType:"removed",clipType:a,poses:c,clipStyles:d,clipStyle:"".concat(a,"(").concat(d.join(l),")"),distX:0,distY:0}))}var Cs={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,o=n.defaultClipPath,i=n.clipArea,a=n.zoom,s=t.getState(),l=s.target,c=s.width,u=s.height,d=s.allMatrix,f=s.is3d,p=s.left,h=s.top,v=s.pos1,g=s.pos2,m=s.pos3,b=s.pos4,y=s.clipPathState,x=s.snapBoundInfos,E=s.rotation;if(!l)return[];var S=xs(l,c,u,o||"inset",y||r);if(!S)return[];var C=f?4:3,w=S.type,D=S.poses.map((function(t){var e=Ao(d,t.pos,C);return[e[0]-p,e[1]-h]})),M=[],k=[],O="rect"===w,R="inset"===w,_="polygon"===w;if(O||R||_){var P=R?D.slice(0,8):D;k=P.map((function(t,n){var r=0===n?P[P.length-1]:P[n-1],o=Se(r,t),i=Go(r,t);return e.createElement("div",{key:"clipLine".concat(n),className:bo("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(i,"px"),transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(o,"rad) scaleY(").concat(a,")")}})}))}if(M=D.map((function(t,n){return e.createElement("div",{key:"clipControl".concat(n),className:bo("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})})),R&&M.push.apply(M,D.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl".concat(n),className:bo("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})}))),"circle"===w||"ellipse"===w){var T=S.left,A=S.top,N=S.radiusX,B=S.radiusY,j=Fe(Ao(d,[T,A],C),Ao(d,[0,0],C)),z=j[0],I=j[1],G="none";if(!i){for(var K=Math.max(10,N/5,B/5),F=[],L=0;L<=K;++L){var W=2*Math.PI/K*L;F.push([N+(N-a)*Math.cos(W),B+(B-a)*Math.sin(W)])}F.push([N,-2]),F.push([-2,-2]),F.push([-2,2*B+2]),F.push([2*N+2,2*B+2]),F.push([2*N+2,-2]),F.push([N,-2]),G="polygon(".concat(F.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:bo("clip-ellipse","snap-control"),style:{width:"".concat(2*N,"px"),height:"".concat(2*B,"px"),clipPath:G,transform:"translate(".concat(-p+z,"px, ").concat(-h+I,"px) ").concat(_o(d))}}))}if(i){var Y=Bo(Cr([v,g,m,b],D,!0)),H=Y.width,X=Y.height,q=Y.left,V=Y.top;if(_||O||R){F=R?D.slice(0,8):D;M.push(e.createElement("div",{key:"clipArea",className:bo("clip-area","snap-control"),style:{width:"".concat(H,"px"),height:"".concat(X,"px"),transform:"translate(".concat(q,"px, ").concat(V,"px)"),clipPath:"polygon(".concat(F.map((function(t){return"".concat(t[0]-q,"px ").concat(t[1]-V,"px")})).join(", "),")")}}))}}return x&&["vertical","horizontal"].forEach((function(t){var n=x[t],r="horizontal"===t;n.isSnap&&k.push.apply(k,n.snap.posInfos.map((function(n,o){var i=n.pos,s=Fe(Ao(d,r?[0,i]:[i,0],C),[p,h]),l=Fe(Ao(d,r?[c,i]:[i,u],C),[p,h]);return Oa(e,"",s,l,a,"clip".concat(t,"snap").concat(o),"guideline")}))),n.isBound&&k.push.apply(k,n.bounds.map((function(n,o){var i=n.pos,s=Fe(Ao(d,r?[0,i]:[i,0],C),[p,h]),l=Fe(Ao(d,r?[c,i]:[i,u],C),[p,h]);return Oa(e,"",s,l,a,"clip".concat(t,"bounds").concat(o),"guideline","bounds","bold")})))})),Cr(Cr([],M,!0),k,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Sr(Sr({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,o=r.defaultClipPath,i=r.customClipPath,a=n.target,s=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=e.datas,f=xs(a,s,l,o||"inset",i);if(!f)return!1;var p=f.clipText;return!1===ni(t,"onClipStart",Qo(t,e,{clipType:f.type,clipStyle:p,poses:f.poses.map((function(t){return t.pos}))}))?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,Vr(t,e),!0)},dragControl:function(t,e){var n,r=e.datas,o=e.originalDatas,i=e.isDragTarget;if(!r.isClipStart)return!1;var a=r,s=a.isControl,l=a.isLine,c=a.isArea,u=a.clipIndex,d=a.clipPath;if(!d)return!1;var f=Lo(t.props,"clippable"),p=f.keepRatio,h=0,v=0,g=o.draggable,m=to(e);i&&g?(n=g.prevBeforeDist,h=n[0],v=n[1]):(h=m[0],v=m[1]);var b=[h,v],y=t.state,x=y.width,E=y.height,S=!c&&!s&&!l,C=d.type,w=d.poses,D=d.splitter,M=w.map((function(t){return t.pos}));S&&(h=-h,v=-v);var k=!s||"nesw"===w[u].direction,O="inset"===C||"rect"===C,R=w.map((function(){return[0,0]}));if(s&&!k){var _=w[u],P=_.horizontal,T=_.vertical,A=[h*Math.abs(P),v*Math.abs(T)];R=function(t,e,n,r,o){var i=t[e],a=i.direction,s=i.sub,l=t.map((function(){return[0,0]})),c=a?a.split(""):[];if(r&&e<8){var u=c.filter((function(t){return"w"===t||"e"===t})),d=c.filter((function(t){return"n"===t||"s"===t})),f=u[0],p=d[0];l[e]=n;var h=ys(t),v=h[0],g=h[1],m=v&&g?v/g:0;if(m&&o){var b=t[(e+4)%8].pos,y=[0,0];a.indexOf("w")>-1?y[0]=-1:a.indexOf("e")>-1&&(y[0]=1),a.indexOf("n")>-1?y[1]=-1:a.indexOf("s")>-1&&(y[1]=1);var x=xi([v,g],n,m,y,!0),E=v+x[0],S=g+x[1],C=b[1],w=b[1],D=b[0],M=b[0];-1===y[0]?D=M-E:1===y[0]?M=D+E:(D-=E/2,M+=E/2),-1===y[1]?C=w-S:w=1===y[1]?C+S:(C=w-S/2)+S;var k=bs(C,M,w,D);t.forEach((function(t,e){l[e][0]=k[e].pos[0]-t.pos[0],l[e][1]=k[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(f)>-1&&(l[e][0]=n[0]),r.indexOf(p)>-1&&(l[e][1]=n[1]))})),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),p&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else a&&!s?c.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,o){var i=t.direction,a=t.horizontal,s=t.vertical;i&&-1!==i.indexOf(e)&&(l[o]=[r||!a?0:n[0],r&&s?n[1]:0])}))})):l[e]=n;return l}(w,u,A,O,p)}else k&&(R=M.map((function(){return[h,v]})));var N=M.map((function(t,e){return Ke(t,R[e])})),B=Cr([],N,!0);y.snapBoundInfos=null;var j="circle"===d.type,z="ellipse"===d.type;if(j||z){var I=Bo(N),G=Math.abs(I.bottom-I.top),K=Math.abs(z?I.right-I.left:G),F=N[0][1]+G,L=N[0][0]-K,W=N[0][0]+K;j&&(B.push([W,I.bottom]),R.push([1,0])),B.push([I.left,F]),R.push([0,1]),B.push([L,I.bottom]),R.push([1,0])}var Y=ga((f.clipHorizontalGuidelines||[]).map((function(t){return be("".concat(t),E)})),(f.clipVerticalGuidelines||[]).map((function(t){return be("".concat(t),x)})),x,E),H=[],X=[];if(j||z)H=[B[4][0],B[2][0]],X=[B[1][1],B[3][1]];else if(O){var q=[B[0],B[2],B[4],B[6]],V=[R[0],R[2],R[4],R[6]];H=q.filter((function(t,e){return V[e][0]})).map((function(t){return t[0]})),X=q.filter((function(t,e){return V[e][1]})).map((function(t){return t[1]}))}else H=B.filter((function(t,e){return R[e][0]})).map((function(t){return t[0]})),X=B.filter((function(t,e){return R[e][1]})).map((function(t){return t[1]}));var U=[0,0],Z=da(Y,f.clipTargetBounds&&{left:0,top:0,right:x,bottom:E},H,X,5),$=Z.horizontal,J=Z.vertical,Q=$.offset,tt=J.offset;if($.isBound&&(U[1]+=Q),J.isBound&&(U[0]+=tt),(z||j)&&0===R[0][0]&&0===R[0][1]){var et=(I=Bo(N)).bottom-I.top,nt=z?I.right-I.left:et;nt-=J.isBound?Math.abs(tt):0===J.snapIndex?-tt:tt,et-=$.isBound?Math.abs(Q):0===$.snapIndex?-Q:Q,j&&(nt=et=Gi(J,$)>0?et:nt);var rt=B[0];B[1][1]=rt[1]-et,B[2][0]=rt[0]+nt,B[3][1]=rt[1]+et,B[4][0]=rt[0]-nt}else if(O&&p&&s){var ot=ys(w),it=ot[0],at=ot[1],st=it&&at?it/at:0,lt=w[u].direction||"",ct=B[1][1];F=B[5][1],L=B[7][0],W=B[3][0];Q<=tt?Q=tt/st:tt=Q*st,lt.indexOf("w")>-1?L-=tt:lt.indexOf("e")>-1?W-=tt:(L+=tt/2,W-=tt/2),lt.indexOf("n")>-1?ct-=Q:lt.indexOf("s")>-1?F-=Q:(ct+=Q/2,F-=Q/2);var ut=bs(ct,W,F,L);B.forEach((function(t,e){var n;n=ut[e].pos,t[0]=n[0],t[1]=n[1]}))}else B.forEach((function(t,e){var n=R[e];n[0]&&(t[0]-=tt),n[1]&&(t[1]-=Q)}));var dt=ms(t,d,N),ft="".concat(C,"(").concat(dt.join(D),")");if(y.clipPathState=ft,j||z)H=[B[4][0],B[2][0]],X=[B[1][1],B[3][1]];else if(O){H=(q=[B[0],B[2],B[4],B[6]]).map((function(t){return t[0]})),X=q.map((function(t){return t[1]}))}else H=B.map((function(t){return t[0]})),X=B.map((function(t){return t[1]}));if(y.snapBoundInfos=da(Y,f.clipTargetBounds&&{left:0,top:0,right:x,bottom:E},H,X,1),g){var pt=y.is3d,ht=y.allMatrix,vt=pt?4:3,gt=U;i&&(gt=[b[0]+U[0]-m[0],b[1]+U[1]-m[1]]),g.deltaOffset=Ge(ht,[gt[0],gt[1],0,0],vt)}return ni(t,"onClip",Qo(t,e,{clipEventType:"changed",clipType:C,poses:N,clipStyle:ft,clipStyles:dt,distX:h,distY:v})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,o=e.isDouble,i=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(ni(t,"onClipEnd",ti(t,e,{})),o&&(s?Ss(t,e):i&&Es(t,e)),o||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ws={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:ke(e.inputEvent.target,bo("origin"))},dragControlStart:function(t,e){var n=e.datas;Vr(t,e);var r=Qo(t,e,{dragStart:Ta.dragStart(t,(new Xr).dragStart([0,0],e))}),o=ni(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===o?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,o=e.isRequest;if(!n.isDragOrigin)return!1;var i=to(e),a=i[0],s=i[1],l=t.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,p=l.is3d,h=t.props.originRelative,v=void 0===h||h,g=p?4:3,m=[a,s];if(o){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var y=Ke(n.startOrigin,m),x=Ke(n.startTargetOrigin,m),E=Fe(m,n.prevOrigin),S=ro(d,f,y,g),C=t.getRect(),w=Bo(No(S,c,u,g)),D=[C.left-w.left,C.top-w.top];n.prevOrigin=m;var M=Qo(t,e,{width:c,height:u,origin:y,dist:m,delta:E,transformOrigin:[fi(x[0],c,v),fi(x[1],u,v)].join(" "),drag:Ta.drag(t,Hr(e,t.state,D,!!r,!1))});return ni(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(ni(t,"onDragOriginEnd",ti(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,o=0,i=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-i[0],a[1]=t.origin[1]-i[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?o=t.y-n.top:"deltaY"in t&&(o+=t.deltaY)),{datas:e,distX:r,distY:o,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ds(t,e,n,r,o,i){var a;void 0===r&&(r=[0,0]);if(o)a=o;else{var s=ri(t);a=s&&s.borderRadius||""}return hs(!a||!o&&"0px"===a?[]:le(a),e,n,0,0,r,i)}function Ms(t,e,n,r,o){var i=t.state,a=i.width,s=i.height,l=fs(o,t.props.roundRelative,a,s),c=l.raws,u=l.styles,d=function(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}(l.radiusPoses,c),f=d.horizontals,p=d.verticals,h=u.join(" ");i.borderRadiusState=h,ni(t,"onRound",Qo(t,e,Sr({horizontals:f,verticals:p,borderRadius:h,width:a,height:s,delta:r,dist:n},$o({borderRadius:h},e))))}var ks={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n    z-index: 3;\n}",".control.border-radius.vertical {\n    background: #d6d;\n    z-index: 2;\n}",".control.border-radius.virtual {\n    opacity: 0.5;\n    z-index: 1;\n}",":host.round-line-clickable .line.direction {\n    cursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?bo("round-line-clickable"):""},render:function(t,e){var n=t.getState(),r=n.target,o=n.width,i=n.height,a=n.allMatrix,s=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=t.props,f=d.minRoundControls,p=void 0===f?[0,0]:f,h=d.maxRoundControls,v=void 0===h?[4,4]:h,g=d.zoom,m=d.roundPadding,b=void 0===m?0:m,y=d.isDisplayShadowRoundControls;if(!r)return null;var x=s?4:3,E=Ds(r,o,i,p,u,!0);if(!E)return null;var S=0,C=0;return E.map((function(t,n){var r=t.horizontal,o=t.vertical,i=t.direction||"",s=Cr([],t.pos,!0);C+=Math.abs(r),S+=Math.abs(o),r&&i.indexOf("n")>-1&&(s[1]-=b),o&&i.indexOf("w")>-1&&(s[0]-=b),r&&i.indexOf("s")>-1&&(s[1]+=b),o&&i.indexOf("e")>-1&&(s[0]+=b);var u=Fe(Ao(a,s,x),[l,c]),d=t.vertical?S<=v[1]&&(y||!t.virtual):C<=v[0]&&(y||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(n),className:bo("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":n,style:{display:d?"block":"none",transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) scale(").concat(g,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,o=n.target,i=o.getAttribute("class")||"",a=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=a?parseInt(o.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=o.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!a&&!s)return!1;if(!1===ni(t,"onRoundStart",Qo(t,e,{})))return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=a,r.isLine=s,Vr(t,e);var d=t.props,f=d.roundRelative,p=d.minRoundControls,h=void 0===p?[0,0]:p,v=t.state,g=v.target,m=v.width,b=v.height;r.isRound=!0,r.prevDist=[0,0];var y=Ds(g,m,b,h,"",!0)||[];return r.controlPoses=y,v.borderRadiusState=fs(y,f,m,b).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var o=n.controlIndex,i=to(e),a=i[0],s=i[1],l=[a,s],c=Fe(l,n.prevDist),u=t.props.maxRoundControls,d=void 0===u?[4,4]:u,f=t.state,p=f.width,h=f.height,v=r[o],g=v.vertical,m=v.horizontal,b=r.map((function(t){var e=t.horizontal,n=t.vertical,r=[e*m*l[0],n*g*l[1]];if(e){if(1===d[0])return r;if(d[0]<4&&e!==m)return r}else{if(0===d[1])return r[1]=n*m*l[0]/p*h,r;if(g){if(1===d[1])return r;if(d[1]<4&&n!==g)return r}}return[0,0]}));b[o]=l;var y=r.map((function(t,e){return Sr(Sr({},t),{pos:Ke(t.pos,b[e])})}));return o<4?y.slice(0,o+1).forEach((function(t){t.virtual=!1})):y.slice(4,o+1).forEach((function(t){t.virtual=!1})),n.prevDist=[a,s],Ms(t,e,l,c,y),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,o=e.isDouble;if(!r.isRound)return!1;var i=r.isControl,a=r.controlIndex,s=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter((function(t){return t.virtual})).length,d=t.props.roundClickable,f=void 0===d||d;if(o&&f){if(!i||!0!==f&&"control"!==f){if(s&&(!0===f||"line"===f)){var p=qr(t,e);!function(t,e,n,r){var o=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,i=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,a=-1;if(0===e&&(0===o?a=0:1===o&&(a=1)),2===e&&(o<=2?a=2:o<=3&&(a=3)),3===e&&(0===i?a=4:i<4&&(a=7)),1===e&&(i<=1?a=5:i<=2&&(a=6)),-1!==a&&t[a].virtual){var s=t[a];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,a),a<4?s.pos[0]=n:s.pos[1]=r}}(c,l,p[0],p[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(c,a);u!==c.filter((function(t){return t.virtual})).length&&Ms(t,e,[0,0],[0,0],c)}return ni(t,"onRoundEnd",ti(t,e,{})),n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}};var Os={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,o=n.target,i=n.targetMatrix,a=null==o?void 0:o.style.transform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Le(i,!0),")"),l=a&&"none"!==a?a:s;e.datas.startTransforms=function(t,e){var n=Je(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(l,r)?[]:le(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Qo(t,e,{setTransform:function(t){e.datas.startTransforms=ee(t)?t:le(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Qo(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ni(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),ni(t,"onBeforeRender",Qo(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){ni(t,"onBeforeRenderEnd",Qo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Ci(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.setTransform(r,t),n.resetStyle(t),n.fillDragStartParams(r,t)}));ni(t,"onBeforeRenderGroupStart",Qo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Ci(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.resetStyle(t),n.fillDragParams(r,t)}));ni(t,"onBeforeRenderGroup",Qo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ni(t,"onBeforeRenderGroupEnd",Qo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Rs={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){ni(t,"onRenderStart",Qo(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ni(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){ni(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ni(t,"onRenderGroupStart",Qo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Ci(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.fillDragParams(r,t)}));ni(t,"onRenderGroup",Qo(t,e,Sr(Sr({isPinch:!!e.isPinch,targets:t.props.targets,transform:uo(e)},$o(fo(e))),{events:i})))},dragGroupEnd:function(t,e){var n=this,r=Ci(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.fillDragEndParams(r,t)}));ni(t,"onRenderGroupEnd",Qo(t,e,Sr({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:uo(e)},$o(fo(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return Qo(t,e,Sr({isPinch:!!e.isPinch,transform:uo(e)},$o(fo(e))))},fillDragEndParams:function(t,e){return Qo(t,e,Sr({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:uo(e)},$o(fo(e))))}};function _s(t,e,n,r,o,i,a){var s="Start"===o,l=t.state.target,c=i.isRequest;if(!l||s&&r.indexOf("Control")>-1&&!c&&t.areaElement===i.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(o),d="".concat(n).concat(r,"Condition"),f="End"===o,p="After"===o,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(o,!0,!1),""!==o||c||ui(t.state,i);var v=Cr([],t[e],!0);if(c){var g=i.requestAble;v.some((function(t){return t.name===g}))||v.push.apply(v,t.props.ables.filter((function(t){return t.name===g})))}if(!v.length||v.every((function(t){return t.dragRelation})))return!1;var m=Cr(Cr([Os],v,!0),[Rs],!1).filter((function(t){return t[u]})),b=i.datas;h&&m.forEach((function(e){e.unset&&e.unset(t)}));var y,x=i.inputEvent;f&&x&&(y=document.elementFromPoint(i.clientX,i.clientY)||x.target);var E=0,S=!1,C=function(){var t;S=!0,null===(t=i.stop)||void 0===t||t.call(i)},w=m.filter((function(e){var n=e.name,r=b[n]||(b[n]={});if(s&&(r.isEventStart=!e[d]||e[d](t,i)),r.isEventStart){var o=e[u](t,Sr(Sr({},i),{stop:C,resultCount:E,datas:r,originalDatas:b,inputTarget:y}));return t._emitter.off(),s&&!1===o&&(r.isEventStart=!1),E+=o?1:0,o}return!1})).length,D=!1;if(s&&(S||m.length&&!w)&&(D=S||m.filter((function(t){var e=t.name;return!!b[e].isEventStart&&"strong"!==t.dragRelation})).length),(f||D)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}}))),h&&D&&m.forEach((function(e){e.unset&&e.unset(t)})),s&&!D&&!c&&w&&(null==i||i.preventDefault()),t.isUnmounted||D)return!1;(!s&&w&&!a||f)&&(t.props.flushSync||yo)((function(){t.updateRect(f?o:"",!0,!1),t.forceUpdate()}));return s||f||p||!w||a||_s(t,e,n,r,o+"After",i),!0}function Ps(t){var e=t.props.dragTarget;return function(n){var r=n.inputEvent.target,o=t.areaElement;return e&&(r===e||e.contains(r))||r===o||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||ke(r,"moveable-area")||ke(r,"moveable-padding")||ke(r,"moveable-edgeDraggable")}}function Ts(t,e,n){var r=t.controlBox.getElement(),o=[],i=t.props.dragTarget;return o.push(r),t.props.dragArea&&!i||o.push(e),As(t,o,"targetAbles",n,{dragStart:Ps(t),pinchStart:Ps(t)})}function As(t,e,n,r,o){void 0===o&&(o={});var i="targetAbles"===n,a=t.props,s=a.pinchOutside,l=a.pinchThreshold,c=a.preventClickEventOnDrag,u=a.preventClickDefault,d=a.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:!!i&&c,preventClickEventOnDragStart:!!i&&u,preventClickEventByCondition:i?null:function(e){return t.controlBox.getElement().contains(e.target)},checkInput:!!i&&d},p=new dr(e,f),h="Control"===r;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(i){p.on("".concat(e).concat(i),(function(a){var s,l=a.eventType;!o[l]||o[l](a)?_s(t,n,e,r,i,a)?(t.props.stopPropagation||"Start"===i&&h)&&(null===(s=null==a?void 0:a.inputEvent)||void 0===s||s.stopPropagation()):a.stop():a.stop()}))}))})),p}var Ns=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(t){var e=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach((function(r){r[e](n,{inputEvent:t})}))},t.addEventListener(n.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Bs(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function js(t,e,n){for(var r,o,i,a,s,l=t,c=[],u=!n&&t===e||t===document.body,d=u,f=!1,p=3,h=!1,v=Do(e,e,!0).offsetParent;l&&!d;){d=u;var g=getComputedStyle(l),m=g.position,b=wo(l,g),y=(a=xo(b),void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x="fixed"===m,E={hasTransform:!1,fixedContainer:null};x&&(h=!0,v=(E=Ro(l)).fixedContainer);var S=y.length;f||16!==S||(f=!0,p=4,Oo(c),i&&(i=ze(i,3,4))),f&&9===S&&(y=ze(y,3,4));var C=Mo(l,t,g),w=C.tagName,D=C.hasOffset,M=C.isSVG,k=C.origin,O=C.targetOrigin,R=C.offset,_=R[0],P=R[1];"svg"===w&&i&&(c.push({type:"target",target:l,matrix:To(l,p)}),c.push({type:"offset",target:l,matrix:Je(p)}));var T=void 0,A=!1,N=!1;if(x)T=E.fixedContainer,A=!0;else{var B=Do(l,e);if(T=B.offsetParent,A=B.isEnd,N=B.isStatic,_r)if(B.parentSlotElement){for(var j=T,z=0,I=0;j&&Bs(j);)z+=j.offsetLeft,I+=j.offsetTop,j=j.offsetParent;_-=z,P-=I}}!Or||Pr||!D||M||!N||"relative"!==m&&"static"!==m||(_-=T.offsetLeft,P-=T.offsetTop,u=u||A);var G=0,K=0,F=0,L=0;if(x)D&&E.hasTransform&&(F=T.clientLeft,L=T.clientTop);else if(D&&v!==T&&(G=T.clientLeft,K=T.clientTop),D&&T===document.body){var W=ko(l,!1,g);_+=W[0],P+=W[1]}if(c.push({type:"target",target:l,matrix:Eo(y,p,k)}),D){var Y=l===t,H=Y?0:l.scrollLeft,X=Y?0:l.scrollTop;c.push({type:"offset",target:l,matrix:tn([_-H+G-F,P-X+K-L],p)})}else c.push({type:"offset",target:l,origin:k});if(i||(i=y),r||(r=k),o||(o=O),d||x)break;l=T,u=A,n&&l!==document.body||(d=u)}return i||(i=Je(p)),r||(r=[0,0]),o||(o=[0,0]),{offsetContainer:v,matrixes:c,targetMatrix:i,transformOrigin:r,targetOrigin:o,is3d:f,hasFixed:h}}function zs(t,e,n,r){var o;void 0===n&&(n=e);var i=js(t,e),a=i.matrixes,s=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,d=i.offsetContainer,f=i.hasFixed,p=js(d,n,!0),h=p.matrixes,v=p.is3d,g=p.offsetContainer,m=r||v||s,b=m?4:3,y="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,x=l,E=Je(b),S=Je(b),C=Je(b),w=Je(b),D=a.length;h.reverse(),a.reverse(),!s&&m&&(x=ze(x,3,4),Oo(a)),!v&&m&&Oo(h),h.forEach((function(t){S=Ge(S,t.matrix,b)}));var M=n||document.body,k=(null===(o=h[0])||void 0===o?void 0:o.target)||Do(M,M,!0).offsetParent,O=h.slice(1).reduce((function(t,e){return Ge(t,e.matrix,b)}),Je(b));a.forEach((function(t,e){if(D-2===e&&(C=E.slice()),D-1===e&&(w=E.slice()),!t.matrix){var n=function(t,e,n,r,o){var i,a=t.target,s=t.origin,l=e.matrix,c=Wo(a),u=c.offsetWidth,d=c.offsetHeight,f=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=ko(a,!0));for(var h=a.getBoundingClientRect(),v=h.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],g=h.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],m=h.width,b=h.height,y=Ie(r,o,l),x=jo(y,u,d,r),E=x.left,S=x.top,C=x.width,w=x.height,D=Ao(y,s,r),M=Fe(D,[E,S]),k=[v+M[0]*m/C,g+M[1]*b/w],O=[0,0],R=0;++R<10;){var _=Ne(o,r);i=Fe(Ao(_,k,r),Ao(_,D,r)),O[0]=i[0],O[1]=i[1];var P=jo(Ie(r,o,tn(O,r),l),u,d,r),T=P.left-v,A=P.top-g;if(Math.abs(T)<2&&Math.abs(A)<2)break;k[0]-=T,k[1]-=A}return O.map((function(t){return Math.round(t)}))}(t,a[e+1],k,b,Ge(O,E,b));t.matrix=tn(n,b)}E=Ge(E,t.matrix,b)}));var R=!y&&s;x||(x=Je(R?4:3));var _=_o(y&&16===x.length?ze(x,4,3):x,R);return{hasFixed:f,rootMatrix:S=Ae(S,b,b),beforeMatrix:C,offsetMatrix:w,allMatrix:E,targetMatrix:x,targetTransform:_,transformOrigin:c,targetOrigin:u,is3d:m,offsetContainer:d,offsetRootContainer:g}}function Is(t,e,n,r){void 0===n&&(n=e);var o=0,i=0,a=0,s={},l=Wo(t);if(t&&(o=l.offsetWidth,i=l.offsetHeight),t){var c=zs(t,e,n,r),u=zo(c.allMatrix,c.transformOrigin,o,i);s=Sr(Sr({},c),u);var d=zo(c.allMatrix,[50,50],100,100);a=Yo([d.pos1,d.pos2],d.direction)}var f=r?4:3;return Sr(Sr(Sr({width:o,height:i,rotation:a},l),{rootMatrix:Je(f),beforeMatrix:Je(f),offsetMatrix:Je(f),allMatrix:Je(f),targetMatrix:Je(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function Gs(t,e,n,r,o){var i=1,a=[0,0],s={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d=Is(e,n,o,!0);if(e){var f=d.is3d?4:3,p=zo(d.offsetMatrix,Ke(d.transformOrigin,Be(d.targetMatrix,f)),d.width,d.height);i=p.direction,a=Ke(p.origin,[p.left-d.left,p.top-d.top]),s=Ho(e),c=Ho(Do(r,r,!0).offsetParent||d.offsetRootContainer,!0),u=Ho(d.offsetRootContainer),t&&(l=Ho(t))}return Sr({targetClientRect:s,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:u,beforeDirection:i,beforeOrigin:a,originalBeforeOrigin:a,target:e},d)}var Ks=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Sr({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Gs(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Vn,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._observer=null,e._observerId=0,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(ge(e._observerId),e._observerId=ve((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}Er(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.getState(),n=t.parentPosition,r=t.className,o=t.target,i=t.zoom,a=t.cspNonce,s=t.translateZ,l=t.cssStyled,c=t.portalContainer,u=t.groupable;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var d=n||[0,0],f=d[0],p=d[1],h=e.left,v=e.top,g=e.target,m=e.direction,b=e.hasFixed,y=t.targets,x=(y&&y.length||o)&&(g||u),E=this.isDragging(),S={};this.getEnabledAbles().forEach((function(t){S["data-able-".concat(t.name.toLowerCase())]=!0}));var C=this._getAbleClassName();return pt(l,Sr({cspNonce:a,ref:M(this,"controlBox"),className:"".concat(bo("control-box",-1===m?"reverse":"",E?"dragging":"")," ").concat(C," ").concat(r)},S,{onClick:this._onPreventClick,portalContainer:c,style:{position:b?"fixed":"absolute",display:x?"block":"none",visibility:this.controlBox||this.props.firstRenderState?"visible":"hidden",transform:"translate3d(".concat(h-f,"px, ").concat(v-p,"px, ").concat(s,")"),"--zoom":i,"--zoompx":"".concat(i,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),n||e||r||(this.updateRect("",!1,!0),this.forceUpdate())},n.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),this._viewContainer&&this._changeAbleViewClassNames([]),Zo(this,"targetGesto"),Zo(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getTargets=function(){var t=this.props.target;return t?[t]:[]},n.getAble=function(t){return he(this.props.ables||[],(function(e){return e.name===t}))},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(Tr)>-1},n.dragStart=function(t){var e=this.targetGesto,n=this.controlGesto;return e&&Ps(this)({inputEvent:t})?e.isFlag()||e.triggerDragStart(t):n&&this.isMoveableElement(t.target)&&(n.isFlag()||n.triggerDragStart(t)),this},n.hitTest=function(t){var e,n=this.state,r=n.target,o=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,l=n.targetClientRect;if(!r)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=Sr({width:0,height:0},t);var u=e.left,d=e.top,f=e.width,p=e.height,h=zn([o,i,s,a],l),v=jn(Hn(h,[[u,d],[u+f,d],[u+f,d+p],[u,d+p]])),g=jn(h);return v&&g?Math.min(100,v/g*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,o=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,l=n.targetClientRect;return!!r&&Gn([t,e],zn([o,i,s,a],l))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props.parentMoveable,o=this.state.target||this.props.target,i=this.getContainer(),a=r?r._rootContainer:this._rootContainer;this.updateState(Gs(this.controlBox&&this.controlBox.getElement(),o,i,i,a||i),!r&&n)},n.isDragging=function(t){var e,n,r=this.targetGesto,o=this.controlGesto;return(null==r?void 0:r.isFlag())?!t||!!(null===(e=r.getEventData()[t])||void 0===e?void 0:e.isEventStart):!!(null==o?void 0:o.isFlag())&&(!t||!!(null===(n=o.getEventData()[t])||void 0===n?void 0:n.isEventStart))},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=Uo(this.state),n=e[0],r=e[1],o=e[2],i=e[3],a=Bo(e),s=t.width,l=t.height,c=a.width,u=a.height,d=a.left,f=a.top,p=[t.left,t.top],h=Ke(p,t.origin);return{width:c,height:u,left:d,top:f,pos1:n,pos2:r,pos3:o,pos4:i,offsetWidth:s,offsetHeight:l,beforeOrigin:Ke(p,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t=this.state;return function(t,e,n){var r=Se(t,e)/Math.PI*180;return(r=n>=0?r:180-r)>=0?r:360+r}(t.pos1,t.pos2,t.direction)},n.request=function(t,e,n){void 0===e&&(e={});var r=this.props,o=r.ables,i=r.groupable,a=o.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,l=a.request(this),c=n||e.isInstant,u=l.isControl?"controlAbles":"targetAbles",d="".concat(i?"Group":"").concat(l.isControl?"Control":""),f={request:function(e){return _s(s,u,"drag",d,"",Sr(Sr({},l.request(e)),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return _s(s,u,"drag",d,"End",Sr(Sr({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),this}};return _s(s,u,"drag",d,"Start",Sr(Sr({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?f.request(e).requestEnd():f},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.getState(),e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,o=t.allMatrix,i=t.is3d,a=t.pos1,s=t.pos2,l=t.pos3,c=t.pos4,u=t.left,d=t.top,f=e.padding||{},p=f.left,h=void 0===p?0:p,v=f.top,g=void 0===v?0:v,m=f.bottom,b=void 0===m?0:m,y=f.right,x=void 0===y?0:y,E=i?4:3,S=this.controlBox&&e.groupable?n:Ke(n,[u,d]);t.renderPoses=[Ke(a,di(o,[-h,-g],r,S,E)),Ke(s,di(o,[x,-g],r,S,E)),Ke(l,di(o,[-h,b],r,S,E)),Ke(c,di(o,[x,b],r,S,E))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,o=this.state,i=o.target,a=o.container;if(i||e){this.updateAbles();var s=!ii(i,e);if(s||!ii(a,n)){var l=n||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:n}),!r&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},n.waitToChangeTarget=function(){return new Promise((function(){}))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=yr(t,e)),n[r]},n.getState=function(){var t=this.props.firstRenderState;return t&&!this.controlBox?t:this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,o=t.filter((function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])})),i="drag".concat(e,"Start"),a="pinch".concat(e,"Start"),s="drag".concat(e,"ControlStart"),l=oi(o,[i,a],r),c=oi(o,[s],r);this.enabledAbles=o,this.targetAbles=l,this.controlAbles=c},n.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},n.renderAbles=function(){var t,e,n,r,o=this,i=this.props.triggerAblesSimultaneously,a={createElement:pt};return this.renderState={},(t=si(oi(this.getEnabledAbles(),["render"],i).map((function(t){return(0,t.render)(o,a)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],r={},t.forEach((function(o,i){var a=e(o,i,t),s=r[a];s||(s=[],r[a]=s,n.push(s)),s.push(o)})),n).map((function(t){return t[0]}))},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n=this.props,r=n.target;if(window.ResizeObserver&&r&&n.useResizeObserver){if(t.target!==r||!this._observer){var o=new ResizeObserver(this.checkUpdateRect);o.observe(r,{box:"border-box"}),this._observer=o}}else null===(e=this._observer)||void 0===e||e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,o=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(Zo(this,"targetGesto"),this.updateState({gesto:null})),n||Zo(this,"controlGesto"),o&&e&&!this.targetGesto&&(this.targetGesto=Ts(this,o,"")),!this.controlGesto&&n&&(this.controlGesto=As(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.zoom,n=t.hideDefaultLines,r=t.hideChildMoveableDefaultLines,o=t.parentMoveable;if(n||o&&r)return[];var i=this.getState().renderPoses,a={createElement:pt};return[[0,1],[1,3],[3,2],[2,0]].map((function(t,n){var r=t[0],o=t[1];return Oa(a,"",i[r],i[o],e,"render-line-".concat(n))}))},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,o=this._prevDragArea,i=e.dragArea;return!i&&r!==n||(t||i)&&o!==i},n._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,r=me(n);if(this._isTargetChanged())for(var o in n){var i=n[o];i&&i.destroy(),n[o]=null}if(e){var a=this.enabledAbles;r.forEach((function(r){var o=oi(a,[r]),i=o.length>0,s=n[r];i?(s||(s=new Ns(e,t,r),n[r]=s),s.setAbles(o)):s&&(s.destroy(),n[r]=null)}))}},n._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=mi(t,!0))},n._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=mi(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(Cr(Cr([],this._getAbleViewClassNames(),!0),[this.isDragging()?$a:""],!1))},n._changeAbleViewClassNames=function(t){var e=this._viewContainer,n=ai(t.filter(Boolean),(function(t){return t})).map((function(t){return t[0]})),r=this._viewClassNames,o=N(r,n),i=o.removed,a=o.added;i.forEach((function(t){Re(e,r[t])})),a.forEach((function(t){Oe(e,n[t])})),this._viewClassNames=n},n._getAbleViewClassNames=function(){var t=this;return this.getEnabledAbles().map((function(e){var n;return(null===(n=e.viewClassName)||void 0===n?void 0:n.call(e,t))||""})).join(" ").split(/\s+/g)},n._getAbleClassName=function(){var t=this,e=this.getEnabledAbles(),n=this.targetGesto,r=this.controlGesto,o=(null==n?void 0:n.isFlag())?n.getEventData():{},i=(null==r?void 0:r.isFlag())?r.getEventData():{};return e.map((function(e){var n,r,a,s=e.name,l=(null===(n=e.className)||void 0===n?void 0:n.call(e,t))||"";return((null===(r=o[s])||void 0===r?void 0:r.isEventStart)||(null===(a=i[s])||void 0===a?void 0:a.isEventStart))&&(l+=" ".concat(bo("".concat(s,"-dragging")))),l.trim()})).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:yo,firstRenderState:null,viewContainer:null},e}(wt),Fs={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var r=t.state,o=[r.left,r.top],i=t.props,a=i.zoom||1,s=t.renderGroupRects;return Cr(Cr([],n.map((function(n,r){return e.createElement(Ks,{key:"moveable"+r,ref:k(t,"moveables",r),target:n,origin:!1,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:o,zoom:a})})),!0),si(s.map((function(t,n){var r=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,i){var s=t[0],l=t[1];return Oa(e,"",Fe(r[s],o),Fe(r[l],o),a,"group-rect-".concat(n,"-").concat(i))}))}))),!0)}},Ls=wr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,o=e.inputTarget,i=!t.isMoveableElement(o)&&t.controlBox.getElement().contains(o);if(r&&o&&!e.isDrag&&!t.isMoveableElement(o)&&!i){var a=n.contains(o);ni(t,"onClick",Qo(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:n===o,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var o=t.props.targets,i=o.indexOf(r),a=i>-1,s=!1;-1===i&&(s=(i=pe(o,(function(t){return t.contains(r)})))>-1),ni(t,"onClickGroup",Qo(t,e,{isDouble:e.isDouble,targets:o,inputTarget:r,targetIndex:i,isTarget:a,containsTarget:s,moveableTarget:o[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Ws(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Sr(Sr({},t),{datas:e})}var Ys=wr("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Ra(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return ke(n,bo("direction"))&&ke(n,bo("edge"))&&ke(n,bo("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Ta.dragStart(t,Ws(e))},dragControl:function(t,e){return Ta.drag(t,Ws(e))},dragControlEnd:function(t,e){return Ta.dragEnd(t,Ws(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return ke(n,bo("direction"))&&ke(n,bo("line"))},dragGroupControlStart:function(t,e){return Ta.dragGroupStart(t,Ws(e))},dragGroupControl:function(t,e){return Ta.dragGroup(t,Ws(e))},dragGroupControlEnd:function(t,e){return Ta.dragGroupEnd(t,Ws(e))},unset:function(t){return Ta.unset(t)}}),Hs={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Xs=[Os,os,Da,Si,Ta,Ys,Na,Ya,qa,La,rs,is,es,ws,Cs,ks,Fs,Hs,Ls,ts,Rs],qs=Xs.reduce((function(t,e){return Sr(Sr({},t),"events"in e?e.events:{})}),{}),Vs=Xs.reduce((function(t,e){return Sr(Sr({},t),e.props)}),{}),Us=gi(qs),Zs=Object.keys(Us),$s=Object.keys(Vs);function Js(t,e){var n=t[0],r=t[1],o=t[2];return(n*e[0]+r*e[1]+o)/Math.sqrt(n*n+r*r)}function Qs(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function tl(t,e){return Math.max.apply(Math,t.map((function(t){var n=t[0],r=t[1],o=t[2],i=t[3];return Math.max(n[e],r[e],o[e],i[e])})))}function el(t,e){return Math.min.apply(Math,t.map((function(t){var n=t[0],r=t[1],o=t[2],i=t[3];return Math.min(n[e],r[e],o[e],i[e])})))}function nl(t,e){var n=e.map((function(e){if(ee(e)){var n=nl(t,e),r=n.length;return r>1?n:1===r?n[0]:null}var o=he(t,(function(t){return t.manager.props.target===e}));return o?(o.finded=!0,o.manager):null})).filter(Boolean);return 1===n.length&&ee(n[0])?n[0]:n}var rl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new dn,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e}Er(e,t);var n=e.prototype;return n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,o=this.props,i=this.moveables,a=r.target||o.target,s=i.map((function(t){return{finded:!1,manager:t}})),l=nl(s,this.props.targetGroups||[]);l.push.apply(l,s.filter((function(t){return!t.finded})).map((function(t){return t.manager})));var c=[],u=!e||""!==t&&o.updateGroup,d=function t(e,n,r){var i=e.map((function(e){if(ee(e)){var r=t(e,n),o=[r.pos1,r.pos2,r.pos3,r.pos4];return c.push(r),{poses:o,rotation:r.rotation}}return{poses:Uo(e.state),rotation:e.getRotation()}})),a=i.map((function(t){return t.rotation})),s=0,l=a[0],d=a.every((function(t){return Math.abs(l-t)<.1}));s=u?d?l:o.defaultGroupRotate||0:!r&&d?l:n;var f=i.map((function(t){return t.poses})),p=function(t,e){var n,r=[0,0],o=[0,0],i=[0,0],a=[0,0],s=0,l=0;if(!t.length)return{pos1:r,pos2:o,pos3:i,pos4:a,minX:0,minY:0,width:s,height:l,rotation:e};var c=De(e,Br);if(c%90){var u=c/180*Math.PI,d=Math.tan(u),f=-1/d,p=[zr,Ir],h=[[0,0],[0,0]],v=[zr,Ir],g=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=Js([-d,1,0],t),n=Js([-f,1,0],t);p[0]>e&&(h[0]=t,p[0]=e),p[1]<e&&(h[1]=t,p[1]=e),v[0]>n&&(g[0]=t,v[0]=n),v[1]<n&&(g[1]=t,v[1]=n)}))}));var m=h[0],b=h[1],y=g[0],x=g[1],E=[-d,1,Qs([-d,1],m)],S=[-d,1,Qs([-d,1],b)],C=[-f,1,Qs([-f,1],y)],w=[-f,1,Qs([-f,1],x)];r=(n=[[E,C],[E,w],[S,C],[S,w]].map((function(t){return Fn(t[0],t[1])[0]})))[0],o=n[1],i=n[2],a=n[3],s=v[1]-v[0],l=p[1]-p[0]}else{var D,M=el(t,0),k=el(t,1),O=tl(t,0),R=tl(t,1);r=[M,k],o=[O,k],i=[M,R],a=[O,R],s=O-M,l=R-k,c%180&&(r=(D=[i,r,a,o])[0],o=D[1],i=D[2],a=D[3],s=R-k,l=O-M)}c%360>180&&(r=(D=[a,i,o,r])[0],o=D[1],i=D[2],a=D[3]);var _=In([r,o,i,a]);return{pos1:r,pos2:o,pos3:i,pos4:a,width:s,height:l,minX:_.minX,minY:_.minY,rotation:e}}(f,s);return p}(l,this.rotation,!0);u&&(this.rotation=d.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this.renderGroupRects=c;var f=this.rotation,p=this.scale,h=d.width,v=d.height,g=d.minX,m=d.minY,b="rotate(".concat(f,"deg) scale(").concat(p[0]>=0?1:-1,", ").concat(p[1]>=0?1:-1,")");a.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(h,"px; height:").concat(v,"px;")+"transform:".concat(b),r.width=h,r.height=v;var y=this.getContainer(),x=Gs(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this._rootContainer||y),E=[x.left,x.top],S=Uo(x),C=S[0],w=S[1],D=S[2],M=S[3],k=In([C,w,D,M]),O=[k.minX,k.minY];x.pos1=Fe(C,O),x.pos2=Fe(w,O),x.pos3=Fe(D,O),x.pos4=Fe(M,O),x.left=g-x.left+O[0],x.top=m-x.top+O[1],x.origin=Fe(Ke(E,x.origin),O),x.beforeOrigin=Fe(Ke(E,x.beforeOrigin),O),x.originalBeforeOrigin=Ke(E,x.originalBeforeOrigin);var R=x.targetClientRect,_=p[0]*p[1]>0?1:-1;R.top+=x.top-r.top,R.left+=x.left-r.left,a.style.transform="translate(".concat(-O[0],"px, ").concat(-O[1],"px) ").concat(b),this.updateState(Sr(Sr({},x),{direction:_,beforeDirection:_}),n)}},n.getRect=function(){return Sr(Sr({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,Cr(Cr([],this.props.ables,!0),[Fs],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement;n!==r&&(Zo(this,"targetGesto"),Zo(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Ts(this,r,"Group")),this.controlGesto||(this.controlGesto=As(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!ii(t.container,e.container);o&&(t.container=e.container);var i=this.differ.update(e.targets),a=i.added,s=i.changed,l=i.removed,c=a.length||l.length;(o||c||s.length)&&this.updateRect(),this._isPropTargetChanged=!!c},n._updateObserver=function(){},e.defaultProps=Sr(Sr({},Ks.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Ks),ol=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}Er(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.cspNonce,r=e.cssStyled,o=e.targets;return pt(r,{cspNonce:n,ref:M(this,"controlBox"),className:bo("control-box")},o.map((function(e,n){return pt(Ks,Sr({key:"moveable"+n,ref:k(t,"moveables",n)},t.props,{target:e,wrapperMoveable:t}))})))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){void 0===n&&(n=!0),this.moveables.forEach((function(r){r.updateRect(t,e,n)}))},n.getRect=function(){return Sr(Sr({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Ks);function il(t,e){var n=[];return t.forEach((function(t){t&&(ne(t)?e[t]&&n.push.apply(n,e[t]):ee(t)?n.push.apply(n,il(t,e)):n.push(t))})),n}function al(t,e){var n=[];return t.forEach((function(t){t&&(ne(t)?e[t]&&n.push.apply(n,e[t]):ee(t)?n.push(al(t,e)):n.push(t))})),n}function sl(t,e){return t.length!==e.length||t.some((function(t,n){var r=e[n];return!(!t&&!r)&&(t!=r&&(!ee(t)||!ee(r)||sl(t,r)))}))}var ll=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new dn,e._elementTargets=[],e._onChangetarget=null,e}Er(e,t);var n,r,o=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=me(t).join("\n");this.defaultStyled=yr("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(Tr,Ar+e))},e.getTotalAbles=function(){return Cr([os,Fs,Hs,ts],this.defaultAbles,!0)},o.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,n=e.ables,r=e.props,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["ables","props"]),i=this._updateRefs(!0),a=il(i,this.selectorMap),s=a.length>1,l=Cr(Cr([],t.getTotalAbles(),!0),n||[],!0),c=Sr(Sr(Sr({},o),r||{}),{ables:l,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});this._elementTargets=a;var u=null,d=this.moveable;if(s){if(o.individualGroupable)return pt(ol,Sr({key:"individual-group",ref:M(this,"moveable")},c,{target:null,targets:a}));var f=al(i,this.selectorMap);if(d&&!d.props.groupable&&!d.props.individualGroupable){var p=d.props.target;p&&a.indexOf(p)>-1&&(u=Sr({},d.state))}return pt(rl,Sr({key:"group",ref:M(this,"moveable")},c,{target:null,targets:a,targetGroups:f,firstRenderState:u}))}var h=a[0];if(d&&(d.props.groupable||d.props.individualGroupable)){var v=he(d.moveables||[],(function(t){return t.props.target===h}));v&&(u=Sr({},v.state))}return pt(Ks,Sr({key:"single",ref:M(this,"moveable")},c,{target:h,firstRenderState:u}))},o.componentDidMount=function(){this._updateRefs()},o.componentDidUpdate=function(){var t=this._differ.update(this._elementTargets),e=t.added,n=t.removed;(e.length||n.length)&&this._onChangetarget&&this._onChangetarget(),this._updateRefs()},o.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},o.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},o.updateSelectors=function(){this.selectorMap={},this._updateRefs()},o.waitToChangeTarget=function(){var t,e=this;return this._onChangetarget=function(){e._onChangetarget=null,t()},new Promise((function(e){t=e}))},o.getManager=function(){return this.moveable},o._updateRefs=function(t){var e=this.refTargets,n=bi(this.props.target||this.props.targets),r="undefined"!=typeof document,o=sl(e,n),i=this.selectorMap,a={};return this.refTargets.forEach((function t(e){ne(e)?i[e]?a[e]=i[e]:r&&(o=!0,a[e]=[].slice.call(document.querySelectorAll(e))):ee(e)&&e.forEach(t)})),this.refTargets=n,this.selectorMap=a,!t&&o&&this.forceUpdate(),n},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);i>3&&a&&Object.defineProperty(e,n,a)}([(n=Yr,void 0===r&&(r={}),function(t,e){n.forEach((function(n){var o=r[n]||n;o in t||(t[o]=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=(t=this[e])[n].apply(t,r);return i===this[e]?this:i})}))})],e.prototype,"moveable",void 0),e}(wt),cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Er(e,t),e.defaultAbles=Xs,e}(ll);var ul=cl,dl=function(t,e){return dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},dl(t,e)};function fl(t,e){function n(){this.constructor=t}dl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var pl=function(){return pl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pl.apply(this,arguments)};var hl=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return fl(e,t),e.prototype.render=function(){return t=pt(ul,pl({ref:M(this,"moveable")},this.state)),e=this.state.parentElement,pt(Dt,{element:t,container:e});var t,e},e}(Ct),vl=$s,gl=Yr,ml=Zs,bl=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.tempElement=document.createElement("div");var o=pl({},n),i={};ml.forEach((function(t){var e;i[(e="on ".concat(t),e.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()})))]=function(e){return r.trigger(t,e)}})),Rt(pt(hl,pl({ref:M(r,"innerMoveable"),parentElement:e},o,i)),r.tempElement);var a=o.target;return ee(a)&&a.length>1&&r.updateRect(),r}fl(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},n.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},n.destroy=function(){Rt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([O(gl,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})})),O(vl,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e),e}(Vn),yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fl(e,t),e}(bl);var xl=n(96209),El=n(63479),Sl=n(43464),Cl=function(t,e){return Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Cl(t,e)};function wl(t){return t&&"object"==typeof t}function Dl(t){return Array.isArray(t)}function Ml(t){return"string"==typeof t}function kl(t,e,n,r){t.addEventListener(e,n,r)}function Ol(t,e,n,r){t.removeEventListener(e,n,r)}var Rl=function(){return Rl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Rl.apply(this,arguments)};var _l=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(wl(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(wl(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var o=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}(r,(function(t){return t.listener===e}));o>-1&&r.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Rl({listener:e},n))},t}();var Pl,Tl,Al,Nl=(Pl=function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,i=String(t);return(n=r[i.toLowerCase()])?n:(n=o[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var i;if(i=r[e.toLowerCase()])return i===n;if(i=o[e.toLowerCase()])return i===n}else if("number"==typeof e)return e===n;return!1}};var r=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var a=e.names=e.title={};for(i in r)a[r[i]]=i;for(var s in o)r[s]=o[s]},Pl(Tl={exports:{}},Tl.exports),Tl.exports),Bl=(Nl.code,Nl.codes,Nl.aliases,Nl.names),jl=(Nl.title,{"+":"plus","left command":"meta","right command":"meta"}),zl={shift:1,ctrl:2,alt:3,meta:4};function Il(t,e){var n=(Bl[t]||e||"").toLowerCase();for(var r in jl)n=n.replace(r,jl[r]);return n.replace(/\s/g,"")}function Gl(t,e){void 0===e&&(e=Il(t.keyCode,t.key));var n=function(t){return[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"].filter(Boolean)}(t);return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function Kl(t){var e=t.slice();return e.sort((function(t,e){return(zl[t]||5)-(zl[e]||5)})),e}const Fl=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},kl(e,"blur",n.blur),kl(e,"keydown",n.keydownEvent),kl(e,"keyup",n.keyupEvent),n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Cl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Al||(Al=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),Ol(t,"blur",this.blur),Ol(t,"keydown",this.keydownEvent),Ol(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return Dl(e)?this.on(t+"."+Kl(e).join("."),n):Ml(e)?this.on(t+"."+e,n):this.on(t,e),this},n.removeEvent=function(t,e,n){return Dl(e)?this.off(t+"."+Kl(e).join("."),n):Ml(e)?this.off(t+"."+e,n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Il(e.keyCode,e.key),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var o=Gl(e,n);o.length>1&&this.trigger(t+"."+o.join("."),r)},e}(_l);var Ll=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function Wl(t,e,n,r){var o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?xn(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t})).join(", ")+" {"}))}(t,e,n),(r||document.head||document.body).appendChild(o),o}const Yl=function(t){var e,n="rCS"+Ll(t).toString(36),r=0;return{className:n,inject:function(o,i){void 0===i&&(i={});var a,s=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(o),l=0===r;return(s||l)&&(a=Wl(n,t,i,s)),l&&(e=a),s||++r,{destroy:function(){s?(o.removeChild(a),a=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var Hl=function(t,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Hl(t,e)};function Xl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Hl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ql=function(){return ql=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ql.apply(this,arguments)};function Vl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Ul(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function Zl(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function $l(t,e,n){var r=t.tag,o=t.children,i=t.attributes,a=t.className,s=t.style,l=e||document.createElement(r);for(var c in i)l.setAttribute(c,i[c]);var u=l.children;if(o.forEach((function(t,e){$l(t,u[e],l)})),a&&a.split(" ").forEach((function(t){(function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))})(l,t)||function(t,e){t.classList?t.classList.add(e):t.className+=" "+e}(l,t)})),s){var d=l.style;for(var c in s)d[c]=s[c]}return!e&&n&&n.appendChild(l),l}function Jl(t,e,n){t!==e&&n(t,e)}function Ql(t,e,n){var r;void 0===n&&(n=t.data.boundArea);var o=t.distX,i=void 0===o?0:o,a=t.distY,s=void 0===a?0:a,l=t.data,c=l.startX,u=l.startY;if(e>0){var d=Math.sqrt((i*i+s*s)/(1+e*e));i=(i>=0?1:-1)*(e*d),s=(s>=0?1:-1)*d}var f=Math.abs(i),p=Math.abs(s);r=function(t,e,n,r){if(!r)return t.map((function(t,r){return Mn(t,e[r],n[r])}));var o=t[0],i=t[1],a=!0===r?o/i:r,s=kn(t,e,!1,a),l=s[0],c=s[1],u=kn(t,n,!0,a),d=u[0],f=u[1];return o<l||i<c?(o=l,i=c):(o>d||i>f)&&(o=d,i=f),[o,i]}([f,p],[0,0],[i<0?c-n.left:n.right-c,s<0?u-n.top:n.bottom-u],!!e),i=(i>=0?1:-1)*(f=r[0]),s=(s>=0?1:-1)*(p=r[1]);var h=c+Math.min(0,i),v=u+Math.min(0,s);return{left:h,top:v,right:h+f,bottom:v+p,width:f,height:p}}function tc(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,o=e.width,i=e.height;return{pos1:[n,r],pos2:[n+o,r],pos3:[n,r+i],pos4:[n+o,r+i]}}function ec(t,e,n){var r=un(t,e),o=r.list,i=r.prevList,a=r.added,s=r.removed,l=r.maintained;return Ul(Ul(Ul([],a.map((function(t){return o[t]})),!0),s.map((function(t){return i[t]})),!0),n?l.map((function(t){var e=t[1];return o[e]})):[],!0)}var nc=Yl("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),rc="selecto-selection ".concat(nc.className),oc=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd"],ic=(Ul(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],oc,!0),Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.selectedTargets=[],n.dragScroll=new Qn,n._onDragStart=function(t,e){var r=t.data,o=t.clientX,i=t.clientY,a=t.inputEvent,s=n.options,l=s.selectFromInside,c=s.selectByClick,u=s.rootContainer,d=s.boundContainer,f=s.preventDragFromInside,p=void 0===f||f,h=s.clickBySelectEnd,v=s.dragCondition;if(!v||v(t)){r.data={},r.innerWidth=window.innerWidth,r.innerHeight=window.innerHeight,n.findSelectableTargets(r),r.startSelectedTargets=n.selectedTargets,r.scaleMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.containerX=0,r.containerY=0;var g={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(u){var m=n.container.getBoundingClientRect();r.containerX=m.left,r.containerY=m.top,r.scaleMatrix=function(t,e){void 0===e&&(e=document.body);for(var n=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n&&(r=Ze(nn(getComputedStyle(n).transform),r),n!==e);)n=n.parentElement;return(r=Ne(r,4))[12]=0,r[13]=0,r[14]=0,r}(n.container,u)}if(d){var b=vn(d)&&"element"in d?ql({left:!0,top:!0,bottom:!0,right:!0},d):{element:d,left:!0,top:!0,bottom:!0,right:!0},y=b.element;if(y){var x=(gn(y)?document.querySelector(y):!0===y?n.container:y).getBoundingClientRect();b.left&&(g.left=x.left),b.top&&(g.top=x.top),b.right&&(g.right=x.right),b.bottom&&(g.bottom=x.bottom)}}r.boundArea=g;var E={left:o,top:i,right:o,bottom:i,width:0,height:0},S=[];if(!l||c&&!h){var C=n._findElement(e||Zl(o,i),r.selectableTargets);S=C?[C]:[]}var w=S.length>0,D=!l&&w;if(D&&!c)return t.stop(),!1;var M=a.type,k="mousedown"===M||"touchstart"===M;if(!(!(!t.isClick&&k)||n.emit("dragStart",ql(ql({},t),{data:r.data}))))return t.stop(),!1;if(n.continueSelect?(S=ec(n.selectedTargets,S,n.continueSelectWithoutDeselect),r.startPassedTargets=n.selectedTargets):r.startPassedTargets=[],n._select(S,E,t,!0),r.startX=o,r.startY=i,r.selectFlag=!1,r.preventDragFromInside=!1,a.target){var O=rn(r.scaleMatrix,[o-r.containerX,i-r.containerY]);n.target.style.cssText+="position: ".concat(u?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(O[0],"px, ").concat(O[1],"px)")}if(D&&c&&!h)a.preventDefault(),p&&(n._selectEnd(r.startSelectedTargets,r.startPassedTargets,E,t),r.preventDragFromInside=!0);else{r.selectFlag=!0,"touchstart"===M&&a.preventDefault();var R=n.options.scrollOptions;R&&R.container&&n.dragScroll.dragStart(t,R),h&&(r.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){if(t.data.selectFlag){var e=n.scrollOptions;if((null==e?void 0:e.container)&&n.dragScroll.drag(t,e))return}n._checkSelected(t)},n._onDragEnd=function(t){var e=t.data,r=t.inputEvent,o=Ql(t,n.options.ratio),i=e.selectFlag;if(r&&n.emit("dragEnd",ql(ql({isDouble:!!t.isDouble,isClick:!!t.isClick,isDrag:!1,isSelect:i},t),{data:e.data,rect:o})),n.target.style.cssText+="display: none;",i)e.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var a=n._findElement(Zl(t.clientX,t.clientY),e.selectableTargets);n._select(a?[a]:[],o,t)}e.preventDragFromInside||n._selectEnd(e.startSelectedTargets,e.startPassedTargets,o,t)},n._onKeyDown=function(t){var e=n.options,r=!1;if(!n._keydownContinueSelect){var o=n._sameCombiKey(t,e.toggleContinueSelect);n._keydownContinueSelect=o,r=o}if(!n._keydownContinueSelectWithoutDeselection){o=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect);n._keydownContinueSelectWithoutDeselection=o,r=r||o}r&&n.emit("keydown",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onKeyUp=function(t){var e=n.options,r=!1;if(n._keydownContinueSelect){var o=n._sameCombiKey(t,e.toggleContinueSelect,!0);n._keydownContinueSelect=!o,r=o}if(n._keydownContinueSelectWithoutDeselection){o=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect,!0);n._keydownContinueSelectWithoutDeselection=!o,r=r||o}r&&n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onBlur=function(){(n._keydownContinueSelect||n._keydownContinueSelectWithoutDeselection)&&(n._keydownContinueSelect=!1,n._keydownContinueSelectWithoutDeselection=!1,n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection}))},n._onDocumentSelectStart=function(t){if(n.gesto.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var r=e instanceof Element?[e]:[].slice.call(e),o=t.target;r.some((function(e){if(e===o||e.contains(o))return t.preventDefault(),!0}))}},n.target=e.portalContainer;var r=e.container;n.options=ql({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,getElementRect:tc,cspNonce:"",ratio:0},e);var o=n.options.portalContainer;return o&&(r=o.parentElement),n.container=r||document.body,n.initElement(),n.initDragScroll(),n.setKeyController(),n}Xl(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){var e=this.selectedTargets,n=un(e,t),r=n.added,o=n.removed,i=n.prevList,a=n.list;return this.selectedTargets=t,{added:r.map((function(t){return a[t]})),removed:o.map((function(t){return i[t]})),beforeSelected:e,selected:t}},n.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),i=Math.max(t[1],e[1]),a={left:n,top:r,right:o,bottom:i,width:o-n,height:i-r},s={ignoreClick:!0};this.findSelectableTargets(s);var l=this.hitTest(a,s),c=this.setSelectedTargets(l);return ql(ql({},c),{rect:a})},n.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),r=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),i=this.gesto;!1!==i.onDragStart(n)&&(i.onDrag(r),i.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),An(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||tc,n=e(t),r=[n.pos1,n.pos2,n.pos4,n.pos3];return e!==tc?zn(r,t.getBoundingClientRect()):r},n.getSelectableElements=function(){var t=[];return this.options.selectableTargets.forEach((function(e){vn(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach((function(e){t.push(e)}))})),t},n.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions;(null==t?void 0:t.container)&&this.dragScroll.checkScroll(ql({inputEvent:this.gesto.getCurrentEvent()},t))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),r=n.map((function(t){return e.getElementPoints(t)}));t.selectableTargets=n,t.selectablePoints=r,this._refreshGroups(t)},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),r={data:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,stop:function(){return!1}};return this._onDragStart(r,e)&&this._onDragEnd(r),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,r=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||r)&&(this.keycon=new Fl(e||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},n.setKeyContainer=function(t){var e=this,n=this.options;Jl(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.getContinueSelect=function(){var t=this.options,e=t.continueSelect;return t.toggleContinueSelect&&this._keydownContinueSelect?!e:e},n.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect&&this._keydownContinueSelectWithoutDeselection?!e:e},n.setToggleContinueSelect=function(t){var e=this,n=this.options;Jl(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;Jl(n.toggleContinueSelectWithoutDeselect,t,(function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.initElement=function(){this.target=$l(function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e||{},i=o.className,a=void 0===i?"":i,s=o.style,l=void 0===s?{}:s,c=Vl(o,["className","style"]);return{tag:t,className:a,style:l,attributes:c,children:n}}("div",{className:rc}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,r=e.checkInput,o=e.preventDefault,i=e.preventClickEventOnDragStart,a=e.preventClickEventOnDrag,s=e.preventClickEventByCondition,l=e.preventRightClick,c=void 0===l||l;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):n||this.target.parentNode,this.gesto=new dr(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:r,preventDefault:o,preventClickEventOnDragStart:i,preventClickEventOnDrag:a,preventClickEventByCondition:s,preventRightClick:c}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Tn(document,"selectstart",this._onDocumentSelectStart),this.injectResult=nc.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e){var n=this.options,r=n.hitRate,o=n.selectByClick,i=t.left,a=t.top,s=t.right,l=t.bottom,c=e.innerGroups,u=e.innerWidth,d=e.innerHeight,f=e.clientX,p=e.clientY,h=e.ignoreClick,v=[[i,a],[s,a],[s,l],[i,l]],g=function(t){var e=!h&&Gn([f,p],t);if(o&&e)return!0;var n=Hn(v,t);if(!n.length)return!1;var i=jn(n),a=jn(t),s=En("".concat(r));return"px"===s.unit?i>=s.value:Mn(Math.round(i/a*100),0,100)>=Math.min(100,s.value)};if(!c){var m=e.selectableTargets,b=e.selectablePoints;return m.filter((function(t,e){return g(b[e])}))}for(var y=[],x=Math.floor(i/u),E=Math.floor(s/u),S=Math.floor(a/d),C=Math.floor(l/d),w=x;w<=E;++w){var D=c[w];if(D)for(var M=function(t){var e=D[t];if(!e)return"continue";var n=e.points,r=e.targets;n.forEach((function(t,e){g(t)&&y.push(r[e])}))},k=S;k<=C;++k)M(k)}return function(t){if("undefined"==typeof Map)return t.filter((function(e,n){return t.indexOf(e)===n}));var e=new Map;return t.filter((function(t){return!e.has(t)&&(e.set(t,!0),!0)}))}(y)},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",(function(e){var n=e.container,r=e.direction;t.emit("scroll",{container:n,direction:r})})).on("move",(function(e){var n=e.offsetX,r=e.offsetY,o=e.inputEvent,i=t.gesto;if(i&&i.isFlag()){var a=t.gesto.getEventData(),s=a.boundArea;a.startX-=n,a.startY-=r,a.selectablePoints.forEach((function(t){t.forEach((function(t){t[0]-=n,t[1]-=r}))})),t._refreshGroups(a),s.left-=n,s.right-=n,s.top-=r,s.bottom-=r,t.gesto.scrollBy(n,r,o.inputEvent,!1),t._checkSelected(t.gesto.getCurrentEvent())}}))},n._select=function(t,e,n,r){var o=n.inputEvent,i=n.data,a=this.setSelectedTargets(t);r&&this.emit("selectStart",ql(ql({},a),{rect:e,inputEvent:o,data:i.data})),(a.added.length||a.removed.length)&&this.emit("select",ql(ql({},a),{rect:e,inputEvent:o,data:i.data}))},n._selectEnd=function(t,e,n,r){var o=r.inputEvent,i=r.isDouble,a=r.data,s=un(t,this.selectedTargets),l=s.added,c=s.removed,u=s.prevList,d=s.list,f=un(e,this.selectedTargets),p=f.added,h=f.removed,v=f.prevList,g=f.list,m=o&&o.type,b="mousedown"===m||"touchstart"===m;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:l.map((function(t){return d[t]})),removed:c.map((function(t){return u[t]})),afterAdded:p.map((function(t){return g[t]})),afterRemoved:h.map((function(t){return v[t]})),isDragStart:b,isClick:!!r.isClick,isDouble:!!i,rect:n,inputEvent:o,data:a.data})},n._checkSelected=function(t,e){void 0===e&&(e=Ql(t,this.options.ratio));var n=t.data,r=e.top,o=e.left,i=e.width,a=e.height,s=n.selectFlag,l=n.containerX,c=n.containerY,u=n.scaleMatrix,d=rn(u,[o-l,r-c]),f=rn(u,[i,a]),p=[];if(s){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(d[0],"px, ").concat(d[1],"px);")+"width:".concat(f[0],"px;height:").concat(f[1],"px;");var h=this.hitTest(e,n);p=ec(n.startPassedTargets,h,this.continueSelect&&this.continueSelectWithoutDeselect)}if(!1===this.emit("drag",ql(ql({},t),{data:n.data,isSelect:s,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();s&&this._select(p,e,t)},n._sameCombiKey=function(t,e,n){if(!e)return!1;var r,o=Gl(t.inputEvent,t.key),i=[].concat(e),a=(r=i[0],Array.isArray(r)?i:[i]);if(n){var s=t.key;return a.some((function(t){return t.some((function(t){return t===s}))}))}return a.some((function(t){return t.every((function(t){return o.indexOf(t)>-1}))}))},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},n._refreshGroups=function(t){var e=t.innerWidth,n=t.innerHeight;if(e&&n){var r=t.selectableTargets,o=t.selectablePoints,i={};o.forEach((function(t,o){var a=1/0,s=-1/0,l=1/0,c=-1/0;t.forEach((function(t){var r=Math.floor(t[0]/e),o=Math.floor(t[1]/n);a=Math.min(r,a),s=Math.max(r,s),l=Math.min(o,l),c=Math.max(o,c)}));for(var u=a;u<=s;++u)for(var d=l;d<=c;++d){i[u]=i[u]||{},i[u][d]=i[u][d]||{points:[],targets:[]};var f=i[u][d],p=f.targets,h=f.points;p.push(r[o]),h.push(t)}})),t.innerGroups=i}else t.innerGroups=null},e=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([O(oc,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},r=Sn("get ".concat(e));t[r]?n.get=function(){return this[r]()}:n.get=function(){return this.options[e]};var o=Sn("set ".concat(e));t[o]?n.set=function(t){this[o](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e),e}(Vn)),ac=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xl(e,t),e}(ic);const sc=ac;var lc=n(48717),cc=n(50191),uc=n(46782),dc=n(51455),fc=n(21357),pc=n(33514),hc=n(94025),vc=n(15546),gc=n(2247);function mc(t,e){return bc(t?[...s.NQ,...s.zE]:[...s.NQ],e)}function bc(t,e){const n={options:[],current:[]},r=[];for(const o of t){const t={label:o.name,value:o.id,description:o.description};if(o.state===vc.BV.alpha){if(!uc.Oh)continue;t.label=`${o.name} (Alpha)`,r.push(t)}else n.options.push(t);o.id===e&&n.current.push(t)}for(const t of r)n.options.push(t);return n}function yc(t,e){var n;const r=null!==(n=s.Jk.getIfExists(t.value))&&void 0!==n?n:l.C,o=r.getNewOptions();if(o.type=r.id,r.defaultSize&&(o.placement=Object.assign({},o.placement,r.defaultSize)),e){const t=new p.f(r,o,e);t.updateData(e.scene.context),e.elements.push(t),e.scene.save(),e.reinitializeMoveable()}}const xc=t=>{var e,n,r;let{scene:o,panel:i}=t;const s=i.state.openInlineEdit,[l,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)({x:0,y:0}),p=Ec(),v=null===(e=o.selecto)||void 0===e?void 0:e.getSelectedTargets(),g=null===(n=i.context)||void 0===n||null===(r=n.instanceState)||void 0===r?void 0:r.layer,m=(0,a.useCallback)((t=>{if(!(t instanceof MouseEvent))return;t.preventDefault(),i.setActivePanel();t.currentTarget!==o.div&&o.select({targets:[t.currentTarget]}),f({x:t.pageX,y:t.pageY}),u(!0)}),[o,i]);(0,a.useEffect)((()=>{o.selecto&&o.selecto.getSelectableElements().forEach((t=>{t.addEventListener("contextmenu",m)}))}),[m,o.selecto]),(0,a.useEffect)((()=>{o.div&&o.div.addEventListener("contextmenu",m)}),[m,o.div]);const b=()=>{u(!1)},y=()=>{const t=!o.isPanelEditing&&(0,h.jsx)(fc.s,{label:s?"Close Editor":"Open Editor",onClick:()=>{o.inlineEditingCallback&&(s?i.closeInlineEdit():o.inlineEditingCallback()),b()},className:p.menuItem}),e=()=>{if(1===(null==v?void 0:v.length)){const t=()=>{o.editModeEnabled.next(!0),b()},e=o.findElementByTarget(v[0]);return e&&e.item.hasEditMode&&(0,h.jsx)(fc.s,{label:"Edit",onClick:t,className:p.menuItem})}return null},n=mc(o.shouldShowAdvancedTypes).options,r=!o.isPanelEditing&&(0,h.jsx)(fc.s,{label:"Add item",className:p.menuItem,childItems:(()=>{const t=[];return n.map((e=>{var n;t.push((0,h.jsx)(fc.s,{label:null!==(n=e.label)&&void 0!==n?n:"Canvas item",onClick:()=>yc(e,g)},e.value))})),t})(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),a=!o.isPanelEditing&&(0,h.jsx)(fc.s,{label:"Set background",onClick:()=>{o.setBackgroundCallback&&o.setBackgroundCallback(d),b()},className:p.menuItem});return v&&v.length>=1?(0,h.jsxs)(h.Fragment,{children:[e(),(0,h.jsx)(fc.s,{label:"Delete",onClick:()=>{x(c.Delete),b()},className:p.menuItem}),(0,h.jsx)(fc.s,{label:"Duplicate",onClick:()=>{x(c.Duplicate),b()},className:p.menuItem}),(0,h.jsx)(fc.s,{label:"Bring to front",onClick:()=>{x(c.MoveTop),b()},className:p.menuItem}),(0,h.jsx)(fc.s,{label:"Send to back",onClick:()=>{x(c.MoveBottom),b()},className:p.menuItem}),t]}):(0,h.jsxs)(h.Fragment,{children:[t,a,r]})},x=t=>{o.selection.pipe((0,Sl.P)()).subscribe((e=>{const n=e[0],r=n.parent;switch(t){case c.Delete:r.doAction(c.Delete,n);break;case c.Duplicate:r.doAction(c.Duplicate,n);break;case c.MoveTop:r.doAction(c.MoveTop,n);break;case c.MoveBottom:r.doAction(c.MoveBottom,n)}}))};return l?(0,h.jsx)("div",{onContextMenu:t=>{t.preventDefault(),b()},children:(0,h.jsx)(pc.x,{x:d.x,y:d.y,onClose:b,renderMenuItems:y,focusOnOpen:!1})}):(0,h.jsx)(h.Fragment,{})},Ec=()=>({menuItem:w.css`
    max-width: 200px;
  `}),Sc=t=>({name:"settingsViewable",props:{},events:{},render(e,n){var r,o;if(null!==(r=t.selecto)&&void 0!==r&&r.getSelectedTargets()&&(null===(o=t.selecto)||void 0===o?void 0:o.getSelectedTargets().length)>1)return;const i=e.getRect();return(0,h.jsxs)("div",{className:"moveable-settings",style:{position:"absolute",left:`${i.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:t=>{const n=e.getContainer(),r=new PointerEvent("contextmenu",{clientX:t.clientX,clientY:t.clientY});n.dispatchEvent(r)},children:["","⚙️",""]},"settings-viewable")}}),Cc={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return(0,h.jsxs)("div",{className:"moveable-dimension",style:{position:"absolute",left:n.width/2+"px",top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},children:[Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight)]},"dimension-viewable")}},wc=t=>({name:"constraintViewable",props:{},events:{},render(e,n){var r,o,i,a;const s=e.getRect(),l=t.findElementByTarget(e.state.target);if(null!==(r=t.selecto)&&void 0!==r&&r.getSelectedTargets()&&(null===(o=t.selecto)||void 0===o?void 0:o.getSelectedTargets().length)>1)return;let c=null,u=null;const d=null!==(i=null!==(a=null==l?void 0:l.tempConstraint)&&void 0!==a?a:null==l?void 0:l.options.constraint)&&void 0!==i?i:{},p="1px dashed #4af",h=n.createElement("div",{style:{position:"absolute",left:s.width/2+"px",top:s.height/2-s.height/16+"px",borderLeft:p,height:s.height/8+"px",transform:"rotate(45deg)"}}),v=n.createElement("div",{style:{position:"absolute",left:s.width/2+"px",top:s.height/2-s.height/16+"px",borderLeft:p,height:s.height/8+"px",transform:"rotate(-45deg)"}}),g=n.createElement("div",{},[h,v]),m=n.createElement("div",{style:{position:"absolute",left:s.width/2+"px",bottom:"0px",borderLeft:p,height:"100vh"}}),b=n.createElement("div",{style:{position:"absolute",left:s.width/2+"px",top:`${s.height}px`,borderLeft:p,height:"100vh"}}),y=n.createElement("div",{},[m,b]),x=n.createElement("div",{style:{position:"absolute",left:s.width/2+"px",top:s.height/4+"px",borderLeft:p,height:s.height/2+"px"}}),E=n.createElement("div",{},[x,g]);switch(d.vertical){case f.fJ.Top:c=m;break;case f.fJ.Bottom:c=b;break;case f.fJ.TopBottom:c=y;break;case f.fJ.Center:c=E}const S=n.createElement("div",{style:{position:"absolute",right:"0px",top:s.height/2+"px",borderTop:p,width:"100vw"}}),C=n.createElement("div",{style:{position:"absolute",left:`${s.width}px`,top:s.height/2+"px",borderTop:p,width:"100vw"}}),w=n.createElement("div",{},[S,C]),D=n.createElement("div",{style:{position:"absolute",left:s.width/4+"px",top:s.height/2+"px",borderTop:p,width:s.width/2+"px"}}),M=n.createElement("div",{},[D,g]);switch(d.horizontal){case f._5.Left:u=S;break;case f._5.Right:u=C;break;case f._5.LeftRight:u=w;break;case f._5.Center:u=M}return n.createElement("div",{},[c,u])}}),Dc=["placement","constraint"];class Mc extends y{constructor(t,e,n){var r,o,i;super(t,e),i=t=>{this.div=t},(o="setRootRef")in(r=this)?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this.options=t,this.scene=e,this.changeCallback=n,this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(t){this.revId++,this.options=Object.assign({},t),this.changeCallback()}getSaveModel(){const t=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(this.options,Dc);return Object.assign({},t,{elements:this.elements.map((t=>t.getSaveModel()))})}render(){return(0,h.jsx)("div",{onContextMenu:t=>t.preventDefault(),ref:this.setRootRef,style:Object.assign({},this.sizeStyle,this.dataStyle),children:this.elements.map((t=>t.render()))},this.UID)}}function kc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Oc{constructor(t,e,n,r,o){var i=this;kc(this,"styles",Rc(uc.vc.theme2)),kc(this,"selection",new x.t(1)),kc(this,"moved",new xl.x),kc(this,"byName",new Map),kc(this,"root",void 0),kc(this,"revId",0),kc(this,"width",0),kc(this,"height",0),kc(this,"style",{}),kc(this,"data",void 0),kc(this,"selecto",void 0),kc(this,"moveable",void 0),kc(this,"div",void 0),kc(this,"currentLayer",void 0),kc(this,"isEditingEnabled",void 0),kc(this,"shouldShowAdvancedTypes",void 0),kc(this,"skipNextSelectionBroadcast",!1),kc(this,"ignoreDataUpdate",!1),kc(this,"panel",void 0),kc(this,"isPanelEditing",void 0!==S.E1.getSearchObject().editPanel),kc(this,"inlineEditingCallback",void 0),kc(this,"setBackgroundCallback",void 0),kc(this,"editModeEnabled",new El.X(!1)),kc(this,"subscription",void 0),kc(this,"getNextElementName",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=t?"Frame":"Element";let n=i.byName.size+1;const r=n+100;for(;n<r;){const t=`${e} ${n++}`;if(!i.byName.has(t))return t}return`${e} ${Date.now()}`})),kc(this,"canRename",(t=>!this.byName.has(t))),kc(this,"context",{getColor:t=>(0,dc.FP)(this.data,t),getScale:t=>(0,dc.pb)(this.data,t),getScalar:t=>(0,dc.z2)(this.data,t),getText:t=>(0,dc.WO)(this.data,t),getResource:t=>(0,dc.Qz)(this.data,t)}),kc(this,"generateFrameContainer",(t=>{let e=1/0,n=1/0,r=0,o=0;return t.forEach((t=>{var i;const a=null===(i=t.div)||void 0===i?void 0:i.getBoundingClientRect();a&&(e>a.top&&(e=a.top),n>a.left&&(n=a.left),r<a.right&&(r=a.right),o<a.bottom&&(o=a.bottom))})),{top:e,left:n,width:r-n,height:o-e}})),kc(this,"save",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.onSave(i.root.getSaveModel()),t&&setTimeout((()=>{i.div&&i.initMoveable(!0,i.isEditingEnabled)}))})),kc(this,"findElementByTarget",(t=>{const e=[...this.root.elements];for(;e.length>0;){const n=e.shift();if(n&&n.div&&n.div===t)return n;const r=n instanceof y?n.elements:[];for(const t of r)e.unshift(t)}})),kc(this,"setNonTargetPointerEvents",((t,e)=>{const n=[...this.root.elements];for(;n.length>0;){const r=n.shift();r&&r.div&&r.div!==t&&r.applyLayoutStylesToDiv(e);const o=r instanceof y?r.elements:[];for(const t of o)n.unshift(t)}})),kc(this,"setRef",(t=>{this.div=t})),kc(this,"select",(t=>{this.selecto&&(this.selecto.setSelectedTargets(t.targets),this.updateSelection(t),this.editModeEnabled.next(!1))})),kc(this,"updateSelection",(t=>{if(this.moveable.target=t.targets,this.skipNextSelectionBroadcast)this.skipNextSelectionBroadcast=!1;else if(t.frame)this.selection.next([t.frame]);else{const e=t.targets.map((t=>this.findElementByTarget(t)));this.selection.next(e)}})),kc(this,"generateTargetElements",(t=>{let e=[];const n=[...t];for(;n.length>0;){const t=n.shift();t&&t.div&&e.push(t.div);const r=t instanceof y?t.elements:[];for(const t of r)n.unshift(t)}return e})),kc(this,"initMoveable",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=i.generateTargetElements(i.root.elements);t&&i.selecto&&i.selecto.destroy(),i.selecto=new sc({container:i.div,rootContainer:i.div,selectableTargets:n,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),i.moveable=new yl(i.div,{draggable:e&&!i.editModeEnabled.getValue(),resizable:e,ables:[Cc,wc(i),Sc(i)],props:{dimensionViewable:e,constraintViewable:e,settingsViewable:e},origin:!1,className:i.styles.selected}).on("click",(t=>{const n=i.findElementByTarget(t.target);let r=!1;var o;n&&(r=null!==(o=n.item.hasEditMode)&&void 0!==o&&o);t.isDouble&&e&&!i.editModeEnabled.getValue()&&r&&i.editModeEnabled.next(!0)})).on("clickGroup",(t=>{i.selecto.clickTarget(t.inputEvent,t.inputTarget)})).on("dragStart",(t=>{i.ignoreDataUpdate=!0,i.setNonTargetPointerEvents(t.target,!0)})).on("dragGroupStart",(t=>{i.ignoreDataUpdate=!0})).on("drag",(t=>{i.findElementByTarget(t.target).applyDrag(t)})).on("dragGroup",(t=>{t.events.forEach((t=>{i.findElementByTarget(t.target).applyDrag(t)}))})).on("dragGroupEnd",(t=>{t.events.forEach((t=>{const e=i.findElementByTarget(t.target);e&&e.setPlacementFromConstraint()})),i.moved.next(Date.now()),i.ignoreDataUpdate=!1})).on("dragEnd",(t=>{const e=i.findElementByTarget(t.target);e&&e.setPlacementFromConstraint(),i.moved.next(Date.now()),i.ignoreDataUpdate=!1,i.setNonTargetPointerEvents(t.target,!1)})).on("resizeStart",(t=>{const e=i.findElementByTarget(t.target);e&&(e.tempConstraint=Object.assign({},e.options.constraint),e.options.constraint={vertical:f.fJ.Top,horizontal:f._5.Left},e.setPlacementFromConstraint())})).on("resize",(t=>{i.findElementByTarget(t.target).applyResize(t),i.moved.next(Date.now())})).on("resizeGroup",(t=>{t.events.forEach((t=>{i.findElementByTarget(t.target).applyResize(t)})),i.moved.next(Date.now())})).on("resizeEnd",(t=>{const e=i.findElementByTarget(t.target);e&&(e.tempConstraint&&(e.options.constraint=e.tempConstraint,e.tempConstraint=void 0),e.setPlacementFromConstraint())}));let r=[];i.selecto.on("dragStart",(t=>{var e,n;const o=t.inputEvent.target,a=i.moveable.isMoveableElement(o)||r.some((t=>t===o||t.contains(o))),s=null===(e=i.selecto)||void 0===e?void 0:e.getSelectedTargets().includes(o.parentElement.parentElement);i.isEditingEnabled&&!i.editModeEnabled.getValue()&&a&&null!==(n=i.selecto)&&void 0!==n&&n.getSelectedTargets().length&&(i.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(a||s||!i.isEditingEnabled)&&t.stop()})).on("select",(()=>{i.editModeEnabled.next(!1)})).on("selectEnd",(t=>{var e;(r=t.selected,i.updateSelection({targets:r}),t.isDragStart)&&(i.isEditingEnabled&&!i.editModeEnabled.getValue()&&null!==(e=i.selecto)&&void 0!==e&&e.getSelectedTargets().length&&(i.selecto.getSelectedTargets()[0].style.cursor="grabbing"),t.inputEvent.preventDefault(),t.data.timer=setTimeout((()=>{i.moveable.dragStart(t.inputEvent)})))})).on("dragEnd",(t=>{clearTimeout(t.data.timer)}))})),kc(this,"reorderElements",((t,e,n,r)=>{switch(n){case!0:var o;if(-1===r)t.parent instanceof y?e.parent&&(this.updateElements(t,e.parent,e.parent.elements.length),t.updateData(e.parent.scene.context)):null===(o=e.parent)||void 0===o||o.reorderTree(t,e,!0);else e.parent&&(this.updateElements(t,e.parent,e.parent.elements.indexOf(e)),t.updateData(e.parent.scene.context));break;case!1:var i;if(e instanceof y)if(t.parent===e)null===(i=t.parent)||void 0===i||i.reorderTree(t,e,!0);else this.updateElements(t,e),t.updateData(e.scene.context);else if(t.parent===e.parent){var a;null===(a=t.parent)||void 0===a||a.reorderTree(t,e)}else e.parent&&(this.updateElements(t,e.parent),t.updateData(e.parent.scene.context))}})),kc(this,"updateElements",(function(t,e){var n,r,o;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===(n=t.parent)||void 0===n||n.doAction(c.Delete,t),t.parent=e;const a=null===(r=t.div)||void 0===r?void 0:r.getBoundingClientRect();t.setPlacementFromConstraint(a,null===(o=e.div)||void 0===o?void 0:o.getBoundingClientRect());const s=null!=i?i:e.elements.length-1;e.elements.splice(s,0,t),e.scene.save(),e.reinitializeMoveable()})),this.onSave=r,this.root=this.load(t,e,n),this.subscription=this.editModeEnabled.subscribe((t=>{this.moveable&&this.isEditingEnabled&&(this.moveable.draggable=!t)})),this.panel=o}load(t,e,n){return this.root=new Mc(null!=t?t:{type:"frame",elements:[s.Nm]},this,this.save),this.isEditingEnabled=e,this.shouldShowAdvancedTypes=n,setTimeout((()=>{if(this.div){const t=e;this.initMoveable(t,e),this.currentLayer=this.root,this.selection.next([])}})),this.root}updateData(t){this.data=t,this.root.updateData(this.context)}updateSize(t,e){var n;this.width=t,this.height=e,this.style={width:t,height:e},null!==(n=this.selecto)&&void 0!==n&&n.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Sl.P)()).subscribe((t=>{var e;const n=t[0].parent,r=new y({type:"frame",name:this.getNextElementName(!0),elements:[]},this,t[0].parent),o=this.generateFrameContainer(t);r.options.placement=o,t.forEach((t=>{var e;const i=null===(e=t.div)||void 0===e?void 0:e.getBoundingClientRect();t.setPlacementFromConstraint(i,o),n.doAction(c.Delete,t),r.doAction(c.Duplicate,t,!1,!1)})),r.setPlacementFromConstraint(o,null===(e=n.div)||void 0===e?void 0:e.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()}))}clearCurrentSelection(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");null===(t=this.selecto)||void 0===t||t.clickTarget(n,this.div)}updateCurrentLayer(t){this.currentLayer=t,this.clearCurrentSelection(),this.save()}render(){const t=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled;return(0,h.jsxs)("div",{className:this.styles.wrap,style:this.style,ref:this.setRef,children:[this.root.render(),t&&(0,h.jsx)(lc.h_,{children:(0,h.jsx)(xc,{scene:this,panel:this.panel})})]},this.revId)}}const Rc=(0,cc.B)((t=>({wrap:w.css`
    overflow: hidden;
    position: relative;
  `,selected:w.css`
    z-index: 999 !important;
  `})));var _c=n(8105),Pc=n(53004),Tc=n.n(Pc),Ac=n(87638),Nc=n(16755),Bc=n(23734),jc=n(78130),zc=n(60532),Ic=n(64896),Gc=n(43033),Kc=n(81154),Fc=n(58620),Lc=n(58575),Wc=n(10453),Yc=n(87152);const Hc=t=>{let{onTabChange:e}=t;const[n,r]=(0,a.useState)(u.SelectedElement),o=[{label:"Selected Element",value:u.SelectedElement},{label:"Element Management",value:u.ElementManagement}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Wc.J,{children:o.map(((t,o)=>(0,h.jsx)(Yc.O,{label:t.label,active:t.value===n,onChangeTab:()=>{return n=t.value,e(n),void r(n);var n}},`${t.value}-${o}`)))})})};var Xc,qc=n(65678),Vc=n(54761),Uc=n(99500),Zc=n(70917),$c=n(34117),Jc=n(46889),Qc=n(92155);const tu=t=>{let{onVerticalConstraintChange:e,onHorizontalConstraintChange:n,currentConstraints:r}=t;const o=(0,Nc.wW)(eu(r));return(0,h.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"},children:(0,h.jsxs)("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[Xc||(Xc=(0,h.jsx)("path",{fill:"#e5e5e5",d:"M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29\n29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16\n-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1\n-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2\n659 2 912 0 431 -2 462 -4 478 -21z"})),(0,h.jsx)("rect",{className:o.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{e(s.fJ.Top)},height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),(0,h.jsx)("rect",{className:o.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{e(s.fJ.Bottom)},height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),(0,h.jsx)("rect",{className:o.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{n(s._5.Left)},height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),(0,h.jsx)("rect",{className:o.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{n(s._5.Right)},height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),(0,h.jsx)("path",{className:o.box,d:"M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14\n1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577\n16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4\n-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z"}),(0,h.jsx)("rect",{className:o.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{e(s.fJ.Center)},height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),(0,h.jsx)("rect",{className:o.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),(0,h.jsx)("rect",{className:o.constraintHover,onClick:()=>{n(s._5.Center)},height:"300",width:"660",y:"925",x:"815",fill:"transparent"})]})})},eu=t=>e=>{const n=e.isDark?"#ffffff":"#000000";return{constraintHover:w.css`
      &:hover {
        fill: ${"#daebf7"};
        fill-opacity: ${"0.6"};
      }
    `,topConstraint:w.css`
      ${t.vertical===s.fJ.Top||t.vertical===s.fJ.TopBottom?"width: 92pt; x: 1085; fill: #0d99ff;":`fill: ${n};`}
    `,bottomConstraint:w.css`
      ${t.vertical===s.fJ.Bottom||t.vertical===s.fJ.TopBottom?"width: 92pt; x: 1085; fill: #0d99ff;":`fill: ${n};`}
    `,leftConstraint:w.css`
      ${t.horizontal===s._5.Left||t.horizontal===s._5.LeftRight?"height: 92pt; y: 1014; fill: #0d99ff;":`fill: ${n};`}
    `,rightConstraint:w.css`
      ${t.horizontal===s._5.Right||t.horizontal===s._5.LeftRight?"height: 92pt; y: 1014; fill: #0d99ff;":`fill: ${n};`}
    `,horizontalCenterConstraint:w.css`
      ${t.horizontal===s._5.Center?"height: 92pt; y: 1014; fill: #0d99ff;":`fill: ${n};`}
    `,verticalCenterConstraint:w.css`
      ${t.vertical===s.fJ.Center?"width: 92pt; x: 1085; fill: #0d99ff;":`fill: ${n};`}
    `,box:w.css`
      fill: ${n};
    `}},nu=t=>{let{onPositionChange:e,element:n,settings:r}=t;const o=(0,Nc.wW)(ru),i=t=>{var r,o,i,c,u,d,f,p;const h={vertical:s.fJ.Top,horizontal:s._5.Left},v=Object.assign({},n.options.constraint);switch(n.options.constraint=h,n.setPlacementFromConstraint(),t){case s.Ru.Top:e(0,"top");break;case s.Ru.Bottom:e(l(null!==(r=null===(o=n.options.placement)||void 0===o?void 0:o.height)&&void 0!==r?r:0,"bottom"),"top");break;case s.Ru.VerticalCenter:e(a(null!==(i=null===(c=n.options.placement)||void 0===c?void 0:c.height)&&void 0!==i?i:0,"v"),"top");break;case s.Ru.Left:e(0,"left");break;case s.Ru.Right:e(l(null!==(u=null===(d=n.options.placement)||void 0===d?void 0:d.width)&&void 0!==u?u:0,"right"),"left");break;case s.Ru.HorizontalCenter:e(a(null!==(f=null===(p=n.options.placement)||void 0===p?void 0:p.width)&&void 0!==f?f:0,"h"),"left")}n.options.constraint=v,n.setPlacementFromConstraint()},a=(t,e)=>(("h"===e?r.scene.width:r.scene.height)-t)/2,l=(t,e)=>("right"===e?r.scene.width:r.scene.height)-t;return(0,h.jsxs)("div",{className:o.buttonGroup,children:[(0,h.jsx)(Bc.h,{name:"horizontal-align-left",onClick:()=>i(s.Ru.Left),className:o.button,size:"lg",tooltip:"Align left"}),(0,h.jsx)(Bc.h,{name:"horizontal-align-center",onClick:()=>i(s.Ru.HorizontalCenter),className:o.button,size:"lg",tooltip:"Align horizontal centers"}),(0,h.jsx)(Bc.h,{name:"horizontal-align-right",onClick:()=>i(s.Ru.Right),className:o.button,size:"lg",tooltip:"Align right"}),(0,h.jsx)(Bc.h,{name:"vertical-align-top",onClick:()=>i(s.Ru.Top),size:"lg",tooltip:"Align top"}),(0,h.jsx)(Bc.h,{name:"vertical-align-center",onClick:()=>i(s.Ru.VerticalCenter),className:o.button,size:"lg",tooltip:"Align vertical centers"}),(0,h.jsx)(Bc.h,{name:"vertical-align-bottom",onClick:()=>i(s.Ru.Bottom),className:o.button,size:"lg",tooltip:"Align bottom"})]})},ru=t=>({buttonGroup:w.css`
    display: flex;
    flex-wrap: wrap;
    padding: 12px 0 12px 0;
  `,button:w.css`
    margin-left: 5px;
    margin-right: 5px;
  `});var ou,iu,au,su,lu,cu;const uu=["top","left","bottom","right","width","height"],du=[{label:"Left",value:s._5.Left},{label:"Right",value:s._5.Right},{label:"Left & right",value:s._5.LeftRight},{label:"Center",value:s._5.Center},{label:"Scale",value:s._5.Scale}],fu=[{label:"Top",value:s.fJ.Top},{label:"Bottom",value:s.fJ.Bottom},{label:"Top & bottom",value:s.fJ.TopBottom},{label:"Center",value:s.fJ.Center},{label:"Scale",value:s.fJ.Scale}];function pu(t){var e,n;let{item:r}=t;const o=r.settings;if((0,zc.Z)(null!=o&&o.scene?o.scene.moved:new xl.x),!o)return ou||(ou=(0,h.jsx)("div",{children:"Loading..."}));const i=o.element;if(!i)return iu||(iu=(0,h.jsx)("div",{children:"???"}));const{options:a}=i,{placement:s,constraint:l}=a,c=()=>{setTimeout((()=>{o.scene.select({targets:[i.div]})}))},u=t=>{i.options.constraint.horizontal=t,i.setPlacementFromConstraint(),o.scene.revId++,o.scene.save(!0),c()},d=t=>{i.options.constraint.vertical=t,i.setPlacementFromConstraint(),o.scene.revId++,o.scene.save(!0),c()},f=(t,e)=>{i.options.placement[e]=null!=t?t:i.options.placement[e],i.applyLayoutStylesToDiv(),o.scene.clearCurrentSelection(!0),c()},p=null!==(e=null!==(n=i.tempConstraint)&&void 0!==n?n:l)&&void 0!==e?e:{};return(0,h.jsxs)("div",{children:[(0,h.jsx)(nu,{onPositionChange:f,settings:o,element:i}),au||(au=(0,h.jsx)("br",{})),(0,h.jsx)(qc.g,{label:"Constraints",children:(0,h.jsxs)(Vc.Lh,{children:[(0,h.jsx)(tu,{onVerticalConstraintChange:d,onHorizontalConstraintChange:u,currentConstraints:p}),(0,h.jsxs)(Vc.wc,{children:[(0,h.jsxs)(Vc.Lh,{children:[su||(su=(0,h.jsx)(Uc.J,{name:"arrows-h"})),(0,h.jsx)(Zc.Ph,{options:du,onChange:t=>{u(t.value)},value:p.horizontal})]}),(0,h.jsxs)(Vc.Lh,{children:[lu||(lu=(0,h.jsx)(Uc.J,{name:"arrows-v"})),(0,h.jsx)(Zc.Ph,{options:fu,onChange:t=>{d(t.value)},value:p.vertical})]})]})]})}),cu||(cu=(0,h.jsx)("br",{})),(0,h.jsx)(qc.g,{label:"Position",children:(0,h.jsx)(h.Fragment,{children:uu.map((t=>{const e=s[t];return null==e?null:(0,h.jsx)($c.Z,{children:(0,h.jsx)(Jc._,{label:t,labelWidth:8,grow:!0,children:(0,h.jsx)(Qc.Y,{value:e,onChange:e=>f(e,t)})})},t)}))})})]})}var hu=n(22044);function vu(t){return{category:t.category,path:"--",values:e=>({getValue:e=>(0,i.get)(t.element.options,e),onChange:(e,n)=>{let r=t.element.options;if("type"===e&&n){const t=s.Jk.getIfExists(n);if(!t)return void console.warn("layer does not exist",n);r=Object.assign({},r,t.getNewOptions(r),{type:t.id})}else r=(0,Lc.hs)(r,e,n);t.element.onChange(r),t.element.updateData(t.scene.context)}}),build:(e,n)=>{var r;const{options:o}=t.element,i=null!=o&&o.type?o.type:s.Nm.type,a=mc(t.scene.shouldShowAdvancedTypes,i).options,l=!t.scene.shouldShowAdvancedTypes&&!s.NQ.filter((t=>t.id===(null==o?void 0:o.type))).length;e.addSelect({path:"type",name:void 0,settings:{options:a},description:l?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const c=s.Jk.getIfExists(null!==(r=null==o?void 0:o.type)&&void 0!==r?r:s.Nm.type);let u=o;u||(u=Object.assign({},c.getNewOptions(o),{type:c.id,name:`Element ${Date.now()}.${Math.floor(100*Math.random())}`}));const d=Object.assign({},n,{options:u});null!=c&&c.registerOptionsUI&&c.registerOptionsUI(e,d),e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:pu,settings:t}),hu.I.addBackground(e,d),hu.I.addBorder(e,d)}}}var gu=n(78966),mu=n(39803),bu=n(91230),yu=n(35490),xu=n(54915),Eu=n(82316),Su=n(82027),Cu=n(29129),wu=n(91324),Du=n(49895),Mu=n(18492),ku=n(76741),Ou=n(7041),Ru=n(56061),_u=n(23019),Pu=n.n(_u),Tu=n(17093),Au=n(96739),Nu=n(7223),Bu=n(79243),ju=n(98185),zu=n(5040);function Iu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Iu(Object(n),!0).forEach((function(e){Ku(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ku(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fu=a.forwardRef((function(t,e){var n=t.height,r=t.offset,o=t.children,i=t.prefixCls,s=t.onInnerResize,l={},c={display:"flex",flexDirection:"column"};return void 0!==r&&(l={height:n,position:"relative",overflow:"hidden"},c=Gu(Gu({},c),{},{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),a.createElement("div",{style:l},a.createElement(zu.Z,{onResize:function(t){t.offsetHeight&&s&&s()}},a.createElement("div",{style:c,className:Pu()(Ku({},"".concat(i,"-holder-inner"),i)),ref:e},o)))}));Fu.displayName="Filler";const Lu=Fu;var Wu=n(13191);function Yu(t){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(t)}function Hu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vu(t,e){return Vu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vu(t,e)}function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$u(t);if(e){var o=$u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zu(this,n)}}function Zu(t,e){if(e&&("object"===Yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $u(t){return $u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$u(t)}function Ju(t){return"touches"in t?t.touches[0].pageY:t.pageY}var Qu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vu(t,e)}(i,t);var e,n,r,o=Uu(i);function i(){var t;Xu(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).moveRaf=null,t.scrollbarRef=a.createRef(),t.thumbRef=a.createRef(),t.visibleTimeout=null,t.state={dragging:!1,pageY:null,startTop:null,visible:!1},t.delayHidden=function(){clearTimeout(t.visibleTimeout),t.setState({visible:!0}),t.visibleTimeout=setTimeout((function(){t.setState({visible:!1})}),2e3)},t.onScrollbarTouchStart=function(t){t.preventDefault()},t.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},t.patchEvents=function(){window.addEventListener("mousemove",t.onMouseMove),window.addEventListener("mouseup",t.onMouseUp),t.thumbRef.current.addEventListener("touchmove",t.onMouseMove),t.thumbRef.current.addEventListener("touchend",t.onMouseUp)},t.removeEvents=function(){var e;window.removeEventListener("mousemove",t.onMouseMove),window.removeEventListener("mouseup",t.onMouseUp),null===(e=t.scrollbarRef.current)||void 0===e||e.removeEventListener("touchstart",t.onScrollbarTouchStart),t.thumbRef.current&&(t.thumbRef.current.removeEventListener("touchstart",t.onMouseDown),t.thumbRef.current.removeEventListener("touchmove",t.onMouseMove),t.thumbRef.current.removeEventListener("touchend",t.onMouseUp)),Wu.Z.cancel(t.moveRaf)},t.onMouseDown=function(e){var n=t.props.onStartMove;t.setState({dragging:!0,pageY:Ju(e),startTop:t.getTop()}),n(),t.patchEvents(),e.stopPropagation(),e.preventDefault()},t.onMouseMove=function(e){var n=t.state,r=n.dragging,o=n.pageY,i=n.startTop,a=t.props.onScroll;if(Wu.Z.cancel(t.moveRaf),r){var s=i+(Ju(e)-o),l=t.getEnableScrollRange(),c=t.getEnableHeightRange(),u=c?s/c:0,d=Math.ceil(u*l);t.moveRaf=(0,Wu.Z)((function(){a(d)}))}},t.onMouseUp=function(){var e=t.props.onStopMove;t.setState({dragging:!1}),e(),t.removeEvents()},t.getSpinHeight=function(){var e=t.props,n=e.height,r=n/e.count*10;return r=Math.max(r,20),r=Math.min(r,n/2),Math.floor(r)},t.getEnableScrollRange=function(){var e=t.props;return e.scrollHeight-e.height||0},t.getEnableHeightRange=function(){return t.props.height-t.getSpinHeight()||0},t.getTop=function(){var e=t.props.scrollTop,n=t.getEnableScrollRange(),r=t.getEnableHeightRange();return 0===e||0===n?0:e/n*r},t.showScroll=function(){var e=t.props,n=e.height;return e.scrollHeight>n},t}return e=i,(n=[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(t){t.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var t=this.state,e=t.dragging,n=t.visible,r=this.props.prefixCls,o=this.getSpinHeight(),i=this.getTop(),s=this.showScroll(),l=s&&n;return a.createElement("div",{ref:this.scrollbarRef,className:Pu()("".concat(r,"-scrollbar"),Hu({},"".concat(r,"-scrollbar-show"),s)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:l?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},a.createElement("div",{ref:this.thumbRef,className:Pu()("".concat(r,"-scrollbar-thumb"),Hu({},"".concat(r,"-scrollbar-thumb-moving"),e)),style:{width:"100%",height:o,top:i,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}])&&qu(e.prototype,n),r&&qu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.Component);function td(t){var e=t.children,n=t.setRef,r=a.useCallback((function(t){n(t)}),[]);return a.cloneElement(e,{ref:r})}var ed=n(45912);function nd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const rd=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maps=void 0,this.maps=Object.create(null)}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e){this.maps[t]=e}},{key:"get",value:function(t){return this.maps[t]}}])&&nd(e.prototype,n),r&&nd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function od(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return id(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return id(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function id(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ad(t){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(t)}function sd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ld(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ld(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ld(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cd(t,e,n){var r=sd(a.useState(t),2),o=r[0],i=r[1],s=sd(a.useState(null),2),l=s[0],c=s[1];return a.useEffect((function(){var r=function(t,e,n){var r,o,i=t.length,a=e.length;if(0===i&&0===a)return null;i<a?(r=t,o=e):(r=e,o=t);var s={__EMPTY_ITEM__:!0};function l(t){return void 0!==t?n(t):s}for(var c=null,u=1!==Math.abs(i-a),d=0;d<o.length;d+=1){var f=l(r[d]);if(f!==l(o[d])){c=d,u=u||f!==l(o[d+1]);break}}return null===c?null:{index:c,multiple:u}}(o||[],t||[],e);void 0!==(null==r?void 0:r.index)&&(null==n||n(r.index),c(t[r.index])),i(t)}),[t]),[l]}function ud(t){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(t)}const dd="object"===("undefined"==typeof navigator?"undefined":ud(navigator))&&/Firefox/i.test(navigator.userAgent),fd=function(t,e){var n=(0,a.useRef)(!1),r=(0,a.useRef)(null);function o(){clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)}var i=(0,a.useRef)({top:t,bottom:e});return i.current.top=t,i.current.bottom=e,function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t<0&&i.current.top||t>0&&i.current.bottom;return e&&a?(clearTimeout(r.current),n.current=!1):a&&!n.current||o(),!n.current&&a}};var pd=n(18543);var hd=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"];function vd(){return vd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(this,arguments)}function gd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function md(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gd(Object(n),!0).forEach((function(e){bd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xd(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ed(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var Sd=[],Cd={overflowY:"auto",overflowAnchor:"none"};function wd(t,e){var n=t.prefixCls,r=void 0===n?"rc-virtual-list":n,o=t.className,i=t.height,s=t.itemHeight,l=t.fullHeight,c=void 0===l||l,u=t.style,d=t.data,f=t.children,p=t.itemKey,h=t.virtual,v=t.component,g=void 0===v?"div":v,m=t.onScroll,b=t.onVisibleChange,y=Ed(t,hd),x=!(!1===h||!i||!s),E=x&&d&&s*d.length>i,S=yd((0,a.useState)(0),2),C=S[0],w=S[1],D=yd((0,a.useState)(!1),2),M=D[0],k=D[1],O=Pu()(r,o),R=d||Sd,_=(0,a.useRef)(),P=(0,a.useRef)(),T=(0,a.useRef)(),A=a.useCallback((function(t){return"function"==typeof p?p(t):null==t?void 0:t[p]}),[p]),N={getKey:A};function B(t){w((function(e){var n=function(t){var e=t;Number.isNaN($.current)||(e=Math.min(e,$.current));return e=Math.max(e,0)}("function"==typeof t?t(e):t);return _.current.scrollTop=n,n}))}var j=(0,a.useRef)({start:0,end:R.length}),z=(0,a.useRef)(),I=yd(cd(R,A),1)[0];z.current=I;var G=function(t,e,n){var r=od(a.useState(0),2),o=r[0],i=r[1],s=(0,a.useRef)(new Map),l=(0,a.useRef)(new rd),c=(0,a.useRef)();function u(){Wu.Z.cancel(c.current)}function d(){u(),c.current=(0,Wu.Z)((function(){s.current.forEach((function(t,e){if(t&&t.offsetParent){var n=(0,ed.Z)(t),r=n.offsetHeight;l.current.get(e)!==r&&l.current.set(e,n.offsetHeight)}})),i((function(t){return t+1}))}))}return(0,a.useEffect)((function(){return u}),[]),[function(r,o){var i=t(r),a=s.current.get(i);o?(s.current.set(i,o),d()):s.current.delete(i),!a!=!o&&(o?null==e||e(r):null==n||n(r))},d,l.current,o]}(A,null,null),K=yd(G,4),F=K[0],L=K[1],W=K[2],Y=K[3],H=a.useMemo((function(){if(!x)return{scrollHeight:void 0,start:0,end:R.length-1,offset:void 0};var t;if(!E)return{scrollHeight:(null===(t=P.current)||void 0===t?void 0:t.offsetHeight)||0,start:0,end:R.length-1,offset:void 0};for(var e,n,r,o=0,a=R.length,l=0;l<a;l+=1){var c=R[l],u=A(c),d=W.get(u),f=o+(void 0===d?s:d);f>=C&&void 0===e&&(e=l,n=o),f>C+i&&void 0===r&&(r=l),o=f}return void 0===e&&(e=0,n=0),void 0===r&&(r=R.length-1),{scrollHeight:o,start:e,end:r=Math.min(r+1,R.length),offset:n}}),[E,x,C,R,Y,i]),X=H.scrollHeight,q=H.start,V=H.end,U=H.offset;j.current.start=q,j.current.end=V;var Z=X-i,$=(0,a.useRef)(Z);$.current=Z;var J=C<=0,Q=C>=Z,tt=fd(J,Q);var et=function(t,e,n,r){var o=(0,a.useRef)(0),i=(0,a.useRef)(null),s=(0,a.useRef)(null),l=(0,a.useRef)(!1),c=fd(e,n);return[function(e){if(t){Wu.Z.cancel(i.current);var n=e.deltaY;o.current+=n,s.current=n,c(n)||(dd||e.preventDefault(),i.current=(0,Wu.Z)((function(){var t=l.current?10:1;r(o.current*t),o.current=0})))}},function(e){t&&(l.current=e.detail===s.current)}]}(x,J,Q,(function(t){B((function(e){return e+t}))})),nt=yd(et,2),rt=nt[0],ot=nt[1];!function(t,e,n){var r,o=(0,a.useRef)(!1),i=(0,a.useRef)(0),s=(0,a.useRef)(null),l=(0,a.useRef)(null),c=function(t){if(o.current){var e=Math.ceil(t.touches[0].pageY),r=i.current-e;i.current=e,n(r)&&t.preventDefault(),clearInterval(l.current),l.current=setInterval((function(){(!n(r*=.9333333333333333,!0)||Math.abs(r)<=.1)&&clearInterval(l.current)}),16)}},u=function(){o.current=!1,r()},d=function(t){r(),1!==t.touches.length||o.current||(o.current=!0,i.current=Math.ceil(t.touches[0].pageY),s.current=t.target,s.current.addEventListener("touchmove",c),s.current.addEventListener("touchend",u))};r=function(){s.current&&(s.current.removeEventListener("touchmove",c),s.current.removeEventListener("touchend",u))},(0,pd.Z)((function(){return t&&e.current.addEventListener("touchstart",d),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("touchstart",d),r(),clearInterval(l.current)}}),[t])}(x,_,(function(t,e){return!tt(t,e)&&(rt({preventDefault:function(){},deltaY:t}),!0)})),(0,pd.Z)((function(){function t(t){x&&t.preventDefault()}return _.current.addEventListener("wheel",rt),_.current.addEventListener("DOMMouseScroll",ot),_.current.addEventListener("MozMousePixelScroll",t),function(){_.current&&(_.current.removeEventListener("wheel",rt),_.current.removeEventListener("DOMMouseScroll",ot),_.current.removeEventListener("MozMousePixelScroll",t))}}),[x]);var it=function(t,e,n,r,o,i,s,l){var c=a.useRef();return function(a){if(null!=a){if(Wu.Z.cancel(c.current),"number"==typeof a)s(a);else if(a&&"object"===ad(a)){var u,d=a.align;u="index"in a?a.index:e.findIndex((function(t){return o(t)===a.key}));var f=a.offset,p=void 0===f?0:f;!function a(l,f){if(!(l<0)&&t.current){var h=t.current.clientHeight,v=!1,g=f;if(h){for(var m=f||d,b=0,y=0,x=0,E=Math.min(e.length,u),S=0;S<=E;S+=1){var C=o(e[S]);y=b;var w=n.get(C);b=x=y+(void 0===w?r:w),S===u&&void 0===w&&(v=!0)}var D=null;switch(m){case"top":D=y-p;break;case"bottom":D=x-h+p;break;default:var M=t.current.scrollTop;y<M?g="top":x>M+h&&(g="bottom")}null!==D&&D!==t.current.scrollTop&&s(D)}c.current=(0,Wu.Z)((function(){v&&i(),a(l-1,g)}))}}(3)}}else l()}}(_,R,W,s,A,L,B,(function(){var t;null===(t=T.current)||void 0===t||t.delayHidden()}));a.useImperativeHandle(e,(function(){return{scrollTo:it}})),(0,pd.Z)((function(){if(b){var t=R.slice(q,V+1);b(t,R)}}),[q,V,R]);var at=function(t,e,n,r,o,i){var s=i.getKey;return t.slice(e,n+1).map((function(t,n){var i=o(t,e+n,{}),l=s(t);return a.createElement(td,{key:l,setRef:function(e){return r(t,e)}},i)}))}(R,q,V,F,f,N),st=null;return i&&(st=md(bd({},c?"height":"maxHeight",i),Cd),x&&(st.overflowY="hidden",M&&(st.pointerEvents="none"))),a.createElement("div",vd({style:md(md({},u),{},{position:"relative"}),className:O},y),a.createElement(g,{className:"".concat(r,"-holder"),style:st,ref:_,onScroll:function(t){var e=t.currentTarget.scrollTop;e!==C&&B(e),null==m||m(t)}},a.createElement(Lu,{prefixCls:r,height:X,offset:U,onInnerResize:L,ref:P},at)),x&&a.createElement(Qu,{ref:T,prefixCls:r,scrollTop:C,height:i,scrollHeight:X,count:R.length,onScroll:function(t){B(t)},onStartMove:function(){k(!0)},onStopMove:function(){k(!1)}}))}var Dd=a.forwardRef(wd);Dd.displayName="List";const Md=Dd;var kd=n(24358),Od=n(59941),Rd=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],_d=function(t,e){var n=t.className,r=t.style,o=t.motion,i=t.motionNodes,s=t.motionType,l=t.onMotionStart,c=t.onMotionEnd,u=t.active,d=t.treeNodeRequiredProps,f=(0,ju.Z)(t,Rd),p=a.useState(!0),h=(0,Bu.Z)(p,2),v=h[0],g=h[1],m=a.useContext(Tu.k).prefixCls,b=a.useRef(!1),y=function(){b.current||c(),b.current=!0};return(0,a.useEffect)((function(){i&&"hide"===s&&v&&g(!1)}),[i]),(0,a.useEffect)((function(){return i&&l(),function(){i&&y()}}),[]),i?a.createElement(kd.Z,(0,mu.Z)({ref:e,visible:v},o,{motionAppear:"show"===s,onAppearEnd:y,onLeaveEnd:y}),(function(t,e){var n=t.className,r=t.style;return a.createElement("div",{ref:e,className:Pu()("".concat(m,"-treenode-motion"),n),style:r},i.map((function(t){var e=(0,mu.Z)({},t.data),n=t.title,r=t.key,o=t.isStart,i=t.isEnd;delete e.children;var s=(0,Nu.H8)(r,d);return a.createElement(Od.Z,(0,mu.Z)({},e,s,{title:n,active:u,data:t.data,key:r,isStart:o,isEnd:i}))})))})):a.createElement(Od.Z,(0,mu.Z)({domRef:e,className:n,style:r},f,{active:u}))};_d.displayName="MotionTreeNode";const Pd=a.forwardRef(_d);function Td(t,e,n){var r=t.findIndex((function(t){return t.key===n})),o=t[r+1],i=e.findIndex((function(t){return t.key===n}));if(o){var a=e.findIndex((function(t){return t.key===o.key}));return e.slice(i+1,a)}return e.slice(i+1)}var Ad=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Nd={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Bd=function(){},jd="RC_TREE_MOTION_".concat(Math.random()),zd={key:jd},Id={key:jd,level:0,index:0,pos:"0",node:zd,nodes:[zd]},Gd={parent:null,children:[],pos:Id.pos,data:zd,title:null,key:jd,isStart:[],isEnd:[]};function Kd(t,e,n,r){return!1!==e&&n?t.slice(0,Math.ceil(n/r)+1):t}function Fd(t){var e=t.key,n=t.pos;return(0,Nu.km)(e,n)}var Ld=a.forwardRef((function(t,e){var n=t.prefixCls,r=t.data,o=(t.selectable,t.checkable,t.expandedKeys),i=t.selectedKeys,s=t.checkedKeys,l=t.loadedKeys,c=t.loadingKeys,u=t.halfCheckedKeys,d=t.keyEntities,f=t.disabled,p=t.dragging,h=t.dragOverNodeKey,v=t.dropPosition,g=t.motion,m=t.height,b=t.itemHeight,y=t.virtual,x=t.focusable,E=t.activeItem,S=t.focused,C=t.tabIndex,w=t.onKeyDown,D=t.onFocus,M=t.onBlur,k=t.onActiveChange,O=t.onListChangeStart,R=t.onListChangeEnd,_=(0,ju.Z)(t,Ad),P=a.useRef(null),T=a.useRef(null);a.useImperativeHandle(e,(function(){return{scrollTo:function(t){P.current.scrollTo(t)},getIndentWidth:function(){return T.current.offsetWidth}}}));var A=a.useState(o),N=(0,Bu.Z)(A,2),B=N[0],j=N[1],z=a.useState(r),I=(0,Bu.Z)(z,2),G=I[0],K=I[1],F=a.useState(r),L=(0,Bu.Z)(F,2),W=L[0],Y=L[1],H=a.useState([]),X=(0,Bu.Z)(H,2),q=X[0],V=X[1],U=a.useState(null),Z=(0,Bu.Z)(U,2),$=Z[0],J=Z[1],Q=a.useRef(r);function tt(){var t=Q.current;K(t),Y(t),V([]),J(null),R()}Q.current=r,a.useEffect((function(){j(o);var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length,r=e.length;if(1!==Math.abs(n-r))return{add:!1,key:null};function o(t,e){var n=new Map;t.forEach((function(t){n.set(t,!0)}));var r=e.filter((function(t){return!n.has(t)}));return 1===r.length?r[0]:null}return n<r?{add:!0,key:o(t,e)}:{add:!1,key:o(e,t)}}(B,o);if(null!==t.key)if(t.add){var e=G.findIndex((function(e){return e.key===t.key})),n=Kd(Td(G,r,t.key),y,m,b),i=G.slice();i.splice(e+1,0,Gd),Y(i),V(n),J("show")}else{var a=r.findIndex((function(e){return e.key===t.key})),s=Kd(Td(r,G,t.key),y,m,b),l=r.slice();l.splice(a+1,0,Gd),Y(l),V(s),J("hide")}else G!==r&&(K(r),Y(r))}),[o,r]),a.useEffect((function(){p||tt()}),[p]);var et=g?W:r,nt={expandedKeys:o,selectedKeys:i,loadedKeys:l,loadingKeys:c,checkedKeys:s,halfCheckedKeys:u,dragOverNodeKey:h,dropPosition:v,keyEntities:d};return a.createElement(a.Fragment,null,S&&E&&a.createElement("span",{style:Nd,"aria-live":"assertive"},function(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}(E)),a.createElement("div",null,a.createElement("input",{style:Nd,disabled:!1===x||f,tabIndex:!1!==x?C:null,onKeyDown:w,onFocus:D,onBlur:M,value:"",onChange:Bd,"aria-label":"for screen reader"})),a.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},a.createElement("div",{className:"".concat(n,"-indent")},a.createElement("div",{ref:T,className:"".concat(n,"-indent-unit")}))),a.createElement(Md,(0,mu.Z)({},_,{data:et,itemKey:Fd,height:m,fullHeight:!1,virtual:y,itemHeight:b,prefixCls:"".concat(n,"-list"),ref:P,onVisibleChange:function(t,e){var n=new Set(t);e.filter((function(t){return!n.has(t)})).some((function(t){return Fd(t)===jd}))&&tt()}}),(function(t){var e=t.pos,n=(0,mu.Z)({},t.data),r=t.title,o=t.key,i=t.isStart,s=t.isEnd,l=(0,Nu.km)(o,e);delete n.key,delete n.children;var c=(0,Nu.H8)(l,nt);return a.createElement(Pd,(0,mu.Z)({},n,c,{title:r,active:!!E&&o===E.key,pos:e,data:t.data,isStart:i,isEnd:s,motion:g,motionNodes:o===jd?q:null,motionType:$,onMotionStart:O,onMotionEnd:tt,treeNodeRequiredProps:nt,onMouseMove:function(){k(null)}}))})))}));Ld.displayName="NodeList";const Wd=Ld;var Yd=n(23745);var Hd=function(t){(0,Du.Z)(n,t);var e=(0,Mu.Z)(n);function n(){var t;(0,Su.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).destroyed=!1,t.delayedDragEnterLogic=void 0,t.loadingRetryTimes={},t.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,Nu.w$)()},t.dragStartMousePosition=null,t.dragNode=void 0,t.currentMouseOverDroppableNodeKey=null,t.listRef=a.createRef(),t.onNodeDragStart=function(e,n){var r=t.state,o=r.expandedKeys,i=r.keyEntities,a=t.props.onDragStart,s=n.props.eventKey;t.dragNode=n,t.dragStartMousePosition={x:e.clientX,y:e.clientY};var l=(0,Au._5)(o,s);t.setState({draggingNodeKey:s,dragChildrenKeys:(0,Au.wA)(s,i),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(l),window.addEventListener("dragend",t.onWindowDragEnd),null==a||a({event:e,node:(0,Nu.F)(n.props)})},t.onNodeDragEnter=function(e,n){var r=t.state,o=r.expandedKeys,i=r.keyEntities,a=r.dragChildrenKeys,s=r.flattenNodes,l=r.indent,c=t.props,u=c.onDragEnter,d=c.onExpand,f=c.allowDrop,p=c.direction,h=n.props,v=h.pos,g=h.eventKey,m=(0,wu.Z)(t).dragNode;if(t.currentMouseOverDroppableNodeKey!==g&&(t.currentMouseOverDroppableNodeKey=g),m){var b=(0,Au.OM)(e,m,n,l,t.dragStartMousePosition,f,s,i,o,p),y=b.dropPosition,x=b.dropLevelOffset,E=b.dropTargetKey,S=b.dropContainerKey,C=b.dropTargetPos,w=b.dropAllowed,D=b.dragOverNodeKey;-1===a.indexOf(E)&&w?(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach((function(e){clearTimeout(t.delayedDragEnterLogic[e])})),m.props.eventKey!==n.props.eventKey&&(e.persist(),t.delayedDragEnterLogic[v]=window.setTimeout((function(){if(null!==t.state.draggingNodeKey){var r=(0,Eu.Z)(o),a=i[n.props.eventKey];a&&(a.children||[]).length&&(r=(0,Au.L0)(o,n.props.eventKey)),"expandedKeys"in t.props||t.setExpandedKeys(r),null==d||d(r,{node:(0,Nu.F)(n.props),expanded:!0,nativeEvent:e.nativeEvent})}}),800)),m.props.eventKey!==E||0!==x?(t.setState({dragOverNodeKey:D,dropPosition:y,dropLevelOffset:x,dropTargetKey:E,dropContainerKey:S,dropTargetPos:C,dropAllowed:w}),null==u||u({event:e,node:(0,Nu.F)(n.props),expandedKeys:o})):t.resetDragState()):t.resetDragState()}else t.resetDragState()},t.onNodeDragOver=function(e,n){var r=t.state,o=r.dragChildrenKeys,i=r.flattenNodes,a=r.keyEntities,s=r.expandedKeys,l=r.indent,c=t.props,u=c.onDragOver,d=c.allowDrop,f=c.direction,p=(0,wu.Z)(t).dragNode;if(p){var h=(0,Au.OM)(e,p,n,l,t.dragStartMousePosition,d,i,a,s,f),v=h.dropPosition,g=h.dropLevelOffset,m=h.dropTargetKey,b=h.dropContainerKey,y=h.dropAllowed,x=h.dropTargetPos,E=h.dragOverNodeKey;-1===o.indexOf(m)&&y&&(p.props.eventKey===m&&0===g?null===t.state.dropPosition&&null===t.state.dropLevelOffset&&null===t.state.dropTargetKey&&null===t.state.dropContainerKey&&null===t.state.dropTargetPos&&!1===t.state.dropAllowed&&null===t.state.dragOverNodeKey||t.resetDragState():v===t.state.dropPosition&&g===t.state.dropLevelOffset&&m===t.state.dropTargetKey&&b===t.state.dropContainerKey&&x===t.state.dropTargetPos&&y===t.state.dropAllowed&&E===t.state.dragOverNodeKey||t.setState({dropPosition:v,dropLevelOffset:g,dropTargetKey:m,dropContainerKey:b,dropTargetPos:x,dropAllowed:y,dragOverNodeKey:E}),null==u||u({event:e,node:(0,Nu.F)(n.props)}))}},t.onNodeDragLeave=function(e,n){t.currentMouseOverDroppableNodeKey!==n.props.eventKey||e.currentTarget.contains(e.relatedTarget)||(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var r=t.props.onDragLeave;null==r||r({event:e,node:(0,Nu.F)(n.props)})},t.onWindowDragEnd=function(e){t.onNodeDragEnd(e,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)},t.onNodeDragEnd=function(e,n){var r=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),null==r||r({event:e,node:(0,Nu.F)(n.props)}),t.dragNode=null,window.removeEventListener("dragend",t.onWindowDragEnd)},t.onNodeDrop=function(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.state,a=i.dragChildrenKeys,s=i.dropPosition,l=i.dropTargetKey,c=i.dropTargetPos,u=i.dropAllowed;if(u){var d=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),null!==l){var f=(0,xu.Z)((0,xu.Z)({},(0,Nu.H8)(l,t.getTreeNodeRequiredProps())),{},{active:(null===(r=t.getActiveItem())||void 0===r?void 0:r.key)===l,data:t.state.keyEntities[l].node}),p=-1!==a.indexOf(l);(0,Ou.ZP)(!p,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var h=(0,Au.yx)(c),v={event:e,node:(0,Nu.F)(f),dragNode:t.dragNode?(0,Nu.F)(t.dragNode.props):null,dragNodesKeys:[t.dragNode.props.eventKey].concat(a),dropToGap:0!==s,dropPosition:s+Number(h[h.length-1])};o||null==d||d(v),t.dragNode=null}}},t.cleanDragState=function(){null!==t.state.draggingNodeKey&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null},t.triggerExpandActionExpand=function(e,n){var r=t.state,o=r.expandedKeys,i=r.flattenNodes,a=n.expanded,s=n.key;if(!(n.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey)){var l=i.filter((function(t){return t.key===s}))[0],c=(0,Nu.F)((0,xu.Z)((0,xu.Z)({},(0,Nu.H8)(s,t.getTreeNodeRequiredProps())),{},{data:l.data}));t.setExpandedKeys(a?(0,Au._5)(o,s):(0,Au.L0)(o,s)),t.onNodeExpand(e,c)}},t.onNodeClick=function(e,n){var r=t.props,o=r.onClick;"click"===r.expandAction&&t.triggerExpandActionExpand(e,n),null==o||o(e,n)},t.onNodeDoubleClick=function(e,n){var r=t.props,o=r.onDoubleClick;"doubleClick"===r.expandAction&&t.triggerExpandActionExpand(e,n),null==o||o(e,n)},t.onNodeSelect=function(e,n){var r=t.state.selectedKeys,o=t.state,i=o.keyEntities,a=o.fieldNames,s=t.props,l=s.onSelect,c=s.multiple,u=n.selected,d=n[a.key],f=!u,p=(r=f?c?(0,Au.L0)(r,d):[d]:(0,Au._5)(r,d)).map((function(t){var e=i[t];return e?e.node:null})).filter((function(t){return t}));t.setUncontrolledState({selectedKeys:r}),null==l||l(r,{event:"select",selected:f,node:n,selectedNodes:p,nativeEvent:e.nativeEvent})},t.onNodeCheck=function(e,n,r){var o,i=t.state,a=i.keyEntities,s=i.checkedKeys,l=i.halfCheckedKeys,c=t.props,u=c.checkStrictly,d=c.onCheck,f=n.key,p={event:"check",node:n,checked:r,nativeEvent:e.nativeEvent};if(u){var h=r?(0,Au.L0)(s,f):(0,Au._5)(s,f);o={checked:h,halfChecked:(0,Au._5)(l,f)},p.checkedNodes=h.map((function(t){return a[t]})).filter((function(t){return t})).map((function(t){return t.node})),t.setUncontrolledState({checkedKeys:h})}else{var v=(0,Yd.S)([].concat((0,Eu.Z)(s),[f]),!0,a),g=v.checkedKeys,m=v.halfCheckedKeys;if(!r){var b=new Set(g);b.delete(f);var y=(0,Yd.S)(Array.from(b),{checked:!1,halfCheckedKeys:m},a);g=y.checkedKeys,m=y.halfCheckedKeys}o=g,p.checkedNodes=[],p.checkedNodesPositions=[],p.halfCheckedKeys=m,g.forEach((function(t){var e=a[t];if(e){var n=e.node,r=e.pos;p.checkedNodes.push(n),p.checkedNodesPositions.push({node:n,pos:r})}})),t.setUncontrolledState({checkedKeys:g},!1,{halfCheckedKeys:m})}null==d||d(o,p)},t.onNodeLoad=function(e){var n=e.key,r=new Promise((function(r,o){t.setState((function(i){var a=i.loadedKeys,s=void 0===a?[]:a,l=i.loadingKeys,c=void 0===l?[]:l,u=t.props,d=u.loadData,f=u.onLoad;return d&&-1===s.indexOf(n)&&-1===c.indexOf(n)?(d(e).then((function(){var o=t.state.loadedKeys,i=(0,Au.L0)(o,n);null==f||f(i,{event:"load",node:e}),t.setUncontrolledState({loadedKeys:i}),t.setState((function(t){return{loadingKeys:(0,Au._5)(t.loadingKeys,n)}})),r()})).catch((function(e){if(t.setState((function(t){return{loadingKeys:(0,Au._5)(t.loadingKeys,n)}})),t.loadingRetryTimes[n]=(t.loadingRetryTimes[n]||0)+1,t.loadingRetryTimes[n]>=10){var i=t.state.loadedKeys;(0,Ou.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:(0,Au.L0)(i,n)}),r()}o(e)})),{loadingKeys:(0,Au.L0)(c,n)}):null}))}));return r.catch((function(){})),r},t.onNodeMouseEnter=function(e,n){var r=t.props.onMouseEnter;null==r||r({event:e,node:n})},t.onNodeMouseLeave=function(e,n){var r=t.props.onMouseLeave;null==r||r({event:e,node:n})},t.onNodeContextMenu=function(e,n){var r=t.props.onRightClick;r&&(e.preventDefault(),r({event:e,node:n}))},t.onFocus=function(){var e=t.props.onFocus;t.setState({focused:!0});for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==e||e.apply(void 0,r)},t.onBlur=function(){var e=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==e||e.apply(void 0,r)},t.getTreeNodeRequiredProps=function(){var e=t.state;return{expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],loadedKeys:e.loadedKeys||[],loadingKeys:e.loadingKeys||[],checkedKeys:e.checkedKeys||[],halfCheckedKeys:e.halfCheckedKeys||[],dragOverNodeKey:e.dragOverNodeKey,dropPosition:e.dropPosition,keyEntities:e.keyEntities}},t.setExpandedKeys=function(e){var n=t.state,r=n.treeData,o=n.fieldNames,i=(0,Nu.oH)(r,e,o);t.setUncontrolledState({expandedKeys:e,flattenNodes:i},!0)},t.onNodeExpand=function(e,n){var r=t.state.expandedKeys,o=t.state,i=o.listChanging,a=o.fieldNames,s=t.props,l=s.onExpand,c=s.loadData,u=n.expanded,d=n[a.key];if(!i){var f=r.indexOf(d),p=!u;if((0,Ou.ZP)(u&&-1!==f||!u&&-1===f,"Expand state not sync with index check"),r=p?(0,Au.L0)(r,d):(0,Au._5)(r,d),t.setExpandedKeys(r),null==l||l(r,{node:n,expanded:p,nativeEvent:e.nativeEvent}),p&&c){var h=t.onNodeLoad(n);h&&h.then((function(){var e=(0,Nu.oH)(t.state.treeData,r,a);t.setUncontrolledState({flattenNodes:e})})).catch((function(){var e=t.state.expandedKeys,n=(0,Au._5)(e,d);t.setExpandedKeys(n)}))}}},t.onListChangeStart=function(){t.setUncontrolledState({listChanging:!0})},t.onListChangeEnd=function(){setTimeout((function(){t.setUncontrolledState({listChanging:!1})}))},t.onActiveChange=function(e){var n=t.state.activeKey,r=t.props.onActiveChange;n!==e&&(t.setState({activeKey:e}),null!==e&&t.scrollTo({key:e}),null==r||r(e))},t.getActiveItem=function(){var e=t.state,n=e.activeKey,r=e.flattenNodes;return null===n?null:r.find((function(t){return t.key===n}))||null},t.offsetActiveKey=function(e){var n=t.state,r=n.flattenNodes,o=n.activeKey,i=r.findIndex((function(t){return t.key===o}));-1===i&&e<0&&(i=r.length);var a=r[i=(i+e+r.length)%r.length];if(a){var s=a.key;t.onActiveChange(s)}else t.onActiveChange(null)},t.onKeyDown=function(e){var n=t.state,r=n.activeKey,o=n.expandedKeys,i=n.checkedKeys,a=n.fieldNames,s=t.props,l=s.onKeyDown,c=s.checkable,u=s.selectable;switch(e.which){case ku.Z.UP:t.offsetActiveKey(-1),e.preventDefault();break;case ku.Z.DOWN:t.offsetActiveKey(1),e.preventDefault()}var d=t.getActiveItem();if(d&&d.data){var f=t.getTreeNodeRequiredProps(),p=!1===d.data.isLeaf||!!(d.data[a.children]||[]).length,h=(0,Nu.F)((0,xu.Z)((0,xu.Z)({},(0,Nu.H8)(r,f)),{},{data:d.data,active:!0}));switch(e.which){case ku.Z.LEFT:p&&o.includes(r)?t.onNodeExpand({},h):d.parent&&t.onActiveChange(d.parent.key),e.preventDefault();break;case ku.Z.RIGHT:p&&!o.includes(r)?t.onNodeExpand({},h):d.children&&d.children.length&&t.onActiveChange(d.children[0].key),e.preventDefault();break;case ku.Z.ENTER:case ku.Z.SPACE:!c||h.disabled||!1===h.checkable||h.disableCheckbox?c||!u||h.disabled||!1===h.selectable||t.onNodeSelect({},h):t.onNodeCheck({},h,!i.includes(r))}}null==l||l(e)},t.setUncontrolledState=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.destroyed){var o=!1,i=!0,a={};Object.keys(e).forEach((function(n){n in t.props?i=!1:(o=!0,a[n]=e[n])})),!o||n&&!i||t.setState((0,xu.Z)((0,xu.Z)({},a),r))}},t.scrollTo=function(e){t.listRef.current.scrollTo(e)},t}return(0,Cu.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var t=this.props.activeKey;void 0!==t&&t!==this.state.activeKey&&(this.setState({activeKey:t}),null!==t&&this.scrollTo({key:t}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var t,e,n=this.state,r=n.focused,o=n.flattenNodes,i=n.keyEntities,s=n.draggingNodeKey,l=n.activeKey,c=n.dropLevelOffset,u=n.dropContainerKey,d=n.dropTargetKey,f=n.dropPosition,p=n.dragOverNodeKey,h=n.indent,v=this.props,g=v.prefixCls,m=v.className,b=v.style,y=v.showLine,x=v.focusable,E=v.tabIndex,S=void 0===E?0:E,C=v.selectable,w=v.showIcon,D=v.icon,M=v.switcherIcon,k=v.draggable,O=v.checkable,R=v.checkStrictly,_=v.disabled,P=v.motion,T=v.loadData,A=v.filterTreeNode,N=v.height,B=v.itemHeight,j=v.virtual,z=v.titleRender,I=v.dropIndicatorRender,G=v.onContextMenu,K=v.onScroll,F=v.direction,L=v.rootClassName,W=v.rootStyle,Y=(0,Ru.Z)(this.props,{aria:!0,data:!0});return k&&(e="object"===(0,yu.Z)(k)?k:"function"==typeof k?{nodeDraggable:k}:{}),a.createElement(Tu.k.Provider,{value:{prefixCls:g,selectable:C,showIcon:w,icon:D,switcherIcon:M,draggable:e,draggingNodeKey:s,checkable:O,checkStrictly:R,disabled:_,keyEntities:i,dropLevelOffset:c,dropContainerKey:u,dropTargetKey:d,dropPosition:f,dragOverNodeKey:p,indent:h,direction:F,dropIndicatorRender:I,loadData:T,filterTreeNode:A,titleRender:z,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},a.createElement("div",{role:"tree",className:Pu()(g,m,L,(t={},(0,bu.Z)(t,"".concat(g,"-show-line"),y),(0,bu.Z)(t,"".concat(g,"-focused"),r),(0,bu.Z)(t,"".concat(g,"-active-focused"),null!==l),t)),style:W},a.createElement(Wd,(0,mu.Z)({ref:this.listRef,prefixCls:g,style:b,data:o,disabled:_,selectable:C,checkable:!!O,motion:P,dragging:null!==s,height:N,itemHeight:B,virtual:j,focusable:x,focused:r,tabIndex:S,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:G,onScroll:K},this.getTreeNodeRequiredProps(),Y))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n,r=e.prevProps,o={prevProps:t};function i(e){return!r&&e in t||r&&r[e]!==t[e]}var a=e.fieldNames;if(i("fieldNames")&&(a=(0,Nu.w$)(t.fieldNames),o.fieldNames=a),i("treeData")?n=t.treeData:i("children")&&((0,Ou.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=(0,Nu.zn)(t.children)),n){o.treeData=n;var s=(0,Nu.I8)(n,{fieldNames:a});o.keyEntities=(0,xu.Z)((0,bu.Z)({},jd,Id),s.keyEntities)}var l,c=o.keyEntities||e.keyEntities;if(i("expandedKeys")||r&&i("autoExpandParent"))o.expandedKeys=t.autoExpandParent||!r&&t.defaultExpandParent?(0,Au.r7)(t.expandedKeys,c):t.expandedKeys;else if(!r&&t.defaultExpandAll){var u=(0,xu.Z)({},c);delete u[jd],o.expandedKeys=Object.keys(u).map((function(t){return u[t].key}))}else!r&&t.defaultExpandedKeys&&(o.expandedKeys=t.autoExpandParent||t.defaultExpandParent?(0,Au.r7)(t.defaultExpandedKeys,c):t.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,n||o.expandedKeys){var d=(0,Nu.oH)(n||e.treeData,o.expandedKeys||e.expandedKeys,a);o.flattenNodes=d}if((t.selectable&&(i("selectedKeys")?o.selectedKeys=(0,Au.BT)(t.selectedKeys,t):!r&&t.defaultSelectedKeys&&(o.selectedKeys=(0,Au.BT)(t.defaultSelectedKeys,t))),t.checkable)&&(i("checkedKeys")?l=(0,Au.E6)(t.checkedKeys)||{}:!r&&t.defaultCheckedKeys?l=(0,Au.E6)(t.defaultCheckedKeys)||{}:n&&(l=(0,Au.E6)(t.checkedKeys)||{checkedKeys:e.checkedKeys,halfCheckedKeys:e.halfCheckedKeys}),l)){var f=l,p=f.checkedKeys,h=void 0===p?[]:p,v=f.halfCheckedKeys,g=void 0===v?[]:v;if(!t.checkStrictly){var m=(0,Yd.S)(h,!0,c);h=m.checkedKeys,g=m.halfCheckedKeys}o.checkedKeys=h,o.halfCheckedKeys=g}return i("loadedKeys")&&(o.loadedKeys=t.loadedKeys),o}}]),n}(a.Component);Hd.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:o.top=0,o.left=-n*r;break;case 1:o.bottom=0,o.left=-n*r;break;case 0:o.bottom=0,o.left=r}return a.createElement("div",{style:o})},allowDrop:function(){return!0},expandAction:!1},Hd.TreeNode=Od.Z;const Xd=Hd;var qd=n(65737),Vd=n(8006);function Ud(t,e,n){let r=[];if(t)for(let o=t.elements.length;o--;o>=0){const i=t.elements[o],a={key:i.UID,title:i.getName(),selectable:!0,dataRef:i};i instanceof y&&(a.children=Ud(i,e,n)),r.push(a)}return r}var Zd=n(30418);const $d=t=>{let{settings:e,nodeData:n,setAllowSelection:r}=t;const o=n.dataRef,i=n.dataRef.getName(),a=(0,Nc.wW)(Jd),s=e.layer,l=t=>{const n=(()=>{if(null!=e&&e.layer)return e.layer.scene})();return Boolean(null==n?void 0:n.canRename(t))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Zd.X,{name:i,onChange:t=>((t,e)=>{t.onChange(Object.assign({},t.options,{name:e}))})(o,t),verifyLayerNameUniqueness:null!=l?l:void 0}),(0,h.jsxs)("div",{className:a.textWrapper,children:["  ",(t=>t.options.type)(o)]}),!n.children&&(0,h.jsxs)("div",{className:a.actionButtonsWrapper,children:[(0,h.jsx)(Bc.h,{name:"copy",title:"Duplicate",className:a.actionIcon,onClick:()=>(t=>{var e;(null!==(e=t.parent)&&void 0!==e?e:s).doAction(c.Duplicate,t),r(!1)})(o)}),(0,h.jsx)(Bc.h,{name:"trash-alt",title:"remove",className:a.actionIcon,onClick:()=>(t=>{var e;(null!==(e=t.parent)&&void 0!==e?e:s).doAction(c.Delete,t),r(!1)})(o)})]})]})},Jd=t=>({actionButtonsWrapper:w.css`
    display: flex;
    align-items: flex-end;
  `,actionIcon:w.css`
    color: ${t.colors.text.secondary};
    cursor: pointer;
    &:hover {
      color: ${t.colors.text.primary};
    }
  `,textWrapper:w.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing(1)};
  `,layerName:w.css`
    font-weight: ${t.typography.fontWeightMedium};
    color: ${t.colors.primary.text};
    cursor: pointer;
    overflow: hidden;
    margin-left: ${t.spacing(.5)};
  `});var Qd,tf;let ef=!0;const nf=t=>{var e,n;let{item:r}=t;const[o,i]=(0,a.useState)(Ud(null==r||null===(e=r.settings)||void 0===e?void 0:e.scene.root)),[s,l]=(0,a.useState)(!0),[c,u]=(0,a.useState)([]),[d,f]=(0,a.useState)([]),p=(0,Nc.l4)(),v=function(t){return gu.css`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.borderRadius(1)};
          background: ${t.colors.background.secondary};
          min-height: ${4*t.spacing.gridSize}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}(p),g=(0,Nc.wW)(rf),m=p.colors.primary.border,{settings:b}=r,x=(0,a.useMemo)((()=>null!=b&&b.selected?b.selected.map((t=>null==t?void 0:t.getName())):[]),[null==b?void 0:b.selected]),E=(0,a.useMemo)((()=>null!=b&&b.selected?b.selected.map((t=>null==t?void 0:t.UID)):[]),[null==b?void 0:b.selected]);if((0,a.useEffect)((()=>{var t;i(Ud(null==r||null===(t=r.settings)||void 0===t?void 0:t.scene.root,x,m)),f(E),C()}),[null==r||null===(n=r.settings)||void 0===n?void 0:n.scene.root,m,x,E]),!b)return Qd||(Qd=(0,h.jsx)("div",{children:"No settings"}));const S=b.layer;if(!S)return tf||(tf=(0,h.jsx)("div",{children:"Missing layer?"}));const C=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ef=t},w=mc(b.scene.shouldShowAdvancedTypes).options;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(gu.Global,{styles:v}),(0,h.jsx)(Xd,{selectable:!0,onSelect:(t,e)=>{var n;ef&&null!==(n=r.settings)&&void 0!==n&&n.scene&&function(t,e){try{let n={targets:[]};if(e instanceof y){const r=[];r.push(null==e?void 0:e.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[null==e?void 0:e.div],t.select(n)}catch(t){gc.Z.emit(hc.SI.alertError,["Unable to select element, try selecting element in panel instead"])}}(r.settings.scene,e.node.dataRef)},draggable:!0,defaultExpandAll:!0,autoExpandParent:s,showIcon:!1,allowDrop:()=>!0,onDrop:t=>{var e;const n=t.node.pos.split("-"),r=t.dropPosition-Number(n[n.length-1]),a=t.dragNode.dataRef,s=t.node.dataRef,l=function(t,e){const n=t.node.key,r=t.dragNode.key,o=t.node.pos.split("-"),i=t.dropPosition-Number(o[o.length-1]),a=(t,e,n)=>{t.forEach(((t,r,o)=>{t.key!==e?t.children&&a(t.children,e,n):n(t,r,o)}))},s=[...e];let l;if(a(s,r,((t,e,n)=>{n.splice(e,1),l=t})),0===i)a(s,n,(t=>{t.children=t.children||[],t.children.unshift(l)}));else{let t=[],e=0;a(s,n,((n,r,o)=>{t=o,e=r})),-1===i?t.splice(e,0,l):t.splice(e+1,0,l)}return s}(t,o);i(l),null===(e=s.parent)||void 0===e||e.scene.reorderElements(a,s,t.dropToGap,r)},expandedKeys:c,onExpand:t=>{u(t),l(!1)},treeData:o,titleRender:t=>(0,h.jsx)($d,{nodeData:t,setAllowSelection:C,settings:b}),switcherIcon:t=>t.isLeaf?(0,h.jsx)(h.Fragment,{}):(0,h.jsx)(Uc.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${t.expanded?90:0}deg)`,fill:p.colors.text.primary}}),selectedKeys:d,multiple:!0}),(0,h.jsxs)(Vc.Lh,{justify:"space-between",children:[(0,h.jsx)("div",{className:g.addLayerButton,children:(0,h.jsx)(Ic.f,{onChange:t=>yc(t,S),options:w,label:"Add item"})}),x.length>0&&(0,h.jsx)(Vd.zx,{size:"sm",variant:"secondary",onClick:()=>{S.scene.clearCurrentSelection()},children:"Clear selection"}),x.length>1&&qd.v.featureToggles.canvasPanelNesting&&(0,h.jsx)(Vd.zx,{size:"sm",variant:"secondary",onClick:()=>{S.scene?S.scene.frameSelection():console.warn("no scene!")},children:"Frame selection"})]})]})},rf=t=>({addLayerButton:w.css`
    margin-left: 18px;
    min-width: 150px;
  `});function of(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const t of e){if(t instanceof y){n.currentLayer=t;break}if(t&&t.parent){n.currentLayer=t.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:t=>({getValue:t=>(0,i.get)(r,t),onChange:(t,e)=>{var o,i;if("type"===t&&e)return void console.warn("unable to change layer type");const a=(0,Lc.hs)(r,t,e);null===(o=n.currentLayer)||void 0===o||o.onChange(a),null===(i=n.currentLayer)||void 0===i||i.updateData(n.context)}}),build:(o,i)=>{const a=n.currentLayer;a&&a.isRoot(),o.addCustomEditor({id:"content",path:"root",name:"Elements",editor:nf,settings:{scene:n,layer:n.currentLayer,selected:e}});const s=Object.assign({},i,{options:r});hu.I.addBackground(o,s),hu.I.addBorder(o,s),a&&!a.isRoot()&&o.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:pu,settings:{scene:t.scene,element:a}})}}}function af(){var t;const e=(0,zc.Z)(Sf),n=null==e||null===(t=e.panel.context)||void 0===t?void 0:t.instanceState,r=(0,Nc.wW)(lf),[o,s]=(0,a.useState)(u.SelectedElement),l=(0,a.useMemo)((()=>{var t;const r=null==e?void 0:e.panel,a=n;if(!a||!r)return new Kc.j({id:"root",title:"root"});return function(t,e){var n;const r={data:null!==(n=t.data)&&void 0!==n?n:[],options:t.options},o=new Kc.j({id:"root",title:"root"}),a=t=>{if(null!=t&&t.length){const e=t[0];let n=o.categories.find((t=>t.props.id===e));return n||(n=new Kc.j({id:e,title:e}),o.categories.push(n)),n}return o},s={getValue:e=>(0,i.get)(t.options,e),onChange:(e,n)=>{t.onChange((0,Lc.hs)(t.options,e,n))}};return(0,Fc.HZ)(e,s,a,r),o}({options:r.props.options,onChange:r.props.onOptionsChange,data:null===(t=r.props.data)||void 0===t?void 0:t.series},((t,e)=>{o===u.ElementManagement&&t.addNestedOptions(of(n));const r=a.selected;if(1===(null==r?void 0:r.length)&&o===u.SelectedElement){const e=r[0];!e||e instanceof y||t.addNestedOptions(vu({category:[`Selected element (${e.options.name})`],element:e,scene:a.scene}))}wf(t)}))}),[n,e,o]),c={marginLeft:15,marginTop:10},d=mc(null==n?void 0:n.scene.shouldShowAdvancedTypes).options,f=null==n?void 0:n.layer,p=n&&o===u.SelectedElement&&0===n.selected.length;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:c,children:l.items.map((t=>t.render()))}),(0,h.jsx)("div",{style:c,children:(0,h.jsx)(Ic.f,{onChange:t=>yc(t,f),options:d,label:"Add item"})}),(0,h.jsxs)("div",{style:c,children:[(0,h.jsx)(Hc,{onTabChange:t=>{s(t)}}),l.categories.map((t=>sf(t))),p&&(0,h.jsx)("div",{className:r.selectElement,children:"Please select an element"})]})]})}function sf(t){return(0,a.createElement)(Gc.u,Object.assign({},t.props,{key:t.props.id}),(0,h.jsx)("div",{children:t.items.map((t=>t.render()))}),t.categories.map((t=>sf(t))))}const lf=t=>({selectElement:w.css`
    color: ${t.colors.text.secondary};
    padding: ${t.spacing(2)};
  `});var cf,uf;function df(t){var e,n,r,o;let{onClose:i,id:s,scene:l}=t;const c=null===(e=l.root.div)||void 0===e?void 0:e.getBoundingClientRect(),u=window.innerHeight,d=window.innerWidth,f=(0,a.useRef)(null),p=(0,Nc.wW)(ff),v="inlineEditPanel"+s.toString(),g=400,m=400,b=null!==(n=null==c?void 0:c.width)&&void 0!==n?n:g+20,y=null!==(r=null==c?void 0:c.x)&&void 0!==r?r:0+b-g-10,x=null!==(o=null==c?void 0:c.y)&&void 0!==o?o:32,E=jc.Z.getObject(v,{x:y,y:x,w:g,h:m}),[S,C]=(0,a.useState)({width:E.w,height:E.h}),[w,D]=(0,a.useState)({x:E.x,y:E.y});(0,a.useEffect)((()=>{const t=d-S.width-10,e=u-S.height-32;t<w.x&&t>0&&D(Object.assign({},w,{x:t})),e<w.y&&e>0&&D(Object.assign({},w,{y:e}))}),[u,d,w,S]);const M=(t,e,n,r)=>{jc.Z.setObject(v,{x:t,y:e,w:n,h:r})};return(0,h.jsx)(lc.h_,{children:(0,h.jsx)("div",{className:p.draggableWrapper,children:(0,h.jsx)(Tc(),{handle:"strong",onStop:(t,e)=>{let n=e.x<0?0:e.x,r=e.y<0?0:e.y;D({x:n,y:r}),M(n,r,S.width,S.height)},position:{x:w.x,y:w.y},children:(0,h.jsx)(Ac.Resizable,{height:S.height,width:S.width,onResize:(t,e)=>{const{size:n}=e;C({width:n.width,height:n.height}),M(w.x,w.y,n.width,n.height)},children:(0,h.jsxs)("div",{className:p.inlineEditorContainer,style:{height:`${S.height}px`,width:`${S.width}px`},ref:f,children:[(0,h.jsxs)("strong",{className:p.inlineEditorHeader,children:[(0,h.jsx)("div",{className:p.placeholder}),cf||(cf=(0,h.jsx)("div",{children:"Canvas Inline Editor"})),(0,h.jsx)(Bc.h,{name:"times",size:"xl",className:p.inlineEditorClose,onClick:i})]}),(0,h.jsx)("div",{className:p.inlineEditorContentWrapper,children:(0,h.jsx)("div",{className:p.inlineEditorContent,children:uf||(uf=(0,h.jsx)(af,{}))})})]})})})})})}const ff=t=>({inlineEditorContainer:w.css`
    display: flex;
    flex-direction: column;
    background: ${t.components.panel.background};
    border: 1px solid ${t.colors.border.strong};
    box-shadow: 5px 5px 20px -5px #000000;
    z-index: 1000;
    opacity: 1;
  `,draggableWrapper:w.css`
    width: 0;
    height: 0;
  `,inlineEditorHeader:w.css`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:w.css`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:w.css`
    margin-left: auto;
  `,placeholder:w.css`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:w.css`
    overflow: scroll;
  `});var pf=n(20223),hf=n(14351);function vf(t){var e,n,r;let{onClose:o,scene:i,anchorPoint:s}=t;const l=null!==(e=null===(n=i.root.options.background)||void 0===n||null===(r=n.image)||void 0===r?void 0:r.fixed)&&void 0!==e?e:"",[c,u]=(0,a.useState)(l),d=(0,Nc.l4)(),f=gf(d,s);return(0,h.jsx)(lc.h_,{className:f.portalWrapper,children:(0,h.jsx)(hf.Y,{onChange:t=>{t&&(u(t),i.root&&(i.root.options.background=Object.assign({},i.root.options.background,{image:{mode:pf.Q8.Fixed,fixed:t}}),i.revId++,i.save(),i.root.reinitializeMoveable()),i&&i.updateData(i.data)),o()},value:c,mediaType:pf.DD.Image,folderName:pf.QS.IOT})})}const gf=(t,e)=>({portalWrapper:w.css`
    width: 315px;
    height: 445px;
    transform: translate(${e.x}px, ${e.y-200}px);
  `});function mf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let bf,yf=[],xf=!1,Ef=!1;const Sf=new x.t(1);class Cf extends a.Component{constructor(t){super(t),mf(this,"panelContext",{}),mf(this,"scene",void 0),mf(this,"subs",new E.w0),mf(this,"needsReload",!1),mf(this,"isEditing",void 0!==S.E1.getSearchObject().editPanel),mf(this,"onUpdateScene",(t=>{const{onOptionsChange:e,options:n}=this.props;e(Object.assign({},n,{root:t})),this.setState({refresh:this.state.refresh+1}),Sf.next({panel:this})})),mf(this,"openInlineEdit",(()=>{if(xf)return this.forceUpdate(),void this.setActivePanel();this.setActivePanel(),this.setState({openInlineEdit:!0}),xf=!0})),mf(this,"openSetBackground",(t=>{if(Ef)return this.forceUpdate(),void this.setActivePanel();this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:t}),Ef=!0})),mf(this,"closeInlineEdit",(()=>{this.setState({openInlineEdit:!1}),xf=!1})),mf(this,"closeSetBackground",(()=>{this.setState({openSetBackground:!1}),Ef=!1})),mf(this,"setActivePanel",(()=>{bf=this,Sf.next({panel:this})})),mf(this,"renderInlineEdit",(()=>(0,h.jsx)(df,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}))),mf(this,"renderSetBackground",(()=>(0,h.jsx)(vf,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}))),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0}},this.scene=new Oc(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(t.width,t.height),this.scene.updateData(t.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.subs.add(this.props.eventBus.subscribe(_c.xF,(t=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()}))),this.subs.add(this.props.eventBus.subscribe(_c.Yr,(t=>{this.props.id===t.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection(),this.scene.load(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes))})))}componentDidMount(){bf=this,Sf.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:t=>{this.panelContext.onInstanceStateChange({scene:this.scene,selected:t,layer:this.scene.root}),bf=this,Sf.next({panel:this}),yf.forEach((t=>{t!==bf&&t.scene.clearCurrentSelection(!0)}))}}))),yf.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),xf=!1,Ef=!1,yf=yf.filter((t=>{var e;return t.props.id!==(null===(e=bf)||void 0===e?void 0:e.props.id)}))}shouldComponentUpdate(t,e){const{width:n,height:r,data:o,options:i}=this.props;let a=!1;n===t.width&&r===t.height||(this.scene.updateSize(t.width,t.height),a=!0),o===t.data||this.scene.ignoreDataUpdate||(this.scene.updateData(t.data),a=!0),i===t.options||this.scene.ignoreDataUpdate||(this.scene.updateData(t.data),a=!0),this.state.refresh!==e.refresh&&(a=!0),this.state.openInlineEdit!==e.openInlineEdit&&(a=!0),this.state.openSetBackground!==e.openSetBackground&&(a=!0);const s=this.needsReload&&this.props.options!==t.options,l=this.props.options.inlineEditing!==t.options.inlineEditing,c=this.props.options.showAdvancedTypes!==t.options.showAdvancedTypes;return(s||l||c)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(t.options.root,t.options.inlineEditing,t.options.showAdvancedTypes),this.scene.updateSize(t.width,t.height),this.scene.updateData(t.data),a=!0),a}render(){return(0,h.jsxs)(h.Fragment,{children:[this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground()]})}}mf(Cf,"contextType",C.bb);const wf=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Show advanced element types",description:"",defaultValue:!1})},Df=new r.c(Cf).setNoPadding().useFieldConfig({standardOptions:{[o.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler((t=>{var e;if(""===(null!==(e=null==t?void 0:t.pluginVersion)&&void 0!==e?e:"")){var n;const e=null===(n=t.options)||void 0===n?void 0:n.root;if(null!=e&&e.elements)for(const t of e.elements)"text-box"===t.type&&(t.type="rectangle")}return t.options})).setPanelOptions(((t,e)=>{const n=e.instanceState;if(wf(t),n){t.addNestedOptions(of(n));const e=n.selected;if(1===(null==e?void 0:e.length)){const r=e[0];r instanceof y||t.addNestedOptions(vu({category:[`Selected element (${r.options.name})`],element:r,scene:n.scene}))}}}))}}]);
//# sourceMappingURL=canvasPanel.19538625f1fcedbe94f6.js.map