"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4253],{14514:(e,a,t)=>{t.d(a,{x:()=>A});t(68404);var r,n=t(39106),s=t(8006),i=t(71031),o=t(52423),c=t(15546),l=t(25004),d=t(16755),u=t(89902),g=t(89645),p=t(54761),h=t(38437),m=t(69104),f=t(45916);function x(){const e=(0,m.UQ)(),{isLoading:a}=(0,m.ZV)(),t=(0,d.wW)(y);return a||0===e.length?null:(0,f.jsx)(u.v,{"aria-label":l.wl.pages.PluginsList.signatureErrorNotice,severity:"warning",urlTitle:"Read more about plugin signing",url:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",children:(0,f.jsxs)("div",{children:[r||(r=(0,f.jsx)("p",{children:"Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins."})),"The following plugins are disabled and not shown in the list below:",(0,f.jsx)(g.a,{items:e,className:t.list,renderItem:e=>(0,f.jsx)("div",{className:t.wrapper,children:(0,f.jsxs)(p.Lh,{spacing:"sm",justify:"flex-start",align:"center",children:[(0,f.jsx)("strong",{children:e.pluginId}),(0,f.jsx)(h.o,{status:v(e.errorCode),className:t.badge})]})})})]})})}function v(e){switch(e){case c.w2.invalidSignature:return c.Xy.invalid;case c.w2.missingSignature:return c.Xy.missing;case c.w2.modifiedSignature:return c.Xy.modified;default:return c.Xy.missing}}function y(e){return{list:(0,o.css)({listStyleType:"circle"}),wrapper:(0,o.css)({marginTop:e.spacing(1)}),badge:(0,o.css)({marginTop:0})}}var S,j=t(64850),w=t(1129);function I(e){var a,t;let{onClick:r,dataSourcePlugin:n}=e;const i="phantom"===n.module,c=!i&&!n.unlicensed,u=(null===(a=n.info)||void 0===a||null===(t=a.links)||void 0===t?void 0:t.length)>0?n.info.links[0]:null,g=(0,d.wW)(P);return(0,f.jsxs)(w.Z,{className:(0,o.cx)(g.card,"card-parent"),onClick:c?r:()=>{},children:[(0,f.jsx)(w.Z.Heading,{className:g.heading,"aria-label":l.wl.pages.AddDataSource.dataSourcePluginsV2(n.name),children:n.name}),(0,f.jsx)(w.Z.Figure,{align:"center",className:g.figure,children:(0,f.jsx)("img",{className:g.logo,src:n.info.logos.small,alt:""})}),(0,f.jsx)(w.Z.Description,{className:g.description,children:n.info.description}),!i&&(0,f.jsx)(w.Z.Meta,{className:g.meta,children:(0,f.jsx)(h.o,{status:n.signature})}),(0,f.jsx)(w.Z.Actions,{className:g.actions,children:u&&(0,f.jsx)(s.Qj,{"aria-label":`${n.name}, learn more.`,href:`${u.url}?utm_source=grafana_add_ds`,icon:"external-link-alt",onClick:e=>e.stopPropagation(),rel:"noopener",target:"_blank",variant:"secondary",children:u.name})})]})}function P(e){return{heading:(0,o.css)({fontSize:e.v1.typography.heading.h5,fontWeight:"inherit"}),figure:(0,o.css)({width:"inherit",marginRight:"0px","> img":{width:e.spacing(7)}}),meta:(0,o.css)({marginTop:"6px",position:"relative"}),description:(0,o.css)({margin:"0px",fontSize:e.typography.size.sm}),actions:(0,o.css)({position:"relative",alignSelf:"center",marginTop:"0px",opacity:0,".card-parent:hover &, .card-parent:focus-within &":{opacity:1}}),card:(0,o.css)({gridTemplateAreas:'\n        "Figure   Heading   Actions"\n        "Figure Description Actions"\n        "Figure    Meta     Actions"\n        "Figure     -       Actions"'}),logo:(0,o.css)({marginRight:e.v1.spacing.lg,marginLeft:e.v1.spacing.sm,width:e.spacing(7),maxHeight:e.spacing(7)})}}function C(e){let{dataSourcePlugins:a,onClickDataSourceType:t}=e;return a&&a.length?(0,f.jsx)(g.a,{items:a,getItemKey:e=>e.id.toString(),renderItem:e=>(0,f.jsx)(I,{dataSourcePlugin:e,onClick:()=>t(e)}),className:o.css`
        > li {
          margin-bottom: 2px;
        }
      `}):null}function D(e){let{categories:a,onClickDataSourceType:t}=e;return(0,f.jsxs)(f.Fragment,{children:[a.map((e=>{let{id:a,title:r,plugins:n}=e;return(0,f.jsxs)("div",{className:"add-data-source-category",children:[(0,f.jsx)("div",{className:"add-data-source-category__header",id:a,children:r}),(0,f.jsx)(C,{dataSourcePlugins:n,onClickDataSourceType:t})]},a)})),S||(S=(0,f.jsx)("div",{className:"add-data-source-more",children:(0,f.jsx)(s.Qj,{variant:"secondary",href:"https://grafana.com/plugins?type=datasource&utm_source=grafana_add_ds",target:"_blank",rel:"noopener",children:"Find more data source plugins on grafana.com"})}))]})}var N,b,T,k=t(79195);function A(){(0,k.OU)();const e=(0,j.I0)(),a=(0,j.v9)((e=>(0,k.I5)(e.dataSources))),t=(0,j.v9)((e=>e.dataSources.dataSourceTypeSearchQuery)),r=(0,j.v9)((e=>e.dataSources.isLoadingDataSources)),n=(0,j.v9)((e=>e.dataSources.categories)),s=(0,k.nH)();return(0,f.jsx)(Q,{dataSources:a,dataSourceCategories:n,searchQuery:t,isLoading:r,onAddDataSource:s,onSetSearchQuery:a=>e((0,k.Ht)(a))})}function Q(e){let{dataSources:a,dataSourceCategories:t,searchQuery:r,isLoading:o,onAddDataSource:c,onSetSearchQuery:l}=e;const d=(0,k.d7)();return o?N||(N=(0,f.jsx)(i.Z,{})):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"page-action-bar",children:[(0,f.jsx)(n.H,{value:r,onChange:l,placeholder:"Filter by name or type"}),b||(b=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),(0,f.jsx)(s.Qj,{href:d.List,fill:"outline",variant:"secondary",icon:"arrow-left",children:"Cancel"})]}),!r&&(T||(T=(0,f.jsx)(x,{}))),(0,f.jsxs)("div",{children:[r&&(0,f.jsx)(C,{dataSourcePlugins:a,onClickDataSourceType:c}),!r&&(0,f.jsx)(D,{categories:t,onClickDataSourceType:c})]})]})}},28865:(e,a,t)=>{t.r(a),t.d(a,{NewDataSourcePage:()=>c,default:()=>l});t(68404);var r,n=t(37417),s=t(14514),i=t(65022),o=t(45916);function c(){const e={icon:"database",id:"datasource-new",text:"Add data source",url:i.n.New,subTitle:"Choose a data source type"};return(0,o.jsx)(n.T,{navId:"datasources",pageNav:e,children:r||(r=(0,o.jsx)(n.T.Contents,{children:(0,o.jsx)(s.x,{})}))})}const l=c},46732:(e,a,t)=>{t.d(a,{V:()=>s});var r=t(68404),n=t(65022);const s=(0,r.createContext)(n.n)},46216:(e,a,t)=>{t.d(a,{E:()=>f,IA:()=>C,MF:()=>b,OU:()=>S,Qs:()=>D,YY:()=>T,_l:()=>N,d7:()=>k,hw:()=>x,nH:()=>j,q6:()=>I,qj:()=>w,wi:()=>y,wl:()=>P,zJ:()=>v});var r=t(68404),n=t(274),s=t(40264),i=t(2247),o=t(68374),c=t(85829),l=t(64850),d=t(8105),u=t(5316),g=t(46732),p=t(93220),h=t(46525),m=t(23940);const f=e=>{const a=(0,l.I0)();(0,r.useEffect)((()=>(a((0,u.M9)(e)),function(){a((0,s.e)({cleanupAction:e=>e.dataSourceSettings=h.fk}))})),[e,a])},x=e=>{const a=(0,l.I0)();return()=>a((0,u.kY)(e))},v=()=>{const e=(0,l.I0)();(0,r.useEffect)((()=>{e((0,u.bZ)())}),[e])},y=e=>{const a=(0,l.I0)();(0,r.useEffect)((()=>{a((0,u.gv)(e))}),[a,e])},S=()=>{const e=(0,l.I0)();(0,r.useEffect)((()=>{e((0,u.Kj)())}),[e])},j=()=>{const e=(0,l.I0)(),a=k();return t=>{e((0,u.J_)(t,a.Edit))}},w=()=>{const e=(0,l.I0)();return async a=>e((0,u.oe)(a))},I=()=>{const e=(0,l.I0)(),{name:a}=(0,l.v9)((e=>e.dataSources.dataSource));return()=>{i.Z.publish(new d.VJ({title:"Delete",text:`Are you sure you want to delete the "${a}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,u.F5)())}))}},P=e=>(0,l.v9)((a=>(0,m.f6)(a.dataSources,e))),C=e=>{const a=P(e),t=JSON.stringify({datasource:a.name,context:"explore"});return n.Cj.renderUrl("/explore",{left:t})},D=e=>(0,l.v9)((a=>(0,m.G4)(a.dataSources,e))),N=()=>(0,l.v9)((e=>e.dataSourceSettings)),b=(e,a)=>{const t=P(e),{plugin:r,loadError:n,loading:s}=N(),i=(0,l.v9)((e=>e.navIndex)),o=a?`datasource-${a}-${e}`:`datasource-settings-${e}`;if(n){const e={text:n,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return s||!r?(0,c.ht)(i,o,(0,p.xG)("settings")):(0,c.ht)(i,o,(0,p.nI)((0,p.B1)(t,r),a||"settings"))},T=e=>{const a=P(e);return{readOnly:!0===a.readOnly,hasWriteRights:o.Vt.hasPermissionInMetadata(l.bW.DataSourcesWrite,a),hasDeleteRights:o.Vt.hasPermissionInMetadata(l.bW.DataSourcesDelete,a)}},k=()=>(0,r.useContext)(g.V)},79195:(e,a,t)=>{t.d(a,{BX:()=>s.BX,E:()=>n.E,Ht:()=>s.Ht,I5:()=>i.I5,IA:()=>n.IA,IO:()=>i.IO,MF:()=>n.MF,OU:()=>n.OU,Qs:()=>n.Qs,Vj:()=>r.V,YY:()=>n.YY,_l:()=>n._l,d7:()=>n.d7,hw:()=>n.hw,mt:()=>i.mt,nH:()=>n.nH,q6:()=>n.q6,qj:()=>n.qj,r7:()=>i.r7,rl:()=>s.rl,wi:()=>n.wi,wl:()=>n.wl,yr:()=>s.yr,zJ:()=>n.zJ,zT:()=>s.zT});t(5316);var r=t(46732),n=t(46216),s=(t(93220),t(46525)),i=t(23940)},69104:(e,a,t)=>{t.d(a,{iY:()=>L,bt:()=>T,ZV:()=>b,GE:()=>w,UQ:()=>P,bJ:()=>I,x3:()=>C,IS:()=>k,y9:()=>N,S1:()=>D,wq:()=>A});var r=t(68404),n=t(64850),s=t(13467),i=t(71482),o=t(45919),c=t(4387),l=t(56949),d=t(95796);const u=e=>e.plugins,g=(0,c.P1)(u,(e=>{let{items:a}=e;return a})),p=(0,c.P1)(u,(e=>{let{settings:a}=e;return a.displayMode})),{selectAll:h,selectById:m}=o.CD.getSelectors(g),f=(e,a)=>(0,c.P1)((e=>(0,c.P1)(h,(a=>a.filter((a=>"installed"===e?a.isInstalled:!a.isCore)))))(e),(e=>e.filter((e=>"all"===a||e.type===a)))),x=(e,a,t)=>(0,c.P1)(f(a,t),(e=>(0,c.P1)(h,(a=>""===e?[]:a.filter((a=>{const t=[];return a.name&&t.push(a.name.toLowerCase()),a.orgName&&t.push(a.orgName.toLowerCase()),t.some((a=>a.includes((0,l.x6)(e).toLowerCase())))})))))(e),((a,t)=>""===e?a:t)),v=(0,c.P1)(h,(e=>e?e.filter((e=>Boolean(e.error))).map((e=>({pluginId:e.id,errorCode:e.error}))):[])),y=e=>(0,c.P1)(u,(a=>{let{requests:t={}}=a;return t[e]})),S=e=>(0,c.P1)(y(e),(e=>(null==e?void 0:e.status)===d.eE.Pending)),j=e=>(0,c.P1)(y(e),(e=>(null==e?void 0:e.status)===d.eE.Rejected?null==e?void 0:e.error:null)),w=e=>{let{query:a="",filterBy:t="installed",filterByType:r="all",sortBy:i=s.Nh.nameAsc}=e;Q();const o=(0,n.v9)(x(a,t,r)),{isLoading:c,error:l}=b();return{isLoading:c,error:l,plugins:(0,s.AA)(o,i)}},I=e=>(Q(),E(e),(0,n.v9)((a=>m(a,e)))),P=()=>(Q(),(0,n.v9)(v)),C=()=>{const e=(0,n.I0)();return(a,t,r)=>e((0,i.N9)({id:a,version:t,isUpdating:r}))},D=()=>{const e=(0,n.I0)();return a=>e((0,i.Tz)(a))},N=()=>null===(0,n.v9)(j(i.tQ.typePrefix)),b=()=>({isLoading:(0,n.v9)(S(i.Qd.typePrefix)),error:(0,n.v9)(j(i.Qd.typePrefix))}),T=()=>({isLoading:(0,n.v9)(S(i.DD.typePrefix)),error:(0,n.v9)(j(i.DD.typePrefix))}),k=()=>({isInstalling:(0,n.v9)(S(i.N9.typePrefix)),error:(0,n.v9)(j(i.N9.typePrefix))}),A=()=>({isUninstalling:(0,n.v9)(S(i.Tz.typePrefix)),error:(0,n.v9)(j(i.Tz.typePrefix))}),Q=()=>{const e=(0,n.I0)(),a=(0,n.v9)((t=i.Qd.typePrefix,(0,c.P1)(y(t),(e=>void 0===e))));var t;(0,r.useEffect)((()=>{a&&e((0,i.Qd)())}),[])},E=e=>{const a=(0,n.I0)(),t=(0,n.v9)((a=>m(a,e))),s=!(0,n.v9)(S(i.DD.typePrefix))&&t&&!t.details;(0,r.useEffect)((()=>{s&&a((0,i.DD)(e))}),[t])},L=()=>{const e=(0,n.I0)();return{displayMode:(0,n.v9)(p),setDisplayMode:a=>e((0,o.UC)(a))}}}}]);
//# sourceMappingURL=NewDataSourcePage.c7a5c0d8397c61fca800.js.map