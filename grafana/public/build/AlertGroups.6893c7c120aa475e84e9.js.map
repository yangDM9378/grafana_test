{"version":3,"file":"AlertGroups.6893c7c120aa475e84e9.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/AlertDetails.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/AlertGroupAlertsTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/AlertGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/AlertStateFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/GroupBy.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/AlertGroupFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/AlertGroups.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useGroupedAlerts.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useFilteredAmGroups.ts","webpack://grafana/./public/app/features/alerting/unified/api/alertmanagerApi.ts","webpack://grafana/./public/app/features/alerting/unified/components/AlertingPageWrapper.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Authorize.tsx","webpack://grafana/./public/app/features/alerting/unified/components/DynamicTableWithGuidelines.tsx","webpack://grafana/./public/app/features/alerting/unified/components/NoAlertManagerWarning.tsx","webpack://grafana/./public/app/features/alerting/unified/components/alert-groups/MatcherFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/AmAlertStateTag.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertManagerSourceName.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertManagerSources.ts"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { LinkButton, useStyles2 } from '@grafana/ui';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { AlertmanagerAlert, AlertState } from 'app/plugins/datasource/alertmanager/types';\nimport { AccessControlAction } from 'app/types';\n\nimport { getInstancesPermissions } from '../../utils/access-control';\nimport { isGrafanaRulesSource } from '../../utils/datasource';\nimport { makeAMLink, makeLabelBasedSilenceLink } from '../../utils/misc';\nimport { AnnotationDetailsField } from '../AnnotationDetailsField';\nimport { Authorize } from '../Authorize';\n\ninterface AmNotificationsAlertDetailsProps {\n  alertManagerSourceName: string;\n  alert: AlertmanagerAlert;\n}\n\nexport const AlertDetails: FC<AmNotificationsAlertDetailsProps> = ({ alert, alertManagerSourceName }) => {\n  const styles = useStyles2(getStyles);\n  const instancePermissions = getInstancesPermissions(alertManagerSourceName);\n\n  // For Grafana Managed alerts the Generator URL redirects to the alert rule edit page, so update permission is required\n  // For external alert manager the Generator URL redirects to an external service which we don't control\n  const isGrafanaSource = isGrafanaRulesSource(alertManagerSourceName);\n  const isSeeSourceButtonEnabled = isGrafanaSource\n    ? contextSrv.hasPermission(AccessControlAction.AlertingRuleRead)\n    : true;\n\n  return (\n    <>\n      <div className={styles.actionsRow}>\n        <Authorize actions={[instancePermissions.update, instancePermissions.create]} fallback={contextSrv.isEditor}>\n          {alert.status.state === AlertState.Suppressed && (\n            <LinkButton\n              href={`${makeAMLink(\n                '/alerting/silences',\n                alertManagerSourceName\n              )}&silenceIds=${alert.status.silencedBy.join(',')}`}\n              className={styles.button}\n              icon={'bell'}\n              size={'sm'}\n            >\n              Manage silences\n            </LinkButton>\n          )}\n          {alert.status.state === AlertState.Active && (\n            <LinkButton\n              href={makeLabelBasedSilenceLink(alertManagerSourceName, alert.labels)}\n              className={styles.button}\n              icon={'bell-slash'}\n              size={'sm'}\n            >\n              Silence\n            </LinkButton>\n          )}\n        </Authorize>\n        {isSeeSourceButtonEnabled && alert.generatorURL && (\n          <LinkButton className={styles.button} href={alert.generatorURL} icon={'chart-line'} size={'sm'}>\n            See source\n          </LinkButton>\n        )}\n      </div>\n      {Object.entries(alert.annotations).map(([annotationKey, annotationValue]) => (\n        <AnnotationDetailsField key={annotationKey} annotationKey={annotationKey} value={annotationValue} />\n      ))}\n      <div className={styles.receivers}>\n        Receivers:{' '}\n        {alert.receivers\n          .map(({ name }) => name)\n          .filter((name) => !!name)\n          .join(', ')}\n      </div>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  button: css`\n    & + & {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n  actionsRow: css`\n    padding: ${theme.spacing(2, 0)} !important;\n    border-bottom: 1px solid ${theme.colors.border.medium};\n  `,\n  receivers: css`\n    padding: ${theme.spacing(1, 0)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\n\nimport { GrafanaTheme2, intervalToAbbreviatedDurationString } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { AlertmanagerAlert } from 'app/plugins/datasource/alertmanager/types';\n\nimport { AlertLabels } from '../AlertLabels';\nimport { DynamicTableColumnProps, DynamicTableItemProps } from '../DynamicTable';\nimport { DynamicTableWithGuidelines } from '../DynamicTableWithGuidelines';\nimport { AmAlertStateTag } from '../silences/AmAlertStateTag';\n\nimport { AlertDetails } from './AlertDetails';\n\ninterface Props {\n  alerts: AlertmanagerAlert[];\n  alertManagerSourceName: string;\n}\n\ntype AlertGroupAlertsTableColumnProps = DynamicTableColumnProps<AlertmanagerAlert>;\ntype AlertGroupAlertsTableItemProps = DynamicTableItemProps<AlertmanagerAlert>;\n\nexport const AlertGroupAlertsTable = ({ alerts, alertManagerSourceName }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const columns = useMemo(\n    (): AlertGroupAlertsTableColumnProps[] => [\n      {\n        id: 'state',\n        label: 'State',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: alert }) => (\n          <>\n            <AmAlertStateTag state={alert.status.state} />\n            <span className={styles.duration}>\n              for{' '}\n              {intervalToAbbreviatedDurationString({\n                start: new Date(alert.startsAt),\n                end: new Date(alert.endsAt),\n              })}\n            </span>\n          </>\n        ),\n        size: '220px',\n      },\n      {\n        id: 'labels',\n        label: 'Labels',\n        // eslint-disable-next-line react/display-name\n        renderCell: ({ data: { labels } }) => <AlertLabels className={styles.labels} labels={labels} />,\n        size: 1,\n      },\n    ],\n    [styles]\n  );\n\n  const items = useMemo(\n    (): AlertGroupAlertsTableItemProps[] =>\n      alerts.map((alert) => ({\n        id: alert.fingerprint,\n        data: alert,\n      })),\n    [alerts]\n  );\n\n  return (\n    <div className={styles.tableWrapper} data-testid=\"alert-group-table\">\n      <DynamicTableWithGuidelines\n        cols={columns}\n        items={items}\n        isExpandable={true}\n        renderExpandedContent={({ data: alert }) => (\n          <AlertDetails alert={alert} alertManagerSourceName={alertManagerSourceName} />\n        )}\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tableWrapper: css`\n    margin-top: ${theme.spacing(3)};\n    ${theme.breakpoints.up('md')} {\n      margin-left: ${theme.spacing(4.5)};\n    }\n  `,\n  duration: css`\n    margin-left: ${theme.spacing(1)};\n    font-size: ${theme.typography.bodySmall.fontSize};\n  `,\n  labels: css`\n    padding-bottom: 0;\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { AlertmanagerGroup, AlertState } from 'app/plugins/datasource/alertmanager/types';\n\nimport { AlertLabels } from '../AlertLabels';\nimport { CollapseToggle } from '../CollapseToggle';\n\nimport { AlertGroupAlertsTable } from './AlertGroupAlertsTable';\nimport { AlertGroupHeader } from './AlertGroupHeader';\n\ninterface Props {\n  group: AlertmanagerGroup;\n  alertManagerSourceName: string;\n}\n\nexport const AlertGroup = ({ alertManagerSourceName, group }: Props) => {\n  const [isCollapsed, setIsCollapsed] = useState<boolean>(true);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.header}>\n        <div className={styles.group} data-testid=\"alert-group\">\n          <CollapseToggle\n            size=\"sm\"\n            isCollapsed={isCollapsed}\n            onToggle={() => setIsCollapsed(!isCollapsed)}\n            data-testid=\"alert-group-collapse-toggle\"\n          />\n          {Object.keys(group.labels).length ? (\n            <AlertLabels className={styles.headerLabels} labels={group.labels} />\n          ) : (\n            <span>No grouping</span>\n          )}\n        </div>\n        <AlertGroupHeader group={group} />\n      </div>\n      {!isCollapsed && <AlertGroupAlertsTable alertManagerSourceName={alertManagerSourceName} alerts={group.alerts} />}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css`\n    & + & {\n      margin-top: ${theme.spacing(2)};\n    }\n  `,\n  headerLabels: css`\n    padding-bottom: 0 !important;\n    margin-bottom: -${theme.spacing(0.5)};\n  `,\n  header: css`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: space-between;\n    padding: ${theme.spacing(1, 1, 1, 0)};\n    background-color: ${theme.colors.background.secondary};\n    width: 100%;\n  `,\n  group: css`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  `,\n  summary: css``,\n  spanElement: css`\n    margin-left: ${theme.spacing(0.5)};\n  `,\n  [AlertState.Active]: css`\n    color: ${theme.colors.error.main};\n  `,\n  [AlertState.Suppressed]: css`\n    color: ${theme.colors.primary.main};\n  `,\n  [AlertState.Unprocessed]: css`\n    color: ${theme.colors.secondary.main};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { RadioButtonGroup, Label, useStyles2 } from '@grafana/ui';\nimport { AlertState } from 'app/plugins/datasource/alertmanager/types';\n\ninterface Props {\n  stateFilter?: AlertState;\n  onStateFilterChange: (value: AlertState) => void;\n}\n\nexport const AlertStateFilter = ({ onStateFilterChange, stateFilter }: Props) => {\n  const styles = useStyles2(getStyles);\n  const alertStateOptions: SelectableValue[] = Object.entries(AlertState)\n    .sort(([labelA], [labelB]) => (labelA < labelB ? -1 : 1))\n    .map(([label, state]) => ({\n      label,\n      value: state,\n    }));\n\n  return (\n    <div className={styles.wrapper}>\n      <Label>State</Label>\n      <RadioButtonGroup options={alertStateOptions} value={stateFilter} onChange={onStateFilterChange} />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n});\n","import { uniq } from 'lodash';\nimport React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Icon, Label, MultiSelect } from '@grafana/ui';\nimport { AlertmanagerGroup } from 'app/plugins/datasource/alertmanager/types';\n\ninterface Props {\n  className?: string;\n  groups: AlertmanagerGroup[];\n  groupBy: string[];\n  onGroupingChange: (keys: string[]) => void;\n}\n\nexport const GroupBy = ({ className, groups, groupBy, onGroupingChange }: Props) => {\n  const labelKeyOptions = uniq(groups.flatMap((group) => group.alerts).flatMap(({ labels }) => Object.keys(labels)))\n    .filter((label) => !(label.startsWith('__') && label.endsWith('__'))) // Filter out private labels\n    .map<SelectableValue>((key) => ({\n      label: key,\n      value: key,\n    }));\n\n  return (\n    <div data-testid={'group-by-container'} className={className}>\n      <Label>Custom group by</Label>\n      <MultiSelect\n        aria-label={'group by label keys'}\n        value={groupBy}\n        placeholder=\"Group by\"\n        prefix={<Icon name={'tag-alt'} />}\n        onChange={(items) => {\n          onGroupingChange(items.map(({ value }) => value as string));\n        }}\n        options={labelKeyOptions}\n      />\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { AlertmanagerGroup, AlertState } from 'app/plugins/datasource/alertmanager/types';\n\nimport { useAlertManagerSourceName } from '../../hooks/useAlertManagerSourceName';\nimport { useAlertManagersByPermission } from '../../hooks/useAlertManagerSources';\nimport { getFiltersFromUrlParams } from '../../utils/misc';\nimport { AlertManagerPicker } from '../AlertManagerPicker';\n\nimport { AlertStateFilter } from './AlertStateFilter';\nimport { GroupBy } from './GroupBy';\nimport { MatcherFilter } from './MatcherFilter';\n\ninterface Props {\n  groups: AlertmanagerGroup[];\n}\n\nexport const AlertGroupFilter = ({ groups }: Props) => {\n  const [filterKey, setFilterKey] = useState<number>(Math.floor(Math.random() * 100));\n  const [queryParams, setQueryParams] = useQueryParams();\n  const { groupBy = [], queryString, alertState } = getFiltersFromUrlParams(queryParams);\n  const matcherFilterKey = `matcher-${filterKey}`;\n\n  const alertManagers = useAlertManagersByPermission('instance');\n  const [alertManagerSourceName, setAlertManagerSourceName] = useAlertManagerSourceName(alertManagers);\n  const styles = useStyles2(getStyles);\n\n  const clearFilters = () => {\n    setQueryParams({\n      groupBy: null,\n      queryString: null,\n      alertState: null,\n    });\n    setTimeout(() => setFilterKey(filterKey + 1), 100);\n  };\n\n  const showClearButton = !!(groupBy.length > 0 || queryString || alertState);\n\n  return (\n    <div className={styles.wrapper}>\n      <AlertManagerPicker\n        current={alertManagerSourceName}\n        onChange={setAlertManagerSourceName}\n        dataSources={alertManagers}\n      />\n      <div className={styles.filterSection}>\n        <MatcherFilter\n          className={styles.filterInput}\n          key={matcherFilterKey}\n          defaultQueryString={queryString}\n          onFilterChange={(value) => setQueryParams({ queryString: value ? value : null })}\n        />\n        <GroupBy\n          className={styles.filterInput}\n          groups={groups}\n          groupBy={groupBy}\n          onGroupingChange={(keys) => setQueryParams({ groupBy: keys.length ? keys.join(',') : null })}\n        />\n        <AlertStateFilter\n          stateFilter={alertState as AlertState}\n          onStateFilterChange={(value) => setQueryParams({ alertState: value ? value : null })}\n        />\n        {showClearButton && (\n          <Button className={styles.clearButton} variant={'secondary'} icon=\"times\" onClick={clearFilters}>\n            Clear filters\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css`\n    border-bottom: 1px solid ${theme.colors.border.medium};\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  filterSection: css`\n    display: flex;\n    flex-direction: row;\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  filterInput: css`\n    width: 340px;\n    & + & {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n  clearButton: css`\n    margin-left: ${theme.spacing(1)};\n    margin-top: 19px;\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, LoadingPlaceholder, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { useDispatch } from 'app/types';\n\nimport { AlertmanagerChoice } from '../../../plugins/datasource/alertmanager/types';\n\nimport { alertmanagerApi } from './api/alertmanagerApi';\nimport { AlertingPageWrapper } from './components/AlertingPageWrapper';\nimport { NoAlertManagerWarning } from './components/NoAlertManagerWarning';\nimport { AlertGroup } from './components/alert-groups/AlertGroup';\nimport { AlertGroupFilter } from './components/alert-groups/AlertGroupFilter';\nimport { useAlertManagerSourceName } from './hooks/useAlertManagerSourceName';\nimport { useAlertManagersByPermission } from './hooks/useAlertManagerSources';\nimport { useFilteredAmGroups } from './hooks/useFilteredAmGroups';\nimport { useGroupedAlerts } from './hooks/useGroupedAlerts';\nimport { useUnifiedAlertingSelector } from './hooks/useUnifiedAlertingSelector';\nimport { fetchAlertGroupsAction } from './state/actions';\nimport { NOTIFICATIONS_POLL_INTERVAL_MS } from './utils/constants';\nimport { GRAFANA_RULES_SOURCE_NAME } from './utils/datasource';\nimport { getFiltersFromUrlParams } from './utils/misc';\nimport { initialAsyncRequestState } from './utils/redux';\n\nconst AlertGroups = () => {\n  const { useGetAlertmanagerChoiceStatusQuery } = alertmanagerApi;\n\n  const alertManagers = useAlertManagersByPermission('instance');\n  const [alertManagerSourceName] = useAlertManagerSourceName(alertManagers);\n  const dispatch = useDispatch();\n  const [queryParams] = useQueryParams();\n  const { groupBy = [] } = getFiltersFromUrlParams(queryParams);\n  const styles = useStyles2(getStyles);\n\n  const { currentData: amConfigStatus } = useGetAlertmanagerChoiceStatusQuery();\n\n  const alertGroups = useUnifiedAlertingSelector((state) => state.amAlertGroups);\n  const {\n    loading,\n    error,\n    result: results = [],\n  } = alertGroups[alertManagerSourceName || ''] ?? initialAsyncRequestState;\n\n  const groupedAlerts = useGroupedAlerts(results, groupBy);\n  const filteredAlertGroups = useFilteredAmGroups(groupedAlerts);\n\n  const grafanaAmDeliveryDisabled =\n    alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME &&\n    amConfigStatus?.alertmanagersChoice === AlertmanagerChoice.External;\n\n  useEffect(() => {\n    function fetchNotifications() {\n      if (alertManagerSourceName) {\n        dispatch(fetchAlertGroupsAction(alertManagerSourceName));\n      }\n    }\n    fetchNotifications();\n    const interval = setInterval(fetchNotifications, NOTIFICATIONS_POLL_INTERVAL_MS);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [dispatch, alertManagerSourceName]);\n\n  if (!alertManagerSourceName) {\n    return (\n      <AlertingPageWrapper pageId=\"groups\">\n        <NoAlertManagerWarning availableAlertManagers={alertManagers} />\n      </AlertingPageWrapper>\n    );\n  }\n\n  return (\n    <AlertingPageWrapper pageId=\"groups\">\n      <AlertGroupFilter groups={results} />\n      {loading && <LoadingPlaceholder text=\"Loading notifications\" />}\n      {error && !loading && (\n        <Alert title={'Error loading notifications'} severity={'error'}>\n          {error.message || 'Unknown error'}\n        </Alert>\n      )}\n\n      {grafanaAmDeliveryDisabled && (\n        <Alert title=\"Grafana alerts are not delivered to Grafana Alertmanager\">\n          Grafana is configured to send alerts to external alertmanagers only. No alerts are expected to be available\n          here for the selected Alertmanager.\n        </Alert>\n      )}\n\n      {results &&\n        filteredAlertGroups.map((group, index) => {\n          return (\n            <React.Fragment key={`${JSON.stringify(group.labels)}-group-${index}`}>\n              {((index === 1 && Object.keys(filteredAlertGroups[0].labels).length === 0) ||\n                (index === 0 && Object.keys(group.labels).length > 0)) && (\n                <p className={styles.groupingBanner}>Grouped by: {Object.keys(group.labels).join(', ')}</p>\n              )}\n              <AlertGroup alertManagerSourceName={alertManagerSourceName || ''} group={group} />\n            </React.Fragment>\n          );\n        })}\n      {results && !filteredAlertGroups.length && <p>No results.</p>}\n    </AlertingPageWrapper>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  groupingBanner: css`\n    margin: ${theme.spacing(2, 0)};\n  `,\n});\n\nexport default AlertGroups;\n","import { uniqBy } from 'lodash';\nimport { useMemo } from 'react';\n\nimport { Labels } from '@grafana/data';\nimport { AlertmanagerGroup } from 'app/plugins/datasource/alertmanager/types';\n\nexport const useGroupedAlerts = (groups: AlertmanagerGroup[], groupBy: string[]): AlertmanagerGroup[] => {\n  return useMemo(() => {\n    if (groupBy.length === 0) {\n      const emptyGroupings = groups.filter((group) => Object.keys(group.labels).length === 0);\n      if (emptyGroupings.length > 1) {\n        // Merges multiple ungrouped grouping\n        return groups.reduce((combinedGroups, group) => {\n          if (Object.keys(group.labels).length === 0) {\n            const noGroupingGroup = combinedGroups.find(({ labels }) => Object.keys(labels));\n            if (!noGroupingGroup) {\n              combinedGroups.push({ alerts: group.alerts, labels: {}, receiver: { name: 'NONE' } });\n            } else {\n              noGroupingGroup.alerts = uniqBy([...noGroupingGroup.alerts, ...group.alerts], 'labels');\n            }\n          } else {\n            combinedGroups.push(group);\n          }\n          return combinedGroups;\n        }, [] as AlertmanagerGroup[]);\n      } else {\n        return groups;\n      }\n    }\n    const alerts = groups.flatMap(({ alerts }) => alerts);\n    return alerts.reduce((groupings, alert) => {\n      const alertContainsGroupings = groupBy.every((groupByLabel) => Object.keys(alert.labels).includes(groupByLabel));\n\n      if (alertContainsGroupings) {\n        const existingGrouping = groupings.find((group) => {\n          return groupBy.every((groupKey) => {\n            return group.labels[groupKey] === alert.labels[groupKey];\n          });\n        });\n        if (!existingGrouping) {\n          const labels = groupBy.reduce((acc, key) => {\n            acc = { ...acc, [key]: alert.labels[key] };\n            return acc;\n          }, {} as Labels);\n          groupings.push({\n            alerts: [alert],\n            labels,\n            receiver: {\n              name: 'NONE',\n            },\n          });\n        } else {\n          existingGrouping.alerts.push(alert);\n        }\n      } else {\n        const noGroupingGroup = groupings.find((group) => Object.keys(group.labels).length === 0);\n        if (!noGroupingGroup) {\n          groupings.push({ alerts: [alert], labels: {}, receiver: { name: 'NONE' } });\n        } else {\n          noGroupingGroup.alerts.push(alert);\n        }\n      }\n\n      return groupings;\n    }, [] as AlertmanagerGroup[]);\n  }, [groups, groupBy]);\n};\n","import { useMemo } from 'react';\n\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { AlertmanagerGroup } from 'app/plugins/datasource/alertmanager/types';\n\nimport { labelsMatchMatchers, parseMatchers } from '../utils/alertmanager';\nimport { getFiltersFromUrlParams } from '../utils/misc';\n\nexport const useFilteredAmGroups = (groups: AlertmanagerGroup[]) => {\n  const [queryParams] = useQueryParams();\n  const filters = getFiltersFromUrlParams(queryParams);\n  const matchers = parseMatchers(filters.queryString || '');\n\n  return useMemo(() => {\n    return groups.reduce((filteredGroup: AlertmanagerGroup[], group) => {\n      const alerts = group.alerts.filter(({ labels, status }) => {\n        const labelsMatch = labelsMatchMatchers(labels, matchers);\n        const filtersMatch = filters.alertState ? status.state === filters.alertState : true;\n        return labelsMatch && filtersMatch;\n      });\n      if (alerts.length > 0) {\n        // The ungrouped alerts should be first in the results\n        if (Object.keys(group.labels).length === 0) {\n          filteredGroup.unshift({ ...group, alerts });\n        } else {\n          filteredGroup.push({ ...group, alerts });\n        }\n      }\n      return filteredGroup;\n    }, []);\n  }, [groups, filters, matchers]);\n};\n","import {\n  AlertmanagerChoice,\n  ExternalAlertmanagerConfig,\n  ExternalAlertmanagers,\n  ExternalAlertmanagersResponse,\n} from '../../../../plugins/datasource/alertmanager/types';\n\nimport { alertingApi } from './alertingApi';\n\nexport interface AlertmanagersChoiceResponse {\n  alertmanagersChoice: AlertmanagerChoice;\n  numExternalAlertmanagers: number;\n}\n\nexport const alertmanagerApi = alertingApi.injectEndpoints({\n  endpoints: (build) => ({\n    getAlertmanagerChoiceStatus: build.query<AlertmanagersChoiceResponse, void>({\n      query: () => ({ url: '/api/v1/ngalert' }),\n      providesTags: ['AlertmanagerChoice'],\n    }),\n\n    getExternalAlertmanagerConfig: build.query<ExternalAlertmanagerConfig, void>({\n      query: () => ({ url: '/api/v1/ngalert/admin_config' }),\n      providesTags: ['AlertmanagerChoice'],\n    }),\n\n    getExternalAlertmanagers: build.query<ExternalAlertmanagers, void>({\n      query: () => ({ url: '/api/v1/ngalert/alertmanagers' }),\n      transformResponse: (response: ExternalAlertmanagersResponse) => response.data,\n    }),\n\n    saveExternalAlertmanagersConfig: build.mutation<{ message: string }, ExternalAlertmanagerConfig>({\n      query: (config) => ({ url: '/api/v1/ngalert/admin_config', method: 'POST', data: config }),\n      invalidatesTags: ['AlertmanagerChoice'],\n    }),\n  }),\n});\n","import React from 'react';\n\nimport { NavModelItem } from '@grafana/data';\nimport { Page } from 'app/core/components/Page/Page';\n\ninterface Props {\n  pageId: string;\n  isLoading?: boolean;\n  pageNav?: NavModelItem;\n}\n\nexport const AlertingPageWrapper = ({ children, pageId, pageNav, isLoading }: React.PropsWithChildren<Props>) => {\n  return (\n    <Page pageNav={pageNav} navId={pageId}>\n      <Page.Contents isLoading={isLoading}>{children}</Page.Contents>\n    </Page>\n  );\n};\n","import React from 'react';\n\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { AccessControlAction } from 'app/types';\n\ntype Props = {\n  actions: AccessControlAction[];\n  fallback?: boolean;\n};\n\nexport const Authorize = ({ actions, children, fallback = true }: React.PropsWithChildren<Props>) => {\n  if (actions.some((action) => contextSrv.hasAccess(action, fallback))) {\n    return <>{children}</>;\n  } else {\n    return null;\n  }\n};\n","import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { DynamicTable, DynamicTableProps } from './DynamicTable';\n\nexport type DynamicTableWithGuidelinesProps<T> = Omit<DynamicTableProps<T>, 'renderPrefixHeader, renderPrefixCell'>;\n\n// DynamicTable, but renders visual guidelines on the left, for larger screen widths\nexport const DynamicTableWithGuidelines = <T extends object>({\n  renderExpandedContent,\n  ...props\n}: DynamicTableWithGuidelinesProps<T>) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <DynamicTable\n      renderExpandedContent={\n        renderExpandedContent\n          ? (item, index, items) => (\n              <>\n                {!(index === items.length - 1) && <div className={cx(styles.contentGuideline, styles.guideline)} />}\n                {renderExpandedContent(item, index, items)}\n              </>\n            )\n          : undefined\n      }\n      renderPrefixHeader={() => (\n        <div className={styles.relative}>\n          <div className={cx(styles.headerGuideline, styles.guideline)} />\n        </div>\n      )}\n      renderPrefixCell={(_, index, items) => (\n        <div className={styles.relative}>\n          <div className={cx(styles.topGuideline, styles.guideline)} />\n          {!(index === items.length - 1) && <div className={cx(styles.bottomGuideline, styles.guideline)} />}\n        </div>\n      )}\n      {...props}\n    />\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  relative: css`\n    position: relative;\n    height: 100%;\n  `,\n  guideline: css`\n    left: -19px;\n    border-left: 1px solid ${theme.colors.border.medium};\n    position: absolute;\n\n    ${theme.breakpoints.down('md')} {\n      display: none;\n    }\n  `,\n  topGuideline: css`\n    width: 18px;\n    border-bottom: 1px solid ${theme.colors.border.medium};\n    top: 0;\n    bottom: 50%;\n  `,\n  bottomGuideline: css`\n    top: 50%;\n    bottom: 0;\n  `,\n  contentGuideline: css`\n    top: 0;\n    bottom: 0;\n    left: -49px !important;\n  `,\n  headerGuideline: css`\n    top: -25px;\n    bottom: 0;\n  `,\n});\n","import React from 'react';\n\nimport { Alert } from '@grafana/ui';\n\nimport { useAlertManagerSourceName } from '../hooks/useAlertManagerSourceName';\nimport { AlertManagerDataSource } from '../utils/datasource';\n\nimport { AlertManagerPicker } from './AlertManagerPicker';\n\ninterface Props {\n  availableAlertManagers: AlertManagerDataSource[];\n}\n\nconst NoAlertManagersAvailable = () => (\n  <Alert title=\"No Alertmanager found\" severity=\"warning\">\n    We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager.\n  </Alert>\n);\n\nconst OtherAlertManagersAvailable = () => (\n  <Alert title=\"Selected Alertmanager not found. Select a different Alertmanager.\" severity=\"warning\">\n    Selected Alertmanager no longer exists or you may not have permission to access it.\n  </Alert>\n);\n\nexport const NoAlertManagerWarning = ({ availableAlertManagers }: Props) => {\n  const [_, setAlertManagerSourceName] = useAlertManagerSourceName(availableAlertManagers);\n  const hasOtherAMs = availableAlertManagers.length > 0;\n\n  return (\n    <div>\n      {hasOtherAMs ? (\n        <>\n          <AlertManagerPicker onChange={setAlertManagerSourceName} dataSources={availableAlertManagers} />\n          <OtherAlertManagersAvailable />\n        </>\n      ) : (\n        <NoAlertManagersAvailable />\n      )}\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport { debounce } from 'lodash';\nimport React, { FormEvent, useEffect, useMemo } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Stack } from '@grafana/experimental';\nimport { logInfo } from '@grafana/runtime';\nimport { Label, Tooltip, Input, Icon, useStyles2 } from '@grafana/ui';\n\nimport { LogMessages } from '../../Analytics';\n\ninterface Props {\n  className?: string;\n  defaultQueryString?: string;\n  onFilterChange: (filterString: string) => void;\n}\n\nexport const MatcherFilter = ({ className, onFilterChange, defaultQueryString }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const onSearchInputChanged = useMemo(\n    () =>\n      debounce((e: FormEvent<HTMLInputElement>) => {\n        logInfo(LogMessages.filterByLabel);\n\n        const target = e.target as HTMLInputElement;\n        onFilterChange(target.value);\n      }, 600),\n    [onFilterChange]\n  );\n\n  useEffect(() => onSearchInputChanged.cancel(), [onSearchInputChanged]);\n\n  const searchIcon = <Icon name={'search'} />;\n\n  return (\n    <div className={className}>\n      <Label>\n        <Stack gap={0.5}>\n          <span>Search by label</span>\n          <Tooltip\n            content={\n              <div>\n                Filter alerts using label querying, ex:\n                <pre>{`{severity=\"critical\", instance=~\"cluster-us-.+\"}`}</pre>\n              </div>\n            }\n          >\n            <Icon className={styles.icon} name=\"info-circle\" size=\"sm\" />\n          </Tooltip>\n        </Stack>\n      </Label>\n      <Input\n        placeholder=\"Search\"\n        defaultValue={defaultQueryString}\n        onChange={onSearchInputChanged}\n        data-testid=\"search-query-input\"\n        prefix={searchIcon}\n        className={styles.inputWidth}\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  icon: css`\n    margin-right: ${theme.spacing(0.5)};\n  `,\n  inputWidth: css`\n    width: 340px;\n    flex-grow: 0;\n  `,\n});\n","import React, { FC } from 'react';\n\nimport { AlertState } from 'app/plugins/datasource/alertmanager/types';\n\nimport { State, StateTag } from '../StateTag';\n\nconst alertStateToState: Record<AlertState, State> = {\n  [AlertState.Active]: 'bad',\n  [AlertState.Unprocessed]: 'neutral',\n  [AlertState.Suppressed]: 'info',\n};\n\ninterface Props {\n  state: AlertState;\n}\n\nexport const AmAlertStateTag: FC<Props> = ({ state }) => <StateTag state={alertStateToState[state]}>{state}</StateTag>;\n","import { useCallback } from 'react';\n\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport store from 'app/core/store';\n\nimport { ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, ALERTMANAGER_NAME_QUERY_KEY } from '../utils/constants';\nimport { AlertManagerDataSource, GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nfunction useIsAlertManagerAvailable(availableAlertManagers: AlertManagerDataSource[]) {\n  return useCallback(\n    (alertManagerName: string) => {\n      const availableAlertManagersNames = availableAlertManagers.map((am) => am.name);\n      return availableAlertManagersNames.includes(alertManagerName);\n    },\n    [availableAlertManagers]\n  );\n}\n\n/* This will return am name either from query params or from local storage or a default (grafana).\n * Due to RBAC permissions Grafana Managed Alert manager or external alert managers may not be available\n * In the worst case neihter GMA nor external alert manager is available\n */\nexport function useAlertManagerSourceName(\n  availableAlertManagers: AlertManagerDataSource[]\n): [string | undefined, (alertManagerSourceName: string) => void] {\n  const [queryParams, updateQueryParams] = useQueryParams();\n  const isAlertManagerAvailable = useIsAlertManagerAvailable(availableAlertManagers);\n\n  const update = useCallback(\n    (alertManagerSourceName: string) => {\n      if (!isAlertManagerAvailable(alertManagerSourceName)) {\n        return;\n      }\n      if (alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME) {\n        store.delete(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: null });\n      } else {\n        store.set(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, alertManagerSourceName);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: alertManagerSourceName });\n      }\n    },\n    [updateQueryParams, isAlertManagerAvailable]\n  );\n\n  const querySource = queryParams[ALERTMANAGER_NAME_QUERY_KEY];\n\n  if (querySource && typeof querySource === 'string') {\n    if (isAlertManagerAvailable(querySource)) {\n      return [querySource, update];\n    } else {\n      // non existing alertmanager\n      return [undefined, update];\n    }\n  }\n\n  const storeSource = store.get(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n  if (storeSource && typeof storeSource === 'string' && isAlertManagerAvailable(storeSource)) {\n    update(storeSource);\n    return [storeSource, update];\n  }\n\n  if (isAlertManagerAvailable(GRAFANA_RULES_SOURCE_NAME)) {\n    return [GRAFANA_RULES_SOURCE_NAME, update];\n  }\n\n  return [undefined, update];\n}\n","import { useMemo } from 'react';\n\nimport { getAlertManagerDataSourcesByPermission } from '../utils/datasource';\n\nexport function useAlertManagersByPermission(accessType: 'instance' | 'notification') {\n  return useMemo(() => getAlertManagerDataSourcesByPermission(accessType), [accessType]);\n}\n"],"names":["AlertDetails","alert","alertManagerSourceName","styles","useStyles2","getStyles","instancePermissions","getInstancesPermissions","isSeeSourceButtonEnabled","isGrafanaRulesSource","contextSrv","AccessControlAction","className","actionsRow","Authorize","actions","update","create","fallback","status","state","AlertState","href","makeAMLink","silencedBy","join","button","icon","size","makeLabelBasedSilenceLink","labels","generatorURL","Object","entries","annotations","map","annotationKey","annotationValue","AnnotationDetailsField","value","receivers","name","filter","theme","css","spacing","colors","border","medium","AlertGroupAlertsTable","alerts","columns","useMemo","id","label","renderCell","data","AmAlertStateTag","duration","intervalToAbbreviatedDurationString","start","Date","startsAt","end","endsAt","AlertLabels","items","fingerprint","tableWrapper","DynamicTableWithGuidelines","cols","isExpandable","renderExpandedContent","breakpoints","up","typography","bodySmall","fontSize","AlertGroup","group","isCollapsed","setIsCollapsed","useState","wrapper","header","CollapseToggle","onToggle","keys","length","headerLabels","AlertGroupHeader","background","secondary","summary","spanElement","error","main","primary","AlertStateFilter","onStateFilterChange","stateFilter","alertStateOptions","sort","labelA","labelB","Label","RadioButtonGroup","options","onChange","GroupBy","groups","groupBy","onGroupingChange","labelKeyOptions","uniq","flatMap","startsWith","endsWith","key","placeholder","prefix","Icon","AlertGroupFilter","filterKey","setFilterKey","Math","floor","random","queryParams","setQueryParams","useQueryParams","queryString","alertState","getFiltersFromUrlParams","matcherFilterKey","alertManagers","useAlertManagersByPermission","setAlertManagerSourceName","useAlertManagerSourceName","showClearButton","AlertManagerPicker","current","dataSources","filterSection","MatcherFilter","filterInput","defaultQueryString","onFilterChange","Button","clearButton","variant","onClick","setTimeout","groupingBanner","useGetAlertmanagerChoiceStatusQuery","alertmanagerApi","dispatch","useDispatch","currentData","amConfigStatus","alertGroups","useUnifiedAlertingSelector","amAlertGroups","loading","result","results","initialAsyncRequestState","groupedAlerts","reduce","combinedGroups","noGroupingGroup","find","uniqBy","push","receiver","groupings","every","groupByLabel","includes","existingGrouping","groupKey","acc","useGroupedAlerts","filteredAlertGroups","filters","matchers","parseMatchers","filteredGroup","labelsMatch","labelsMatchMatchers","filtersMatch","unshift","useFilteredAmGroups","grafanaAmDeliveryDisabled","GRAFANA_RULES_SOURCE_NAME","alertmanagersChoice","AlertmanagerChoice","useEffect","fetchNotifications","fetchAlertGroupsAction","interval","setInterval","NOTIFICATIONS_POLL_INTERVAL_MS","clearInterval","AlertingPageWrapper","pageId","LoadingPlaceholder","text","Alert","title","severity","message","index","JSON","stringify","NoAlertManagerWarning","availableAlertManagers","alertingApi","endpoints","build","getAlertmanagerChoiceStatus","query","url","providesTags","getExternalAlertmanagerConfig","getExternalAlertmanagers","transformResponse","response","saveExternalAlertmanagersConfig","mutation","config","method","invalidatesTags","children","pageNav","isLoading","navId","some","action","props","item","cx","contentGuideline","guideline","undefined","renderPrefixHeader","relative","headerGuideline","renderPrefixCell","_","topGuideline","bottomGuideline","down","NoAlertManagersAvailable","OtherAlertManagersAvailable","hasOtherAMs","onSearchInputChanged","debounce","e","logInfo","LogMessages","target","cancel","searchIcon","Stack","gap","content","I","defaultValue","inputWidth","alertStateToState","updateQueryParams","isAlertManagerAvailable","useCallback","alertManagerName","am","useIsAlertManagerAvailable","store","ALERTMANAGER_NAME_LOCAL_STORAGE_KEY","ALERTMANAGER_NAME_QUERY_KEY","querySource","storeSource","accessType","getAlertManagerDataSourcesByPermission"],"sourceRoot":""}