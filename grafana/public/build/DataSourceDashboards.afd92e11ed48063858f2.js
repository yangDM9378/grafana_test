"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2929],{63498:(e,t,a)=>{a.d(t,{Z:()=>i});a(68404);var s,r=a(99500),n=a(8006),o=a(45916);const i=function(e){let{dashboards:t,onImport:a,onRemove:i}=e;function d(e){return e.revision!==e.importedRevision?"Update":"Re-import"}return(0,o.jsx)("table",{className:"filter-table",children:(0,o.jsx)("tbody",{children:t.map(((e,t)=>(0,o.jsxs)("tr",{children:[s||(s=(0,o.jsx)("td",{className:"width-1",children:(0,o.jsx)(r.J,{name:"apps"})})),(0,o.jsx)("td",{children:e.imported?(0,o.jsx)("a",{href:e.importedUrl,children:e.title}):(0,o.jsx)("span",{children:e.title})}),(0,o.jsxs)("td",{style:{textAlign:"right"},children:[e.imported?(0,o.jsx)(n.zx,{variant:"secondary",size:"sm",onClick:()=>a(e,!0),children:d(e)}):(0,o.jsx)(n.zx,{variant:"secondary",size:"sm",onClick:()=>a(e,!1),children:"Import"}),e.imported&&(0,o.jsx)(n.zx,{"aria-label":"Delete dashboard",icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>i(e)})]})]},`${e.dashboardId}-${t}`)))})})}},96305:(e,t,a)=>{a.r(t),a.d(t,{DataSourceDashboardsPage:()=>x,default:()=>I});var s,r=a(68404),n=a(37417),o=a(71031),i=a(78433),d=a(71482),c=a(64850),l=a(63498),u=a(79195),h=a(45916);function m(e){let{uid:t}=e;(0,u.wi)(t);const a=(0,c.I0)(),s=(0,c.v9)((e=>e.dataSources.dataSource)),n=(0,c.v9)((e=>e.plugins.dashboards)),o=(0,c.v9)((e=>e.plugins.isLoadingPluginDashboards));(0,r.useEffect)((()=>{s.id>0&&a((0,d.m3)())}),[a,s]);return(0,h.jsx)(p,{dashboards:n,isLoading:o,onImportDashboard:(e,t)=>{a((0,i.$j)({pluginId:e.pluginId,path:e.path,overwrite:t,inputs:[{name:"*",type:"datasource",pluginId:s.type,value:s.name}]},e.title))},onRemoveDashboard:e=>{let{uid:t}=e;a((0,i.fG)(t))}})}const p=e=>{let{isLoading:t,dashboards:a,onImportDashboard:r,onRemoveDashboard:n}=e;return t?s||(s=(0,h.jsx)(o.Z,{})):(0,h.jsx)(l.Z,{dashboards:a,onImport:r,onRemove:n})};function x(e){const t=e.match.params.uid,a=(0,u.MF)(t,"dashboards");return(0,h.jsx)(n.T,{navId:"datasources",pageNav:a.main,children:(0,h.jsx)(n.T.Contents,{children:(0,h.jsx)(m,{uid:t})})})}const I=x},46732:(e,t,a)=>{a.d(t,{V:()=>n});var s=a(68404),r=a(65022);const n=(0,s.createContext)(r.n)},46216:(e,t,a)=>{a.d(t,{E:()=>I,IA:()=>S,MF:()=>C,OU:()=>b,Qs:()=>z,YY:()=>k,_l:()=>E,d7:()=>O,hw:()=>f,nH:()=>j,q6:()=>y,qj:()=>w,wi:()=>g,wl:()=>D,zJ:()=>v});var s=a(68404),r=a(274),n=a(40264),o=a(2247),i=a(68374),d=a(85829),c=a(64850),l=a(8105),u=a(5316),h=a(46732),m=a(93220),p=a(46525),x=a(23940);const I=e=>{const t=(0,c.I0)();(0,s.useEffect)((()=>(t((0,u.M9)(e)),function(){t((0,n.e)({cleanupAction:e=>e.dataSourceSettings=p.fk}))})),[e,t])},f=e=>{const t=(0,c.I0)();return()=>t((0,u.kY)(e))},v=()=>{const e=(0,c.I0)();(0,s.useEffect)((()=>{e((0,u.bZ)())}),[e])},g=e=>{const t=(0,c.I0)();(0,s.useEffect)((()=>{t((0,u.gv)(e))}),[t,e])},b=()=>{const e=(0,c.I0)();(0,s.useEffect)((()=>{e((0,u.Kj)())}),[e])},j=()=>{const e=(0,c.I0)(),t=O();return a=>{e((0,u.J_)(a,t.Edit))}},w=()=>{const e=(0,c.I0)();return async t=>e((0,u.oe)(t))},y=()=>{const e=(0,c.I0)(),{name:t}=(0,c.v9)((e=>e.dataSources.dataSource));return()=>{o.Z.publish(new l.VJ({title:"Delete",text:`Are you sure you want to delete the "${t}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,u.F5)())}))}},D=e=>(0,c.v9)((t=>(0,x.f6)(t.dataSources,e))),S=e=>{const t=D(e),a=JSON.stringify({datasource:t.name,context:"explore"});return r.Cj.renderUrl("/explore",{left:a})},z=e=>(0,c.v9)((t=>(0,x.G4)(t.dataSources,e))),E=()=>(0,c.v9)((e=>e.dataSourceSettings)),C=(e,t)=>{const a=D(e),{plugin:s,loadError:r,loading:n}=E(),o=(0,c.v9)((e=>e.navIndex)),i=t?`datasource-${t}-${e}`:`datasource-settings-${e}`;if(r){const e={text:r,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return n||!s?(0,d.ht)(o,i,(0,m.xG)("settings")):(0,d.ht)(o,i,(0,m.nI)((0,m.B1)(a,s),t||"settings"))},k=e=>{const t=D(e);return{readOnly:!0===t.readOnly,hasWriteRights:i.Vt.hasPermissionInMetadata(c.bW.DataSourcesWrite,t),hasDeleteRights:i.Vt.hasPermissionInMetadata(c.bW.DataSourcesDelete,t)}},O=()=>(0,s.useContext)(h.V)},79195:(e,t,a)=>{a.d(t,{BX:()=>n.BX,E:()=>r.E,Ht:()=>n.Ht,I5:()=>o.I5,IA:()=>r.IA,IO:()=>o.IO,MF:()=>r.MF,OU:()=>r.OU,Qs:()=>r.Qs,Vj:()=>s.V,YY:()=>r.YY,_l:()=>r._l,d7:()=>r.d7,hw:()=>r.hw,mt:()=>o.mt,nH:()=>r.nH,q6:()=>r.q6,qj:()=>r.qj,r7:()=>o.r7,rl:()=>n.rl,wi:()=>r.wi,wl:()=>r.wl,yr:()=>n.yr,zJ:()=>r.zJ,zT:()=>n.zT});a(5316);var s=a(46732),r=a(46216),n=(a(93220),a(46525)),o=a(23940)}}]);
//# sourceMappingURL=DataSourceDashboards.afd92e11ed48063858f2.js.map