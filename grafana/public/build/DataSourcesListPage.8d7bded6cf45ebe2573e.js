"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4620],{53338:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(68404),s=a(39106),n=a(8006),o=a(45916);class c extends r.PureComponent{render(){const{searchQuery:e,linkButton:t,setSearchQuery:a,target:r,placeholder:c="Search by name or type"}=this.props,i={href:null==t?void 0:t.href,disabled:null==t?void 0:t.disabled};return r&&(i.target=r),(0,o.jsxs)("div",{className:"page-action-bar",children:[(0,o.jsx)("div",{className:"gf-form gf-form--grow",children:(0,o.jsx)(s.H,{value:e,onChange:a,placeholder:c})}),t&&(0,o.jsx)(n.Qj,Object.assign({},i,{children:t.title}))]})}}},38484:(e,t,a)=>{a.d(t,{c:()=>v});var r,s,n,o=a(52423),c=a(68404),i=a(65737),u=a(16755),d=a(1129),l=a(51028),h=a(75442),g=a(71031),f=a(68374),x=a(64850),p=a(79195),S=a(53338),j=a(45916);function m(){const e=(0,x.I0)(),t=(0,c.useCallback)((t=>e((0,p.zT)(t))),[e]),a=(0,x.v9)((e=>{let{dataSources:t}=e;return(0,p.IO)(t)})),r=f.Vt.hasPermission(x.bW.DataSourcesCreate);return(0,j.jsx)(b,{searchQuery:a,setSearchQuery:t,canCreateDataSource:r})}function b(e){let{searchQuery:t,setSearchQuery:a,canCreateDataSource:r}=e;const s={href:(0,p.d7)().New,title:"Add data source",disabled:!r};return(0,j.jsx)(S.Z,{searchQuery:t,setSearchQuery:a,linkButton:s},"action-bar")}function v(){(0,p.zJ)();const e=(0,x.v9)((e=>(0,p.mt)(e.dataSources))),t=(0,x.v9)((e=>{let{dataSources:t}=e;return(0,p.r7)(t)})),a=(0,x.v9)((e=>{let{dataSources:t}=e;return t.hasFetched})),r=f.Vt.hasPermission(x.bW.DataSourcesCreate);return(0,j.jsx)(I,{dataSources:e,dataSourcesCount:t,isLoading:!a,hasCreateRights:r})}function I(e){let{dataSources:t,dataSourcesCount:a,isLoading:o,hasCreateRights:c}=e;const f=(0,u.wW)(y),x=(0,p.d7)();return o?r||(r=(0,j.jsx)(g.Z,{})):0===a?(0,j.jsx)(h.Z,{buttonDisabled:!c,title:"No data sources defined",buttonIcon:"database",buttonLink:x.New,buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"}):(0,j.jsxs)(j.Fragment,{children:[s||(s=(0,j.jsx)(m,{})),(0,j.jsx)("ul",{className:f.list,children:t.map((e=>{const t=i.v.appSubUrl+x.Edit.replace(/:uid/gi,e.uid);return(0,j.jsx)("li",{children:(0,j.jsxs)(d.Z,{href:t,children:[(0,j.jsx)(d.Z.Heading,{children:e.name}),(0,j.jsx)(d.Z.Figure,{children:(0,j.jsx)("img",{src:e.typeLogoUrl,alt:"",height:"40px",width:"40px",className:f.logo})}),(0,j.jsx)(d.Z.Meta,{children:[e.typeName,e.url,e.isDefault&&(n||(n=(0,j.jsx)(l.V,{name:"default",colorIndex:1},"default-tag")))]})]})},e.uid)}))})]})}const y=()=>({list:(0,o.css)({listStyle:"none",display:"grid"}),logo:(0,o.css)({objectFit:"contain"})})},89108:(e,t,a)=>{a.r(t),a.d(t,{DataSourcesListPage:()=>c,default:()=>i});a(68404);var r,s=a(37417),n=a(38484),o=a(45916);function c(){return r||(r=(0,o.jsx)(s.T,{navId:"datasources",children:(0,o.jsx)(s.T.Contents,{children:(0,o.jsx)(n.c,{})})}))}const i=c},46732:(e,t,a)=>{a.d(t,{V:()=>n});var r=a(68404),s=a(65022);const n=(0,r.createContext)(s.n)},46216:(e,t,a)=>{a.d(t,{E:()=>p,IA:()=>C,MF:()=>k,OU:()=>b,Qs:()=>D,YY:()=>Q,_l:()=>T,d7:()=>E,hw:()=>S,nH:()=>v,q6:()=>y,qj:()=>I,wi:()=>m,wl:()=>w,zJ:()=>j});var r=a(68404),s=a(274),n=a(40264),o=a(2247),c=a(68374),i=a(85829),u=a(64850),d=a(8105),l=a(5316),h=a(46732),g=a(93220),f=a(46525),x=a(23940);const p=e=>{const t=(0,u.I0)();(0,r.useEffect)((()=>(t((0,l.M9)(e)),function(){t((0,n.e)({cleanupAction:e=>e.dataSourceSettings=f.fk}))})),[e,t])},S=e=>{const t=(0,u.I0)();return()=>t((0,l.kY)(e))},j=()=>{const e=(0,u.I0)();(0,r.useEffect)((()=>{e((0,l.bZ)())}),[e])},m=e=>{const t=(0,u.I0)();(0,r.useEffect)((()=>{t((0,l.gv)(e))}),[t,e])},b=()=>{const e=(0,u.I0)();(0,r.useEffect)((()=>{e((0,l.Kj)())}),[e])},v=()=>{const e=(0,u.I0)(),t=E();return a=>{e((0,l.J_)(a,t.Edit))}},I=()=>{const e=(0,u.I0)();return async t=>e((0,l.oe)(t))},y=()=>{const e=(0,u.I0)(),{name:t}=(0,u.v9)((e=>e.dataSources.dataSource));return()=>{o.Z.publish(new d.VJ({title:"Delete",text:`Are you sure you want to delete the "${t}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,l.F5)())}))}},w=e=>(0,u.v9)((t=>(0,x.f6)(t.dataSources,e))),C=e=>{const t=w(e),a=JSON.stringify({datasource:t.name,context:"explore"});return s.Cj.renderUrl("/explore",{left:a})},D=e=>(0,u.v9)((t=>(0,x.G4)(t.dataSources,e))),T=()=>(0,u.v9)((e=>e.dataSourceSettings)),k=(e,t)=>{const a=w(e),{plugin:r,loadError:s,loading:n}=T(),o=(0,u.v9)((e=>e.navIndex)),c=t?`datasource-${t}-${e}`:`datasource-settings-${e}`;if(s){const e={text:s,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return n||!r?(0,i.ht)(o,c,(0,g.xG)("settings")):(0,i.ht)(o,c,(0,g.nI)((0,g.B1)(a,r),t||"settings"))},Q=e=>{const t=w(e);return{readOnly:!0===t.readOnly,hasWriteRights:c.Vt.hasPermissionInMetadata(u.bW.DataSourcesWrite,t),hasDeleteRights:c.Vt.hasPermissionInMetadata(u.bW.DataSourcesDelete,t)}},E=()=>(0,r.useContext)(h.V)},79195:(e,t,a)=>{a.d(t,{BX:()=>n.BX,E:()=>s.E,Ht:()=>n.Ht,I5:()=>o.I5,IA:()=>s.IA,IO:()=>o.IO,MF:()=>s.MF,OU:()=>s.OU,Qs:()=>s.Qs,Vj:()=>r.V,YY:()=>s.YY,_l:()=>s._l,d7:()=>s.d7,hw:()=>s.hw,mt:()=>o.mt,nH:()=>s.nH,q6:()=>s.q6,qj:()=>s.qj,r7:()=>o.r7,rl:()=>n.rl,wi:()=>s.wi,wl:()=>s.wl,yr:()=>n.yr,zJ:()=>s.zJ,zT:()=>n.zT});a(5316);var r=a(46732),s=a(46216),n=(a(93220),a(46525)),o=a(23940)}}]);
//# sourceMappingURL=DataSourcesListPage.8d7bded6cf45ebe2573e.js.map