{"version":3,"file":"4549.6792a21b526eb884591a.js","mappings":"6SAYO,MAAMA,EAAc,KACzB,MAAMC,GAAYC,EAAAA,EAAAA,OACXC,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,GAc3C,OAAIF,GAEA,kCACE,iIAA2G,OAC3G,SAAC,KAAS,CAACG,OAAO,SAClB,SAAC,KAAU,CAACC,QAAQ,UAAUC,MAAMC,EAAAA,EAAAA,MAAYC,UAAY,UAAU,iCAQ1E,SAACC,EAAA,EAAI,CAACC,SAzBUC,KAChBC,EAAAA,EAAAA,KACGC,KAAK,mBAAoBF,GACzBG,MAAK,KACJZ,GAAa,EAAK,IAEnBa,OAAOC,IAAQ,MACd,MAAMC,GAAc,QAAR,EAAAD,EAAIE,YAAI,aAAR,EAAUC,UAAWH,EACjCjB,EAAUqB,QAAQH,EAAI,GACtB,EAgBqB,SACtB,cAAC,SAAEI,EAAQ,OAAEC,GAAQ,SACpB,uCACE,SAACC,EAAA,EAAM,6BACP,SAACC,EAAA,EAAK,CACJC,MAAM,QACNC,YAAY,kEACZC,UAAWL,EAAOM,MAClBC,MAAmB,QAAd,EAAEP,EAAOM,aAAK,aAAZ,EAAcT,QAAQ,UAE7B,SAACW,EAAAC,EAAK,eACJC,GAAG,SACCX,EAAS,QAAS,CACpBY,SAAU,oBACVC,QAAS,CACPC,MAAOC,EAAAA,GACPjB,QAAS,sBAEX,CACFkB,YAAY,cAGhB,UAAC,KAAe,kBACd,SAACC,EAAA,GAAM,CAACC,KAAK,SAAQ,uCACrB,SAAC,KAAU,CAACC,KAAK,OAAOlC,MAAMC,EAAAA,EAAAA,MAAYC,UAAY,SAAS,gCAIhE,GAEA,E,MCjEJ,MAAMiC,EAAkB,IACtB,IAAP,GACE,SAACC,EAAA,GAAW,WACV,SAAC,KAAQ,WACP,SAAC5C,EAAW,SAMpB,G,4DCbO,MAAMsC,EACX,wIAOK,MAAMO,EAAiB,IALvB,WAAmB,MACxB,MAAMC,EAA2B,QAArB,EAAGC,EAAAA,EAAAA,mBAAkB,aAAlB,EAAoBC,YACnC,SAAUF,GAAUA,EAAS,EAC/B,CAEoCG,IAAaF,EAAAA,EAAAA,eAAAA,iB","sources":["webpack://grafana/./public/app/core/components/Signup/VerifyEmail.tsx","webpack://grafana/./public/app/core/components/Signup/VerifyEmailPage.tsx","webpack://grafana/./public/app/features/admin/utils.ts"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Form, Field, Input, Button, Legend, Container, HorizontalGroup, LinkButton } from '@grafana/ui';\nimport { getConfig } from 'app/core/config';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { w3cStandardEmailValidator } from 'app/features/admin/utils';\n\ninterface EmailDTO {\n  email: string;\n}\n\nexport const VerifyEmail = () => {\n  const notifyApp = useAppNotification();\n  const [emailSent, setEmailSent] = useState(false);\n\n  const onSubmit = (formModel: EmailDTO) => {\n    getBackendSrv()\n      .post('/api/user/signup', formModel)\n      .then(() => {\n        setEmailSent(true);\n      })\n      .catch((err) => {\n        const msg = err.data?.message || err;\n        notifyApp.warning(msg);\n      });\n  };\n\n  if (emailSent) {\n    return (\n      <div>\n        <p>An email with a verification link has been sent to the email address. You should receive it shortly.</p>\n        <Container margin=\"md\" />\n        <LinkButton variant=\"primary\" href={getConfig().appSubUrl + '/signup'}>\n          Complete Signup\n        </LinkButton>\n      </div>\n    );\n  }\n\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ register, errors }) => (\n        <>\n          <Legend>Verify Email</Legend>\n          <Field\n            label=\"Email\"\n            description=\"Enter your email address to get a verification link sent to you\"\n            invalid={!!errors.email}\n            error={errors.email?.message}\n          >\n            <Input\n              id=\"email\"\n              {...register('email', {\n                required: 'Email is required',\n                pattern: {\n                  value: w3cStandardEmailValidator,\n                  message: 'Email is invalid',\n                },\n              })}\n              placeholder=\"Email\"\n            />\n          </Field>\n          <HorizontalGroup>\n            <Button type=\"submit\">Send verification email</Button>\n            <LinkButton fill=\"text\" href={getConfig().appSubUrl + '/login'}>\n              Back to login\n            </LinkButton>\n          </HorizontalGroup>\n        </>\n      )}\n    </Form>\n  );\n};\n","import React from 'react';\n\nimport { LoginLayout, InnerBox } from '../Login/LoginLayout';\n\nimport { VerifyEmail } from './VerifyEmail';\n\nexport const VerifyEmailPage = () => {\n  return (\n    <LoginLayout>\n      <InnerBox>\n        <VerifyEmail />\n      </InnerBox>\n    </LoginLayout>\n  );\n};\n\nexport default VerifyEmailPage;\n","import { config } from '@grafana/runtime/src';\n\n// https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\nexport const w3cStandardEmailValidator =\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\nexport function isTrial() {\n  const expiry = config.licenseInfo?.trialExpiry;\n  return !!(expiry && expiry > 0);\n}\n\nexport const highlightTrial = () => isTrial() && config.featureToggles.featureHighlights;\n"],"names":["VerifyEmail","notifyApp","useAppNotification","emailSent","setEmailSent","useState","margin","variant","href","getConfig","appSubUrl","Form","onSubmit","formModel","getBackendSrv","post","then","catch","err","msg","data","message","warning","register","errors","Legend","Field","label","description","invalid","email","error","Input","I","id","required","pattern","value","w3cStandardEmailValidator","placeholder","Button","type","fill","VerifyEmailPage","LoginLayout","highlightTrial","expiry","config","trialExpiry","isTrial"],"sourceRoot":""}