{"version":3,"file":"8832.6120aea2e246adf85e01.js","mappings":"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","sources":["webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/language.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/dynamic-labels/language.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/language.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/utils/utils.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/LogGroupSelector.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/XrayLinkConfig.tsx","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/TemplateTag/TemplateTag.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/inlineArrayTransformer/inlineArrayTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/stripIndentTransformer/stripIndentTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/trimResultTransformer/trimResultTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/commaLists/commaLists.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/commaListsAnd/commaListsAnd.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/commaListsOr/commaListsOr.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/splitStringTransformer/splitStringTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/removeNonPrintingValuesTransformer/removeNonPrintingValuesTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/html/html.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/replaceSubstitutionTransformer/replaceSubstitutionTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/safeHtml/safeHtml.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/replaceResultTransformer/replaceResultTransformer.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLine/oneLine.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLineTrim/oneLineTrim.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLineCommaLists/oneLineCommaLists.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLineCommaListsOr/oneLineCommaListsOr.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLineCommaListsAnd/oneLineCommaListsAnd.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/inlineLists/inlineLists.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/oneLineInlineLists/oneLineInlineLists.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/stripIndent/stripIndent.js","webpack://grafana/../../opt/drone/yarncache/common-tags-npm-1.8.2-2c30ba69b3-767a6255a8.zip/node_modules/common-tags/es/stripIndents/stripIndents.js","webpack://grafana/./public/app/plugins/datasource/cloudwatch/syntax.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/LogsCheatSheet.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/guards.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/Dimensions/FilterItem.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/Dimensions/Dimensions.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/aws_url.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/CloudWatchLink.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/utils/query/getStatsGroups.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/hooks.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/styles.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/Search.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/Account.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/CrossAccountLogsQueryField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/LogGroupSelection.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetricsQueryEditor/MetricsQueryHeader.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/QueryHeader.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/LogsQueryField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/standardStatistics.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetricStatEditor/MetricStatEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/expressions.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/SQLGenerator.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/utils.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLBuilderSelectRow.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLFilter.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLGroupBy.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLOrderByGroup.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLBuilderEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/definition.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/commands.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/register.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MathExpressionQueryField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/definition.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/SQLCodeEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/LinkedToken.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/linkedTokenBuilder.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/types.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/dynamic-labels/definition.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/DynamicLabelsField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/dynamic-labels/CompletionItemProvider.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetricsQueryEditor/Alias.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/migrations/metricQueryMigrations.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetricsQueryEditor/usePreparedMetricsQuery.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetricsQueryEditor/MetricsQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/AnnotationQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/annotationSupport.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/memoizedDebounce.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/query-runner/CloudWatchRequest.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/api.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/monarch/CompletionItemProvider.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/completion/types.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/completion/statementPosition.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/completion/suggestionKind.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/completion/tokenUtils.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/completion/CompletionItemProvider.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/language_provider.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/completion/types.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/completion/statementPosition.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/completion/suggestionKind.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/metric-math/completion/CompletionItemProvider.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/query-runner/CloudWatchAnnotationQueryRunner.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/utils/datalinks.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/utils/logsRetry.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/utils/rxjs/increasingInterval.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/query-runner/CloudWatchLogsQueryRunner.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/ThrottlingErrorMessage.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/query-runner/CloudWatchMetricsQueryRunner.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/migrations/variableQueryMigrations.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/MultiFilterItem.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/MultiFilter.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/VariableQueryField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/VariableTextField.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/VariableQueryEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/variables.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/datasource.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/tracking.ts","webpack://grafana/./public/app/plugins/datasource/cloudwatch/module.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/ConfigEditor.tsx","webpack://grafana/./public/app/plugins/datasource/cloudwatch/components/MetaInspector.tsx","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useCustomCompareEffect.js","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/misc/isDeepEqual.js","webpack://grafana/./.yarn/__virtual__/react-use-virtual-0c21d950b6/3/opt/drone/yarncache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useDeepCompareEffect.js","webpack://grafana/../../opt/drone/yarncache/@grafana-aws-sdk-npm-0.0.37-8e06caf3f3-3994e78182.zip/node_modules/@grafana/aws-sdk/dist/index.production.js","webpack://grafana/../../opt/drone/yarncache/@grafana-aws-sdk-npm-0.0.37-8e06caf3f3-3994e78182.zip/node_modules/@grafana/aws-sdk/index.js","webpack://grafana/../../opt/drone/yarncache/fast-deep-equal-npm-3.1.3-790edcfcf5-e21a9d8d84.zip/node_modules/fast-deep-equal/react.js","webpack://grafana/../../opt/drone/yarncache/jsurl-npm-0.1.5-9e17f93783-50b614908d.zip/node_modules/jsurl/index.js","webpack://grafana/../../opt/drone/yarncache/jsurl-npm-0.1.5-9e17f93783-50b614908d.zip/node_modules/jsurl/lib/jsurl.js"],"sourcesContent":["import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\n\ninterface CloudWatchLanguage extends monacoType.languages.IMonarchLanguage {\n  keywords: string[];\n  operators: string[];\n  builtinFunctions: string[];\n}\n\nexport const SELECT = 'SELECT';\nexport const FROM = 'FROM';\nexport const WHERE = 'WHERE';\nexport const GROUP = 'GROUP';\nexport const ORDER = 'ORDER';\nexport const BY = 'BY';\nexport const DESC = 'DESC';\nexport const ASC = 'ASC';\nexport const LIMIT = 'LIMIT';\nexport const WITH = 'WITH';\nexport const SCHEMA = 'SCHEMA';\n\nexport const KEYWORDS = [SELECT, FROM, WHERE, GROUP, ORDER, BY, DESC, ASC, LIMIT, WITH, SCHEMA];\nexport const STATISTICS = ['AVG', 'COUNT', 'MAX', 'MIN', 'SUM'];\n\nexport const AND = 'AND';\nexport const LOGICAL_OPERATORS = [AND];\n\nexport const EQUALS = '=';\nexport const NOT_EQUALS = '!=';\nexport const COMPARISON_OPERATORS = [EQUALS, NOT_EQUALS];\n\nexport const language: CloudWatchLanguage = {\n  defaultToken: '',\n  tokenPostfix: '.sql',\n  ignoreCase: true,\n  brackets: [\n    { open: '[', close: ']', token: 'delimiter.square' },\n    { open: '(', close: ')', token: 'delimiter.parenthesis' },\n  ],\n  keywords: KEYWORDS,\n  operators: LOGICAL_OPERATORS,\n  builtinFunctions: STATISTICS,\n  tokenizer: {\n    root: [\n      [/\\$[a-zA-Z0-9-_]+/, 'variable'],\n      { include: '@comments' },\n      { include: '@whitespace' },\n      { include: '@numbers' },\n      { include: '@strings' },\n      { include: '@complexIdentifiers' },\n      [/[;,.]/, 'delimiter'],\n      [/[()]/, '@brackets'],\n      [\n        /[\\w@#$]+/,\n        {\n          cases: {\n            '@keywords': 'keyword',\n            '@operators': 'operator',\n            '@builtinFunctions': 'predefined',\n            '@default': 'identifier',\n          },\n        },\n      ],\n      [/[=!%&+\\-*/|~^]/, 'operator'], // TODO: strip these options\n    ],\n    whitespace: [[/\\s+/, 'white']],\n    comments: [[/--+.*/, 'comment']],\n    comment: [\n      [/[^*/]+/, 'comment'],\n      [/./, 'comment'],\n    ],\n    numbers: [\n      [/0[xX][0-9a-fA-F]*/, 'number'],\n      [/[$][+-]*\\d*(\\.\\d*)?/, 'number'],\n      [/((\\d+(\\.\\d*)?)|(\\.\\d+))([eE][\\-+]?\\d+)?/, 'number'],\n    ],\n    strings: [\n      [/N'/, { token: 'string', next: '@string' }],\n      [/'/, { token: 'string', next: '@string' }],\n      [/\"/, { token: 'type', next: '@string_double' }],\n    ],\n    string: [\n      [/[^']+/, 'string'],\n      [/''/, 'string'],\n      [/'/, { token: 'string', next: '@pop' }],\n    ],\n    string_double: [\n      [/[^\\\\\"]+/, 'type'],\n      [/\"/, 'type', '@pop'],\n    ],\n    complexIdentifiers: [\n      [/\\[/, { token: 'identifier.quote', next: '@bracketedIdentifier' }],\n      [/\"/, { token: 'identifier.quote', next: '@quotedIdentifier' }],\n    ],\n    bracketedIdentifier: [\n      [/[^\\]]+/, 'identifier'],\n      [/]]/, 'identifier'],\n      [/]/, { token: 'identifier.quote', next: '@pop' }],\n    ],\n    quotedIdentifier: [\n      [/[^\"]+/, 'identifier'],\n      [/\"\"/, 'identifier'],\n      [/\"/, { token: 'identifier.quote', next: '@pop' }],\n    ],\n  },\n};\n\nexport const conf: monacoType.languages.LanguageConfiguration = {\n  comments: {\n    lineComment: '--',\n    blockComment: ['/*', '*/'],\n  },\n  brackets: [\n    ['{', '}'],\n    ['[', ']'],\n    ['(', ')'],\n  ],\n  autoClosingPairs: [\n    { open: '{', close: '}' },\n    { open: '[', close: ']' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  surroundingPairs: [\n    { open: '{', close: '}' },\n    { open: '[', close: ']' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n};\n","import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\n\nimport { config } from '@grafana/runtime';\n\n// Dynamic labels: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/graph-dynamic-labels.html\nexport const DYNAMIC_LABEL_PATTERNS = [\n  '${DATAPOINT_COUNT}',\n  '${FIRST}',\n  '${FIRST_LAST_RANGE}',\n  '${FIRST_LAST_TIME_RANGE}',\n  '${FIRST_TIME}',\n  '${FIRST_TIME_RELATIVE}',\n  '${LABEL}',\n  '${LAST}',\n  '${LAST_TIME}',\n  '${LAST_TIME_RELATIVE}',\n  '${MAX}',\n  '${MAX_TIME}',\n  '${MAX_TIME_RELATIVE}',\n  '${MIN}',\n  '${MIN_MAX_RANGE}',\n  '${MIN_MAX_TIME_RANGE}',\n  '${MIN_TIME}',\n  '${MIN_TIME_RELATIVE}',\n  \"${PROP('AccountId')}\",\n  \"${PROP('MetricName')}\",\n  \"${PROP('Namespace')}\",\n  \"${PROP('Period')}\",\n  \"${PROP('Region')}\",\n  \"${PROP('Stat')}\",\n  '${SUM}',\n  ...(config.featureToggles.cloudWatchCrossAccountQuerying ? [\"${PROP('AccountLabel')}\"] : []),\n];\n\nexport const language: monacoType.languages.IMonarchLanguage = {\n  id: 'dynamicLabels',\n  ignoreCase: false,\n  tokenizer: {\n    root: [\n      { include: '@whitespace' },\n      { include: '@builtInFunctions' },\n      { include: '@string' },\n      [/\\$\\{PROP\\('Dim.[a-zA-Z0-9-_]?.*'\\)\\}+/, 'predefined'], //custom handling for dimension patterns\n    ],\n    builtInFunctions: [[DYNAMIC_LABEL_PATTERNS.map(escapeRegExp).join('|'), 'predefined']],\n    whitespace: [[/\\s+/, 'white']],\n    string: [],\n  },\n};\n\nexport const conf: monacoType.languages.LanguageConfiguration = {};\n\nfunction escapeRegExp(string: string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n","import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\n\n// Metric Math: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html\nexport const METRIC_MATH_FNS = [\n  'ABS',\n  'ANOMALY_DETECTION_BAND',\n  'AVG',\n  'CEIL',\n  'DATAPOINT_COUNT',\n  'DIFF',\n  'DIFF_TIME',\n  'FILL',\n  'FIRST',\n  'LAST',\n  'FLOOR',\n  'IF',\n  'INSIGHT_RULE_METRIC',\n  'LOG',\n  'LOG10',\n  'MAX',\n  'METRIC_COUNT',\n  'METRICS',\n  'MIN',\n  'MINUTE',\n  'HOUR',\n  'DAY',\n  'DATE',\n  'MONTH',\n  'YEAR',\n  'EPOCH',\n  'PERIOD',\n  'RATE',\n  'REMOVE_EMPTY',\n  'RUNNING_SUM',\n  'SEARCH',\n  'SERVICE_QUOTA',\n  'SLICE',\n  'SORT',\n  'STDDEV',\n  'SUM',\n  'TIME_SERIES',\n];\n\nexport const METRIC_MATH_STATISTIC_KEYWORD_STRINGS = ['Average', 'Maximum', 'Minimum', 'Sum', 'SampleCount']; // second arguments to SEARCH function\n\nexport const METRIC_MATH_KEYWORDS = ['REPEAT', 'LINEAR', 'ASC', 'DSC']; // standalone magic arguments to functions\n\nexport const METRIC_MATH_OPERATORS = [\n  '+',\n  '-',\n  '*',\n  '/',\n  '^',\n  '==',\n  '!=',\n  '<=',\n  '>=',\n  '<',\n  '>',\n  'AND',\n  '&&',\n  'OR',\n  '||',\n];\n\nexport const METRIC_MATH_PERIODS = [10, 60, 300, 900, 3000, 21600, 86400];\n\nexport const language: monacoType.languages.IMonarchLanguage = {\n  id: 'metricMath',\n  ignoreCase: false,\n  brackets: [\n    { open: '[', close: ']', token: 'delimiter.square' },\n    { open: '(', close: ')', token: 'delimiter.parenthesis' },\n    { open: '{', close: '}', token: 'delimiter.curly' },\n  ],\n  tokenizer: {\n    root: [{ include: '@nonNestableStates' }, { include: '@strings' }],\n    nonNestableStates: [\n      { include: '@variables' },\n      { include: '@whitespace' },\n      { include: '@numbers' },\n      { include: '@assignment' },\n      { include: '@keywords' },\n      { include: '@operators' },\n      { include: '@builtInFunctions' },\n      [/[;,.]/, 'delimiter'],\n      [/[(){}\\[\\]]/, '@brackets'], // [], (), {} are all brackets\n    ],\n    keywords: [[METRIC_MATH_KEYWORDS.map(escapeRegExp).join('|'), 'keyword']],\n    operators: [[METRIC_MATH_OPERATORS.map(escapeRegExp).join('|'), 'operator']],\n    builtInFunctions: [[METRIC_MATH_FNS.map(escapeRegExp).join('|'), 'predefined']],\n    variables: [\n      [/\\$[a-zA-Z0-9-_]+/, 'variable'], // $ followed by any letter/number we assume could be grafana template variable\n    ],\n    whitespace: [[/\\s+/, 'white']],\n    assignment: [[/=/, 'tag']],\n    numbers: [\n      [/0[xX][0-9a-fA-F]*/, 'number'],\n      [/[$][+-]*\\d*(\\.\\d*)?/, 'number'],\n      [/((\\d+(\\.\\d*)?)|(\\.\\d+))([eE][\\-+]?\\d+)?/, 'number'],\n    ],\n    // states that start other states (aka nested states):\n    strings: [\n      [/'/, { token: 'string', next: '@string' }],\n      [/\"/, { token: 'type', next: '@string_double' }],\n    ],\n    string: [\n      [/{/, { token: 'delimiter.curly', next: '@nestedCurly' }], // escape out of string and into nestedCurly\n      [/\\(/, { token: 'delimiter.parenthesis', next: '@nestedParens' }], // escape out of string and into nestedCurly\n      [/\"/, { token: 'type', next: '@string_double' }], // jump into double string\n      [/'/, { token: 'string', next: '@pop' }], // stop being a string\n      { include: '@nonNestableStates' },\n      [/[^']/, 'string'], // anything that is not a quote, is marked as string\n    ],\n    string_double: [\n      [/[^\"]/, 'type'], // mark anything not a quote as a \"type\" (different type of string for visual difference)\n      [/\"/, { token: 'type', next: '@pop' }], // mark also as a type and stop being in the double string state\n    ],\n    nestedCurly: [\n      [/}/, { token: 'delimiter.curly', next: '@pop' }], // escape out of string and into braces\n      [/'/, { token: 'string', next: '@string' }], // go to string if see start of string\n      [/\"/, { token: 'type', next: '@string_double' }], // go to string_double if see start of double string\n    ],\n    nestedParens: [\n      [/\\)/, { token: 'delimiter.parenthesis', next: '@pop' }], // escape out of string and into braces\n      [/'/, { token: 'string', next: '@string' }], // go to string if see start of string\n      [/\"/, { token: 'type', next: '@string_double' }], // go to string_double if see start of double string\n    ],\n  },\n};\n\nexport const conf: monacoType.languages.LanguageConfiguration = {\n  brackets: [\n    ['{', '}'],\n    ['[', ']'],\n    ['(', ')'],\n  ],\n  autoClosingPairs: [\n    { open: '{', close: '}' },\n    { open: '[', close: ']' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  surroundingPairs: [\n    { open: '{', close: '}' },\n    { open: '[', close: ']' },\n    { open: '(', close: ')' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n};\n\nfunction escapeRegExp(string: string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n","import { SelectableValue } from '@grafana/data';\n\nimport { CloudWatchMetricsQuery, MetricQueryType, MetricEditorMode } from '../types';\n\nimport { CloudWatchDatasource } from './../datasource';\n\nexport const toOption = (value: string) => ({ label: value, value });\n\nexport const appendTemplateVariables = (datasource: CloudWatchDatasource, values: SelectableValue[]) => [\n  ...values,\n  { label: 'Template Variables', options: datasource.getVariables().map(toOption) },\n];\n\nexport const filterMetricsQuery = (query: CloudWatchMetricsQuery): boolean => {\n  const { region, metricQueryType, metricEditorMode, expression, metricName, namespace, sqlExpression, statistic } =\n    query;\n  if (!region) {\n    return false;\n  }\n  if (metricQueryType === MetricQueryType.Search && metricEditorMode === MetricEditorMode.Builder) {\n    return !!namespace && !!metricName && !!statistic;\n  } else if (metricQueryType === MetricQueryType.Search && metricEditorMode === MetricEditorMode.Code) {\n    return !!expression;\n  } else if (metricQueryType === MetricQueryType.Query) {\n    // still TBD how to validate the visual query builder for SQL\n    return !!sqlExpression;\n  }\n\n  return false;\n};\n","import { debounce, unionBy } from 'lodash';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { MultiSelect } from '@grafana/ui';\nimport { InputActionMeta } from '@grafana/ui/src/components/Select/types';\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { dispatch } from 'app/store/store';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { appendTemplateVariables } from '../utils/utils';\n\nconst MAX_LOG_GROUPS = 20;\nconst MAX_VISIBLE_LOG_GROUPS = 4;\nconst DEBOUNCE_TIMER = 300;\n\nexport interface LogGroupSelectorProps {\n  region: string;\n  selectedLogGroups: string[];\n  onChange: (logGroups: string[]) => void;\n\n  datasource?: CloudWatchDatasource;\n  onRunQuery?: () => void;\n  onOpenMenu?: () => Promise<void>;\n  refId?: string;\n  width?: number | 'auto';\n  saved?: boolean; // is only used in the config editor\n}\n\nexport const LogGroupSelector: React.FC<LogGroupSelectorProps> = ({\n  region,\n  selectedLogGroups,\n  onChange,\n  datasource,\n  onRunQuery,\n  onOpenMenu,\n  refId,\n  width,\n  saved = true,\n}) => {\n  const [loadingLogGroups, setLoadingLogGroups] = useState(false);\n  const [availableLogGroups, setAvailableLogGroups] = useState<Array<SelectableValue<string>>>([]);\n  const logGroupOptions = useMemo(\n    () => unionBy(availableLogGroups, selectedLogGroups?.map(toOption), 'value'),\n    [availableLogGroups, selectedLogGroups]\n  );\n\n  const fetchLogGroupOptions = useCallback(\n    async (region: string, logGroupNamePrefix?: string) => {\n      if (!datasource) {\n        return [];\n      }\n      try {\n        const logGroups = await datasource.api.describeLogGroups({\n          refId,\n          region,\n          logGroupNamePrefix,\n        });\n        return logGroups;\n      } catch (err) {\n        dispatch(notifyApp(createErrorNotification(typeof err === 'string' ? err : JSON.stringify(err))));\n        return [];\n      }\n    },\n    [datasource, refId]\n  );\n\n  const onLogGroupSearch = async (searchTerm: string, region: string, actionMeta: InputActionMeta) => {\n    if (actionMeta.action !== 'input-change' || !datasource) {\n      return;\n    }\n\n    // No need to fetch matching log groups if the search term isn't valid\n    // This is also useful for preventing searches when a user is typing out a log group with template vars\n    // See https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/API_LogGroup.html for the source of the pattern below\n    const logGroupNamePattern = /^[\\.\\-_/#A-Za-z0-9]+$/;\n    if (!logGroupNamePattern.test(searchTerm)) {\n      if (searchTerm !== '') {\n        dispatch(notifyApp(createErrorNotification('Invalid Log Group name: ' + searchTerm)));\n      }\n      return;\n    }\n\n    setLoadingLogGroups(true);\n    const matchingLogGroups = await fetchLogGroupOptions(region, searchTerm);\n    setAvailableLogGroups(unionBy(availableLogGroups, matchingLogGroups, 'value'));\n    setLoadingLogGroups(false);\n  };\n\n  // Reset the log group options if the datasource or region change and are saved\n  useEffect(() => {\n    async function getAvailableLogGroupOptions() {\n      // Don't call describeLogGroups if datasource or region is undefined\n      if (!datasource || !datasource.getActualRegion(region)) {\n        setAvailableLogGroups([]);\n        return;\n      }\n\n      setLoadingLogGroups(true);\n      return fetchLogGroupOptions(datasource.getActualRegion(region))\n        .then((logGroups) => {\n          setAvailableLogGroups(logGroups);\n        })\n        .finally(() => {\n          setLoadingLogGroups(false);\n        });\n    }\n\n    // Config editor does not fetch new log group options unless changes have been saved\n    saved && getAvailableLogGroupOptions();\n\n    // if component unmounts in the middle of setting state, we reset state and unsubscribe from fetchLogGroupOptions\n    return () => {\n      setAvailableLogGroups([]);\n      setLoadingLogGroups(false);\n    };\n    // this hook shouldn't get called every time selectedLogGroups or onChange updates\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [datasource, region, saved]);\n\n  const onOpenLogGroupMenu = async () => {\n    if (onOpenMenu) {\n      await onOpenMenu();\n    }\n  };\n\n  const onLogGroupSearchDebounced = debounce(onLogGroupSearch, DEBOUNCE_TIMER);\n\n  return (\n    <MultiSelect\n      inputId=\"default-log-groups\"\n      aria-label=\"Log Groups\"\n      allowCustomValue\n      options={datasource ? appendTemplateVariables(datasource, logGroupOptions) : logGroupOptions}\n      value={selectedLogGroups}\n      onChange={(v) => onChange(v.filter(({ value }) => value).map(({ value }) => value))}\n      onBlur={onRunQuery}\n      closeMenuOnSelect={false}\n      isClearable\n      isOptionDisabled={() => selectedLogGroups.length >= MAX_LOG_GROUPS}\n      placeholder=\"Choose Log Groups\"\n      maxVisibleValues={MAX_VISIBLE_LOG_GROUPS}\n      noOptionsMessage=\"No log groups available\"\n      isLoading={loadingLogGroups}\n      onOpenMenu={onOpenLogGroupMenu}\n      onInputChange={(value, actionMeta) => {\n        onLogGroupSearchDebounced(value, region, actionMeta);\n      }}\n      width={width}\n    />\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { Alert, InlineField, useStyles2 } from '@grafana/ui';\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoText: css`\n    padding-bottom: ${theme.spacing(2)};\n    color: ${theme.colors.text.secondary};\n  `,\n});\n\ninterface Props {\n  datasourceUid?: string;\n  onChange: (uid: string) => void;\n}\n\nconst xRayDsId = 'grafana-x-ray-datasource';\n\nexport function XrayLinkConfig({ datasourceUid, onChange }: Props) {\n  const hasXrayDatasource = Boolean(getDatasourceSrv().getList({ pluginId: xRayDsId }).length);\n\n  const styles = useStyles2(getStyles);\n\n  return (\n    <>\n      <h3 className=\"page-heading\">X-ray trace link</h3>\n\n      <div className={styles.infoText}>\n        Grafana will automatically create a link to a trace in X-ray data source if logs contain @xrayTraceId field\n      </div>\n\n      {!hasXrayDatasource && (\n        <Alert\n          title={\n            'There is no X-ray datasource to link to. First add an X-ray data source and then link it to Cloud Watch. '\n          }\n          severity=\"info\"\n        />\n      )}\n\n      <div className=\"gf-form-group\">\n        <InlineField\n          htmlFor=\"data-source-picker\"\n          label=\"Data source\"\n          labelWidth={28}\n          tooltip=\"X-ray data source containing traces\"\n        >\n          <DataSourcePicker\n            pluginId={xRayDsId}\n            onChange={(ds) => onChange(ds.uid)}\n            current={datasourceUid}\n            noDefault={true}\n          />\n        </InlineField>\n      </div>\n    </>\n  );\n}\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _templateObject = _taggedTemplateLiteral(['', ''], ['', '']);\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @class TemplateTag\n * @classdesc Consumes a pipeline of composable transformer plugins and produces a template tag.\n */\nvar TemplateTag = function () {\n  /**\n   * constructs a template tag\n   * @constructs TemplateTag\n   * @param  {...Object} [...transformers] - an array or arguments list of transformers\n   * @return {Function}                    - a template tag\n   */\n  function TemplateTag() {\n    var _this = this;\n\n    for (var _len = arguments.length, transformers = Array(_len), _key = 0; _key < _len; _key++) {\n      transformers[_key] = arguments[_key];\n    }\n\n    _classCallCheck(this, TemplateTag);\n\n    this.tag = function (strings) {\n      for (var _len2 = arguments.length, expressions = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        expressions[_key2 - 1] = arguments[_key2];\n      }\n\n      if (typeof strings === 'function') {\n        // if the first argument passed is a function, assume it is a template tag and return\n        // an intermediary tag that processes the template using the aforementioned tag, passing the\n        // result to our tag\n        return _this.interimTag.bind(_this, strings);\n      }\n\n      if (typeof strings === 'string') {\n        // if the first argument passed is a string, just transform it\n        return _this.transformEndResult(strings);\n      }\n\n      // else, return a transformed end result of processing the template with our tag\n      strings = strings.map(_this.transformString.bind(_this));\n      return _this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this, expressions)));\n    };\n\n    // if first argument is an array, extrude it as a list of transformers\n    if (transformers.length > 0 && Array.isArray(transformers[0])) {\n      transformers = transformers[0];\n    }\n\n    // if any transformers are functions, this means they are not initiated - automatically initiate them\n    this.transformers = transformers.map(function (transformer) {\n      return typeof transformer === 'function' ? transformer() : transformer;\n    });\n\n    // return an ES2015 template tag\n    return this.tag;\n  }\n\n  /**\n   * Applies all transformers to a template literal tagged with this method.\n   * If a function is passed as the first argument, assumes the function is a template tag\n   * and applies it to the template, returning a template tag.\n   * @param  {(Function|String|Array<String>)} strings        - Either a template tag or an array containing template strings separated by identifier\n   * @param  {...*}                            ...expressions - Optional list of substitution values.\n   * @return {(String|Function)}                              - Either an intermediary tag function or the results of processing the template.\n   */\n\n\n  _createClass(TemplateTag, [{\n    key: 'interimTag',\n\n\n    /**\n     * An intermediary template tag that receives a template tag and passes the result of calling the template with the received\n     * template tag to our own template tag.\n     * @param  {Function}        nextTag          - the received template tag\n     * @param  {Array<String>}   template         - the template to process\n     * @param  {...*}            ...substitutions - `substitutions` is an array of all substitutions in the template\n     * @return {*}                                - the final processed value\n     */\n    value: function interimTag(previousTag, template) {\n      for (var _len3 = arguments.length, substitutions = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        substitutions[_key3 - 2] = arguments[_key3];\n      }\n\n      return this.tag(_templateObject, previousTag.apply(undefined, [template].concat(substitutions)));\n    }\n\n    /**\n     * Performs bulk processing on the tagged template, transforming each substitution and then\n     * concatenating the resulting values into a string.\n     * @param  {Array<*>} substitutions - an array of all remaining substitutions present in this template\n     * @param  {String}   resultSoFar   - this iteration's result string so far\n     * @param  {String}   remainingPart - the template chunk after the current substitution\n     * @return {String}                 - the result of joining this iteration's processed substitution with the result\n     */\n\n  }, {\n    key: 'processSubstitutions',\n    value: function processSubstitutions(substitutions, resultSoFar, remainingPart) {\n      var substitution = this.transformSubstitution(substitutions.shift(), resultSoFar);\n      return ''.concat(resultSoFar, substitution, remainingPart);\n    }\n\n    /**\n     * Iterate through each transformer, applying the transformer's `onString` method to the template\n     * strings before all substitutions are processed.\n     * @param {String}  str - The input string\n     * @return {String}     - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformString',\n    value: function transformString(str) {\n      var cb = function cb(res, transform) {\n        return transform.onString ? transform.onString(res) : res;\n      };\n      return this.transformers.reduce(cb, str);\n    }\n\n    /**\n     * When a substitution is encountered, iterates through each transformer and applies the transformer's\n     * `onSubstitution` method to the substitution.\n     * @param  {*}      substitution - The current substitution\n     * @param  {String} resultSoFar  - The result up to and excluding this substitution.\n     * @return {*}                   - The final result of applying all substitution transformations.\n     */\n\n  }, {\n    key: 'transformSubstitution',\n    value: function transformSubstitution(substitution, resultSoFar) {\n      var cb = function cb(res, transform) {\n        return transform.onSubstitution ? transform.onSubstitution(res, resultSoFar) : res;\n      };\n      return this.transformers.reduce(cb, substitution);\n    }\n\n    /**\n     * Iterates through each transformer, applying the transformer's `onEndResult` method to the\n     * template literal after all substitutions have finished processing.\n     * @param  {String} endResult - The processed template, just before it is returned from the tag\n     * @return {String}           - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformEndResult',\n    value: function transformEndResult(endResult) {\n      var cb = function cb(res, transform) {\n        return transform.onEndResult ? transform.onEndResult(res) : res;\n      };\n      return this.transformers.reduce(cb, endResult);\n    }\n  }]);\n\n  return TemplateTag;\n}();\n\nexport default TemplateTag;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9UZW1wbGF0ZVRhZy9UZW1wbGF0ZVRhZy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyYW5zZm9ybWVycyIsInRhZyIsInN0cmluZ3MiLCJleHByZXNzaW9ucyIsImludGVyaW1UYWciLCJiaW5kIiwidHJhbnNmb3JtRW5kUmVzdWx0IiwibWFwIiwidHJhbnNmb3JtU3RyaW5nIiwicmVkdWNlIiwicHJvY2Vzc1N1YnN0aXR1dGlvbnMiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJ0cmFuc2Zvcm1lciIsInByZXZpb3VzVGFnIiwidGVtcGxhdGUiLCJzdWJzdGl0dXRpb25zIiwicmVzdWx0U29GYXIiLCJyZW1haW5pbmdQYXJ0Iiwic3Vic3RpdHV0aW9uIiwidHJhbnNmb3JtU3Vic3RpdHV0aW9uIiwic2hpZnQiLCJjb25jYXQiLCJzdHIiLCJjYiIsInJlcyIsInRyYW5zZm9ybSIsIm9uU3RyaW5nIiwib25TdWJzdGl0dXRpb24iLCJlbmRSZXN1bHQiLCJvbkVuZFJlc3VsdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztJQUlxQkEsVztBQUNuQjs7Ozs7O0FBTUEseUJBQTZCO0FBQUE7O0FBQUEsc0NBQWRDLFlBQWM7QUFBZEEsa0JBQWM7QUFBQTs7QUFBQTs7QUFBQSxTQXVCN0JDLEdBdkI2QixHQXVCdkIsVUFBQ0MsT0FBRCxFQUE2QjtBQUFBLHlDQUFoQkMsV0FBZ0I7QUFBaEJBLG1CQUFnQjtBQUFBOztBQUNqQyxVQUFJLE9BQU9ELE9BQVAsS0FBbUIsVUFBdkIsRUFBbUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsZUFBTyxNQUFLRSxVQUFMLENBQWdCQyxJQUFoQixDQUFxQixLQUFyQixFQUEyQkgsT0FBM0IsQ0FBUDtBQUNEOztBQUVELFVBQUksT0FBT0EsT0FBUCxLQUFtQixRQUF2QixFQUFpQztBQUMvQjtBQUNBLGVBQU8sTUFBS0ksa0JBQUwsQ0FBd0JKLE9BQXhCLENBQVA7QUFDRDs7QUFFRDtBQUNBQSxnQkFBVUEsUUFBUUssR0FBUixDQUFZLE1BQUtDLGVBQUwsQ0FBcUJILElBQXJCLENBQTBCLEtBQTFCLENBQVosQ0FBVjtBQUNBLGFBQU8sTUFBS0Msa0JBQUwsQ0FDTEosUUFBUU8sTUFBUixDQUFlLE1BQUtDLG9CQUFMLENBQTBCTCxJQUExQixDQUErQixLQUEvQixFQUFxQ0YsV0FBckMsQ0FBZixDQURLLENBQVA7QUFHRCxLQXpDNEI7O0FBQzNCO0FBQ0EsUUFBSUgsYUFBYVcsTUFBYixHQUFzQixDQUF0QixJQUEyQkMsTUFBTUMsT0FBTixDQUFjYixhQUFhLENBQWIsQ0FBZCxDQUEvQixFQUErRDtBQUM3REEscUJBQWVBLGFBQWEsQ0FBYixDQUFmO0FBQ0Q7O0FBRUQ7QUFDQSxTQUFLQSxZQUFMLEdBQW9CQSxhQUFhTyxHQUFiLENBQWlCLHVCQUFlO0FBQ2xELGFBQU8sT0FBT08sV0FBUCxLQUF1QixVQUF2QixHQUFvQ0EsYUFBcEMsR0FBb0RBLFdBQTNEO0FBQ0QsS0FGbUIsQ0FBcEI7O0FBSUE7QUFDQSxXQUFPLEtBQUtiLEdBQVo7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7Ozs7Ozs7OytCQVFXYyxXLEVBQWFDLFEsRUFBNEI7QUFBQSx5Q0FBZkMsYUFBZTtBQUFmQSxxQkFBZTtBQUFBOztBQUNsRCxhQUFPLEtBQUtoQixHQUFaLGtCQUFrQmMsOEJBQVlDLFFBQVosU0FBeUJDLGFBQXpCLEVBQWxCO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7O3lDQVFxQkEsYSxFQUFlQyxXLEVBQWFDLGEsRUFBZTtBQUM5RCxVQUFNQyxlQUFlLEtBQUtDLHFCQUFMLENBQ25CSixjQUFjSyxLQUFkLEVBRG1CLEVBRW5CSixXQUZtQixDQUFyQjtBQUlBLGFBQU8sR0FBR0ssTUFBSCxDQUFVTCxXQUFWLEVBQXVCRSxZQUF2QixFQUFxQ0QsYUFBckMsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7Ozs7b0NBTWdCSyxHLEVBQUs7QUFDbkIsVUFBTUMsS0FBSyxTQUFMQSxFQUFLLENBQUNDLEdBQUQsRUFBTUMsU0FBTjtBQUFBLGVBQ1RBLFVBQVVDLFFBQVYsR0FBcUJELFVBQVVDLFFBQVYsQ0FBbUJGLEdBQW5CLENBQXJCLEdBQStDQSxHQUR0QztBQUFBLE9BQVg7QUFFQSxhQUFPLEtBQUsxQixZQUFMLENBQWtCUyxNQUFsQixDQUF5QmdCLEVBQXpCLEVBQTZCRCxHQUE3QixDQUFQO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7MENBT3NCSixZLEVBQWNGLFcsRUFBYTtBQUMvQyxVQUFNTyxLQUFLLFNBQUxBLEVBQUssQ0FBQ0MsR0FBRCxFQUFNQyxTQUFOO0FBQUEsZUFDVEEsVUFBVUUsY0FBVixHQUNJRixVQUFVRSxjQUFWLENBQXlCSCxHQUF6QixFQUE4QlIsV0FBOUIsQ0FESixHQUVJUSxHQUhLO0FBQUEsT0FBWDtBQUlBLGFBQU8sS0FBSzFCLFlBQUwsQ0FBa0JTLE1BQWxCLENBQXlCZ0IsRUFBekIsRUFBNkJMLFlBQTdCLENBQVA7QUFDRDs7QUFFRDs7Ozs7Ozs7O3VDQU1tQlUsUyxFQUFXO0FBQzVCLFVBQU1MLEtBQUssU0FBTEEsRUFBSyxDQUFDQyxHQUFELEVBQU1DLFNBQU47QUFBQSxlQUNUQSxVQUFVSSxXQUFWLEdBQXdCSixVQUFVSSxXQUFWLENBQXNCTCxHQUF0QixDQUF4QixHQUFxREEsR0FENUM7QUFBQSxPQUFYO0FBRUEsYUFBTyxLQUFLMUIsWUFBTCxDQUFrQlMsTUFBbEIsQ0FBeUJnQixFQUF6QixFQUE2QkssU0FBN0IsQ0FBUDtBQUNEOzs7Ozs7ZUFuSGtCL0IsVyIsImZpbGUiOiJUZW1wbGF0ZVRhZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGNsYXNzIFRlbXBsYXRlVGFnXG4gKiBAY2xhc3NkZXNjIENvbnN1bWVzIGEgcGlwZWxpbmUgb2YgY29tcG9zYWJsZSB0cmFuc2Zvcm1lciBwbHVnaW5zIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVtcGxhdGVUYWcge1xuICAvKipcbiAgICogY29uc3RydWN0cyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBAY29uc3RydWN0cyBUZW1wbGF0ZVRhZ1xuICAgKiBAcGFyYW0gIHsuLi5PYmplY3R9IFsuLi50cmFuc2Zvcm1lcnNdIC0gYW4gYXJyYXkgb3IgYXJndW1lbnRzIGxpc3Qgb2YgdHJhbnNmb3JtZXJzXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAgICAgICAgICAgICAgICAgICAgLSBhIHRlbXBsYXRlIHRhZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoLi4udHJhbnNmb3JtZXJzKSB7XG4gICAgLy8gaWYgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIGV4dHJ1ZGUgaXQgYXMgYSBsaXN0IG9mIHRyYW5zZm9ybWVyc1xuICAgIGlmICh0cmFuc2Zvcm1lcnMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHRyYW5zZm9ybWVyc1swXSkpIHtcbiAgICAgIHRyYW5zZm9ybWVycyA9IHRyYW5zZm9ybWVyc1swXTtcbiAgICB9XG5cbiAgICAvLyBpZiBhbnkgdHJhbnNmb3JtZXJzIGFyZSBmdW5jdGlvbnMsIHRoaXMgbWVhbnMgdGhleSBhcmUgbm90IGluaXRpYXRlZCAtIGF1dG9tYXRpY2FsbHkgaW5pdGlhdGUgdGhlbVxuICAgIHRoaXMudHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzLm1hcCh0cmFuc2Zvcm1lciA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHRyYW5zZm9ybWVyID09PSAnZnVuY3Rpb24nID8gdHJhbnNmb3JtZXIoKSA6IHRyYW5zZm9ybWVyO1xuICAgIH0pO1xuXG4gICAgLy8gcmV0dXJuIGFuIEVTMjAxNSB0ZW1wbGF0ZSB0YWdcbiAgICByZXR1cm4gdGhpcy50YWc7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyBhbGwgdHJhbnNmb3JtZXJzIHRvIGEgdGVtcGxhdGUgbGl0ZXJhbCB0YWdnZWQgd2l0aCB0aGlzIG1ldGhvZC5cbiAgICogSWYgYSBmdW5jdGlvbiBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCBhc3N1bWVzIHRoZSBmdW5jdGlvbiBpcyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBhbmQgYXBwbGllcyBpdCB0byB0aGUgdGVtcGxhdGUsIHJldHVybmluZyBhIHRlbXBsYXRlIHRhZy5cbiAgICogQHBhcmFtICB7KEZ1bmN0aW9ufFN0cmluZ3xBcnJheTxTdHJpbmc+KX0gc3RyaW5ncyAgICAgICAgLSBFaXRoZXIgYSB0ZW1wbGF0ZSB0YWcgb3IgYW4gYXJyYXkgY29udGFpbmluZyB0ZW1wbGF0ZSBzdHJpbmdzIHNlcGFyYXRlZCBieSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4cHJlc3Npb25zIC0gT3B0aW9uYWwgbGlzdCBvZiBzdWJzdGl0dXRpb24gdmFsdWVzLlxuICAgKiBAcmV0dXJuIHsoU3RyaW5nfEZ1bmN0aW9uKX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIEVpdGhlciBhbiBpbnRlcm1lZGlhcnkgdGFnIGZ1bmN0aW9uIG9yIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIHRlbXBsYXRlLlxuICAgKi9cbiAgdGFnID0gKHN0cmluZ3MsIC4uLmV4cHJlc3Npb25zKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzdHJpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgZnVuY3Rpb24sIGFzc3VtZSBpdCBpcyBhIHRlbXBsYXRlIHRhZyBhbmQgcmV0dXJuXG4gICAgICAvLyBhbiBpbnRlcm1lZGlhcnkgdGFnIHRoYXQgcHJvY2Vzc2VzIHRoZSB0ZW1wbGF0ZSB1c2luZyB0aGUgYWZvcmVtZW50aW9uZWQgdGFnLCBwYXNzaW5nIHRoZVxuICAgICAgLy8gcmVzdWx0IHRvIG91ciB0YWdcbiAgICAgIHJldHVybiB0aGlzLmludGVyaW1UYWcuYmluZCh0aGlzLCBzdHJpbmdzKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHN0cmluZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgc3RyaW5nLCBqdXN0IHRyYW5zZm9ybSBpdFxuICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRW5kUmVzdWx0KHN0cmluZ3MpO1xuICAgIH1cblxuICAgIC8vIGVsc2UsIHJldHVybiBhIHRyYW5zZm9ybWVkIGVuZCByZXN1bHQgb2YgcHJvY2Vzc2luZyB0aGUgdGVtcGxhdGUgd2l0aCBvdXIgdGFnXG4gICAgc3RyaW5ncyA9IHN0cmluZ3MubWFwKHRoaXMudHJhbnNmb3JtU3RyaW5nLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUVuZFJlc3VsdChcbiAgICAgIHN0cmluZ3MucmVkdWNlKHRoaXMucHJvY2Vzc1N1YnN0aXR1dGlvbnMuYmluZCh0aGlzLCBleHByZXNzaW9ucykpLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFuIGludGVybWVkaWFyeSB0ZW1wbGF0ZSB0YWcgdGhhdCByZWNlaXZlcyBhIHRlbXBsYXRlIHRhZyBhbmQgcGFzc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgdGVtcGxhdGUgd2l0aCB0aGUgcmVjZWl2ZWRcbiAgICogdGVtcGxhdGUgdGFnIHRvIG91ciBvd24gdGVtcGxhdGUgdGFnLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgIG5leHRUYWcgICAgICAgICAgLSB0aGUgcmVjZWl2ZWQgdGVtcGxhdGUgdGFnXG4gICAqIEBwYXJhbSAge0FycmF5PFN0cmluZz59ICAgdGVtcGxhdGUgICAgICAgICAtIHRoZSB0ZW1wbGF0ZSB0byBwcm9jZXNzXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgLi4uc3Vic3RpdHV0aW9ucyAtIGBzdWJzdGl0dXRpb25zYCBpcyBhbiBhcnJheSBvZiBhbGwgc3Vic3RpdHV0aW9ucyBpbiB0aGUgdGVtcGxhdGVcbiAgICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gdGhlIGZpbmFsIHByb2Nlc3NlZCB2YWx1ZVxuICAgKi9cbiAgaW50ZXJpbVRhZyhwcmV2aW91c1RhZywgdGVtcGxhdGUsIC4uLnN1YnN0aXR1dGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy50YWdgJHtwcmV2aW91c1RhZyh0ZW1wbGF0ZSwgLi4uc3Vic3RpdHV0aW9ucyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBidWxrIHByb2Nlc3Npbmcgb24gdGhlIHRhZ2dlZCB0ZW1wbGF0ZSwgdHJhbnNmb3JtaW5nIGVhY2ggc3Vic3RpdHV0aW9uIGFuZCB0aGVuXG4gICAqIGNvbmNhdGVuYXRpbmcgdGhlIHJlc3VsdGluZyB2YWx1ZXMgaW50byBhIHN0cmluZy5cbiAgICogQHBhcmFtICB7QXJyYXk8Kj59IHN1YnN0aXR1dGlvbnMgLSBhbiBhcnJheSBvZiBhbGwgcmVtYWluaW5nIHN1YnN0aXR1dGlvbnMgcHJlc2VudCBpbiB0aGlzIHRlbXBsYXRlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gICByZXN1bHRTb0ZhciAgIC0gdGhpcyBpdGVyYXRpb24ncyByZXN1bHQgc3RyaW5nIHNvIGZhclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgcmVtYWluaW5nUGFydCAtIHRoZSB0ZW1wbGF0ZSBjaHVuayBhZnRlciB0aGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgICAgLSB0aGUgcmVzdWx0IG9mIGpvaW5pbmcgdGhpcyBpdGVyYXRpb24ncyBwcm9jZXNzZWQgc3Vic3RpdHV0aW9uIHdpdGggdGhlIHJlc3VsdFxuICAgKi9cbiAgcHJvY2Vzc1N1YnN0aXR1dGlvbnMoc3Vic3RpdHV0aW9ucywgcmVzdWx0U29GYXIsIHJlbWFpbmluZ1BhcnQpIHtcbiAgICBjb25zdCBzdWJzdGl0dXRpb24gPSB0aGlzLnRyYW5zZm9ybVN1YnN0aXR1dGlvbihcbiAgICAgIHN1YnN0aXR1dGlvbnMuc2hpZnQoKSxcbiAgICAgIHJlc3VsdFNvRmFyLFxuICAgICk7XG4gICAgcmV0dXJuICcnLmNvbmNhdChyZXN1bHRTb0Zhciwgc3Vic3RpdHV0aW9uLCByZW1haW5pbmdQYXJ0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggZWFjaCB0cmFuc2Zvcm1lciwgYXBwbHlpbmcgdGhlIHRyYW5zZm9ybWVyJ3MgYG9uU3RyaW5nYCBtZXRob2QgdG8gdGhlIHRlbXBsYXRlXG4gICAqIHN0cmluZ3MgYmVmb3JlIGFsbCBzdWJzdGl0dXRpb25zIGFyZSBwcm9jZXNzZWQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgc3RyIC0gVGhlIGlucHV0IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAtIFRoZSBmaW5hbCByZXN1bHRzIG9mIHByb2Nlc3NpbmcgZWFjaCB0cmFuc2Zvcm1lclxuICAgKi9cbiAgdHJhbnNmb3JtU3RyaW5nKHN0cikge1xuICAgIGNvbnN0IGNiID0gKHJlcywgdHJhbnNmb3JtKSA9PlxuICAgICAgdHJhbnNmb3JtLm9uU3RyaW5nID8gdHJhbnNmb3JtLm9uU3RyaW5nKHJlcykgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3RyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIGEgc3Vic3RpdHV0aW9uIGlzIGVuY291bnRlcmVkLCBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIgYW5kIGFwcGxpZXMgdGhlIHRyYW5zZm9ybWVyJ3NcbiAgICogYG9uU3Vic3RpdHV0aW9uYCBtZXRob2QgdG8gdGhlIHN1YnN0aXR1dGlvbi5cbiAgICogQHBhcmFtICB7Kn0gICAgICBzdWJzdGl0dXRpb24gLSBUaGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHBhcmFtICB7U3RyaW5nfSByZXN1bHRTb0ZhciAgLSBUaGUgcmVzdWx0IHVwIHRvIGFuZCBleGNsdWRpbmcgdGhpcyBzdWJzdGl0dXRpb24uXG4gICAqIEByZXR1cm4geyp9ICAgICAgICAgICAgICAgICAgIC0gVGhlIGZpbmFsIHJlc3VsdCBvZiBhcHBseWluZyBhbGwgc3Vic3RpdHV0aW9uIHRyYW5zZm9ybWF0aW9ucy5cbiAgICovXG4gIHRyYW5zZm9ybVN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgY29uc3QgY2IgPSAocmVzLCB0cmFuc2Zvcm0pID0+XG4gICAgICB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb25cbiAgICAgICAgPyB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb24ocmVzLCByZXN1bHRTb0ZhcilcbiAgICAgICAgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3Vic3RpdHV0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIsIGFwcGx5aW5nIHRoZSB0cmFuc2Zvcm1lcidzIGBvbkVuZFJlc3VsdGAgbWV0aG9kIHRvIHRoZVxuICAgKiB0ZW1wbGF0ZSBsaXRlcmFsIGFmdGVyIGFsbCBzdWJzdGl0dXRpb25zIGhhdmUgZmluaXNoZWQgcHJvY2Vzc2luZy5cbiAgICogQHBhcmFtICB7U3RyaW5nfSBlbmRSZXN1bHQgLSBUaGUgcHJvY2Vzc2VkIHRlbXBsYXRlLCBqdXN0IGJlZm9yZSBpdCBpcyByZXR1cm5lZCBmcm9tIHRoZSB0YWdcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgLSBUaGUgZmluYWwgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIGVhY2ggdHJhbnNmb3JtZXJcbiAgICovXG4gIHRyYW5zZm9ybUVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBjb25zdCBjYiA9IChyZXMsIHRyYW5zZm9ybSkgPT5cbiAgICAgIHRyYW5zZm9ybS5vbkVuZFJlc3VsdCA/IHRyYW5zZm9ybS5vbkVuZFJlc3VsdChyZXMpIDogcmVzO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybWVycy5yZWR1Y2UoY2IsIGVuZFJlc3VsdCk7XG4gIH1cbn1cbiJdfQ==","var defaults = {\n  separator: '',\n  conjunction: '',\n  serial: false\n};\n\n/**\n * Converts an array substitution to a string containing a list\n * @param  {String} [opts.separator = ''] - the character that separates each item\n * @param  {String} [opts.conjunction = '']  - replace the last separator with this\n * @param  {Boolean} [opts.serial = false] - include the separator before the conjunction? (Oxford comma use-case)\n *\n * @return {Object}                     - a TemplateTag transformer\n */\nvar inlineArrayTransformer = function inlineArrayTransformer() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaults;\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      // only operate on arrays\n      if (Array.isArray(substitution)) {\n        var arrayLength = substitution.length;\n        var separator = opts.separator;\n        var conjunction = opts.conjunction;\n        var serial = opts.serial;\n        // join each item in the array into a string where each item is separated by separator\n        // be sure to maintain indentation\n        var indent = resultSoFar.match(/(\\n?[^\\S\\n]+)$/);\n        if (indent) {\n          substitution = substitution.join(separator + indent[1]);\n        } else {\n          substitution = substitution.join(separator + ' ');\n        }\n        // if conjunction is set, replace the last separator with conjunction, but only if there is more than one substitution\n        if (conjunction && arrayLength > 1) {\n          var separatorIndex = substitution.lastIndexOf(separator);\n          substitution = substitution.slice(0, separatorIndex) + (serial ? separator : '') + ' ' + conjunction + substitution.slice(separatorIndex + 1);\n        }\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default inlineArrayTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVBcnJheVRyYW5zZm9ybWVyL2lubGluZUFycmF5VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiZGVmYXVsdHMiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiIsInNlcmlhbCIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJvcHRzIiwib25TdWJzdGl0dXRpb24iLCJzdWJzdGl0dXRpb24iLCJyZXN1bHRTb0ZhciIsIkFycmF5IiwiaXNBcnJheSIsImFycmF5TGVuZ3RoIiwibGVuZ3RoIiwiaW5kZW50IiwibWF0Y2giLCJqb2luIiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsInNsaWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxXQUFXO0FBQ2ZDLGFBQVcsRUFESTtBQUVmQyxlQUFhLEVBRkU7QUFHZkMsVUFBUTtBQUhPLENBQWpCOztBQU1BOzs7Ozs7OztBQVFBLElBQU1DLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUUwsUUFBUjtBQUFBLFNBQXNCO0FBQ25ETSxrQkFEbUQsMEJBQ3BDQyxZQURvQyxFQUN0QkMsV0FEc0IsRUFDVDtBQUN4QztBQUNBLFVBQUlDLE1BQU1DLE9BQU4sQ0FBY0gsWUFBZCxDQUFKLEVBQWlDO0FBQy9CLFlBQU1JLGNBQWNKLGFBQWFLLE1BQWpDO0FBQ0EsWUFBTVgsWUFBWUksS0FBS0osU0FBdkI7QUFDQSxZQUFNQyxjQUFjRyxLQUFLSCxXQUF6QjtBQUNBLFlBQU1DLFNBQVNFLEtBQUtGLE1BQXBCO0FBQ0E7QUFDQTtBQUNBLFlBQU1VLFNBQVNMLFlBQVlNLEtBQVosQ0FBa0IsZ0JBQWxCLENBQWY7QUFDQSxZQUFJRCxNQUFKLEVBQVk7QUFDVk4seUJBQWVBLGFBQWFRLElBQWIsQ0FBa0JkLFlBQVlZLE9BQU8sQ0FBUCxDQUE5QixDQUFmO0FBQ0QsU0FGRCxNQUVPO0FBQ0xOLHlCQUFlQSxhQUFhUSxJQUFiLENBQWtCZCxZQUFZLEdBQTlCLENBQWY7QUFDRDtBQUNEO0FBQ0EsWUFBSUMsZUFBZVMsY0FBYyxDQUFqQyxFQUFvQztBQUNsQyxjQUFNSyxpQkFBaUJULGFBQWFVLFdBQWIsQ0FBeUJoQixTQUF6QixDQUF2QjtBQUNBTSx5QkFDRUEsYUFBYVcsS0FBYixDQUFtQixDQUFuQixFQUFzQkYsY0FBdEIsS0FDQ2IsU0FBU0YsU0FBVCxHQUFxQixFQUR0QixJQUVBLEdBRkEsR0FHQUMsV0FIQSxHQUlBSyxhQUFhVyxLQUFiLENBQW1CRixpQkFBaUIsQ0FBcEMsQ0FMRjtBQU1EO0FBQ0Y7QUFDRCxhQUFPVCxZQUFQO0FBQ0Q7QUE1QmtELEdBQXRCO0FBQUEsQ0FBL0I7O0FBK0JBLGVBQWVILHNCQUFmIiwiZmlsZSI6ImlubGluZUFycmF5VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkZWZhdWx0cyA9IHtcbiAgc2VwYXJhdG9yOiAnJyxcbiAgY29uanVuY3Rpb246ICcnLFxuICBzZXJpYWw6IGZhbHNlLFxufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhcnJheSBzdWJzdGl0dXRpb24gdG8gYSBzdHJpbmcgY29udGFpbmluZyBhIGxpc3RcbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuc2VwYXJhdG9yID0gJyddIC0gdGhlIGNoYXJhY3RlciB0aGF0IHNlcGFyYXRlcyBlYWNoIGl0ZW1cbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuY29uanVuY3Rpb24gPSAnJ10gIC0gcmVwbGFjZSB0aGUgbGFzdCBzZXBhcmF0b3Igd2l0aCB0aGlzXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbb3B0cy5zZXJpYWwgPSBmYWxzZV0gLSBpbmNsdWRlIHRoZSBzZXBhcmF0b3IgYmVmb3JlIHRoZSBjb25qdW5jdGlvbj8gKE94Zm9yZCBjb21tYSB1c2UtY2FzZSlcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgPSAob3B0cyA9IGRlZmF1bHRzKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgLy8gb25seSBvcGVyYXRlIG9uIGFycmF5c1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIGNvbnN0IGFycmF5TGVuZ3RoID0gc3Vic3RpdHV0aW9uLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9IG9wdHMuc2VwYXJhdG9yO1xuICAgICAgY29uc3QgY29uanVuY3Rpb24gPSBvcHRzLmNvbmp1bmN0aW9uO1xuICAgICAgY29uc3Qgc2VyaWFsID0gb3B0cy5zZXJpYWw7XG4gICAgICAvLyBqb2luIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgaW50byBhIHN0cmluZyB3aGVyZSBlYWNoIGl0ZW0gaXMgc2VwYXJhdGVkIGJ5IHNlcGFyYXRvclxuICAgICAgLy8gYmUgc3VyZSB0byBtYWludGFpbiBpbmRlbnRhdGlvblxuICAgICAgY29uc3QgaW5kZW50ID0gcmVzdWx0U29GYXIubWF0Y2goLyhcXG4/W15cXFNcXG5dKykkLyk7XG4gICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5qb2luKHNlcGFyYXRvciArIGluZGVudFsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzdGl0dXRpb24gPSBzdWJzdGl0dXRpb24uam9pbihzZXBhcmF0b3IgKyAnICcpO1xuICAgICAgfVxuICAgICAgLy8gaWYgY29uanVuY3Rpb24gaXMgc2V0LCByZXBsYWNlIHRoZSBsYXN0IHNlcGFyYXRvciB3aXRoIGNvbmp1bmN0aW9uLCBidXQgb25seSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHN1YnN0aXR1dGlvblxuICAgICAgaWYgKGNvbmp1bmN0aW9uICYmIGFycmF5TGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IHN1YnN0aXR1dGlvbi5sYXN0SW5kZXhPZihzZXBhcmF0b3IpO1xuICAgICAgICBzdWJzdGl0dXRpb24gPVxuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZSgwLCBzZXBhcmF0b3JJbmRleCkgK1xuICAgICAgICAgIChzZXJpYWwgPyBzZXBhcmF0b3IgOiAnJykgK1xuICAgICAgICAgICcgJyArXG4gICAgICAgICAgY29uanVuY3Rpb24gK1xuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZShzZXBhcmF0b3JJbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3Vic3RpdHV0aW9uO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGlubGluZUFycmF5VHJhbnNmb3JtZXI7XG4iXX0=","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * strips indentation from a template literal\n * @param  {String} type = 'initial' - whether to remove all indentation or just leading indentation. can be 'all' or 'initial'\n * @return {Object}                  - a TemplateTag transformer\n */\nvar stripIndentTransformer = function stripIndentTransformer() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'initial';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (type === 'initial') {\n        // remove the shortest leading indentation from each line\n        var match = endResult.match(/^[^\\S\\n]*(?=\\S)/gm);\n        var indent = match && Math.min.apply(Math, _toConsumableArray(match.map(function (el) {\n          return el.length;\n        })));\n        if (indent) {\n          var regexp = new RegExp('^.{' + indent + '}', 'gm');\n          return endResult.replace(regexp, '');\n        }\n        return endResult;\n      }\n      if (type === 'all') {\n        // remove all indentation from each line\n        return endResult.replace(/^[^\\S\\n]+/gm, '');\n      }\n      throw new Error('Unknown type: ' + type);\n    }\n  };\n};\n\nexport default stripIndentTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudFRyYW5zZm9ybWVyL3N0cmlwSW5kZW50VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInR5cGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIm1hdGNoIiwiaW5kZW50IiwiTWF0aCIsIm1pbiIsIm1hcCIsImVsIiwibGVuZ3RoIiwicmVnZXhwIiwiUmVnRXhwIiwicmVwbGFjZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7OztBQUtBLElBQU1BLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUSxTQUFSO0FBQUEsU0FBdUI7QUFDcERDLGVBRG9ELHVCQUN4Q0MsU0FEd0MsRUFDN0I7QUFDckIsVUFBSUYsU0FBUyxTQUFiLEVBQXdCO0FBQ3RCO0FBQ0EsWUFBTUcsUUFBUUQsVUFBVUMsS0FBVixDQUFnQixtQkFBaEIsQ0FBZDtBQUNBLFlBQU1DLFNBQVNELFNBQVNFLEtBQUtDLEdBQUwsZ0NBQVlILE1BQU1JLEdBQU4sQ0FBVTtBQUFBLGlCQUFNQyxHQUFHQyxNQUFUO0FBQUEsU0FBVixDQUFaLEVBQXhCO0FBQ0EsWUFBSUwsTUFBSixFQUFZO0FBQ1YsY0FBTU0sU0FBUyxJQUFJQyxNQUFKLFNBQWlCUCxNQUFqQixRQUE0QixJQUE1QixDQUFmO0FBQ0EsaUJBQU9GLFVBQVVVLE9BQVYsQ0FBa0JGLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDtBQUNELGVBQU9SLFNBQVA7QUFDRDtBQUNELFVBQUlGLFNBQVMsS0FBYixFQUFvQjtBQUNsQjtBQUNBLGVBQU9FLFVBQVVVLE9BQVYsQ0FBa0IsYUFBbEIsRUFBaUMsRUFBakMsQ0FBUDtBQUNEO0FBQ0QsWUFBTSxJQUFJQyxLQUFKLG9CQUEyQmIsSUFBM0IsQ0FBTjtBQUNEO0FBakJtRCxHQUF2QjtBQUFBLENBQS9COztBQW9CQSxlQUFlRCxzQkFBZiIsImZpbGUiOiJzdHJpcEluZGVudFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzdHJpcHMgaW5kZW50YXRpb24gZnJvbSBhIHRlbXBsYXRlIGxpdGVyYWxcbiAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSA9ICdpbml0aWFsJyAtIHdoZXRoZXIgdG8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBvciBqdXN0IGxlYWRpbmcgaW5kZW50YXRpb24uIGNhbiBiZSAnYWxsJyBvciAnaW5pdGlhbCdcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAtIGEgVGVtcGxhdGVUYWcgdHJhbnNmb3JtZXJcbiAqL1xuY29uc3Qgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciA9ICh0eXBlID0gJ2luaXRpYWwnKSA9PiAoe1xuICBvbkVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBpZiAodHlwZSA9PT0gJ2luaXRpYWwnKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIHNob3J0ZXN0IGxlYWRpbmcgaW5kZW50YXRpb24gZnJvbSBlYWNoIGxpbmVcbiAgICAgIGNvbnN0IG1hdGNoID0gZW5kUmVzdWx0Lm1hdGNoKC9eW15cXFNcXG5dKig/PVxcUykvZ20pO1xuICAgICAgY29uc3QgaW5kZW50ID0gbWF0Y2ggJiYgTWF0aC5taW4oLi4ubWF0Y2gubWFwKGVsID0+IGVsLmxlbmd0aCkpO1xuICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeLnske2luZGVudH19YCwgJ2dtJyk7XG4gICAgICAgIHJldHVybiBlbmRSZXN1bHQucmVwbGFjZShyZWdleHAsICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbmRSZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnYWxsJykge1xuICAgICAgLy8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBmcm9tIGVhY2ggbGluZVxuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eW15cXFNcXG5dKy9nbSwgJycpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZTogJHt0eXBlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmlwSW5kZW50VHJhbnNmb3JtZXI7XG4iXX0=","/**\n * TemplateTag transformer that trims whitespace on the end result of a tagged template\n * @param  {String} side = '' - The side of the string to trim. Can be 'start' or 'end' (alternatively 'left' or 'right')\n * @return {Object}           - a TemplateTag transformer\n */\nvar trimResultTransformer = function trimResultTransformer() {\n  var side = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (side === '') {\n        return endResult.trim();\n      }\n\n      side = side.toLowerCase();\n\n      if (side === 'start' || side === 'left') {\n        return endResult.replace(/^\\s*/, '');\n      }\n\n      if (side === 'end' || side === 'right') {\n        return endResult.replace(/\\s*$/, '');\n      }\n\n      throw new Error('Side not supported: ' + side);\n    }\n  };\n};\n\nexport default trimResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmltUmVzdWx0VHJhbnNmb3JtZXIvdHJpbVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNpZGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FBS0EsSUFBTUEsd0JBQXdCLFNBQXhCQSxxQkFBd0I7QUFBQSxNQUFDQyxJQUFELHVFQUFRLEVBQVI7QUFBQSxTQUFnQjtBQUM1Q0MsZUFENEMsdUJBQ2hDQyxTQURnQyxFQUNyQjtBQUNyQixVQUFJRixTQUFTLEVBQWIsRUFBaUI7QUFDZixlQUFPRSxVQUFVQyxJQUFWLEVBQVA7QUFDRDs7QUFFREgsYUFBT0EsS0FBS0ksV0FBTCxFQUFQOztBQUVBLFVBQUlKLFNBQVMsT0FBVCxJQUFvQkEsU0FBUyxNQUFqQyxFQUF5QztBQUN2QyxlQUFPRSxVQUFVRyxPQUFWLENBQWtCLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDs7QUFFRCxVQUFJTCxTQUFTLEtBQVQsSUFBa0JBLFNBQVMsT0FBL0IsRUFBd0M7QUFDdEMsZUFBT0UsVUFBVUcsT0FBVixDQUFrQixNQUFsQixFQUEwQixFQUExQixDQUFQO0FBQ0Q7O0FBRUQsWUFBTSxJQUFJQyxLQUFKLDBCQUFpQ04sSUFBakMsQ0FBTjtBQUNEO0FBakIyQyxHQUFoQjtBQUFBLENBQTlCOztBQW9CQSxlQUFlRCxxQkFBZiIsImZpbGUiOiJ0cmltUmVzdWx0VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyIHRoYXQgdHJpbXMgd2hpdGVzcGFjZSBvbiB0aGUgZW5kIHJlc3VsdCBvZiBhIHRhZ2dlZCB0ZW1wbGF0ZVxuICogQHBhcmFtICB7U3RyaW5nfSBzaWRlID0gJycgLSBUaGUgc2lkZSBvZiB0aGUgc3RyaW5nIHRvIHRyaW0uIENhbiBiZSAnc3RhcnQnIG9yICdlbmQnIChhbHRlcm5hdGl2ZWx5ICdsZWZ0JyBvciAncmlnaHQnKVxuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciA9IChzaWRlID0gJycpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChzaWRlID09PSAnJykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC50cmltKCk7XG4gICAgfVxuXG4gICAgc2lkZSA9IHNpZGUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChzaWRlID09PSAnc3RhcnQnIHx8IHNpZGUgPT09ICdsZWZ0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbiAgICB9XG5cbiAgICBpZiAoc2lkZSA9PT0gJ2VuZCcgfHwgc2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNpZGUgbm90IHN1cHBvcnRlZDogJHtzaWRlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lcjtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzL2NvbW1hTGlzdHMuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHMiLCJzZXBhcmF0b3IiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGFBQWEsSUFBSUosV0FBSixDQUNqQkUsdUJBQXVCLEVBQUVHLFdBQVcsR0FBYixFQUF2QixDQURpQixFQUVqQkosc0JBRmlCLEVBR2pCRSxxQkFIaUIsQ0FBbkI7O0FBTUEsZUFBZUMsVUFBZiIsImZpbGUiOiJjb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGNvbW1hTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzQW5kL2NvbW1hTGlzdHNBbmQuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHNBbmQiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZ0JBQWdCLElBQUlKLFdBQUosQ0FDcEJFLHVCQUF1QixFQUFFRyxXQUFXLEdBQWIsRUFBa0JDLGFBQWEsS0FBL0IsRUFBdkIsQ0FEb0IsRUFFcEJMLHNCQUZvQixFQUdwQkUscUJBSG9CLENBQXRCOztBQU1BLGVBQWVDLGFBQWYiLCJmaWxlIjoiY29tbWFMaXN0c0FuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzT3IvY29tbWFMaXN0c09yLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJjb21tYUxpc3RzT3IiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSixXQUFKLENBQ25CRSx1QkFBdUIsRUFBRUcsV0FBVyxHQUFiLEVBQWtCQyxhQUFhLElBQS9CLEVBQXZCLENBRG1CLEVBRW5CTCxzQkFGbUIsRUFHbkJFLHFCQUhtQixDQUFyQjs7QUFNQSxlQUFlQyxZQUFmIiwiZmlsZSI6ImNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzT3IgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJywgY29uanVuY3Rpb246ICdvcicgfSksXG4gIHN0cmlwSW5kZW50VHJhbnNmb3JtZXIsXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbW1hTGlzdHNPcjtcbiJdfQ==","var splitStringTransformer = function splitStringTransformer(splitBy) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (splitBy != null && typeof splitBy === 'string') {\n        if (typeof substitution === 'string' && substitution.includes(splitBy)) {\n          substitution = substitution.split(splitBy);\n        }\n      } else {\n        throw new Error('You need to specify a string character to split by.');\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default splitStringTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyL3NwbGl0U3RyaW5nVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwicmVzdWx0U29GYXIiLCJzcGxpdEJ5IiwiaW5jbHVkZXMiLCJzcGxpdCIsIkVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSx5QkFBeUIsU0FBekJBLHNCQUF5QjtBQUFBLFNBQVk7QUFDekNDLGtCQUR5QywwQkFDMUJDLFlBRDBCLEVBQ1pDLFdBRFksRUFDQztBQUN4QyxVQUFJQyxXQUFXLElBQVgsSUFBbUIsT0FBT0EsT0FBUCxLQUFtQixRQUExQyxFQUFvRDtBQUNsRCxZQUFJLE9BQU9GLFlBQVAsS0FBd0IsUUFBeEIsSUFBb0NBLGFBQWFHLFFBQWIsQ0FBc0JELE9BQXRCLENBQXhDLEVBQXdFO0FBQ3RFRix5QkFBZUEsYUFBYUksS0FBYixDQUFtQkYsT0FBbkIsQ0FBZjtBQUNEO0FBQ0YsT0FKRCxNQUlPO0FBQ0wsY0FBTSxJQUFJRyxLQUFKLENBQVUscURBQVYsQ0FBTjtBQUNEO0FBQ0QsYUFBT0wsWUFBUDtBQUNEO0FBVndDLEdBQVo7QUFBQSxDQUEvQjs7QUFhQSxlQUFlRixzQkFBZiIsImZpbGUiOiJzcGxpdFN0cmluZ1RyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciA9IHNwbGl0QnkgPT4gKHtcbiAgb25TdWJzdGl0dXRpb24oc3Vic3RpdHV0aW9uLCByZXN1bHRTb0Zhcikge1xuICAgIGlmIChzcGxpdEJ5ICE9IG51bGwgJiYgdHlwZW9mIHNwbGl0QnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIHN1YnN0aXR1dGlvbiA9PT0gJ3N0cmluZycgJiYgc3Vic3RpdHV0aW9uLmluY2x1ZGVzKHNwbGl0QnkpKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5zcGxpdChzcGxpdEJ5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBzcGVjaWZ5IGEgc3RyaW5nIGNoYXJhY3RlciB0byBzcGxpdCBieS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyO1xuIl19","var isValidValue = function isValidValue(x) {\n  return x != null && !Number.isNaN(x) && typeof x !== 'boolean';\n};\n\nvar removeNonPrintingValuesTransformer = function removeNonPrintingValuesTransformer() {\n  return {\n    onSubstitution: function onSubstitution(substitution) {\n      if (Array.isArray(substitution)) {\n        return substitution.filter(isValidValue);\n      }\n      if (isValidValue(substitution)) {\n        return substitution;\n      }\n      return '';\n    }\n  };\n};\n\nexport default removeNonPrintingValuesTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiaXNWYWxpZFZhbHVlIiwieCIsIk51bWJlciIsImlzTmFOIiwicmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxlQUFlLFNBQWZBLFlBQWU7QUFBQSxTQUNuQkMsS0FBSyxJQUFMLElBQWEsQ0FBQ0MsT0FBT0MsS0FBUCxDQUFhRixDQUFiLENBQWQsSUFBaUMsT0FBT0EsQ0FBUCxLQUFhLFNBRDNCO0FBQUEsQ0FBckI7O0FBR0EsSUFBTUcscUNBQXFDLFNBQXJDQSxrQ0FBcUM7QUFBQSxTQUFPO0FBQ2hEQyxrQkFEZ0QsMEJBQ2pDQyxZQURpQyxFQUNuQjtBQUMzQixVQUFJQyxNQUFNQyxPQUFOLENBQWNGLFlBQWQsQ0FBSixFQUFpQztBQUMvQixlQUFPQSxhQUFhRyxNQUFiLENBQW9CVCxZQUFwQixDQUFQO0FBQ0Q7QUFDRCxVQUFJQSxhQUFhTSxZQUFiLENBQUosRUFBZ0M7QUFDOUIsZUFBT0EsWUFBUDtBQUNEO0FBQ0QsYUFBTyxFQUFQO0FBQ0Q7QUFUK0MsR0FBUDtBQUFBLENBQTNDOztBQVlBLGVBQWVGLGtDQUFmIiwiZmlsZSI6InJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc1ZhbGlkVmFsdWUgPSB4ID0+XG4gIHggIT0gbnVsbCAmJiAhTnVtYmVyLmlzTmFOKHgpICYmIHR5cGVvZiB4ICE9PSAnYm9vbGVhbic7XG5cbmNvbnN0IHJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIgPSAoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdWJzdGl0dXRpb24pKSB7XG4gICAgICByZXR1cm4gc3Vic3RpdHV0aW9uLmZpbHRlcihpc1ZhbGlkVmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNWYWxpZFZhbHVlKHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIHJldHVybiBzdWJzdGl0dXRpb247XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport removeNonPrintingValuesTransformer from '../removeNonPrintingValuesTransformer';\n\nvar html = new TemplateTag(splitStringTransformer('\\n'), removeNonPrintingValuesTransformer, inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default html;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9odG1sL2h0bWwuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNwbGl0U3RyaW5nVHJhbnNmb3JtZXIiLCJyZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxrQ0FBUCxNQUErQyx1Q0FBL0M7O0FBRUEsSUFBTUMsT0FBTyxJQUFJTixXQUFKLENBQ1hJLHVCQUF1QixJQUF2QixDQURXLEVBRVhDLGtDQUZXLEVBR1hILHNCQUhXLEVBSVhELHNCQUpXLEVBS1hFLHFCQUxXLENBQWI7O0FBUUEsZUFBZUcsSUFBZiIsImZpbGUiOiJodG1sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciBmcm9tICcuLi9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyJztcbmltcG9ydCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIGZyb20gJy4uL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXInO1xuXG5jb25zdCBodG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgcmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lcixcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgaHRtbDtcbiJdfQ==","var replaceSubstitutionTransformer = function replaceSubstitutionTransformer(replaceWhat, replaceWith) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceSubstitutionTransformer requires at least 2 arguments.');\n      }\n\n      // Do not touch if null or undefined\n      if (substitution == null) {\n        return substitution;\n      } else {\n        return substitution.toString().replace(replaceWhat, replaceWith);\n      }\n    }\n  };\n};\n\nexport default replaceSubstitutionTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIvcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvblN1YnN0aXR1dGlvbiIsInN1YnN0aXR1dGlvbiIsInJlc3VsdFNvRmFyIiwiRXJyb3IiLCJ0b1N0cmluZyIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBLElBQU1BLGlDQUFpQyxTQUFqQ0EsOEJBQWlDLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQ3BFQyxrQkFEb0UsMEJBQ3JEQyxZQURxRCxFQUN2Q0MsV0FEdUMsRUFDMUI7QUFDeEMsVUFBSUosZUFBZSxJQUFmLElBQXVCQyxlQUFlLElBQTFDLEVBQWdEO0FBQzlDLGNBQU0sSUFBSUksS0FBSixDQUNKLCtEQURJLENBQU47QUFHRDs7QUFFRDtBQUNBLFVBQUlGLGdCQUFnQixJQUFwQixFQUEwQjtBQUN4QixlQUFPQSxZQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBT0EsYUFBYUcsUUFBYixHQUF3QkMsT0FBeEIsQ0FBZ0NQLFdBQWhDLEVBQTZDQyxXQUE3QyxDQUFQO0FBQ0Q7QUFDRjtBQWRtRSxHQUEvQjtBQUFBLENBQXZDOztBQWlCQSxlQUFlRiw4QkFBZiIsImZpbGUiOiJyZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIgPSAocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgaWYgKHJlcGxhY2VXaGF0ID09IG51bGwgfHwgcmVwbGFjZVdpdGggPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAncmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIHJlcXVpcmVzIGF0IGxlYXN0IDIgYXJndW1lbnRzLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERvIG5vdCB0b3VjaCBpZiBudWxsIG9yIHVuZGVmaW5lZFxuICAgIGlmIChzdWJzdGl0dXRpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbi50b1N0cmluZygpLnJlcGxhY2UocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKTtcbiAgICB9XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport replaceSubstitutionTransformer from '../replaceSubstitutionTransformer';\n\nvar safeHtml = new TemplateTag(splitStringTransformer('\\n'), inlineArrayTransformer, stripIndentTransformer, trimResultTransformer, replaceSubstitutionTransformer(/&/g, '&amp;'), replaceSubstitutionTransformer(/</g, '&lt;'), replaceSubstitutionTransformer(/>/g, '&gt;'), replaceSubstitutionTransformer(/\"/g, '&quot;'), replaceSubstitutionTransformer(/'/g, '&#x27;'), replaceSubstitutionTransformer(/`/g, '&#x60;'));\n\nexport default safeHtml;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zYWZlSHRtbC9zYWZlSHRtbC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInNhZmVIdG1sIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLDhCQUFQLE1BQTJDLG1DQUEzQzs7QUFFQSxJQUFNQyxXQUFXLElBQUlOLFdBQUosQ0FDZkksdUJBQXVCLElBQXZCLENBRGUsRUFFZkYsc0JBRmUsRUFHZkQsc0JBSGUsRUFJZkUscUJBSmUsRUFLZkUsK0JBQStCLElBQS9CLEVBQXFDLE9BQXJDLENBTGUsRUFNZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBTmUsRUFPZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBUGUsRUFRZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBUmUsRUFTZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVGUsRUFVZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVmUsQ0FBakI7O0FBYUEsZUFBZUMsUUFBZiIsImZpbGUiOiJzYWZlSHRtbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHNwbGl0U3RyaW5nVHJhbnNmb3JtZXIgZnJvbSAnLi4vc3BsaXRTdHJpbmdUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcic7XG5cbmNvbnN0IHNhZmVIdG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLyYvZywgJyZhbXA7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvPC9nLCAnJmx0OycpLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLz4vZywgJyZndDsnKSxcbiAgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyKC9cIi9nLCAnJnF1b3Q7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvJy9nLCAnJiN4Mjc7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvYC9nLCAnJiN4NjA7JyksXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBzYWZlSHRtbDtcbiJdfQ==","/**\n * Replaces tabs, newlines and spaces with the chosen value when they occur in sequences\n * @param  {(String|RegExp)} replaceWhat - the value or pattern that should be replaced\n * @param  {*}               replaceWith - the replacement value\n * @return {Object}                      - a TemplateTag transformer\n */\nvar replaceResultTransformer = function replaceResultTransformer(replaceWhat, replaceWith) {\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceResultTransformer requires at least 2 arguments.');\n      }\n      return endResult.replace(replaceWhat, replaceWith);\n    }\n  };\n};\n\nexport default replaceResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIvcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIkVycm9yIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQU1BLElBQU1BLDJCQUEyQixTQUEzQkEsd0JBQTJCLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQzlEQyxlQUQ4RCx1QkFDbERDLFNBRGtELEVBQ3ZDO0FBQ3JCLFVBQUlILGVBQWUsSUFBZixJQUF1QkMsZUFBZSxJQUExQyxFQUFnRDtBQUM5QyxjQUFNLElBQUlHLEtBQUosQ0FDSix5REFESSxDQUFOO0FBR0Q7QUFDRCxhQUFPRCxVQUFVRSxPQUFWLENBQWtCTCxXQUFsQixFQUErQkMsV0FBL0IsQ0FBUDtBQUNEO0FBUjZELEdBQS9CO0FBQUEsQ0FBakM7O0FBV0EsZUFBZUYsd0JBQWYiLCJmaWxlIjoicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXBsYWNlcyB0YWJzLCBuZXdsaW5lcyBhbmQgc3BhY2VzIHdpdGggdGhlIGNob3NlbiB2YWx1ZSB3aGVuIHRoZXkgb2NjdXIgaW4gc2VxdWVuY2VzXG4gKiBAcGFyYW0gIHsoU3RyaW5nfFJlZ0V4cCl9IHJlcGxhY2VXaGF0IC0gdGhlIHZhbHVlIG9yIHBhdHRlcm4gdGhhdCBzaG91bGQgYmUgcmVwbGFjZWRcbiAqIEBwYXJhbSAgeyp9ICAgICAgICAgICAgICAgcmVwbGFjZVdpdGggLSB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciA9IChyZXBsYWNlV2hhdCwgcmVwbGFjZVdpdGgpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChyZXBsYWNlV2hhdCA9PSBudWxsIHx8IHJlcGxhY2VXaXRoID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciByZXF1aXJlcyBhdCBsZWFzdCAyIGFyZ3VtZW50cy4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKHJlcGxhY2VXaGF0LCByZXBsYWNlV2l0aCk7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyO1xuIl19","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLine = new TemplateTag(replaceResultTransformer(/(?:\\n(?:\\s*))+/g, ' '), trimResultTransformer);\n\nexport default oneLine;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lL29uZUxpbmUuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxVQUFVLElBQUlILFdBQUosQ0FDZEUseUJBQXlCLGlCQUF6QixFQUE0QyxHQUE1QyxDQURjLEVBRWRELHFCQUZjLENBQWhCOztBQUtBLGVBQWVFLE9BQWYiLCJmaWxlIjoib25lTGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmUgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxuKD86XFxzKikpKy9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lO1xuIl19","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineTrim = new TemplateTag(replaceResultTransformer(/(?:\\n\\s*)/g, ''), trimResultTransformer);\n\nexport default oneLineTrim;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lVHJpbS9vbmVMaW5lVHJpbS5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVUcmltIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxjQUFjLElBQUlILFdBQUosQ0FDbEJFLHlCQUF5QixZQUF6QixFQUF1QyxFQUF2QyxDQURrQixFQUVsQkQscUJBRmtCLENBQXBCOztBQUtBLGVBQWVFLFdBQWYiLCJmaWxlIjoib25lTGluZVRyaW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lVHJpbSA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXG5cXHMqKS9nLCAnJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVUcmltO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0cy9vbmVMaW5lQ29tbWFMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0cyIsInNlcGFyYXRvciJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMsb0JBQW9CLElBQUlKLFdBQUosQ0FDeEJDLHVCQUF1QixFQUFFSSxXQUFXLEdBQWIsRUFBdkIsQ0FEd0IsRUFFeEJGLHlCQUF5QixVQUF6QixFQUFxQyxHQUFyQyxDQUZ3QixFQUd4QkQscUJBSHdCLENBQTFCOztBQU1BLGVBQWVFLGlCQUFmIiwiZmlsZSI6Im9uZUxpbmVDb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lQ29tbWFMaXN0cyA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnIH0pLFxuICByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIoLyg/OlxccyspL2csICcgJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVDb21tYUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c09yL29uZUxpbmVDb21tYUxpc3RzT3IuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIiwib25lTGluZUNvbW1hTGlzdHNPciIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxzQkFBc0IsSUFBSUosV0FBSixDQUMxQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxJQUEvQixFQUF2QixDQUQwQixFQUUxQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjBCLEVBRzFCRCxxQkFIMEIsQ0FBNUI7O0FBTUEsZUFBZUUsbUJBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgaW5saW5lQXJyYXlUcmFuc2Zvcm1lciBmcm9tICcuLi9pbmxpbmVBcnJheVRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcbmltcG9ydCByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgb25lTGluZUNvbW1hTGlzdHNPciA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnLCBjb25qdW5jdGlvbjogJ29yJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c09yO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c0FuZC9vbmVMaW5lQ29tbWFMaXN0c0FuZC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0c0FuZCIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyx1QkFBdUIsSUFBSUosV0FBSixDQUMzQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxLQUEvQixFQUF2QixDQUQyQixFQUUzQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjJCLEVBRzNCRCxxQkFIMkIsQ0FBN0I7O0FBTUEsZUFBZUUsb0JBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNBbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmVDb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar inlineLists = new TemplateTag(inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default inlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVMaXN0cy9pbmxpbmVMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwiaW5saW5lTGlzdHMiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGNBQWMsSUFBSUosV0FBSixDQUNsQkUsc0JBRGtCLEVBRWxCRCxzQkFGa0IsRUFHbEJFLHFCQUhrQixDQUFwQjs7QUFNQSxlQUFlQyxXQUFmIiwiZmlsZSI6ImlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGlubGluZUxpc3RzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyLFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBpbmxpbmVMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineInlineLists = new TemplateTag(inlineArrayTransformer, replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineInlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lSW5saW5lTGlzdHMvb25lTGluZUlubGluZUxpc3RzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVJbmxpbmVMaXN0cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMscUJBQXFCLElBQUlKLFdBQUosQ0FDekJDLHNCQUR5QixFQUV6QkUseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRnlCLEVBR3pCRCxxQkFIeUIsQ0FBM0I7O0FBTUEsZUFBZUUsa0JBQWYiLCJmaWxlIjoib25lTGluZUlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lSW5saW5lTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIsXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxzKykvZywgJyAnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb25lTGluZUlubGluZUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndent = new TemplateTag(stripIndentTransformer, trimResultTransformer);\n\nexport default stripIndent;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudC9zdHJpcEluZGVudC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJzdHJpcEluZGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsY0FBYyxJQUFJSCxXQUFKLENBQ2xCQyxzQkFEa0IsRUFFbEJDLHFCQUZrQixDQUFwQjs7QUFLQSxlQUFlQyxXQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBzdHJpcEluZGVudCA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnQ7XG4iXX0=","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndents = new TemplateTag(stripIndentTransformer('all'), trimResultTransformer);\n\nexport default stripIndents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudHMvc3RyaXBJbmRlbnRzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInN0cmlwSW5kZW50cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSCxXQUFKLENBQ25CQyx1QkFBdUIsS0FBdkIsQ0FEbUIsRUFFbkJDLHFCQUZtQixDQUFyQjs7QUFLQSxlQUFlQyxZQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgc3RyaXBJbmRlbnRzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyKCdhbGwnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnRzO1xuIl19","import { Grammar } from 'prismjs';\n\nimport { CompletionItem } from '@grafana/ui';\n\nexport const QUERY_COMMANDS: CompletionItem[] = [\n  {\n    label: 'fields',\n    documentation: 'Retrieves the specified fields from log events',\n  },\n  { label: 'display', documentation: 'Specifies which fields to display in the query results' },\n  {\n    label: 'filter',\n    documentation: 'Filters the results of a query based on one or more conditions',\n  },\n  {\n    label: 'stats',\n    documentation: 'Calculates aggregate statistics based on the values of log fields',\n  },\n  { label: 'sort', documentation: 'Sorts the retrieved log events' },\n  { label: 'limit', documentation: 'Specifies the number of log events returned by the query' },\n  {\n    label: 'parse',\n    documentation:\n      'Extracts data from a log field, creating one or more ephemeral fields that you can process further in the query',\n  },\n];\n\nexport const COMPARISON_OPERATORS = ['=', '!=', '<', '<=', '>', '>='];\nexport const ARITHMETIC_OPERATORS = ['+', '-', '*', '/', '^', '%'];\n\nexport const NUMERIC_OPERATORS = [\n  {\n    label: 'abs',\n    detail: 'abs(a)',\n    documentation: 'Absolute value.',\n  },\n  {\n    label: 'ceil',\n    detail: 'ceil(a)',\n    documentation: 'Round to ceiling (the smallest integer that is greater than the value of a).',\n  },\n  {\n    label: 'floor',\n    detail: 'floor(a)',\n    documentation: 'Round to floor (the largest integer that is smaller than the value of a).',\n  },\n  {\n    label: 'greatest',\n    detail: 'greatest(a,b, ... z)',\n    documentation: 'Returns the largest value.',\n  },\n  {\n    label: 'least',\n    detail: 'least(a, b, ... z)',\n    documentation: 'Returns the smallest value.',\n  },\n  {\n    label: 'log',\n    detail: 'log(a)',\n    documentation: 'Natural logarithm.',\n  },\n  {\n    label: 'sqrt',\n    detail: 'sqrt(a)',\n    documentation: 'Square root.',\n  },\n];\n\nexport const GENERAL_FUNCTIONS = [\n  {\n    label: 'ispresent',\n    detail: 'ispresent(fieldname)',\n    documentation: 'Returns true if the field exists.',\n  },\n  {\n    label: 'coalesce',\n    detail: 'coalesce(fieldname1, fieldname2, ... fieldnamex)',\n    documentation: 'Returns the first non-null value from the list.',\n  },\n];\n\nexport const STRING_FUNCTIONS = [\n  {\n    label: 'isempty',\n    detail: 'isempty(fieldname)',\n    documentation: 'Returns true if the field is missing or is an empty string.',\n  },\n  {\n    label: 'isblank',\n    detail: 'isblank(fieldname)',\n    documentation: 'Returns true if the field is missing, an empty string, or contains only white space.',\n  },\n  {\n    label: 'concat',\n    detail: 'concat(string1, string2, ... stringz)',\n    documentation: 'Concatenates the strings.',\n  },\n  {\n    label: 'ltrim',\n    detail: 'ltrim(string) or ltrim(string1, string2)',\n    documentation:\n      'Remove white space from the left of the string. If the function has a second string argument, it removes the characters of string2 from the left of string1.',\n  },\n  {\n    label: 'rtrim',\n    detail: 'rtrim(string) or rtrim(string1, string2)',\n    documentation:\n      'Remove white space from the right of the string. If the function has a second string argument, it removes the characters of string2 from the right of string1.',\n  },\n  {\n    label: 'trim',\n    detail: 'trim(string) or trim(string1, string2)',\n    documentation:\n      'Remove white space from both ends of the string. If the function has a second string argument, it removes the characters of string2 from both sides of string1.',\n  },\n  {\n    label: 'strlen',\n    detail: 'strlen(string)',\n    documentation: 'Returns the length of the string in Unicode code points.',\n  },\n  {\n    label: 'toupper',\n    detail: 'toupper(string)',\n    documentation: 'Converts the string to uppercase.',\n  },\n  {\n    label: 'tolower',\n    detail: 'tolower(string)',\n    documentation: 'Converts the string to lowercase.',\n  },\n  {\n    label: 'substr',\n    detail: 'substr(string1, x), or substr(string1, x, y)',\n    documentation:\n      'Returns a substring from the index specified by the number argument to the end of the string. If the function has a second number argument, it contains the length of the substring to be retrieved.',\n  },\n  {\n    label: 'replace',\n    detail: 'replace(string1, string2, string3)',\n    documentation: 'Replaces all instances of string2 in string1 with string3.',\n  },\n  {\n    label: 'strcontains',\n    detail: 'strcontains(string1, string2)',\n    documentation: 'Returns 1 if string1 contains string2 and 0 otherwise.',\n  },\n];\n\nexport const DATETIME_FUNCTIONS = [\n  {\n    label: 'bin',\n    detail: 'bin(period)',\n    documentation: 'Rounds the value of @timestamp to the given period and then truncates.',\n  },\n  {\n    label: 'datefloor',\n    detail: 'datefloor(a, period)',\n    documentation: 'Truncates the timestamp to the given period.',\n  },\n  {\n    label: 'dateceil',\n    detail: 'dateceil(a, period)',\n    documentation: 'Rounds up the timestamp to the given period and then truncates.',\n  },\n  {\n    label: 'fromMillis',\n    detail: 'fromMillis(fieldname)',\n    documentation:\n      'Interprets the input field as the number of milliseconds since the Unix epoch and converts it to a timestamp.',\n  },\n  {\n    label: 'toMillis',\n    detail: 'toMillis(fieldname)',\n    documentation:\n      'Converts the timestamp found in the named field into a number representing the milliseconds since the Unix epoch.',\n  },\n];\n\nexport const IP_FUNCTIONS = [\n  {\n    label: 'isValidIp',\n    detail: 'isValidIp(fieldname)',\n    documentation: 'Returns true if the field is a valid v4 or v6 IP address.',\n  },\n  {\n    label: 'isValidIpV4',\n    detail: 'isValidIpV4(fieldname)',\n    documentation: 'Returns true if the field is a valid v4 IP address.',\n  },\n  {\n    label: 'isValidIpV6',\n    detail: 'isValidIpV6(fieldname)',\n    documentation: 'Returns true if the field is a valid v6 IP address.',\n  },\n  {\n    label: 'isIpInSubnet',\n    detail: 'isIpInSubnet(fieldname, string)',\n    documentation: 'Returns true if the field is a valid v4 or v6 IP address within the specified v4 or v6 subnet.',\n  },\n  {\n    label: 'isIpv4InSubnet',\n    detail: 'isIpv4InSubnet(fieldname, string)',\n    documentation: 'Returns true if the field is a valid v4 IP address within the specified v4 subnet.',\n  },\n  {\n    label: 'isIpv6InSubnet',\n    detail: 'isIpv6InSubnet(fieldname, string)',\n    documentation: 'Returns true if the field is a valid v6 IP address within the specified v6 subnet.',\n  },\n];\n\nexport const BOOLEAN_FUNCTIONS = [\n  {\n    label: 'ispresent',\n    detail: 'ispresent(fieldname)',\n    documentation: 'Returns true if the field exists.',\n  },\n  {\n    label: 'isempty',\n    detail: 'isempty(fieldname)',\n    documentation: 'Returns true if the field is missing or is an empty string.',\n  },\n  {\n    label: 'isblank',\n    detail: 'isblank(fieldname)',\n    documentation: 'Returns true if the field is missing, an empty string, or contains only white space.',\n  },\n  {\n    label: 'strcontains',\n    detail: 'strcontains(string1, string2)',\n    documentation: 'Returns 1 if string1 contains string2 and 0 otherwise.',\n  },\n  ...IP_FUNCTIONS,\n];\n\nexport const AGGREGATION_FUNCTIONS_STATS = [\n  {\n    label: 'avg',\n    detail: 'avg(NumericFieldname)',\n    documentation: 'The average of the values in the specified field.',\n  },\n  {\n    label: 'count',\n    detail: 'count(fieldname) or count(*)',\n    documentation: 'Counts the log records.',\n  },\n  {\n    label: 'count_distinct',\n    detail: 'count_distinct(fieldname)',\n    documentation: 'Returns the number of unique values for the field.',\n  },\n  {\n    label: 'max',\n    detail: 'max(fieldname)',\n    documentation: 'The maximum of the values for this log field in the queried logs.',\n  },\n  {\n    label: 'min',\n    detail: 'min(fieldname)',\n    documentation: 'The minimum of the values for this log field in the queried logs.',\n  },\n  {\n    label: 'pct',\n    detail: 'pct(fieldname, value)',\n    documentation: 'A percentile indicates the relative standing of a value in a datas.',\n  },\n  {\n    label: 'stddev',\n    detail: 'stddev(NumericFieldname)',\n    documentation: 'The standard deviation of the values in the specified field.',\n  },\n  {\n    label: 'sum',\n    detail: 'sum(NumericFieldname)',\n    documentation: 'The sum of the values in the specified field.',\n  },\n];\n\nexport const NON_AGGREGATION_FUNCS_STATS = [\n  {\n    label: 'earliest',\n    detail: 'earliest(fieldname)',\n    documentation:\n      'Returns the value of fieldName from the log event that has the earliest time stamp in the queried logs.',\n  },\n  {\n    label: 'latest',\n    detail: 'latest(fieldname)',\n    documentation:\n      'Returns the value of fieldName from the log event that has the latest time stamp in the queried logs.',\n  },\n  {\n    label: 'sortsFirst',\n    detail: 'sortsFirst(fieldname)',\n    documentation: 'Returns the value of fieldName that sorts first in the queried logs.',\n  },\n  {\n    label: 'sortsLast',\n    detail: 'sortsLast(fieldname)',\n    documentation: 'Returns the value of fieldName that sorts last in the queried logs.',\n  },\n];\n\nexport const STATS_FUNCS = [...AGGREGATION_FUNCTIONS_STATS, ...NON_AGGREGATION_FUNCS_STATS];\n\nexport const KEYWORDS = ['as', 'like', 'by', 'in', 'desc', 'asc'];\nexport const FIELD_AND_FILTER_FUNCTIONS = [\n  ...NUMERIC_OPERATORS,\n  ...GENERAL_FUNCTIONS,\n  ...STRING_FUNCTIONS,\n  ...DATETIME_FUNCTIONS,\n  ...IP_FUNCTIONS,\n];\n\nexport const FUNCTIONS = [...FIELD_AND_FILTER_FUNCTIONS, ...STATS_FUNCS];\n\nconst tokenizer: Grammar = {\n  comment: {\n    pattern: /^#.*/,\n    greedy: true,\n  },\n  backticks: {\n    pattern: /`.*?`/,\n    alias: 'string',\n    greedy: true,\n  },\n  quote: {\n    pattern: /\".*?\"/,\n    alias: 'string',\n    greedy: true,\n  },\n  regex: {\n    pattern: /\\/.*?\\/(?=\\||\\s*$|,)/,\n    greedy: true,\n  },\n  'query-command': {\n    pattern: new RegExp(`\\\\b(?:${QUERY_COMMANDS.map((command) => command.label).join('|')})\\\\b`, 'i'),\n    alias: 'function',\n  },\n  function: {\n    pattern: new RegExp(`\\\\b(?:${FUNCTIONS.map((f) => f.label).join('|')})\\\\b`, 'i'),\n  },\n  keyword: {\n    pattern: new RegExp(`(\\\\s+)(${KEYWORDS.join('|')})(?=\\\\s+)`, 'i'),\n    lookbehind: true,\n  },\n  // 'log-group-name': {\n  //   pattern: /[\\.\\-_/#A-Za-z0-9]+/,\n  // },\n  'field-name': {\n    pattern: /(@?[_a-zA-Z]+[_.0-9a-zA-Z]*)|(`((\\\\`)|([^`]))*?`)/,\n    greedy: true,\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n  'command-separator': {\n    pattern: /\\|/,\n    alias: 'punctuation',\n  },\n  'comparison-operator': {\n    pattern: /([<>]=?)|(!?=)/,\n  },\n  punctuation: /[{}()`,.]/,\n  whitespace: /\\s+/,\n};\n\nexport default tokenizer;\n","import { css, cx } from '@emotion/css';\nimport { stripIndent, stripIndents } from 'common-tags';\nimport Prism from 'prismjs';\nimport React, { PureComponent } from 'react';\n\nimport { QueryEditorHelpProps } from '@grafana/data';\nimport { flattenTokens } from '@grafana/ui/src/slate-plugins/slate-prism';\n\nimport tokenizer from '../syntax';\nimport { CloudWatchQuery } from '../types';\n\ninterface QueryExample {\n  category: string;\n  examples: Array<{\n    title: string;\n    expr: string;\n  }>;\n}\n\nconst CLIQ_EXAMPLES: QueryExample[] = [\n  {\n    category: 'Lambda',\n    examples: [\n      {\n        title: 'View latency statistics for 5-minute intervals',\n        expr: stripIndents`filter @type = \"REPORT\" |\n                           stats avg(@duration), max(@duration), min(@duration) by bin(5m)`,\n      },\n      {\n        title: 'Determine the amount of overprovisioned memory',\n        expr: stripIndent`\n        filter @type = \"REPORT\" |\n        stats max(@memorySize / 1024 / 1024) as provisonedMemoryMB,\n              min(@maxMemoryUsed / 1024 / 1024) as smallestMemoryRequestMB,\n              avg(@maxMemoryUsed / 1024 / 1024) as avgMemoryUsedMB,\n              max(@maxMemoryUsed / 1024 / 1024) as maxMemoryUsedMB,\n              provisonedMemoryMB - maxMemoryUsedMB as overProvisionedMB`,\n      },\n      {\n        title: 'Find the most expensive requests',\n        expr: stripIndents`filter @type = \"REPORT\" |\n                           fields @requestId, @billedDuration |\n                           sort by @billedDuration desc`,\n      },\n    ],\n  },\n\n  {\n    category: 'VPC Flow Logs',\n    examples: [\n      {\n        title: 'Average, min, and max byte transfers by source and destination IP addresses',\n        expr: `stats avg(bytes), min(bytes), max(bytes) by srcAddr, dstAddr`,\n      },\n      {\n        title: 'IP addresses using UDP transfer protocol',\n        expr: 'filter protocol=17 | stats count(*) by srcAddr',\n      },\n      {\n        title: 'Top 10 byte transfers by source and destination IP addresses',\n        expr: stripIndents`stats sum(bytes) as bytesTransferred by srcAddr, dstAddr |\n                           sort bytesTransferred desc |\n                           limit 10`,\n      },\n      {\n        title: 'Top 20 source IP addresses with highest number of rejected requests',\n        expr: stripIndents`filter action=\"REJECT\" |\n                           stats count(*) as numRejections by srcAddr |\n                           sort numRejections desc |\n                           limit 20`,\n      },\n    ],\n  },\n  {\n    category: 'CloudTrail',\n    examples: [\n      {\n        title: 'Number of log entries by service, event type, and region',\n        expr: 'stats count(*) by eventSource, eventName, awsRegion',\n      },\n\n      {\n        title: 'Number of log entries by region and EC2 event type',\n        expr: stripIndents`filter eventSource=\"ec2.amazonaws.com\" |\n                           stats count(*) as eventCount by eventName, awsRegion |\n                           sort eventCount desc`,\n      },\n\n      {\n        title: 'Regions, usernames, and ARNs of newly created IAM users',\n        expr: stripIndents`filter eventName=\"CreateUser\" |\n                           fields awsRegion, requestParameters.userName, responseElements.user.arn`,\n      },\n    ],\n  },\n  {\n    category: 'Common Queries',\n    examples: [\n      {\n        title: '25 most recently added log events',\n        expr: stripIndents`fields @timestamp, @message |\n                           sort @timestamp desc |\n                           limit 25`,\n      },\n      {\n        title: 'Number of exceptions logged every 5 minutes',\n        expr: stripIndents`filter @message like /Exception/ |\n                           stats count(*) as exceptionCount by bin(5m) |\n                           sort exceptionCount desc`,\n      },\n      {\n        title: 'List of log events that are not exceptions',\n        expr: 'fields @message | filter @message not like /Exception/',\n      },\n    ],\n  },\n  {\n    category: 'Route 53',\n    examples: [\n      {\n        title: 'Number of requests received every 10  minutes by edge location',\n        expr: 'stats count(*) by queryType, bin(10m)',\n      },\n      {\n        title: 'Number of unsuccessful requests by domain',\n        expr: 'filter responseCode=\"SERVFAIL\" | stats count(*) by queryName',\n      },\n      {\n        title: 'Number of requests received every 10  minutes by edge location',\n        expr: 'stats count(*) as numRequests by resolverIp | sort numRequests desc | limit 10',\n      },\n    ],\n  },\n  {\n    category: 'AWS AppSync',\n    examples: [\n      {\n        title: 'Number of unique HTTP status codes',\n        expr: stripIndents`fields ispresent(graphQLAPIId) as isApi |\n                           filter isApi |\n                           filter logType = \"RequestSummary\" |\n                           stats count() as statusCount by statusCode |\n                           sort statusCount desc`,\n      },\n      {\n        title: 'Top 10 resolvers with maximum latency',\n        expr: stripIndents`fields resolverArn, duration |\n                           filter logType = \"Tracing\" |\n                           sort duration desc |\n                           limit 10`,\n      },\n      {\n        title: 'Most frequently invoked resolvers',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           stats count() as invocationCount by resolverArn |\n                           filter isRes |\n                           filter logType = \"Tracing\" |\n                           sort invocationCount desc |\n                           limit 10`,\n      },\n      {\n        title: 'Resolvers with most errors in mapping templates',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           stats count() as errorCount by resolverArn, logType |\n                           filter isRes and (logType = \"RequestMapping\" or logType = \"ResponseMapping\") and fieldInError |\n                           sort errorCount desc |\n                           limit 10`,\n      },\n      {\n        title: 'Field latency statistics',\n        expr: stripIndents`fields requestId, latency |\n                           filter logType = \"RequestSummary\" |\n                           sort latency desc |\n                           limit 10`,\n      },\n      {\n        title: 'Resolver latency statistics',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           filter isRes |\n                           filter logType = \"Tracing\" |\n                           stats min(duration), max(duration), avg(duration) as avgDur by resolverArn |\n                           sort avgDur desc |\n                           limit 10`,\n      },\n      {\n        title: 'Top 10 requests with maximum latency',\n        expr: stripIndents`fields requestId, latency |\n                           filter logType = \"RequestSummary\" |\n                           sort latency desc |\n                           limit 10`,\n      },\n    ],\n  },\n];\n\nfunction renderHighlightedMarkup(code: string, keyPrefix: string) {\n  const grammar = tokenizer;\n  const tokens = flattenTokens(Prism.tokenize(code, grammar));\n  const spans = tokens\n    .filter((token) => typeof token !== 'string')\n    .map((token, i) => {\n      return (\n        <span\n          className={`prism-token token ${token.types.join(' ')} ${token.aliases.join(' ')}`}\n          key={`${keyPrefix}-token-${i}`}\n        >\n          {token.content}\n        </span>\n      );\n    });\n\n  return <div className=\"slate-query-field\">{spans}</div>;\n}\n\nconst exampleCategory = css`\n  margin-top: 5px;\n`;\n\nexport default class LogsCheatSheet extends PureComponent<\n  QueryEditorHelpProps<CloudWatchQuery>,\n  { userExamples: string[] }\n> {\n  onClickExample(query: CloudWatchQuery) {\n    this.props.onClickExample(query);\n  }\n\n  renderExpression(expr: string, keyPrefix: string) {\n    return (\n      <div\n        className=\"cheat-sheet-item__example\"\n        key={expr}\n        onClick={() =>\n          this.onClickExample({\n            refId: this.props.query.refId ?? 'A',\n            expression: expr,\n            queryMode: 'Logs',\n            region: this.props.query.region,\n            id: this.props.query.refId ?? 'A',\n            logGroupNames: 'logGroupNames' in this.props.query ? this.props.query.logGroupNames : [],\n          })\n        }\n      >\n        <pre>{renderHighlightedMarkup(expr, keyPrefix)}</pre>\n      </div>\n    );\n  }\n\n  renderLogsCheatSheet() {\n    return (\n      <div>\n        <h2>CloudWatch Logs Cheat Sheet</h2>\n        {CLIQ_EXAMPLES.map((cat, i) => (\n          <div key={`${cat.category}-${i}`}>\n            <div className={`cheat-sheet-item__title ${cx(exampleCategory)}`}>{cat.category}</div>\n            {cat.examples.map((item, j) => (\n              <div className=\"cheat-sheet-item\" key={`item-${j}`}>\n                <h4>{item.title}</h4>\n                {this.renderExpression(item.expr, `item-${j}`)}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>CloudWatch Logs cheat sheet</h3>\n        {CLIQ_EXAMPLES.map((cat, i) => (\n          <div key={`cat-${i}`}>\n            <div className={`cheat-sheet-item__title ${cx(exampleCategory)}`}>{cat.category}</div>\n            {cat.examples.map((item, j) => (\n              <div className=\"cheat-sheet-item\" key={`item-${j}`}>\n                <h4>{item.title}</h4>\n                {this.renderExpression(item.expr, `item-${j}`)}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n","import { AnnotationQuery } from '@grafana/data';\n\nimport { CloudWatchAnnotationQuery, CloudWatchLogsQuery, CloudWatchMetricsQuery, CloudWatchQuery } from './types';\n\nexport const isCloudWatchLogsQuery = (cloudwatchQuery: CloudWatchQuery): cloudwatchQuery is CloudWatchLogsQuery =>\n  cloudwatchQuery.queryMode === 'Logs';\n\nexport const isCloudWatchMetricsQuery = (cloudwatchQuery: CloudWatchQuery): cloudwatchQuery is CloudWatchMetricsQuery =>\n  cloudwatchQuery.queryMode === 'Metrics' || !cloudwatchQuery.hasOwnProperty('queryMode'); // in early versions of this plugin, queryMode wasn't defined in a CloudWatchMetricsQuery\n\nexport const isCloudWatchAnnotationQuery = (\n  cloudwatchQuery: CloudWatchQuery\n): cloudwatchQuery is CloudWatchAnnotationQuery => cloudwatchQuery.queryMode === 'Annotations';\n\nexport const isCloudWatchAnnotation = (query: unknown): query is AnnotationQuery<CloudWatchAnnotationQuery> =>\n  (query as AnnotationQuery<CloudWatchAnnotationQuery>).target?.queryMode === 'Annotations';\n","import { css, cx } from '@emotion/css';\nimport React, { FunctionComponent, useMemo } from 'react';\nimport { useAsyncFn } from 'react-use';\n\nimport { GrafanaTheme2, SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, InputGroup } from '@grafana/experimental';\nimport { Select, stylesFactory, useTheme2 } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../../datasource';\nimport { Dimensions, MetricStat } from '../../types';\nimport { appendTemplateVariables } from '../../utils/utils';\n\nimport { DimensionFilterCondition } from './Dimensions';\n\nexport interface Props {\n  metricStat: MetricStat;\n  datasource: CloudWatchDatasource;\n  filter: DimensionFilterCondition;\n  dimensionKeys: Array<SelectableValue<string>>;\n  disableExpressions: boolean;\n  onChange: (value: DimensionFilterCondition) => void;\n  onDelete: () => void;\n}\n\nconst wildcardOption = { value: '*', label: '*' };\n\nconst excludeCurrentKey = (dimensions: Dimensions, currentKey: string | undefined) =>\n  Object.entries(dimensions ?? {}).reduce<Dimensions>((acc, [key, value]) => {\n    if (key !== currentKey) {\n      return { ...acc, [key]: value };\n    }\n    return acc;\n  }, {});\n\nexport const FilterItem: FunctionComponent<Props> = ({\n  filter,\n  metricStat: { region, namespace, metricName, dimensions, accountId },\n  datasource,\n  dimensionKeys,\n  disableExpressions,\n  onChange,\n  onDelete,\n}) => {\n  const dimensionsExcludingCurrentKey = useMemo(\n    () => excludeCurrentKey(dimensions ?? {}, filter.key),\n    [dimensions, filter]\n  );\n\n  const loadDimensionValues = async () => {\n    if (!filter.key) {\n      return [];\n    }\n\n    return datasource.api\n      .getDimensionValues({\n        dimensionKey: filter.key,\n        dimensionFilters: dimensionsExcludingCurrentKey,\n        region,\n        namespace,\n        metricName,\n        accountId,\n      })\n      .then((result: Array<SelectableValue<string>>) => {\n        if (result.length && !disableExpressions && !result.some((o) => o.value === wildcardOption.value)) {\n          result.unshift(wildcardOption);\n        }\n        return appendTemplateVariables(datasource, result);\n      });\n  };\n\n  const [state, loadOptions] = useAsyncFn(loadDimensionValues, [\n    filter.key,\n    dimensions,\n    region,\n    namespace,\n    metricName,\n    accountId,\n  ]);\n  const theme = useTheme2();\n  const styles = getOperatorStyles(theme);\n\n  return (\n    <div data-testid=\"cloudwatch-dimensions-filter-item\">\n      <InputGroup>\n        <Select\n          aria-label=\"Dimensions filter key\"\n          inputId=\"cloudwatch-dimensions-filter-item-key\"\n          width=\"auto\"\n          value={filter.key ? toOption(filter.key) : null}\n          allowCustomValue\n          options={dimensionKeys}\n          onChange={(change) => {\n            if (change.label) {\n              onChange({ key: change.label, value: undefined });\n            }\n          }}\n        />\n\n        <span className={cx(styles.root)}>=</span>\n\n        <Select\n          aria-label=\"Dimensions filter value\"\n          inputId=\"cloudwatch-dimensions-filter-item-value\"\n          onOpenMenu={loadOptions}\n          width=\"auto\"\n          value={filter.value ? toOption(filter.value) : null}\n          allowCustomValue\n          isLoading={state.loading}\n          options={state.value}\n          onChange={(change) => {\n            if (change.value) {\n              onChange({ ...filter, value: change.value });\n            }\n          }}\n        />\n        <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} type=\"button\" />\n      </InputGroup>\n    </div>\n  );\n};\n\nconst getOperatorStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    padding: theme.spacing(0, 1),\n    alignSelf: 'center',\n  }),\n}));\n","import { isEqual } from 'lodash';\nimport React, { useMemo, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorList } from '@grafana/experimental';\n\nimport { CloudWatchDatasource } from '../../datasource';\nimport { Dimensions as DimensionsType, MetricStat } from '../../types';\n\nimport { FilterItem } from './FilterItem';\n\nexport interface Props {\n  metricStat: MetricStat;\n  onChange: (dimensions: DimensionsType) => void;\n  datasource: CloudWatchDatasource;\n  dimensionKeys: Array<SelectableValue<string>>;\n  disableExpressions: boolean;\n}\n\nexport interface DimensionFilterCondition {\n  key?: string;\n  operator?: string;\n  value?: string;\n}\n\nconst dimensionsToFilterConditions = (dimensions: DimensionsType | undefined) =>\n  Object.entries(dimensions ?? {}).reduce<DimensionFilterCondition[]>((acc, [key, value]) => {\n    if (!value) {\n      return acc;\n    }\n\n    // Previously, we only appended to the `acc`umulated dimensions if the value was a string.\n    // However, Cloudwatch can present dimensions with single-value arrays, e.g.\n    //   k: FunctionName\n    //   v: ['MyLambdaFunction']\n    // in which case we grab the single-value from the Array and use that as the value.\n    let v = '';\n    if (typeof value === 'string') {\n      v = value;\n    } else if (Array.isArray(value) && typeof value[0] === 'string') {\n      v = value[0];\n    }\n\n    if (!v) {\n      return acc;\n    }\n\n    const filter = {\n      key: key,\n      value: v,\n      operator: '=',\n    };\n    return [...acc, filter];\n  }, []);\n\nconst filterConditionsToDimensions = (filters: DimensionFilterCondition[]) => {\n  return filters.reduce<DimensionsType>((acc, { key, value }) => {\n    if (key && value) {\n      return { ...acc, [key]: value };\n    }\n    return acc;\n  }, {});\n};\n\nexport const Dimensions = ({ metricStat, datasource, dimensionKeys, disableExpressions, onChange }: Props) => {\n  const dimensionFilters = useMemo(() => dimensionsToFilterConditions(metricStat.dimensions), [metricStat.dimensions]);\n  const [items, setItems] = useState<DimensionFilterCondition[]>(dimensionFilters);\n  const onDimensionsChange = (newItems: Array<Partial<DimensionFilterCondition>>) => {\n    setItems(newItems);\n\n    // The onChange event should only be triggered in the case there is a complete dimension object.\n    // So when a new key is added that does not yet have a value, it should not trigger an onChange event.\n    const newDimensions = filterConditionsToDimensions(newItems);\n    if (!isEqual(newDimensions, metricStat.dimensions)) {\n      onChange(newDimensions);\n    }\n  };\n\n  return (\n    <EditorList\n      items={items}\n      onChange={onDimensionsChange}\n      renderItem={makeRenderFilter(datasource, metricStat, dimensionKeys, disableExpressions)}\n    />\n  );\n};\n\nfunction makeRenderFilter(\n  datasource: CloudWatchDatasource,\n  metricStat: MetricStat,\n  dimensionKeys: Array<SelectableValue<string>>,\n  disableExpressions: boolean\n) {\n  function renderFilter(\n    item: DimensionFilterCondition,\n    onChange: (item: DimensionFilterCondition) => void,\n    onDelete: () => void\n  ) {\n    return (\n      <FilterItem\n        filter={item}\n        onChange={(item) => onChange(item)}\n        datasource={datasource}\n        metricStat={metricStat}\n        disableExpressions={disableExpressions}\n        dimensionKeys={dimensionKeys}\n        onDelete={onDelete}\n      />\n    );\n  }\n\n  return renderFilter;\n}\n","const JSURL = require('jsurl');\n\nexport interface AwsUrl {\n  end: string;\n  start: string;\n  timeType?: 'ABSOLUTE' | 'RELATIVE';\n  tz?: 'local' | 'UTC';\n  unit?: string;\n  editorString: string;\n  isLiveTail: boolean;\n  source: string[];\n}\n\nexport function encodeUrl(obj: AwsUrl, region: string): string {\n  return `https://${region}.console.aws.amazon.com/cloudwatch/home?region=${region}#logs-insights:queryDetail=${JSURL.stringify(\n    obj\n  )}`;\n}\n","import React, { Component } from 'react';\n\nimport { PanelData } from '@grafana/data';\nimport { Icon } from '@grafana/ui';\n\nimport { encodeUrl, AwsUrl } from '../aws_url';\nimport { CloudWatchDatasource } from '../datasource';\nimport { CloudWatchLogsQuery } from '../types';\n\ninterface Props {\n  query: CloudWatchLogsQuery;\n  panelData?: PanelData;\n  datasource: CloudWatchDatasource;\n}\n\ninterface State {\n  href: string;\n}\n\nexport default class CloudWatchLink extends Component<Props, State> {\n  state: State = { href: '' };\n\n  async componentDidUpdate(prevProps: Props) {\n    const { panelData: panelDataNew } = this.props;\n    const { panelData: panelDataOld } = prevProps;\n\n    if (panelDataOld !== panelDataNew && panelDataNew?.request) {\n      const href = this.getExternalLink();\n      this.setState({ href });\n    }\n  }\n\n  getExternalLink(): string {\n    const { query, panelData, datasource } = this.props;\n\n    const range = panelData?.request?.range;\n\n    if (!range) {\n      return '';\n    }\n\n    const start = range.from.toISOString();\n    const end = range.to.toISOString();\n\n    const urlProps: AwsUrl = {\n      end,\n      start,\n      timeType: 'ABSOLUTE',\n      tz: 'UTC',\n      editorString: query.expression ?? '',\n      isLiveTail: false,\n      source: query.logGroupNames ?? [],\n    };\n\n    return encodeUrl(urlProps, datasource.api.getActualRegion(query.region));\n  }\n\n  render() {\n    const { href } = this.state;\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n        <Icon name=\"share-alt\" /> CloudWatch Logs Insights\n      </a>\n    );\n  }\n}\n","const byRE = /\\s+by\\s+/im;\n\n/**\n * groups look like this: (@a.foo)( as )(bar),\n * group 1 is the field, group 2 is \" as \" and group 3 is the alias\n * this regex will not advance past any non-identifier or whitespace characters, e.g. |\n */\nconst groupsRE = /([\\w$@().]+)(?:(\\s+as\\s+)([\\w$]+))?\\s*,?\\s*/iy;\n\nexport function getStatsGroups(query: string): string[] {\n  let groups = [];\n\n  // find \" by \"\n  let b;\n  if ((b = query.match(byRE))) {\n    // continue incremental scanning from there for groups & aliases\n    groupsRE.lastIndex = b.index! + b[0].length;\n\n    let g;\n    while ((g = groupsRE.exec(query))) {\n      groups.push(g[2] ? g[3] : g[1]);\n      groupsRE.lastIndex = g.index + g[0].length;\n    }\n  }\n\n  return groups;\n}\n","import { useEffect, useState } from 'react';\nimport { useAsyncFn, useDeepCompareEffect } from 'react-use';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { CloudWatchAPI } from './api';\nimport { CloudWatchDatasource } from './datasource';\nimport { GetDimensionKeysRequest, GetMetricsRequest } from './types';\nimport { appendTemplateVariables } from './utils/utils';\n\nexport const useRegions = (datasource: CloudWatchDatasource): [Array<SelectableValue<string>>, boolean] => {\n  const [regionsIsLoading, setRegionsIsLoading] = useState<boolean>(false);\n  const [regions, setRegions] = useState<Array<SelectableValue<string>>>([{ label: 'default', value: 'default' }]);\n\n  useEffect(() => {\n    setRegionsIsLoading(true);\n\n    const variableOptionGroup = {\n      label: 'Template Variables',\n      options: datasource.getVariables().map(toOption),\n    };\n\n    datasource.api\n      .getRegions()\n      .then((regions: Array<SelectableValue<string>>) => setRegions([...regions, variableOptionGroup]))\n      .finally(() => setRegionsIsLoading(false));\n  }, [datasource]);\n\n  return [regions, regionsIsLoading];\n};\n\nexport const useNamespaces = (datasource: CloudWatchDatasource) => {\n  const [namespaces, setNamespaces] = useState<Array<SelectableValue<string>>>([]);\n  useEffect(() => {\n    datasource.api.getNamespaces().then((namespaces) => {\n      setNamespaces(appendTemplateVariables(datasource, namespaces));\n    });\n  }, [datasource]);\n\n  return namespaces;\n};\n\nexport const useMetrics = (datasource: CloudWatchDatasource, { region, namespace, accountId }: GetMetricsRequest) => {\n  const [metrics, setMetrics] = useState<Array<SelectableValue<string>>>([]);\n\n  // need to ensure dependency array below recieves the interpolated value so that the effect is triggered when a variable is changed\n  if (region) {\n    region = datasource.templateSrv.replace(region, {});\n  }\n  if (namespace) {\n    namespace = datasource.templateSrv.replace(namespace, {});\n  }\n\n  if (accountId) {\n    accountId = datasource.templateSrv.replace(accountId, {});\n  }\n  useEffect(() => {\n    datasource.api.getMetrics({ namespace, region, accountId }).then((result: Array<SelectableValue<string>>) => {\n      setMetrics(appendTemplateVariables(datasource, result));\n    });\n  }, [datasource, region, namespace, accountId]);\n\n  return metrics;\n};\n\nexport const useDimensionKeys = (\n  datasource: CloudWatchDatasource,\n  { region, namespace, metricName, dimensionFilters, accountId }: GetDimensionKeysRequest\n) => {\n  const [dimensionKeys, setDimensionKeys] = useState<Array<SelectableValue<string>>>([]);\n\n  // need to ensure dependency array below revieves the interpolated value so that the effect is triggered when a variable is changed\n  if (region) {\n    region = datasource.templateSrv.replace(region, {});\n  }\n  if (namespace) {\n    namespace = datasource.templateSrv.replace(namespace, {});\n  }\n\n  if (metricName) {\n    metricName = datasource.templateSrv.replace(metricName, {});\n  }\n\n  if (accountId) {\n    accountId = datasource.templateSrv.replace(accountId, {});\n  }\n\n  if (dimensionFilters) {\n    dimensionFilters = datasource.api.convertDimensionFormat(dimensionFilters, {});\n  }\n\n  // doing deep comparison to avoid making new api calls to list metrics unless dimension filter object props changes\n  useDeepCompareEffect(() => {\n    datasource.api\n      .getDimensionKeys({ namespace, region, metricName, accountId, dimensionFilters })\n      .then((result: Array<SelectableValue<string>>) => {\n        setDimensionKeys(appendTemplateVariables(datasource, result));\n      });\n  }, [datasource, namespace, region, metricName, accountId, dimensionFilters]);\n\n  return dimensionKeys;\n};\n\nexport const useIsMonitoringAccount = (api: CloudWatchAPI, region: string) => {\n  const [isMonitoringAccount, setIsMonitoringAccount] = useState(false);\n  // we call this before the use effect to ensure dependency array below\n  // receives the interpolated value so that the effect is triggered when a variable is changed\n  if (region) {\n    region = api.templateSrv.replace(region, {});\n  }\n  useEffect(() => {\n    if (config.featureToggles.cloudWatchCrossAccountQuerying) {\n      api.isMonitoringAccount(region).then((result) => setIsMonitoringAccount(result));\n    }\n  }, [region, api]);\n\n  return isMonitoringAccount;\n};\n\nexport const useAccountOptions = (\n  api: Pick<CloudWatchAPI, 'getAccounts' | 'templateSrv' | 'getVariables'>,\n  region: string\n) => {\n  // we call this before the use effect to ensure dependency array below\n  // receives the interpolated value so that the effect is triggered when a variable is changed\n  if (region) {\n    region = api.templateSrv.replace(region, {});\n  }\n\n  const fetchAccountOptions = async () => {\n    if (!config.featureToggles.cloudWatchCrossAccountQuerying) {\n      return Promise.resolve([]);\n    }\n    const accounts = await api.getAccounts({ region });\n    if (accounts.length === 0) {\n      return [];\n    }\n\n    const options: Array<SelectableValue<string>> = accounts.map((a) => ({\n      label: a.label,\n      value: a.id,\n      description: a.id,\n    }));\n\n    const variableOptions = api.getVariables().map(toOption);\n\n    const variableOptionGroup: SelectableValue<string> = {\n      label: 'Template Variables',\n      options: variableOptions,\n    };\n\n    return [...options, variableOptionGroup];\n  };\n\n  const [state, doFetch] = useAsyncFn(fetchAccountOptions, [api, region]);\n\n  useEffect(() => {\n    doFetch();\n  }, [api, region, doFetch]);\n\n  return state;\n};\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  table: css({\n    width: '100%',\n    tableLayout: 'fixed',\n  }),\n\n  tableScroller: css({\n    maxHeight: '50vh',\n    overflow: 'auto',\n  }),\n\n  row: css({\n    borderBottom: `1px solid ${theme.colors.border.weak}`,\n\n    '&:last-of-type': {\n      borderBottomColor: theme.colors.border.medium,\n    },\n  }),\n\n  cell: css({\n    padding: theme.spacing(1, 1, 1, 0),\n    width: '25%',\n    '&:first-of-type': {\n      width: '50%',\n      padding: theme.spacing(1, 1, 1, 2),\n    },\n  }),\n\n  logGroupSearchResults: css({\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    width: '90%',\n    verticalAlign: 'middle',\n  }),\n\n  modal: css({\n    width: theme.breakpoints.values.lg,\n  }),\n\n  selectAccountId: css({\n    maxWidth: '100px',\n  }),\n\n  logGroupSelectionArea: css({\n    display: 'flex',\n  }),\n\n  resultLimit: css({\n    margin: '4px 0',\n    fontStyle: 'italic',\n  }),\n\n  selectedLogGroup: css({\n    background: theme.colors.background.secondary,\n    borderRadius: theme.shape.borderRadius(),\n    margin: theme.spacing(0.25, 1, 0.25, 0),\n    padding: theme.spacing(0.25, 0, 0.25, 1),\n    color: theme.colors.text.primary,\n    fontSize: theme.typography.size.sm,\n  }),\n\n  search: css({\n    marginRight: '10px',\n  }),\n\n  removeButton: css({\n    verticalAlign: 'middle',\n  }),\n\n  addBtn: css({\n    marginRight: '10px',\n  }),\n});\n\nexport default getStyles;\n","import { debounce } from 'lodash';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { Icon, Input, useStyles2 } from '@grafana/ui';\n\nimport getStyles from './components/styles';\n\n// TODO: consider moving search into grafana/ui, this is mostly the same as that in azure monitor\nconst Search = ({ searchFn, searchPhrase }: { searchPhrase: string; searchFn: (searchPhrase: string) => void }) => {\n  const [searchFilter, setSearchFilter] = useState(searchPhrase);\n  const styles = useStyles2(getStyles);\n\n  const debouncedSearch = useMemo(() => debounce(searchFn, 600), [searchFn]);\n\n  useEffect(() => {\n    return () => {\n      // Stop the invocation of the debounced function after unmounting\n      debouncedSearch?.cancel();\n    };\n  }, [debouncedSearch]);\n\n  return (\n    <Input\n      className={styles.search}\n      width={64}\n      aria-label=\"log group search\"\n      prefix={<Icon name=\"search\" />}\n      value={searchFilter}\n      onChange={(event) => {\n        const searchPhrase = event.currentTarget.value;\n        setSearchFilter(searchPhrase);\n        debouncedSearch(searchPhrase);\n      }}\n      placeholder=\"search by log group name prefix\"\n    />\n  );\n};\n\nexport default Search;\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nexport interface Props {\n  onChange: (accountId?: string) => void;\n  accountOptions: Array<SelectableValue<string>>;\n  accountId?: string;\n}\n\nexport const ALL_ACCOUNTS_OPTION = {\n  label: 'All',\n  value: 'all',\n  description: 'Target all linked accounts',\n};\n\nexport function Account({ accountId, onChange, accountOptions }: Props) {\n  const selectedAccountExistsInOptions = useMemo(\n    () =>\n      accountOptions.find((a) => {\n        if (a.options) {\n          const matchingTemplateVar = a.options.find((tempVar: SelectableValue<string>) => {\n            return tempVar.value === accountId;\n          });\n          return matchingTemplateVar;\n        }\n        return a.value === accountId;\n      }),\n    [accountOptions, accountId]\n  );\n\n  if (accountOptions.length === 0) {\n    return null;\n  }\n\n  return (\n    <EditorField\n      label=\"Account\"\n      width={26}\n      tooltip=\"A CloudWatch monitoring account views data from source accounts so you can centralize monitoring and troubleshooting activities across multiple accounts. Go to the CloudWatch settings page in the AWS console for more details.\"\n    >\n      <Select\n        aria-label=\"Account Selection\"\n        value={selectedAccountExistsInOptions ? accountId : ALL_ACCOUNTS_OPTION.value}\n        options={[ALL_ACCOUNTS_OPTION, ...accountOptions]}\n        onChange={({ value }) => {\n          onChange(value);\n        }}\n      />\n    </EditorField>\n  );\n}\n","import React, { useMemo, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Button, Checkbox, IconButton, LoadingPlaceholder, Modal, useStyles2 } from '@grafana/ui';\n\nimport Search from '../Search';\nimport { SelectableResourceValue } from '../api';\nimport { DescribeLogGroupsRequest } from '../types';\n\nimport { Account, ALL_ACCOUNTS_OPTION } from './Account';\nimport getStyles from './styles';\n\ntype CrossAccountLogsQueryProps = {\n  selectedLogGroups: SelectableResourceValue[];\n  accountOptions: Array<SelectableValue<string>>;\n  fetchLogGroups: (params: Partial<DescribeLogGroupsRequest>) => Promise<SelectableResourceValue[]>;\n  onChange: (selectedLogGroups: SelectableResourceValue[]) => void;\n  onRunQuery: () => void;\n};\n\nexport const CrossAccountLogsQueryField = (props: CrossAccountLogsQueryProps) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectableLogGroups, setSelectableLogGroups] = useState<SelectableResourceValue[]>([]);\n  const [selectedLogGroups, setSelectedLogGroups] = useState(props.selectedLogGroups);\n  const [searchPhrase, setSearchPhrase] = useState('');\n  const [searchAccountId, setSearchAccountId] = useState(ALL_ACCOUNTS_OPTION.value);\n  const [isLoading, setIsLoading] = useState(false);\n  const styles = useStyles2(getStyles);\n  const toggleModal = () => {\n    setIsModalOpen(!isModalOpen);\n    if (isModalOpen) {\n      props.onRunQuery();\n    } else {\n      setSelectedLogGroups(props.selectedLogGroups);\n      searchFn(searchPhrase, searchAccountId);\n    }\n  };\n\n  const searchFn = async (searchTerm?: string, accountId?: string) => {\n    setIsLoading(true);\n    try {\n      const possibleLogGroups = await props.fetchLogGroups({\n        logGroupPattern: searchTerm,\n        accountId: accountId,\n      });\n      setSelectableLogGroups(possibleLogGroups);\n    } catch (err) {\n      setSelectableLogGroups([]);\n    }\n    setIsLoading(false);\n  };\n\n  const handleSelectCheckbox = (row: SelectableResourceValue, isChecked: boolean) => {\n    if (isChecked) {\n      setSelectedLogGroups([...selectedLogGroups, row]);\n    } else {\n      setSelectedLogGroups(selectedLogGroups.filter((lg) => lg.value !== row.value));\n    }\n  };\n\n  const handleApply = () => {\n    props.onChange(selectedLogGroups);\n    toggleModal();\n  };\n\n  const handleCancel = () => {\n    setSelectedLogGroups(props.selectedLogGroups);\n    toggleModal();\n  };\n\n  const accountNameById = useMemo(() => {\n    const idsToNames: Record<string, string> = {};\n    props.accountOptions.forEach((a) => {\n      if (a.value && a.label) {\n        idsToNames[a.value] = a.label;\n      }\n    });\n    return idsToNames;\n  }, [props.accountOptions]);\n\n  return (\n    <>\n      <Modal className={styles.modal} title=\"Select Log Groups\" isOpen={isModalOpen} onDismiss={toggleModal}>\n        <div className={styles.logGroupSelectionArea}>\n          <EditorField label=\"Log Group Name\">\n            <Search\n              searchFn={(phrase) => {\n                searchFn(phrase, searchAccountId);\n                setSearchPhrase(phrase);\n              }}\n              searchPhrase={searchPhrase}\n            />\n          </EditorField>\n          <Account\n            onChange={(accountId?: string) => {\n              searchFn(searchPhrase, accountId);\n              setSearchAccountId(accountId || ALL_ACCOUNTS_OPTION.value);\n            }}\n            accountOptions={props.accountOptions}\n            accountId={searchAccountId}\n          />\n        </div>\n        <div>\n          <div className={styles.tableScroller}>\n            <table className={styles.table}>\n              <thead>\n                <tr className={styles.row}>\n                  <td className={styles.cell}>Log Group</td>\n                  <td className={styles.cell}>Account name</td>\n                  <td className={styles.cell}>Account ID</td>\n                </tr>\n              </thead>\n              <tbody>\n                {isLoading && (\n                  <tr className={styles.row}>\n                    <td className={styles.cell}>\n                      <LoadingPlaceholder text={'Loading...'} />\n                    </td>\n                  </tr>\n                )}\n                {!isLoading && selectableLogGroups.length === 0 && (\n                  <tr className={styles.row}>\n                    <td className={styles.cell}>No log groups found</td>\n                  </tr>\n                )}\n                {!isLoading &&\n                  selectableLogGroups.map((row) => (\n                    <tr className={styles.row} key={`${row.value}`}>\n                      <td className={styles.cell}>\n                        <Checkbox\n                          id={row.value}\n                          onChange={(ev) => handleSelectCheckbox(row, ev.currentTarget.checked)}\n                          value={!!(row.value && selectedLogGroups.some((lg) => lg.value === row.value))}\n                        />\n                        <label className={styles.logGroupSearchResults} htmlFor={row.value}>\n                          {row.label}\n                        </label>\n                      </td>\n                      <td className={styles.cell}>{accountNameById[row.text]}</td>\n                      <td className={styles.cell}>{row.text}</td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div>\n          <Button onClick={handleApply} type=\"button\" className={styles.addBtn}>\n            Add log groups\n          </Button>\n          <Button onClick={handleCancel} type=\"button\">\n            Cancel\n          </Button>\n        </div>\n      </Modal>\n\n      <div>\n        <Button variant=\"secondary\" onClick={toggleModal} type=\"button\">\n          Select Log Groups\n        </Button>\n      </div>\n\n      <div>\n        {props.selectedLogGroups.map((lg) => (\n          <div key={lg.value} className={styles.selectedLogGroup}>\n            {lg.label}\n            <IconButton\n              size=\"sm\"\n              name=\"times\"\n              className={styles.removeButton}\n              onClick={() => props.onChange(props.selectedLogGroups.filter((slg) => slg.value !== lg.value))}\n            />\n          </div>\n        ))}\n      </div>\n    </>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { LegacyForms } from '@grafana/ui';\n\nimport { SelectableResourceValue } from '../api';\nimport { CloudWatchDatasource } from '../datasource';\nimport { useAccountOptions } from '../hooks';\nimport { CloudWatchLogsQuery, CloudWatchQuery, DescribeLogGroupsRequest } from '../types';\n\nimport { CrossAccountLogsQueryField } from './CrossAccountLogsQueryField';\nimport { LogGroupSelector } from './LogGroupSelector';\n\ntype Props = {\n  datasource: CloudWatchDatasource;\n  query: CloudWatchLogsQuery;\n  onChange: (value: CloudWatchQuery) => void;\n  onRunQuery: () => void;\n};\n\nconst rowGap = css`\n  gap: 3px;\n`;\n\nexport const LogGroupSelection = ({ datasource, query, onChange, onRunQuery }: Props) => {\n  const accountState = useAccountOptions(datasource.api, query.region);\n\n  return (\n    <div className={`gf-form gf-form--grow flex-grow-1 ${rowGap}`}>\n      {config.featureToggles.cloudWatchCrossAccountQuerying && accountState?.value?.length ? (\n        <CrossAccountLogsQueryField\n          fetchLogGroups={(params: Partial<DescribeLogGroupsRequest>) =>\n            datasource.api.describeCrossAccountLogGroups({ region: query.region, ...params })\n          }\n          onChange={(selectedLogGroups: SelectableResourceValue[]) => {\n            onChange({ ...query, logGroups: selectedLogGroups, logGroupNames: [] });\n          }}\n          accountOptions={accountState.value}\n          onRunQuery={onRunQuery}\n          selectedLogGroups={query.logGroups ?? []} /* todo handle defaults */\n        />\n      ) : (\n        <LegacyForms.FormField\n          label=\"Log Groups\"\n          labelWidth={6}\n          className=\"flex-grow-1\"\n          inputEl={\n            <LogGroupSelector\n              region={query.region}\n              selectedLogGroups={query.logGroupNames ?? datasource.logsQueryRunner.defaultLogGroups}\n              datasource={datasource}\n              onChange={function (logGroupNames: string[]): void {\n                onChange({ ...query, logGroupNames, logGroups: [] });\n              }}\n              onRunQuery={onRunQuery}\n              refId={query.refId}\n            />\n          }\n        />\n      )}\n    </div>\n  );\n};\n","import React, { useCallback, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { FlexItem, InlineSelect } from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport { Badge, Button, ConfirmModal, RadioButtonGroup } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../../datasource';\nimport { CloudWatchMetricsQuery, CloudWatchQuery, MetricEditorMode, MetricQueryType } from '../../types';\n\ninterface MetricsQueryHeaderProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onChange: (query: CloudWatchQuery) => void;\n  onRunQuery: () => void;\n  sqlCodeEditorIsDirty: boolean;\n  isMonitoringAccount: boolean;\n}\n\nconst metricEditorModes: Array<SelectableValue<MetricQueryType>> = [\n  { label: 'Metric Search', value: MetricQueryType.Search },\n  { label: 'Metric Query', value: MetricQueryType.Query },\n];\n\nconst editorModes = [\n  { label: 'Builder', value: MetricEditorMode.Builder },\n  { label: 'Code', value: MetricEditorMode.Code },\n];\n\nconst MetricsQueryHeader: React.FC<MetricsQueryHeaderProps> = ({\n  query,\n  sqlCodeEditorIsDirty,\n  onChange,\n  onRunQuery,\n  isMonitoringAccount,\n}) => {\n  const { metricEditorMode, metricQueryType } = query;\n  const [showConfirm, setShowConfirm] = useState(false);\n\n  const onEditorModeChange = useCallback(\n    (newMetricEditorMode: MetricEditorMode) => {\n      if (\n        sqlCodeEditorIsDirty &&\n        metricQueryType === MetricQueryType.Query &&\n        metricEditorMode === MetricEditorMode.Code\n      ) {\n        setShowConfirm(true);\n        return;\n      }\n      onChange({ ...query, metricEditorMode: newMetricEditorMode });\n    },\n    [setShowConfirm, onChange, sqlCodeEditorIsDirty, query, metricEditorMode, metricQueryType]\n  );\n\n  const shouldDisplayMonitoringBadge =\n    query.metricQueryType === MetricQueryType.Search &&\n    isMonitoringAccount &&\n    config.featureToggles.cloudWatchCrossAccountQuerying;\n\n  return (\n    <>\n      <InlineSelect\n        aria-label=\"Metric editor mode\"\n        value={metricEditorModes.find((m) => m.value === metricQueryType)}\n        options={metricEditorModes}\n        onChange={({ value }) => {\n          onChange({ ...query, metricQueryType: value });\n        }}\n      />\n      <FlexItem grow={1} />\n\n      {shouldDisplayMonitoringBadge && (\n        <Badge\n          text=\"Monitoring account\"\n          color=\"blue\"\n          tooltip=\"AWS monitoring accounts view data from source accounts so you can centralize monitoring and troubleshoot activites\"\n        ></Badge>\n      )}\n\n      <RadioButtonGroup options={editorModes} size=\"sm\" value={metricEditorMode} onChange={onEditorModeChange} />\n\n      {query.metricQueryType === MetricQueryType.Query && query.metricEditorMode === MetricEditorMode.Code && (\n        <Button variant=\"secondary\" size=\"sm\" onClick={() => onRunQuery()}>\n          Run query\n        </Button>\n      )}\n\n      <ConfirmModal\n        isOpen={showConfirm}\n        title=\"Are you sure?\"\n        body=\"You will lose manual changes done to the query if you go back to the visual builder.\"\n        confirmText=\"Yes, I am sure.\"\n        dismissText=\"No, continue editing the query manually.\"\n        icon=\"exclamation-triangle\"\n        onConfirm={() => {\n          setShowConfirm(false);\n          onChange({ ...query, metricEditorMode: MetricEditorMode.Builder });\n        }}\n        onDismiss={() => setShowConfirm(false)}\n      />\n    </>\n  );\n};\n\nexport default MetricsQueryHeader;\n","import { pick } from 'lodash';\nimport React from 'react';\n\nimport { SelectableValue, ExploreMode } from '@grafana/data';\nimport { EditorHeader, InlineSelect, FlexItem } from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport { Badge } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { isCloudWatchMetricsQuery } from '../guards';\nimport { useIsMonitoringAccount, useRegions } from '../hooks';\nimport { CloudWatchQuery, CloudWatchQueryMode } from '../types';\n\nimport MetricsQueryHeader from './MetricsQueryEditor/MetricsQueryHeader';\n\ninterface QueryHeaderProps {\n  query: CloudWatchQuery;\n  datasource: CloudWatchDatasource;\n  onChange: (query: CloudWatchQuery) => void;\n  onRunQuery: () => void;\n  sqlCodeEditorIsDirty: boolean;\n}\n\nconst apiModes: Array<SelectableValue<CloudWatchQueryMode>> = [\n  { label: 'CloudWatch Metrics', value: 'Metrics' },\n  { label: 'CloudWatch Logs', value: 'Logs' },\n];\n\nconst QueryHeader: React.FC<QueryHeaderProps> = ({ query, sqlCodeEditorIsDirty, datasource, onChange, onRunQuery }) => {\n  const { queryMode, region } = query;\n  const isMonitoringAccount = useIsMonitoringAccount(datasource.api, query.region);\n\n  const [regions, regionIsLoading] = useRegions(datasource);\n\n  const onQueryModeChange = ({ value }: SelectableValue<CloudWatchQueryMode>) => {\n    if (value !== queryMode) {\n      const commonProps = pick(query, 'id', 'region', 'namespace', 'refId', 'hide', 'key', 'queryType', 'datasource');\n      onChange({\n        ...commonProps,\n        queryMode: value,\n      } as CloudWatchQuery);\n    }\n  };\n  const onRegionChange = async (region: string) => {\n    if (config.featureToggles.cloudWatchCrossAccountQuerying && isCloudWatchMetricsQuery(query)) {\n      const isMonitoringAccount = await datasource.api.isMonitoringAccount(region);\n      onChange({ ...query, region, accountId: isMonitoringAccount ? query.accountId : undefined });\n    } else {\n      onChange({ ...query, region });\n    }\n  };\n\n  const shouldDisplayMonitoringBadge =\n    queryMode === 'Logs' && isMonitoringAccount && config.featureToggles.cloudWatchCrossAccountQuerying;\n\n  return (\n    <EditorHeader>\n      <InlineSelect\n        label=\"Region\"\n        value={region}\n        placeholder=\"Select region\"\n        allowCustomValue\n        onChange={({ value: region }) => region && onRegionChange(region)}\n        options={regions}\n        isLoading={regionIsLoading}\n      />\n\n      <InlineSelect aria-label=\"Query mode\" value={queryMode} options={apiModes} onChange={onQueryModeChange} />\n\n      {shouldDisplayMonitoringBadge && (\n        <>\n          <FlexItem grow={1} />\n          <Badge\n            text=\"Monitoring account\"\n            color=\"blue\"\n            tooltip=\"AWS monitoring accounts view data from source accounts so you can centralize monitoring and troubleshoot activites\"\n          ></Badge>\n        </>\n      )}\n\n      {queryMode === ExploreMode.Metrics && (\n        <MetricsQueryHeader\n          query={query}\n          datasource={datasource}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          isMonitoringAccount={isMonitoringAccount}\n          sqlCodeEditorIsDirty={sqlCodeEditorIsDirty}\n        />\n      )}\n    </EditorHeader>\n  );\n};\n\nexport default QueryHeader;\n","import { css, cx } from '@emotion/css';\nimport { LanguageMap, languages as prismLanguages } from 'prismjs';\nimport React, { ReactNode } from 'react';\nimport { Node, Plugin } from 'slate';\nimport { Editor } from 'slate-react';\n\nimport { AbsoluteTimeRange, QueryEditorProps } from '@grafana/data';\nimport {\n  BracesPlugin,\n  QueryField,\n  SlatePrism,\n  TypeaheadInput,\n  TypeaheadOutput,\n  Themeable2,\n  withTheme2,\n  clearButtonStyles,\n} from '@grafana/ui';\nimport { ExploreId } from 'app/types';\n// Utils & Services\n// dom also includes Element polyfills\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { CloudWatchLanguageProvider } from '../language_provider';\nimport syntax from '../syntax';\nimport { CloudWatchJsonData, CloudWatchLogsQuery, CloudWatchQuery } from '../types';\nimport { getStatsGroups } from '../utils/query/getStatsGroups';\n\nimport { LogGroupSelection } from './LogGroupSelection';\nimport QueryHeader from './QueryHeader';\n\nexport interface CloudWatchLogsQueryFieldProps\n  extends QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>,\n    Themeable2 {\n  absoluteRange: AbsoluteTimeRange;\n  onLabelsRefresh?: () => void;\n  ExtraFieldElement?: ReactNode;\n  exploreId: ExploreId;\n  query: CloudWatchLogsQuery;\n}\n\nconst addPaddingToButton = css`\n  padding: 1px 4px;\n`;\ninterface State {\n  hint:\n    | {\n        message: string;\n        fix: {\n          label: string;\n          action: () => void;\n        };\n      }\n    | undefined;\n}\n\nclass CloudWatchLogsQueryField extends React.PureComponent<CloudWatchLogsQueryFieldProps, State> {\n  state: State = {\n    hint: undefined,\n  };\n\n  plugins: Array<Plugin<Editor>>;\n\n  constructor(props: CloudWatchLogsQueryFieldProps, context: React.Context<any>) {\n    super(props, context);\n\n    this.plugins = [\n      BracesPlugin(),\n      SlatePrism(\n        {\n          onlyIn: (node: Node) => node.object === 'block' && node.type === 'code_block',\n          getSyntax: (node: Node) => 'cloudwatch',\n        },\n        { ...(prismLanguages as LanguageMap), cloudwatch: syntax }\n      ),\n    ];\n  }\n\n  componentDidMount = () => {\n    const { query, datasource, onChange } = this.props;\n\n    if (onChange) {\n      onChange({ ...query, logGroupNames: query.logGroupNames ?? datasource.logsQueryRunner.defaultLogGroups });\n    }\n  };\n\n  onChangeQuery = (value: string) => {\n    // Send text change to parent\n    const { query, onChange } = this.props;\n\n    if (onChange) {\n      const nextQuery = {\n        ...query,\n        expression: value,\n        statsGroups: getStatsGroups(value),\n      };\n      onChange(nextQuery);\n    }\n  };\n\n  onTypeahead = async (typeahead: TypeaheadInput): Promise<TypeaheadOutput> => {\n    const { datasource, query } = this.props;\n    const { logGroupNames } = query;\n\n    if (!datasource.languageProvider) {\n      return { suggestions: [] };\n    }\n\n    const cloudwatchLanguageProvider = datasource.languageProvider as CloudWatchLanguageProvider;\n    const { history, absoluteRange } = this.props;\n    const { prefix, text, value, wrapperClasses, labelKey, editor } = typeahead;\n\n    return await cloudwatchLanguageProvider.provideCompletionItems(\n      { text, value, prefix, wrapperClasses, labelKey, editor },\n      {\n        history,\n        absoluteRange,\n        logGroupNames,\n        region: query.region,\n      }\n    );\n  };\n\n  render() {\n    const { onRunQuery, onChange, ExtraFieldElement, data, query, datasource, theme } = this.props;\n    const { expression } = query;\n    const { hint } = this.state;\n\n    const showError = data && data.error && data.error.refId === query.refId;\n    const cleanText = datasource.languageProvider ? datasource.languageProvider.cleanText : undefined;\n\n    return (\n      <>\n        <QueryHeader\n          query={query}\n          onRunQuery={onRunQuery}\n          datasource={datasource}\n          onChange={onChange}\n          sqlCodeEditorIsDirty={false}\n        />\n        <LogGroupSelection datasource={datasource} query={query} onChange={onChange} onRunQuery={onRunQuery} />\n        <div className=\"gf-form-inline gf-form-inline--nowrap flex-grow-1\">\n          <div className=\"gf-form gf-form--grow flex-shrink-1\">\n            <QueryField\n              additionalPlugins={this.plugins}\n              query={expression ?? ''}\n              onChange={this.onChangeQuery}\n              onRunQuery={this.props.onRunQuery}\n              onTypeahead={this.onTypeahead}\n              cleanText={cleanText}\n              placeholder=\"Enter a CloudWatch Logs Insights query (run with Shift+Enter)\"\n              portalOrigin=\"cloudwatch\"\n            />\n          </div>\n          {ExtraFieldElement}\n        </div>\n        {hint && (\n          <div className=\"query-row-break\">\n            <div className=\"text-warning\">\n              {hint.message}\n              <button\n                type=\"button\"\n                className={cx(clearButtonStyles(theme), 'text-link', 'muted', addPaddingToButton)}\n                onClick={hint.fix.action}\n              >\n                {hint.fix.label}\n              </button>\n            </div>\n          </div>\n        )}\n        {showError ? (\n          <div className=\"query-row-break\">\n            <div className=\"prom-query-field-info text-error\">{data?.error?.message}</div>\n          </div>\n        ) : null}\n      </>\n    );\n  }\n}\n\nexport default withTheme2(CloudWatchLogsQueryField);\n","// Libraries\nimport { css } from '@emotion/css';\nimport React, { memo } from 'react';\n\n// Types\nimport { AbsoluteTimeRange, QueryEditorProps } from '@grafana/data';\nimport { InlineFormLabel } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { CloudWatchJsonData, CloudWatchLogsQuery, CloudWatchQuery } from '../types';\n\nimport CloudWatchLink from './CloudWatchLink';\nimport CloudWatchLogsQueryField from './LogsQueryField';\n\ntype Props = QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData> & {\n  query: CloudWatchLogsQuery;\n};\n\nconst labelClass = css`\n  margin-left: 3px;\n  flex-grow: 0;\n`;\n\nexport const CloudWatchLogsQueryEditor = memo(function CloudWatchLogsQueryEditor(props: Props) {\n  const { query, data, datasource, onRunQuery, onChange, exploreId } = props;\n\n  let absolute: AbsoluteTimeRange;\n  if (data?.request?.range?.from) {\n    const { range } = data.request;\n    absolute = {\n      from: range.from.valueOf(),\n      to: range.to.valueOf(),\n    };\n  } else {\n    absolute = {\n      from: Date.now() - 10000,\n      to: Date.now(),\n    };\n  }\n\n  return (\n    <CloudWatchLogsQueryField\n      exploreId={exploreId}\n      datasource={datasource}\n      query={query}\n      onChange={onChange}\n      onRunQuery={onRunQuery}\n      history={[]}\n      data={data}\n      absoluteRange={absolute}\n      ExtraFieldElement={\n        <InlineFormLabel className={`gf-form-label--btn ${labelClass}`} width=\"auto\" tooltip=\"Link to Graph in AWS\">\n          <CloudWatchLink query={query as CloudWatchLogsQuery} panelData={data} datasource={datasource} />\n        </InlineFormLabel>\n      }\n    />\n  );\n});\n\nexport default CloudWatchLogsQueryEditor;\n","export const standardStatistics = ['Average', 'Maximum', 'Minimum', 'Sum', 'SampleCount'];\n","import React, { useEffect } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorRow, EditorRows, EditorSwitch } from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport { Select } from '@grafana/ui';\n\nimport { Dimensions } from '..';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { useAccountOptions, useDimensionKeys, useMetrics, useNamespaces } from '../../hooks';\nimport { standardStatistics } from '../../standardStatistics';\nimport { MetricStat } from '../../types';\nimport { appendTemplateVariables, toOption } from '../../utils/utils';\nimport { Account } from '../Account';\n\nexport type Props = {\n  refId: string;\n  metricStat: MetricStat;\n  datasource: CloudWatchDatasource;\n  disableExpressions?: boolean;\n  onChange: (value: MetricStat) => void;\n  onRunQuery: () => void;\n};\n\nexport function MetricStatEditor({\n  refId,\n  metricStat,\n  datasource,\n  disableExpressions = false,\n  onChange,\n  onRunQuery,\n}: React.PropsWithChildren<Props>) {\n  const namespaces = useNamespaces(datasource);\n  const metrics = useMetrics(datasource, metricStat);\n  const dimensionKeys = useDimensionKeys(datasource, { ...metricStat, dimensionFilters: metricStat.dimensions });\n  const accountState = useAccountOptions(datasource.api, metricStat.region);\n\n  useEffect(() => {\n    datasource.api.isMonitoringAccount(metricStat.region).then((isMonitoringAccount) => {\n      if (isMonitoringAccount && !accountState.loading && accountState.value?.length && !metricStat.accountId) {\n        onChange({ ...metricStat, accountId: 'all' });\n      }\n\n      if (!accountState.loading && accountState.value && !accountState.value.length && metricStat.accountId) {\n        onChange({ ...metricStat, accountId: undefined });\n      }\n    });\n  }, [accountState, metricStat, onChange, datasource.api]);\n\n  const onMetricStatChange = (metricStat: MetricStat) => {\n    onChange(metricStat);\n    onRunQuery();\n  };\n\n  const onNamespaceChange = async (metricStat: MetricStat) => {\n    const validatedQuery = await validateMetricName(metricStat);\n    onMetricStatChange(validatedQuery);\n  };\n\n  const validateMetricName = async (metricStat: MetricStat) => {\n    let { metricName, namespace, region } = metricStat;\n    if (!metricName) {\n      return metricStat;\n    }\n    await datasource.api.getMetrics({ namespace, region }).then((result: Array<SelectableValue<string>>) => {\n      if (!result.find((metric) => metric.value === metricName)) {\n        metricName = '';\n      }\n    });\n    return { ...metricStat, metricName };\n  };\n\n  return (\n    <EditorRows>\n      <EditorRow>\n        {!disableExpressions && config.featureToggles.cloudWatchCrossAccountQuerying && (\n          <Account\n            accountId={metricStat.accountId}\n            onChange={(accountId?: string) => {\n              onChange({ ...metricStat, accountId });\n              onRunQuery();\n            }}\n            accountOptions={accountState?.value || []}\n          ></Account>\n        )}\n        <EditorFieldGroup>\n          <EditorField label=\"Namespace\" width={26}>\n            <Select\n              aria-label=\"Namespace\"\n              value={metricStat?.namespace && toOption(metricStat.namespace)}\n              allowCustomValue\n              options={namespaces}\n              onChange={({ value: namespace }) => {\n                if (namespace) {\n                  onNamespaceChange({ ...metricStat, namespace });\n                }\n              }}\n            />\n          </EditorField>\n          <EditorField label=\"Metric name\" width={16}>\n            <Select\n              aria-label=\"Metric name\"\n              value={metricStat?.metricName && toOption(metricStat.metricName)}\n              allowCustomValue\n              options={metrics}\n              onChange={({ value: metricName }) => {\n                if (metricName) {\n                  onMetricStatChange({ ...metricStat, metricName });\n                }\n              }}\n            />\n          </EditorField>\n\n          <EditorField label=\"Statistic\" width={16}>\n            <Select\n              inputId={`${refId}-metric-stat-editor-select-statistic`}\n              allowCustomValue\n              value={toOption(metricStat.statistic ?? standardStatistics[0])}\n              options={appendTemplateVariables(\n                datasource,\n                standardStatistics.filter((s) => s !== metricStat.statistic).map(toOption)\n              )}\n              onChange={({ value: statistic }) => {\n                if (\n                  !statistic ||\n                  (!standardStatistics.includes(statistic) &&\n                    !/^p\\d{2}(?:\\.\\d{1,2})?$/.test(statistic) &&\n                    !statistic.startsWith('$'))\n                ) {\n                  return;\n                }\n\n                onMetricStatChange({ ...metricStat, statistic });\n              }}\n            />\n          </EditorField>\n        </EditorFieldGroup>\n      </EditorRow>\n\n      <EditorRow>\n        <EditorField label=\"Dimensions\">\n          <Dimensions\n            metricStat={metricStat}\n            onChange={(dimensions) => onMetricStatChange({ ...metricStat, dimensions })}\n            dimensionKeys={dimensionKeys}\n            disableExpressions={disableExpressions}\n            datasource={datasource}\n          />\n        </EditorField>\n        {!disableExpressions && (\n          <EditorField\n            label=\"Match exact\"\n            optional={true}\n            tooltip=\"Only show metrics that exactly match all defined dimension names.\"\n          >\n            <EditorSwitch\n              id={`${refId}-cloudwatch-match-exact`}\n              value={!!metricStat.matchExact}\n              onChange={(e) => {\n                onMetricStatChange({\n                  ...metricStat,\n                  matchExact: e.currentTarget.checked,\n                });\n              }}\n            />\n          </EditorField>\n        )}\n      </EditorRow>\n    </EditorRows>\n  );\n}\n","export enum QueryEditorPropertyType {\n  String = 'string',\n}\n\nexport interface QueryEditorProperty {\n  type: QueryEditorPropertyType;\n  name?: string;\n}\n\nexport type QueryEditorOperatorType = string | boolean | number;\ntype QueryEditorOperatorValueType = QueryEditorOperatorType | QueryEditorOperatorType[];\n\nexport interface QueryEditorOperator<T extends QueryEditorOperatorValueType> {\n  name?: string;\n  value?: T;\n}\n\nexport interface QueryEditorOperatorExpression {\n  type: QueryEditorExpressionType.Operator;\n  property: QueryEditorProperty;\n  operator: QueryEditorOperator<QueryEditorOperatorValueType>;\n}\n\nexport interface QueryEditorArrayExpression {\n  type: QueryEditorExpressionType.And | QueryEditorExpressionType.Or;\n  expressions: QueryEditorExpression[] | QueryEditorArrayExpression[];\n}\n\nexport interface QueryEditorPropertyExpression {\n  type: QueryEditorExpressionType.Property;\n  property: QueryEditorProperty;\n}\n\nexport enum QueryEditorExpressionType {\n  Property = 'property',\n  Operator = 'operator',\n  Or = 'or',\n  And = 'and',\n  GroupBy = 'groupBy',\n  Function = 'function',\n  FunctionParameter = 'functionParameter',\n}\n\nexport type QueryEditorExpression =\n  | QueryEditorArrayExpression\n  | QueryEditorPropertyExpression\n  | QueryEditorGroupByExpression\n  | QueryEditorFunctionExpression\n  | QueryEditorFunctionParameterExpression\n  | QueryEditorOperatorExpression;\n\nexport interface QueryEditorGroupByExpression {\n  type: QueryEditorExpressionType.GroupBy;\n  property: QueryEditorProperty;\n}\n\nexport interface QueryEditorFunctionExpression {\n  type: QueryEditorExpressionType.Function;\n  name?: string;\n  parameters?: QueryEditorFunctionParameterExpression[];\n}\n\nexport interface QueryEditorFunctionParameterExpression {\n  type: QueryEditorExpressionType.FunctionParameter;\n  name?: string;\n}\n","import { getTemplateSrv, TemplateSrv } from 'app/features/templating/template_srv';\n\nimport {\n  QueryEditorArrayExpression,\n  QueryEditorExpression,\n  QueryEditorExpressionType,\n  QueryEditorFunctionExpression,\n  QueryEditorOperatorExpression,\n  QueryEditorPropertyExpression,\n} from '../expressions';\nimport { SQLExpression } from '../types';\n\nexport default class SQLGenerator {\n  constructor(private templateSrv: TemplateSrv = getTemplateSrv()) {}\n\n  expressionToSqlQuery({\n    select,\n    from,\n    where,\n    groupBy,\n    orderBy,\n    orderByDirection,\n    limit,\n  }: SQLExpression): string | undefined {\n    if (!from || !select?.name || !select?.parameters?.length) {\n      return undefined;\n    }\n\n    let parts: string[] = [];\n    this.appendSelect(select, parts);\n    this.appendFrom(from, parts);\n    this.appendWhere(where, parts, true, where?.expressions?.length ?? 0);\n    this.appendGroupBy(groupBy, parts);\n    this.appendOrderBy(orderBy, orderByDirection, parts);\n    this.appendLimit(limit, parts);\n\n    return parts.join(' ');\n  }\n\n  private appendSelect(select: QueryEditorFunctionExpression | undefined, parts: string[]) {\n    parts.push('SELECT');\n    this.appendFunction(select, parts);\n  }\n\n  private appendFrom(from: QueryEditorPropertyExpression | QueryEditorFunctionExpression | undefined, parts: string[]) {\n    parts.push('FROM');\n    from?.type === QueryEditorExpressionType.Function\n      ? this.appendFunction(from, parts)\n      : parts.push(this.formatValue(from?.property?.name ?? ''));\n  }\n\n  private appendWhere(\n    filter: QueryEditorExpression | undefined,\n    parts: string[],\n    isTopLevelExpression: boolean,\n    topLevelExpressionsCount: number\n  ) {\n    if (!filter) {\n      return;\n    }\n\n    const hasChildExpressions = 'expressions' in filter && filter.expressions.length > 0;\n    if (isTopLevelExpression && hasChildExpressions) {\n      parts.push('WHERE');\n    }\n\n    if (filter.type === QueryEditorExpressionType.And) {\n      const andParts: string[] = [];\n      filter.expressions.map((exp) => this.appendWhere(exp, andParts, false, topLevelExpressionsCount));\n      if (andParts.length === 0) {\n        return;\n      }\n      const andCombined = andParts.join(' AND ');\n      const wrapInParentheses = !isTopLevelExpression && topLevelExpressionsCount > 1 && andParts.length > 1;\n      return parts.push(wrapInParentheses ? `(${andCombined})` : andCombined);\n    }\n\n    if (filter.type === QueryEditorExpressionType.Or) {\n      const orParts: string[] = [];\n      filter.expressions.map((exp) => this.appendWhere(exp, orParts, false, topLevelExpressionsCount));\n      if (orParts.length === 0) {\n        return;\n      }\n      const orCombined = orParts.join(' OR ');\n      const wrapInParentheses = !isTopLevelExpression && topLevelExpressionsCount > 1 && orParts.length > 1;\n      parts.push(wrapInParentheses ? `(${orCombined})` : orCombined);\n      return;\n    }\n\n    if (filter.type === QueryEditorExpressionType.Operator) {\n      return this.appendOperator(filter, parts);\n    }\n  }\n\n  private appendGroupBy(groupBy: QueryEditorArrayExpression | undefined, parts: string[]) {\n    const groupByParts: string[] = [];\n    for (const expression of groupBy?.expressions ?? []) {\n      if (expression?.type !== QueryEditorExpressionType.GroupBy || !expression.property.name) {\n        continue;\n      }\n      groupByParts.push(this.formatValue(expression.property.name));\n    }\n\n    if (groupByParts.length > 0) {\n      parts.push(`GROUP BY ${groupByParts.join(', ')}`);\n    }\n  }\n\n  private appendOrderBy(\n    orderBy: QueryEditorFunctionExpression | undefined,\n    orderByDirection: string | undefined,\n    parts: string[]\n  ) {\n    if (orderBy) {\n      parts.push('ORDER BY');\n      this.appendFunction(orderBy, parts);\n      parts.push(orderByDirection ?? 'ASC');\n    }\n  }\n\n  private appendLimit(limit: number | undefined, parts: string[]) {\n    limit && parts.push(`LIMIT ${limit}`);\n  }\n\n  private appendOperator(expression: QueryEditorOperatorExpression, parts: string[], prefix?: string) {\n    const { property, operator } = expression;\n\n    if (!property.name || !operator.name || !operator.value) {\n      return;\n    }\n\n    parts.push(`${this.formatValue(property.name)} ${operator.name} '${operator.value}'`);\n  }\n\n  private appendFunction(select: QueryEditorFunctionExpression | undefined, parts: string[]) {\n    if (!select?.name) {\n      return;\n    }\n\n    const params = (select.parameters ?? [])\n      .map((p) => p.name && this.formatValue(p.name))\n      .filter(Boolean)\n      .join(', ');\n\n    parts.push(`${select.name}(${params})`);\n  }\n\n  private formatValue(label: string): string {\n    const specialCharacters = /[/\\s\\.-]/; // slash, space, dot or dash\n\n    const interpolated = this.templateSrv.replace(label, {}, 'raw');\n    if (specialCharacters.test(interpolated)) {\n      return `\"${label}\"`;\n    }\n\n    return label;\n  }\n}\n","import { SelectableValue } from '@grafana/data';\n\nimport { SCHEMA } from '../../cloudwatch-sql/language';\nimport {\n  QueryEditorExpressionType,\n  QueryEditorPropertyType,\n  QueryEditorFunctionParameterExpression,\n  QueryEditorArrayExpression,\n  QueryEditorOperatorExpression,\n  QueryEditorGroupByExpression,\n} from '../../expressions';\nimport { SQLExpression, CloudWatchMetricsQuery, Dimensions } from '../../types';\n\nexport function getMetricNameFromExpression(selectExpression: SQLExpression['select']): string | undefined {\n  return selectExpression?.parameters?.[0].name;\n}\n\nexport function getNamespaceFromExpression(fromExpression: SQLExpression['from']): string | undefined {\n  // It's just a simple `FROM \"AWS/EC2\"` expression\n  if (fromExpression?.type === QueryEditorExpressionType.Property) {\n    return fromExpression.property.name; // PR TODO: do we need to test the type here? It can only be string?\n  }\n\n  // It's a more complicated `FROM SCHEMA(\"AWS/EC2\", ...)` expression\n  if (fromExpression?.type === QueryEditorExpressionType.Function) {\n    // TODO: do we need to test the name of the function?\n    return fromExpression.parameters?.[0].name;\n  }\n\n  return undefined;\n}\n\nexport function getSchemaLabelKeys(fromExpression: SQLExpression['from']): string[] | undefined {\n  // Schema label keys are second to n arguments in the from expression function\n  if (fromExpression?.type === QueryEditorExpressionType.Function && fromExpression?.parameters?.length) {\n    if (fromExpression?.parameters?.length <= 1) {\n      return [];\n    }\n\n    // ignore the first arg (the namespace)\n    const paramExpressions = fromExpression?.parameters.slice(1);\n    return paramExpressions.reduce<string[]>((acc, curr) => (curr.name ? [...acc, curr.name] : acc), []);\n  }\n\n  return undefined;\n}\n\nexport function isUsingWithSchema(fromExpression: SQLExpression['from']): boolean {\n  return fromExpression?.type === QueryEditorExpressionType.Function && fromExpression.name === SCHEMA;\n}\n\n/** Given a partial operator expression, return a non-partial if it's valid, or undefined */\nexport function sanitizeOperator(\n  expression: Partial<QueryEditorOperatorExpression>\n): QueryEditorOperatorExpression | undefined {\n  const key = expression.property?.name;\n  const value = expression.operator?.value;\n  const operator = expression.operator?.name;\n\n  if (key && value && operator) {\n    return {\n      type: QueryEditorExpressionType.Operator,\n      property: {\n        type: QueryEditorPropertyType.String,\n        name: key,\n      },\n      operator: {\n        value,\n        name: operator,\n      },\n    };\n  }\n\n  return undefined;\n}\n\n/**\n * Given an array of Expressions, flattens them to the leaf Operator expressions.\n * Note, this loses context of any nested ANDs or ORs, so will not be useful once we support nested conditions */\nfunction flattenOperatorExpressions(\n  expressions: QueryEditorArrayExpression['expressions']\n): QueryEditorOperatorExpression[] {\n  return expressions.flatMap((expression) => {\n    if (expression.type === QueryEditorExpressionType.Operator) {\n      return expression;\n    }\n\n    if (expression.type === QueryEditorExpressionType.And || expression.type === QueryEditorExpressionType.Or) {\n      return flattenOperatorExpressions(expression.expressions);\n    }\n\n    // Expressions that we don't expect to find in the WHERE filter will be ignored\n    return [];\n  });\n}\n\n/** Returns a flattened list of WHERE filters, losing all context of nested filters or AND vs OR. Not suitable\n * if the UI supports nested conditions\n */\nexport function getFlattenedFilters(sql: SQLExpression): QueryEditorOperatorExpression[] {\n  const where = sql.where;\n  return flattenOperatorExpressions(where?.expressions ?? []);\n}\n\n/**\n * Given an array of Expressions, flattens them to the leaf Operator expressions.\n * Note, this loses context of any nested ANDs or ORs, so will not be useful once we support nested conditions */\nfunction flattenGroupByExpressions(\n  expressions: QueryEditorArrayExpression['expressions']\n): QueryEditorGroupByExpression[] {\n  return expressions.flatMap((expression) => {\n    if (expression.type === QueryEditorExpressionType.GroupBy) {\n      return expression;\n    }\n\n    // Expressions that we don't expect to find in the GROUP BY will be ignored\n    return [];\n  });\n}\n\n/** Returns a flattened list of GROUP BY expressions, losing all context of nested filters or AND vs OR.\n */\nexport function getFlattenedGroupBys(sql: SQLExpression): QueryEditorGroupByExpression[] {\n  const groupBy = sql.groupBy;\n  return flattenGroupByExpressions(groupBy?.expressions ?? []);\n}\n\n/** Converts a string array to a Dimensions object with null values  **/\nexport function stringArrayToDimensions(arr: string[]): Dimensions {\n  return arr.reduce((acc, curr) => {\n    if (curr) {\n      return { ...acc, [curr]: null };\n    }\n    return acc;\n  }, {});\n}\n\nexport function setSql(query: CloudWatchMetricsQuery, sql: SQLExpression): CloudWatchMetricsQuery {\n  return {\n    ...query,\n    sql: {\n      ...(query.sql ?? {}),\n      ...sql,\n    },\n  };\n}\n\nexport function setNamespace(query: CloudWatchMetricsQuery, namespace: string | undefined): CloudWatchMetricsQuery {\n  const sql = query.sql ?? {};\n  //updating `namespace` props for CloudWatchMetricsQuery\n  query.namespace = namespace ? namespace : '';\n\n  if (namespace === undefined) {\n    return setSql(query, {\n      from: undefined,\n    });\n  }\n\n  // It's just a simple `FROM \"AWS/EC2\"` expression\n  if (!sql.from || sql.from.type === QueryEditorExpressionType.Property) {\n    return setSql(query, {\n      from: {\n        type: QueryEditorExpressionType.Property,\n        property: {\n          type: QueryEditorPropertyType.String,\n          name: namespace,\n        },\n      },\n    });\n  }\n\n  // It's a more complicated `FROM SCHEMA(\"AWS/EC2\", ...)` expression\n  if (sql.from.type === QueryEditorExpressionType.Function) {\n    const namespaceParam: QueryEditorFunctionParameterExpression = {\n      type: QueryEditorExpressionType.FunctionParameter,\n      name: namespace,\n    };\n\n    const labelKeys = (sql.from.parameters ?? []).slice(1);\n\n    return setSql(query, {\n      from: {\n        type: QueryEditorExpressionType.Function,\n        name: SCHEMA,\n        parameters: [namespaceParam, ...labelKeys],\n      },\n    });\n  }\n\n  // TODO: do the with schema bit\n  return query;\n}\n\nexport function setSchemaLabels(\n  query: CloudWatchMetricsQuery,\n  schemaLabels: Array<SelectableValue<string>> | SelectableValue<string>\n): CloudWatchMetricsQuery {\n  const sql = query.sql ?? {};\n  schemaLabels = Array.isArray(schemaLabels) ? schemaLabels.map((l) => l.value) : [schemaLabels.value];\n\n  // schema labels are the second parameter in the schema function. `... FROM SCHEMA(\"AWS/EC2\", label1, label2 ...)`\n  if (sql.from?.type === QueryEditorExpressionType.Function && sql.from.parameters?.length) {\n    const parameters: QueryEditorFunctionParameterExpression[] = (schemaLabels ?? []).map((label: string) => ({\n      type: QueryEditorExpressionType.FunctionParameter,\n      name: label,\n    }));\n    const namespaceParam = (sql.from.parameters ?? [])[0];\n\n    return setSql(query, {\n      from: {\n        type: QueryEditorExpressionType.Function,\n        name: SCHEMA,\n        parameters: [namespaceParam, ...parameters],\n      },\n    });\n  }\n\n  return query;\n}\n\nexport function setMetricName(query: CloudWatchMetricsQuery, metricName: string): CloudWatchMetricsQuery {\n  const param: QueryEditorFunctionParameterExpression = {\n    type: QueryEditorExpressionType.FunctionParameter,\n    name: metricName,\n  };\n\n  return setSql(query, {\n    select: {\n      type: QueryEditorExpressionType.Function,\n      ...(query.sql?.select ?? {}),\n      parameters: [param],\n    },\n  });\n}\n\nexport function removeMetricName(query: CloudWatchMetricsQuery): CloudWatchMetricsQuery {\n  const queryWithNoParams = { ...query };\n  delete queryWithNoParams.sql?.select?.parameters;\n\n  return queryWithNoParams;\n}\n\nexport function setAggregation(query: CloudWatchMetricsQuery, aggregation: string): CloudWatchMetricsQuery {\n  return setSql(query, {\n    select: {\n      type: QueryEditorExpressionType.Function,\n      ...(query.sql?.select ?? {}),\n      name: aggregation,\n    },\n  });\n}\n\nexport function setOrderBy(query: CloudWatchMetricsQuery, aggregation: string): CloudWatchMetricsQuery {\n  return setSql(query, {\n    orderBy: {\n      type: QueryEditorExpressionType.Function,\n      name: aggregation,\n    },\n  });\n}\n\nexport function setWithSchema(query: CloudWatchMetricsQuery, withSchema: boolean): CloudWatchMetricsQuery {\n  const namespace = getNamespaceFromExpression((query.sql ?? {}).from);\n\n  if (withSchema) {\n    const namespaceParam: QueryEditorFunctionParameterExpression = {\n      type: QueryEditorExpressionType.FunctionParameter,\n      name: namespace,\n    };\n\n    return setSql(query, {\n      from: {\n        type: QueryEditorExpressionType.Function,\n        name: SCHEMA,\n        parameters: [namespaceParam],\n      },\n    });\n  }\n\n  return setSql(query, {\n    from: {\n      type: QueryEditorExpressionType.Property,\n      property: {\n        type: QueryEditorPropertyType.String,\n        name: namespace,\n      },\n    },\n  });\n}\n\n/** Sets the left hand side (InstanceId) in an OperatorExpression\n * Accepts a partial expression to use in an editor\n */\nexport function setOperatorExpressionProperty(\n  expression: Partial<QueryEditorOperatorExpression>,\n  property: string\n): QueryEditorOperatorExpression {\n  return {\n    type: QueryEditorExpressionType.Operator,\n    property: {\n      type: QueryEditorPropertyType.String,\n      name: property,\n    },\n    operator: expression.operator ?? {},\n  };\n}\n\n/** Sets the operator (\"==\") in an OperatorExpression\n * Accepts a partial expression to use in an editor\n */\nexport function setOperatorExpressionName(\n  expression: Partial<QueryEditorOperatorExpression>,\n  name: string\n): QueryEditorOperatorExpression {\n  return {\n    type: QueryEditorExpressionType.Operator,\n    property: expression.property ?? {\n      type: QueryEditorPropertyType.String,\n    },\n    operator: {\n      ...expression.operator,\n      name,\n    },\n  };\n}\n\n/** Sets the right hand side (\"i-abc123445\") in an OperatorExpression\n * Accepts a partial expression to use in an editor\n */\nexport function setOperatorExpressionValue(\n  expression: Partial<QueryEditorOperatorExpression>,\n  value: string\n): QueryEditorOperatorExpression {\n  return {\n    type: QueryEditorExpressionType.Operator,\n    property: expression.property ?? {\n      type: QueryEditorPropertyType.String,\n    },\n    operator: {\n      ...expression.operator,\n      value,\n    },\n  };\n}\n\n/** Creates a GroupByExpression for a specified field\n */\nexport function setGroupByField(field: string): QueryEditorGroupByExpression {\n  return {\n    type: QueryEditorExpressionType.GroupBy,\n    property: {\n      type: QueryEditorPropertyType.String,\n      name: field,\n    },\n  };\n}\n","import React, { useEffect, useMemo } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorSwitch } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { STATISTICS } from '../../cloudwatch-sql/language';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { useDimensionKeys, useMetrics, useNamespaces } from '../../hooks';\nimport { CloudWatchMetricsQuery } from '../../types';\nimport { appendTemplateVariables } from '../../utils/utils';\n\nimport {\n  getMetricNameFromExpression,\n  getNamespaceFromExpression,\n  getSchemaLabelKeys as getSchemaLabels,\n  isUsingWithSchema,\n  removeMetricName,\n  setAggregation,\n  setMetricName,\n  setNamespace,\n  setSchemaLabels,\n  setWithSchema,\n  stringArrayToDimensions,\n} from './utils';\n\ninterface SQLBuilderSelectRowProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onQueryChange: (query: CloudWatchMetricsQuery) => void;\n}\n\nconst AGGREGATIONS = STATISTICS.map(toOption);\n\nconst SQLBuilderSelectRow: React.FC<SQLBuilderSelectRowProps> = ({ datasource, query, onQueryChange }) => {\n  const sql = query.sql ?? {};\n\n  const aggregation = sql.select?.name;\n  useEffect(() => {\n    if (!aggregation) {\n      onQueryChange(setAggregation(query, STATISTICS[0]));\n    }\n  }, [aggregation, onQueryChange, query]);\n\n  const metricName = getMetricNameFromExpression(sql.select);\n  const namespace = getNamespaceFromExpression(sql.from);\n  const schemaLabels = getSchemaLabels(sql.from);\n  const withSchemaEnabled = isUsingWithSchema(sql.from);\n\n  const namespaceOptions = useNamespaces(datasource);\n  const metricOptions = useMetrics(datasource, { region: query.region, namespace });\n  const existingFilters = useMemo(() => stringArrayToDimensions(schemaLabels ?? []), [schemaLabels]);\n  const unusedDimensionKeys = useDimensionKeys(datasource, {\n    region: query.region,\n    namespace,\n    metricName,\n    dimensionFilters: existingFilters,\n  });\n  const dimensionKeys = useMemo(\n    () => (schemaLabels?.length ? [...unusedDimensionKeys, ...schemaLabels.map(toOption)] : unusedDimensionKeys),\n    [unusedDimensionKeys, schemaLabels]\n  );\n\n  const onNamespaceChange = async (query: CloudWatchMetricsQuery) => {\n    const validatedQuery = await validateMetricName(query);\n    onQueryChange(validatedQuery);\n  };\n\n  const validateMetricName = async (query: CloudWatchMetricsQuery) => {\n    let { region, sql, namespace } = query;\n    await datasource.api.getMetrics({ namespace, region }).then((result: Array<SelectableValue<string>>) => {\n      if (!result.some((metric) => metric.value === metricName)) {\n        sql = removeMetricName(query).sql;\n      }\n    });\n    return { ...query, sql };\n  };\n\n  return (\n    <>\n      <EditorFieldGroup>\n        <EditorField label=\"Namespace\" width={16}>\n          <Select\n            aria-label=\"Namespace\"\n            value={namespace ? toOption(namespace) : null}\n            inputId={`${query.refId}-cloudwatch-sql-namespace`}\n            options={namespaceOptions}\n            allowCustomValue\n            onChange={({ value }) => value && onNamespaceChange(setNamespace(query, value))}\n          />\n        </EditorField>\n\n        <EditorField label=\"With schema\">\n          <EditorSwitch\n            id={`${query.refId}-cloudwatch-sql-withSchema`}\n            value={withSchemaEnabled}\n            onChange={(ev) =>\n              ev.target instanceof HTMLInputElement && onQueryChange(setWithSchema(query, ev.target.checked))\n            }\n          />\n        </EditorField>\n\n        {withSchemaEnabled && (\n          <EditorField label=\"Schema labels\" disabled={!namespace}>\n            <Select\n              id={`${query.refId}-cloudwatch-sql-schema-label-keys`}\n              width=\"auto\"\n              isMulti={true}\n              value={schemaLabels ? schemaLabels.map(toOption) : null}\n              options={dimensionKeys}\n              allowCustomValue\n              onChange={(item) => item && onQueryChange(setSchemaLabels(query, item))}\n            />\n          </EditorField>\n        )}\n      </EditorFieldGroup>\n\n      <EditorFieldGroup>\n        <EditorField label=\"Metric name\" width={16}>\n          <Select\n            aria-label=\"Metric name\"\n            value={metricName ? toOption(metricName) : null}\n            options={metricOptions}\n            allowCustomValue\n            onChange={({ value }) => value && onQueryChange(setMetricName(query, value))}\n          />\n        </EditorField>\n\n        <EditorField label=\"Aggregation\" width={16}>\n          <Select\n            aria-label=\"Aggregation\"\n            value={aggregation ? toOption(aggregation) : null}\n            options={appendTemplateVariables(datasource, AGGREGATIONS)}\n            onChange={({ value }) => value && onQueryChange(setAggregation(query, value))}\n          />\n        </EditorField>\n      </EditorFieldGroup>\n    </>\n  );\n};\n\nexport default SQLBuilderSelectRow;\n","import React, { useMemo, useState } from 'react';\nimport { useAsyncFn } from 'react-use';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorList, InputGroup } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { COMPARISON_OPERATORS, EQUALS } from '../../cloudwatch-sql/language';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { QueryEditorExpressionType, QueryEditorOperatorExpression, QueryEditorPropertyType } from '../../expressions';\nimport { useDimensionKeys } from '../../hooks';\nimport { CloudWatchMetricsQuery } from '../../types';\nimport { appendTemplateVariables } from '../../utils/utils';\n\nimport {\n  getFlattenedFilters,\n  getMetricNameFromExpression,\n  getNamespaceFromExpression,\n  sanitizeOperator,\n  setOperatorExpressionName,\n  setOperatorExpressionProperty,\n  setOperatorExpressionValue,\n  setSql,\n} from './utils';\n\ninterface SQLFilterProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onQueryChange: (query: CloudWatchMetricsQuery) => void;\n}\n\nconst OPERATORS = COMPARISON_OPERATORS.map(toOption);\n\nconst SQLFilter: React.FC<SQLFilterProps> = ({ query, onQueryChange, datasource }) => {\n  const filtersFromQuery = useMemo(() => getFlattenedFilters(query.sql ?? {}), [query.sql]);\n  const [filters, setFilters] = useState<QueryEditorOperatorExpression[]>(filtersFromQuery);\n\n  const onChange = (newItems: Array<Partial<QueryEditorOperatorExpression>>) => {\n    // As new (empty object) items come in, with need to make sure they have the correct type\n    const cleaned = newItems.map(\n      (v): QueryEditorOperatorExpression => ({\n        type: QueryEditorExpressionType.Operator,\n        property: v.property ?? { type: QueryEditorPropertyType.String },\n        operator: v.operator ?? {\n          name: EQUALS,\n        },\n      })\n    );\n\n    setFilters(cleaned);\n\n    // Only save valid and complete filters into the query state\n    const validExpressions: QueryEditorOperatorExpression[] = [];\n    for (const operatorExpression of cleaned) {\n      const validated = sanitizeOperator(operatorExpression);\n      if (validated) {\n        validExpressions.push(validated);\n      }\n    }\n\n    const where = validExpressions.length\n      ? {\n          type: QueryEditorExpressionType.And as const,\n          expressions: validExpressions,\n        }\n      : undefined;\n\n    onQueryChange(setSql(query, { where }));\n  };\n\n  return <EditorList items={filters} onChange={onChange} renderItem={makeRenderFilter(datasource, query)} />;\n};\n\n// Making component functions in the render body is not recommended, but it works for now.\n// If some problems arise (perhaps with state going missing), consider this to be a potential cause\nfunction makeRenderFilter(datasource: CloudWatchDatasource, query: CloudWatchMetricsQuery) {\n  function renderFilter(\n    item: Partial<QueryEditorOperatorExpression>,\n    onChange: (item: QueryEditorOperatorExpression) => void,\n    onDelete: () => void\n  ) {\n    return <FilterItem datasource={datasource} query={query} filter={item} onChange={onChange} onDelete={onDelete} />;\n  }\n\n  return renderFilter;\n}\n\nexport default SQLFilter;\n\ninterface FilterItemProps {\n  datasource: CloudWatchDatasource;\n  query: CloudWatchMetricsQuery;\n  filter: Partial<QueryEditorOperatorExpression>;\n  onChange: (item: QueryEditorOperatorExpression) => void;\n  onDelete: () => void;\n}\n\nconst FilterItem: React.FC<FilterItemProps> = (props) => {\n  const { datasource, query, filter, onChange, onDelete } = props;\n  const sql = query.sql ?? {};\n\n  const namespace = getNamespaceFromExpression(sql.from);\n  const metricName = getMetricNameFromExpression(sql.select);\n\n  const dimensionKeys = useDimensionKeys(datasource, { region: query.region, namespace, metricName });\n\n  const loadDimensionValues = async () => {\n    if (!filter.property?.name || !namespace) {\n      return [];\n    }\n\n    return datasource.api\n      .getDimensionValues({ region: query.region, namespace, metricName, dimensionKey: filter.property.name })\n      .then((result: Array<SelectableValue<string>>) => {\n        return appendTemplateVariables(datasource, result);\n      });\n  };\n\n  const [state, loadOptions] = useAsyncFn(loadDimensionValues, [\n    query.region,\n    namespace,\n    metricName,\n    filter.property?.name,\n  ]);\n\n  return (\n    <InputGroup>\n      <Select\n        width=\"auto\"\n        value={filter.property?.name ? toOption(filter.property?.name) : null}\n        options={dimensionKeys}\n        allowCustomValue\n        onChange={({ value }) => value && onChange(setOperatorExpressionProperty(filter, value))}\n      />\n\n      <Select\n        width=\"auto\"\n        value={filter.operator?.name && toOption(filter.operator.name)}\n        options={OPERATORS}\n        onChange={({ value }) => value && onChange(setOperatorExpressionName(filter, value))}\n      />\n\n      <Select\n        width=\"auto\"\n        isLoading={state.loading}\n        value={\n          filter.operator?.value && typeof filter.operator?.value === 'string' ? toOption(filter.operator?.value) : null\n        }\n        options={state.value}\n        allowCustomValue\n        onOpenMenu={loadOptions}\n        onChange={({ value }) => value && onChange(setOperatorExpressionValue(filter, value))}\n      />\n\n      <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} />\n    </InputGroup>\n  );\n};\n","import React, { useMemo, useState } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorList, InputGroup } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../../datasource';\nimport { QueryEditorExpressionType, QueryEditorGroupByExpression, QueryEditorPropertyType } from '../../expressions';\nimport { useDimensionKeys } from '../../hooks';\nimport { CloudWatchMetricsQuery } from '../../types';\n\nimport {\n  getFlattenedGroupBys,\n  getMetricNameFromExpression,\n  getNamespaceFromExpression,\n  setGroupByField,\n  setSql,\n} from './utils';\n\ninterface SQLGroupByProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onQueryChange: (query: CloudWatchMetricsQuery) => void;\n}\n\nconst SQLGroupBy: React.FC<SQLGroupByProps> = ({ query, datasource, onQueryChange }) => {\n  const sql = query.sql ?? {};\n  const groupBysFromQuery = useMemo(() => getFlattenedGroupBys(query.sql ?? {}), [query.sql]);\n  const [items, setItems] = useState<QueryEditorGroupByExpression[]>(groupBysFromQuery);\n\n  const namespace = getNamespaceFromExpression(sql.from);\n  const metricName = getMetricNameFromExpression(sql.select);\n\n  const baseOptions = useDimensionKeys(datasource, { region: query.region, namespace, metricName });\n  const options = useMemo(\n    // Exclude options we've already selected\n    () => baseOptions.filter((option) => !groupBysFromQuery.some((v) => v.property.name === option.value)),\n    [baseOptions, groupBysFromQuery]\n  );\n\n  const onChange = (newItems: Array<Partial<QueryEditorGroupByExpression>>) => {\n    // As new (empty object) items come in, with need to make sure they have the correct type\n    const cleaned = newItems.map(\n      (v): QueryEditorGroupByExpression => ({\n        type: QueryEditorExpressionType.GroupBy,\n        property: {\n          type: QueryEditorPropertyType.String,\n          name: v.property?.name,\n        },\n      })\n    );\n\n    setItems(cleaned);\n\n    // Only save complete expressions into the query state;\n    const completeExpressions = cleaned.filter((v) => v.property?.name);\n\n    const groupBy = completeExpressions.length\n      ? {\n          type: QueryEditorExpressionType.And as const,\n          expressions: completeExpressions,\n        }\n      : undefined;\n\n    onQueryChange(setSql(query, { groupBy }));\n  };\n\n  return <EditorList items={items} onChange={onChange} renderItem={makeRenderItem(options)} />;\n};\n\nfunction makeRenderItem(options: Array<SelectableValue<string>>) {\n  function renderItem(\n    item: Partial<QueryEditorGroupByExpression>,\n    onChange: (item: QueryEditorGroupByExpression) => void,\n    onDelete: () => void\n  ) {\n    return <GroupByItem options={options} item={item} onChange={onChange} onDelete={onDelete} />;\n  }\n\n  return renderItem;\n}\n\ninterface GroupByItemProps {\n  options: Array<SelectableValue<string>>;\n  item: Partial<QueryEditorGroupByExpression>;\n  onChange: (item: QueryEditorGroupByExpression) => void;\n  onDelete: () => void;\n}\n\nconst GroupByItem: React.FC<GroupByItemProps> = (props) => {\n  const { options, item, onChange, onDelete } = props;\n  const fieldName = item.property?.name;\n\n  return (\n    <InputGroup>\n      <Select\n        aria-label={`Group by ${fieldName ?? 'filter key'}`}\n        width=\"auto\"\n        value={fieldName ? toOption(fieldName) : null}\n        options={options}\n        allowCustomValue\n        onChange={({ value }) => value && onChange(setGroupByField(value))}\n      />\n\n      <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} />\n    </InputGroup>\n  );\n};\n\nexport default SQLGroupBy;\n","import React from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorField, EditorFieldGroup, InputGroup } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { ASC, DESC, STATISTICS } from '../../cloudwatch-sql/language';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { CloudWatchMetricsQuery } from '../../types';\nimport { appendTemplateVariables } from '../../utils/utils';\n\nimport { setOrderBy, setSql } from './utils';\n\ninterface SQLBuilderSelectRowProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onQueryChange: (query: CloudWatchMetricsQuery) => void;\n}\n\nconst orderByDirections: Array<SelectableValue<string>> = [\n  { label: ASC, value: ASC },\n  { label: DESC, value: DESC },\n];\n\nconst SQLOrderByGroup: React.FC<SQLBuilderSelectRowProps> = ({ query, onQueryChange, datasource }) => {\n  const sql = query.sql ?? {};\n  const orderBy = sql.orderBy?.name;\n  const orderByDirection = sql.orderByDirection;\n\n  return (\n    <EditorFieldGroup>\n      <EditorField label=\"Order by\" optional width={16}>\n        <InputGroup>\n          <Select\n            aria-label=\"Order by\"\n            onChange={({ value }) => value && onQueryChange(setOrderBy(query, value))}\n            options={appendTemplateVariables(datasource, STATISTICS.map(toOption))}\n            value={orderBy ? toOption(orderBy) : null}\n          />\n          {orderBy && (\n            <AccessoryButton\n              aria-label=\"remove\"\n              icon=\"times\"\n              variant=\"secondary\"\n              onClick={() => onQueryChange(setSql(query, { orderBy: undefined }))}\n            />\n          )}\n        </InputGroup>\n      </EditorField>\n\n      <EditorField label=\"Direction\" disabled={!orderBy} width={16}>\n        <Select\n          aria-label=\"Direction\"\n          inputId=\"cloudwatch-sql-order-by-direction\"\n          value={orderByDirection ? toOption(orderByDirection) : orderByDirections[0]}\n          options={appendTemplateVariables(datasource, orderByDirections)}\n          onChange={(item) => item && onQueryChange(setSql(query, { orderByDirection: item.value }))}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n};\n\nexport default SQLOrderByGroup;\n","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { EditorField, EditorRow, EditorRows } from '@grafana/experimental';\nimport { Input } from '@grafana/ui';\n\nimport SQLGenerator from '../../cloudwatch-sql/SQLGenerator';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { CloudWatchMetricsQuery } from '../../types';\n\nimport SQLBuilderSelectRow from './SQLBuilderSelectRow';\nimport SQLFilter from './SQLFilter';\nimport SQLGroupBy from './SQLGroupBy';\nimport SQLOrderByGroup from './SQLOrderByGroup';\nimport { setSql } from './utils';\n\nexport type Props = {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onChange: (value: CloudWatchMetricsQuery) => void;\n  onRunQuery: () => void;\n};\n\nexport function SQLBuilderEditor({ query, datasource, onChange, onRunQuery }: React.PropsWithChildren<Props>) {\n  const sql = query.sql ?? {};\n\n  const onQueryChange = useCallback(\n    (query: CloudWatchMetricsQuery) => {\n      const sqlGenerator = new SQLGenerator();\n      const sqlString = sqlGenerator.expressionToSqlQuery(query.sql ?? {});\n      const fullQuery = {\n        ...query,\n        sqlExpression: sqlString,\n      };\n\n      onChange(fullQuery);\n      onRunQuery();\n    },\n    [onChange, onRunQuery]\n  );\n\n  const [sqlPreview, setSQLPreview] = useState<string | undefined>();\n  useEffect(() => {\n    const sqlGenerator = new SQLGenerator();\n    const sqlString = sqlGenerator.expressionToSqlQuery(query.sql ?? {});\n    if (sqlPreview !== sqlString) {\n      setSQLPreview(sqlString);\n    }\n  }, [query, sqlPreview, setSQLPreview]);\n\n  return (\n    <EditorRows>\n      <EditorRow>\n        <SQLBuilderSelectRow query={query} onQueryChange={onQueryChange} datasource={datasource} />\n      </EditorRow>\n\n      <EditorRow>\n        <EditorField label=\"Filter\" optional={true}>\n          <SQLFilter query={query} onQueryChange={onQueryChange} datasource={datasource} />\n        </EditorField>\n      </EditorRow>\n\n      <EditorRow>\n        <EditorField label=\"Group by\" optional>\n          <SQLGroupBy query={query} onQueryChange={onQueryChange} datasource={datasource} />\n        </EditorField>\n\n        <SQLOrderByGroup query={query} onQueryChange={onQueryChange} datasource={datasource}></SQLOrderByGroup>\n\n        <EditorField label=\"Limit\" optional>\n          <Input\n            id={`${query.refId}-cloudwatch-sql-builder-editor-limit`}\n            value={sql.limit}\n            onChange={(e) => {\n              const val = e.currentTarget.valueAsNumber;\n              onQueryChange(setSql(query, { limit: isNaN(val) ? undefined : val }));\n            }}\n            type=\"number\"\n            min={1}\n          />\n        </EditorField>\n      </EditorRow>\n\n      {sqlPreview && (\n        <EditorRow>\n          {process.env.NODE_ENV === 'development' && <pre>{JSON.stringify(query.sql ?? {}, null, 2)}</pre>}\n          <pre>{sqlPreview ?? ''}</pre>\n        </EditorRow>\n      )}\n    </EditorRows>\n  );\n}\n","import { LanguageDefinition } from '../monarch/register';\n\nconst cloudWatchMetricMathLanguageDefinition: LanguageDefinition = {\n  id: 'cloudwatch-MetricMath',\n  extensions: [],\n  aliases: [],\n  mimetypes: [],\n  loader: () => import('./language'),\n};\nexport default cloudWatchMetricMathLanguageDefinition;\n","export const TRIGGER_SUGGEST = {\n  id: 'editor.action.triggerSuggest',\n  title: '',\n};\n","import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\n\nimport { Monaco } from '@grafana/ui';\n\nimport { Completeable } from './types';\n\nexport type LanguageDefinition = {\n  id: string;\n  extensions: string[];\n  aliases: string[];\n  mimetypes: string[];\n  loader: () => Promise<{\n    language: monacoType.languages.IMonarchLanguage;\n    conf: monacoType.languages.LanguageConfiguration;\n  }>;\n};\n\nexport const registerLanguage = (\n  monaco: Monaco,\n  language: LanguageDefinition,\n  completionItemProvider: Completeable\n) => {\n  const { id, loader } = language;\n\n  const languages = monaco.languages.getLanguages();\n  if (languages.find((l) => l.id === id)) {\n    return;\n  }\n\n  monaco.languages.register({ id });\n  loader().then((monarch) => {\n    monaco.languages.setMonarchTokensProvider(id, monarch.language);\n    monaco.languages.setLanguageConfiguration(id, monarch.conf);\n    monaco.languages.registerCompletionItemProvider(id, completionItemProvider.getCompletionProvider(monaco, language));\n  });\n};\n","import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\nimport React, { useCallback, useRef } from 'react';\n\nimport { CodeEditor, Monaco } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport language from '../metric-math/definition';\nimport { TRIGGER_SUGGEST } from '../monarch/commands';\nimport { registerLanguage } from '../monarch/register';\n\nexport interface Props {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  expression: string;\n  datasource: CloudWatchDatasource;\n}\n\nexport function MathExpressionQueryField({\n  expression: query,\n  onChange,\n  onRunQuery,\n  datasource,\n}: React.PropsWithChildren<Props>) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const onEditorMount = useCallback(\n    (editor: monacoType.editor.IStandaloneCodeEditor, monaco: Monaco) => {\n      editor.onDidFocusEditorText(() => editor.trigger(TRIGGER_SUGGEST.id, TRIGGER_SUGGEST.id, {}));\n      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {\n        const text = editor.getValue();\n        onChange(text);\n        onRunQuery();\n      });\n\n      // auto resizes the editor to be the height of the content it holds\n      // this code comes from the Prometheus query editor.\n      // We may wish to consider abstracting it into the grafana/ui repo in the future\n      const updateElementHeight = () => {\n        const containerDiv = containerRef.current;\n        if (containerDiv !== null && editor.getContentHeight() < 200) {\n          const pixelHeight = Math.max(32, editor.getContentHeight());\n          containerDiv.style.height = `${pixelHeight}px`;\n          containerDiv.style.width = '100%';\n          const pixelWidth = containerDiv.clientWidth;\n          editor.layout({ width: pixelWidth, height: pixelHeight });\n        }\n      };\n\n      editor.onDidContentSizeChange(updateElementHeight);\n      updateElementHeight();\n    },\n    [onChange, onRunQuery]\n  );\n\n  return (\n    <div ref={containerRef}>\n      <CodeEditor\n        monacoOptions={{\n          // without this setting, the auto-resize functionality causes an infinite loop, don't remove it!\n          scrollBeyondLastLine: false,\n\n          // These additional options are style focused and are a subset of those in the query editor in Prometheus\n          fontSize: 14,\n          lineNumbers: 'off',\n          renderLineHighlight: 'none',\n          scrollbar: {\n            vertical: 'hidden',\n            horizontal: 'hidden',\n          },\n          suggestFontSize: 12,\n          wordWrap: 'on',\n          padding: {\n            top: 6,\n          },\n        }}\n        language={language.id}\n        value={query}\n        onBlur={(value) => {\n          if (value !== query) {\n            onChange(value);\n            onRunQuery();\n          }\n        }}\n        onBeforeEditorMount={(monaco: Monaco) =>\n          registerLanguage(monaco, language, datasource.metricMathCompletionItemProvider)\n        }\n        onEditorDidMount={onEditorMount}\n      />\n    </div>\n  );\n}\n","import { LanguageDefinition } from '../monarch/register';\n\nconst cloudWatchSqlLanguageDefinition: LanguageDefinition = {\n  id: 'cloudwatch-sql',\n  extensions: ['.cloudwatchSql'],\n  aliases: ['CloudWatch', 'cloudwatch', 'CloudWatchSQL'],\n  mimetypes: [],\n  loader: () => import('./language'),\n};\nexport default cloudWatchSqlLanguageDefinition;\n","import type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\nimport React, { FunctionComponent, useCallback, useEffect } from 'react';\n\nimport { CodeEditor, Monaco } from '@grafana/ui';\n\nimport language from '../cloudwatch-sql/definition';\nimport { CloudWatchDatasource } from '../datasource';\nimport { TRIGGER_SUGGEST } from '../monarch/commands';\nimport { registerLanguage } from '../monarch/register';\n\nexport interface Props {\n  region: string;\n  sql: string;\n  onChange: (sql: string) => void;\n  onRunQuery: () => void;\n  datasource: CloudWatchDatasource;\n}\n\nexport const SQLCodeEditor: FunctionComponent<Props> = ({ region, sql, onChange, onRunQuery, datasource }) => {\n  useEffect(() => {\n    datasource.sqlCompletionItemProvider.setRegion(region);\n  }, [region, datasource]);\n\n  const onEditorMount = useCallback(\n    (editor: monacoType.editor.IStandaloneCodeEditor, monaco: Monaco) => {\n      editor.onDidFocusEditorText(() => editor.trigger(TRIGGER_SUGGEST.id, TRIGGER_SUGGEST.id, {}));\n      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {\n        const text = editor.getValue();\n        onChange(text);\n        onRunQuery();\n      });\n    },\n    [onChange, onRunQuery]\n  );\n\n  return (\n    <CodeEditor\n      height={'150px'}\n      language={language.id}\n      value={sql}\n      onBlur={(value) => {\n        if (value !== sql) {\n          onChange(value);\n        }\n      }}\n      showMiniMap={false}\n      showLineNumbers={true}\n      onBeforeEditorMount={(monaco: Monaco) => registerLanguage(monaco, language, datasource.sqlCompletionItemProvider)}\n      onEditorDidMount={onEditorMount}\n    />\n  );\n};\n","import { monacoTypes } from '@grafana/ui';\n\nimport { TokenTypes } from './types';\n\nexport class LinkedToken {\n  constructor(\n    public type: string,\n    public value: string,\n    public range: monacoTypes.IRange,\n    public previous: LinkedToken | null,\n    public next: LinkedToken | null,\n    public tokenTypes: TokenTypes\n  ) {}\n\n  isKeyword(): boolean {\n    return this.type === this.tokenTypes.Keyword;\n  }\n\n  isWhiteSpace(): boolean {\n    return this.type === this.tokenTypes.Whitespace;\n  }\n\n  isParenthesis(): boolean {\n    return this.type === this.tokenTypes.Parenthesis;\n  }\n\n  isIdentifier(): boolean {\n    return this.type === this.tokenTypes.Identifier;\n  }\n\n  isString(): boolean {\n    return this.type === this.tokenTypes.String;\n  }\n\n  isDoubleQuotedString(): boolean {\n    return this.type === this.tokenTypes.Type;\n  }\n\n  isVariable(): boolean {\n    return this.type === this.tokenTypes.Variable;\n  }\n\n  isFunction(): boolean {\n    return this.type === this.tokenTypes.Function;\n  }\n\n  isNumber(): boolean {\n    return this.type === this.tokenTypes.Number;\n  }\n\n  is(type: string, value?: string | number | boolean): boolean {\n    const isType = this.type === type;\n    return value !== undefined ? isType && this.value === value : isType;\n  }\n\n  endsWith(value: string | number | boolean): boolean {\n    return this.value === value || this.value[this.value.length - 1] === value;\n  }\n\n  getPreviousNonWhiteSpaceToken(): LinkedToken | null {\n    let curr = this.previous;\n    while (curr != null) {\n      if (!curr.isWhiteSpace()) {\n        return curr;\n      }\n      curr = curr.previous;\n    }\n    return null;\n  }\n\n  getPreviousOfType(type: string, value?: string): LinkedToken | null {\n    let curr = this.previous;\n    while (curr != null) {\n      const isType = curr.type === type;\n      if (value !== undefined ? isType && curr.value === value : isType) {\n        return curr;\n      }\n      curr = curr.previous;\n    }\n    return null;\n  }\n\n  getPreviousUntil(type: string, ignoreTypes: string[], value?: string): LinkedToken[] | null {\n    let tokens: LinkedToken[] = [];\n    let curr = this.previous;\n    while (curr != null) {\n      if (ignoreTypes.some((t) => t === curr?.type)) {\n        curr = curr.previous;\n        continue;\n      }\n\n      const isType = curr.type === type;\n      if (value !== undefined ? isType && curr.value === value : isType) {\n        return tokens;\n      }\n      if (!curr.isWhiteSpace()) {\n        tokens.push(curr);\n      }\n      curr = curr.previous;\n    }\n\n    return tokens;\n  }\n\n  getNextUntil(type: string, ignoreTypes: string[], value?: string): LinkedToken[] | null {\n    let tokens: LinkedToken[] = [];\n    let curr = this.next;\n    while (curr != null) {\n      if (ignoreTypes.some((t) => t === curr?.type)) {\n        curr = curr.next;\n        continue;\n      }\n\n      const isType = curr.type === type;\n      if (value !== undefined ? isType && curr.value === value : isType) {\n        return tokens;\n      }\n      if (!curr.isWhiteSpace()) {\n        tokens.push(curr);\n      }\n      curr = curr.next;\n    }\n\n    return tokens;\n  }\n\n  getPreviousKeyword(): LinkedToken | null {\n    let curr = this.previous;\n    while (curr != null) {\n      if (curr.isKeyword()) {\n        return curr;\n      }\n      curr = curr.previous;\n    }\n    return null;\n  }\n\n  getNextNonWhiteSpaceToken(): LinkedToken | null {\n    let curr = this.next;\n    while (curr != null) {\n      if (!curr.isWhiteSpace()) {\n        return curr;\n      }\n      curr = curr.next;\n    }\n    return null;\n  }\n\n  getNextOfType(type: string, value?: string): LinkedToken | null {\n    let curr = this.next;\n    while (curr != null) {\n      const isType = curr.type === type;\n      if (value !== undefined ? isType && curr.value === value : isType) {\n        return curr;\n      }\n      curr = curr.next;\n    }\n    return null;\n  }\n}\n","import type { monacoTypes } from '@grafana/ui';\n\nimport { LinkedToken } from './LinkedToken';\nimport { LanguageDefinition } from './register';\nimport { Monaco, TokenTypes } from './types';\n\nexport function linkedTokenBuilder(\n  monaco: Monaco,\n  language: LanguageDefinition,\n  model: monacoTypes.editor.ITextModel,\n  position: monacoTypes.IPosition,\n  tokenTypes: TokenTypes\n) {\n  let current: LinkedToken | null = null;\n  let previous: LinkedToken | null = null;\n  const tokensPerLine = monaco.editor.tokenize(model.getValue() ?? '', language.id);\n\n  for (let lineIndex = 0; lineIndex < tokensPerLine.length; lineIndex++) {\n    const tokens = tokensPerLine[lineIndex];\n    // In case position is first column in new line, add empty whitespace token so that links are not broken\n    if (!tokens.length && previous) {\n      const token: monacoTypes.Token = {\n        offset: 0,\n        type: tokenTypes.Whitespace,\n        language: language.id,\n        _tokenBrand: undefined,\n      };\n      tokens.push(token);\n    }\n\n    for (let columnIndex = 0; columnIndex < tokens.length; columnIndex++) {\n      const token = tokens[columnIndex];\n      let endColumn =\n        tokens.length > columnIndex + 1 ? tokens[columnIndex + 1].offset + 1 : model.getLineLength(lineIndex + 1) + 1;\n\n      const range: monacoTypes.IRange = {\n        startLineNumber: lineIndex + 1,\n        startColumn: token.offset === 0 ? 0 : token.offset + 1,\n        endLineNumber: lineIndex + 1,\n        endColumn,\n      };\n\n      const value = model.getValueInRange(range);\n      const newToken: LinkedToken = new LinkedToken(token.type, value, range, previous, null, tokenTypes);\n\n      if (monaco.Range.containsPosition(range, position)) {\n        current = newToken;\n      }\n\n      if (previous) {\n        previous.next = newToken;\n      }\n      previous = newToken;\n    }\n  }\n\n  return current;\n}\n","import { monacoTypes } from '@grafana/ui';\n\nimport { LanguageDefinition } from './register';\n\nexport interface TokenTypes {\n  Parenthesis: string;\n  Whitespace: string;\n  Keyword: string;\n  Delimiter: string;\n  Operator: string;\n  Identifier: string;\n  Type: string;\n  Function: string;\n  Number: string;\n  String: string;\n  Variable: string;\n}\n\nexport enum StatementPosition {\n  Unknown,\n  // sql\n  SelectKeyword,\n  AfterSelectKeyword,\n  AfterSelectFuncFirstArgument,\n  AfterFromKeyword,\n  SchemaFuncFirstArgument,\n  SchemaFuncExtraArgument,\n  FromKeyword,\n  AfterFrom,\n  WhereKey,\n  WhereComparisonOperator,\n  WhereValue,\n  AfterWhereValue,\n  AfterGroupByKeywords,\n  AfterGroupBy,\n  AfterOrderByKeywords,\n  AfterOrderByFunction,\n  AfterOrderByDirection,\n  // metric math\n  PredefinedFunction,\n  SearchFuncSecondArg,\n  SearchFuncThirdArg,\n  PredefinedFuncSecondArg,\n  AfterFunction,\n  WithinString,\n}\n\nexport enum SuggestionKind {\n  SelectKeyword,\n  FunctionsWithArguments,\n  Metrics,\n  FromKeyword,\n  SchemaKeyword,\n  Namespaces,\n  LabelKeys,\n  WhereKeyword,\n  GroupByKeywords,\n  OrderByKeywords,\n  FunctionsWithoutArguments,\n  LimitKeyword,\n  SortOrderDirectionKeyword,\n  ComparisonOperators,\n  LabelValues,\n  LogicalOperators,\n\n  // metricmath,\n  KeywordArguments,\n  Operators,\n  Statistic,\n  Period,\n}\n\nexport enum CompletionItemPriority {\n  High = 'a',\n  MediumHigh = 'd',\n  Medium = 'g',\n  MediumLow = 'k',\n  Low = 'q',\n}\n\nexport interface Editor {\n  tokenize: (value: string, languageId: string) => monacoTypes.Token[][];\n}\n\nexport interface Range {\n  containsPosition: (range: monacoTypes.IRange, position: monacoTypes.IPosition) => boolean;\n  fromPositions: (start: monacoTypes.IPosition, end?: monacoTypes.IPosition) => monacoTypes.Range;\n}\n\nexport interface Languages {\n  CompletionItemInsertTextRule: {\n    InsertAsSnippet: 4;\n  };\n  CompletionItemKind: {\n    Function: 1;\n  };\n}\nexport interface Monaco {\n  editor: Editor;\n  Range: Range;\n  languages: Languages;\n}\n\nexport interface Completeable {\n  getCompletionProvider(\n    monaco: Monaco,\n    languageDefinition: LanguageDefinition\n  ): monacoTypes.languages.CompletionItemProvider;\n}\n","import { LanguageDefinition } from '../monarch/register';\n\nconst cloudWatchDynamicLabelsLanguageDefinition: LanguageDefinition = {\n  id: 'cloudwatch-dynamicLabels',\n  extensions: [],\n  aliases: [],\n  mimetypes: [],\n  loader: () => import('./language'),\n};\nexport default cloudWatchDynamicLabelsLanguageDefinition;\n","import { css, cx } from '@emotion/css';\nimport type * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\nimport React, { useCallback, useRef } from 'react';\n\nimport { CodeEditor, getInputStyles, Monaco, useTheme2 } from '@grafana/ui';\n\nimport { DynamicLabelsCompletionItemProvider } from '../dynamic-labels/CompletionItemProvider';\nimport language from '../dynamic-labels/definition';\nimport { TRIGGER_SUGGEST } from '../monarch/commands';\nimport { registerLanguage } from '../monarch/register';\n\nconst dynamicLabelsCompletionItemProvider = new DynamicLabelsCompletionItemProvider();\n\nexport interface Props {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  label: string;\n  width: number;\n}\n\nexport function DynamicLabelsField({ label, width, onChange, onRunQuery }: Props) {\n  const theme = useTheme2();\n  const styles = getInputStyles({ theme, width });\n  const containerRef = useRef<HTMLDivElement>(null);\n  const onEditorMount = useCallback(\n    (editor: monacoType.editor.IStandaloneCodeEditor, monaco: Monaco) => {\n      editor.onDidFocusEditorText(() => editor.trigger(TRIGGER_SUGGEST.id, TRIGGER_SUGGEST.id, {}));\n      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {\n        const text = editor.getValue();\n        onChange(text);\n        onRunQuery();\n      });\n\n      const containerDiv = containerRef.current;\n      containerDiv !== null && editor.layout({ width: containerDiv.clientWidth, height: containerDiv.clientHeight });\n    },\n    [onChange, onRunQuery]\n  );\n\n  return (\n    <div ref={containerRef} className={cx(styles.wrapper)}>\n      <CodeEditor\n        containerStyles={css`\n          border: 1px solid ${theme.colors.action.disabledBackground};\n          &:hover {\n            border-color: ${theme.components.input.borderColor};\n          }\n        `}\n        monacoOptions={{\n          // without this setting, the auto-resize functionality causes an infinite loop, don't remove it!\n          scrollBeyondLastLine: false,\n\n          // These additional options are style focused and are a subset of those in the query editor in Prometheus\n          fontSize: 14,\n          lineNumbers: 'off',\n          renderLineHighlight: 'none',\n          overviewRulerLanes: 0,\n          scrollbar: {\n            vertical: 'hidden',\n            horizontal: 'hidden',\n          },\n          suggestFontSize: 12,\n          padding: {\n            top: 6,\n          },\n        }}\n        language={language.id}\n        value={label}\n        onBlur={(value) => {\n          if (value !== label) {\n            onChange(value);\n            onRunQuery();\n          }\n        }}\n        onBeforeEditorMount={(monaco: Monaco) =>\n          registerLanguage(monaco, language, dynamicLabelsCompletionItemProvider)\n        }\n        onEditorDidMount={onEditorMount}\n      />\n    </div>\n  );\n}\n","import type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { linkedTokenBuilder } from '../monarch/linkedTokenBuilder';\nimport { LanguageDefinition } from '../monarch/register';\nimport { Completeable, CompletionItemPriority, TokenTypes } from '../monarch/types';\n\nimport { DYNAMIC_LABEL_PATTERNS } from './language';\n\ntype CompletionItem = monacoTypes.languages.CompletionItem;\n\nexport class DynamicLabelsCompletionItemProvider implements Completeable {\n  tokenTypes: TokenTypes;\n\n  constructor() {\n    this.tokenTypes = {\n      Parenthesis: 'delimiter.parenthesis.cloudwatch-dynamicLabels',\n      Whitespace: 'white.cloudwatch-dynamicLabels',\n      Keyword: 'keyword.cloudwatch-dynamicLabels',\n      Delimiter: 'delimiter.cloudwatch-dynamicLabels',\n      Operator: 'operator.cloudwatch-dynamicLabels',\n      Identifier: 'identifier.cloudwatch-dynamicLabels',\n      Type: 'type.cloudwatch-dynamicLabels',\n      Function: 'predefined.cloudwatch-dynamicLabels',\n      Number: 'number.cloudwatch-dynamicLabels',\n      String: 'string.cloudwatch-dynamicLabels',\n      Variable: 'variable.cloudwatch-dynamicLabels',\n    };\n  }\n\n  // called by registerLanguage and passed to monaco with registerCompletionItemProvider\n  // returns an object that implements https://microsoft.github.io/monaco-editor/api/interfaces/monaco.languages.CompletionItemProvider.html\n  getCompletionProvider(monaco: Monaco, languageDefinition: LanguageDefinition) {\n    return {\n      triggerCharacters: [' ', '$', ',', '(', \"'\"], // one of these characters indicates that it is time to look for a suggestion\n      provideCompletionItems: async (model: monacoTypes.editor.ITextModel, position: monacoTypes.IPosition) => {\n        const currentToken = linkedTokenBuilder(monaco, languageDefinition, model, position, this.tokenTypes);\n        const invalidRangeToken = currentToken?.isWhiteSpace() || currentToken?.isParenthesis();\n        const range =\n          invalidRangeToken || !currentToken?.range ? monaco.Range.fromPositions(position) : currentToken?.range;\n        const toCompletionItem = (value: string, rest: Partial<CompletionItem> = {}) => {\n          const item: CompletionItem = {\n            label: value,\n            insertText: value,\n            kind: monaco.languages.CompletionItemKind.Field,\n            range,\n            sortText: CompletionItemPriority.Medium,\n            ...rest,\n          };\n          return item;\n        };\n        let suggestions: CompletionItem[] = [];\n        const next = currentToken?.next;\n        if (!currentToken?.isFunction() && (!next || next.isWhiteSpace())) {\n          suggestions = DYNAMIC_LABEL_PATTERNS.map((val) => toCompletionItem(val));\n          // always insert suggestion for dimension value and allow user to complete pattern by providing the dimension name\n          suggestions.push(\n            toCompletionItem(\"${PROP('Dim.')}\", {\n              sortText: CompletionItemPriority.High,\n              insertText: `\\${PROP('Dim.$0')} `,\n              insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            })\n          );\n        }\n\n        return {\n          suggestions,\n        };\n      },\n    };\n  }\n}\n","import { debounce } from 'lodash';\nimport React, { FunctionComponent, useState } from 'react';\n\nimport { Input } from '@grafana/ui';\n\nexport interface Props {\n  onChange: (alias: any) => void;\n  value: string;\n  id?: string;\n}\n\nexport const Alias: FunctionComponent<Props> = ({ value = '', onChange, id }) => {\n  const [alias, setAlias] = useState(value);\n\n  const propagateOnChange = debounce(onChange, 1500);\n\n  onChange = (e: any) => {\n    setAlias(e.target.value);\n    propagateOnChange(e.target.value);\n  };\n\n  return <Input id={id} type=\"text\" value={alias} onChange={onChange} aria-label=\"Optional alias\" />;\n};\n","import { config } from '@grafana/runtime';\n\nimport { CloudWatchMetricsQuery } from '../types';\n\n// Call this function to migrate queries from within the plugin.\nexport function migrateMetricQuery(query: CloudWatchMetricsQuery): CloudWatchMetricsQuery {\n  //add metric query migrations here\n  const migratedQuery = migrateAliasPatterns(query);\n  return migratedQuery;\n}\n\nconst aliasPatterns: Record<string, string> = {\n  metric: `PROP('MetricName')`,\n  namespace: `PROP('Namespace')`,\n  period: `PROP('Period')`,\n  region: `PROP('Region')`,\n  stat: `PROP('Stat')`,\n  label: `LABEL`,\n};\n\nexport function migrateAliasPatterns(query: CloudWatchMetricsQuery): CloudWatchMetricsQuery {\n  if (config.featureToggles.cloudWatchDynamicLabels && !query.hasOwnProperty('label')) {\n    const regex = /{{\\s*(.+?)\\s*}}/g;\n    query.label =\n      query.alias?.replace(regex, (_, value) => {\n        if (aliasPatterns.hasOwnProperty(value)) {\n          return `\\${${aliasPatterns[value]}}`;\n        }\n\n        return `\\${PROP('Dim.${value}')}`;\n      }) ?? '';\n  }\n\n  return query;\n}\n","import deepEqual from 'fast-deep-equal';\nimport { useEffect, useMemo } from 'react';\n\nimport { migrateMetricQuery } from '../../migrations/metricQueryMigrations';\nimport { CloudWatchMetricsQuery, MetricEditorMode, MetricQueryType } from '../../types';\n\nexport const DEFAULT_QUERY: Omit<CloudWatchMetricsQuery, 'refId'> = {\n  queryMode: 'Metrics',\n  namespace: '',\n  metricName: '',\n  expression: '',\n  dimensions: {},\n  region: 'default',\n  id: '',\n  statistic: 'Average',\n  period: '',\n  metricQueryType: MetricQueryType.Search,\n  metricEditorMode: MetricEditorMode.Builder,\n  sqlExpression: '',\n  matchExact: true,\n};\n\nconst prepareQuery = (query: CloudWatchMetricsQuery) => {\n  const withDefaults = { ...DEFAULT_QUERY, ...query };\n  const migratedQuery = migrateMetricQuery(withDefaults);\n\n  // If we didn't make any changes to the object, then return the original object to keep the\n  // identity the same, and not trigger any other useEffects or anything.\n  return deepEqual(migratedQuery, query) ? query : migratedQuery;\n};\n\n/**\n * Returns queries with some defaults + migrations, and calls onChange function to notify if it changes\n */\nconst usePreparedMetricsQuery = (\n  query: CloudWatchMetricsQuery,\n  onChangeQuery: (newQuery: CloudWatchMetricsQuery) => void\n) => {\n  const preparedQuery = useMemo(() => prepareQuery(query), [query]);\n\n  useEffect(() => {\n    if (preparedQuery !== query) {\n      onChangeQuery(preparedQuery);\n    }\n  }, [preparedQuery, query, onChangeQuery]);\n\n  return preparedQuery;\n};\n\nexport default usePreparedMetricsQuery;\n","import React, { ChangeEvent, useState } from 'react';\n\nimport { QueryEditorProps } from '@grafana/data';\nimport { EditorField, EditorRow, Space } from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport { Input } from '@grafana/ui';\n\nimport { MathExpressionQueryField, MetricStatEditor, SQLBuilderEditor, SQLCodeEditor } from '../';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { isCloudWatchMetricsQuery } from '../../guards';\nimport {\n  CloudWatchJsonData,\n  CloudWatchMetricsQuery,\n  CloudWatchQuery,\n  MetricEditorMode,\n  MetricQueryType,\n  MetricStat,\n} from '../../types';\nimport { DynamicLabelsField } from '../DynamicLabelsField';\nimport QueryHeader from '../QueryHeader';\n\nimport { Alias } from './Alias';\nimport usePreparedMetricsQuery from './usePreparedMetricsQuery';\n\nexport interface Props extends QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData> {\n  query: CloudWatchMetricsQuery;\n}\n\nexport const MetricsQueryEditor = (props: Props) => {\n  const { query, onRunQuery, datasource } = props;\n  const [sqlCodeEditorIsDirty, setSQLCodeEditorIsDirty] = useState(false);\n  const preparedQuery = usePreparedMetricsQuery(query, props.onChange);\n\n  const onChange = (query: CloudWatchQuery) => {\n    const { onChange, onRunQuery } = props;\n    onChange(query);\n    onRunQuery();\n  };\n\n  return (\n    <>\n      <QueryHeader\n        query={query}\n        onRunQuery={onRunQuery}\n        datasource={datasource}\n        onChange={(newQuery) => {\n          if (isCloudWatchMetricsQuery(newQuery) && newQuery.metricEditorMode !== query.metricEditorMode) {\n            setSQLCodeEditorIsDirty(false);\n          }\n          onChange(newQuery);\n        }}\n        sqlCodeEditorIsDirty={sqlCodeEditorIsDirty}\n      />\n      <Space v={0.5} />\n\n      {query.metricQueryType === MetricQueryType.Search && (\n        <>\n          {query.metricEditorMode === MetricEditorMode.Builder && (\n            <MetricStatEditor\n              {...props}\n              refId={query.refId}\n              metricStat={query}\n              onChange={(metricStat: MetricStat) => props.onChange({ ...query, ...metricStat })}\n            ></MetricStatEditor>\n          )}\n          {query.metricEditorMode === MetricEditorMode.Code && (\n            <MathExpressionQueryField\n              onRunQuery={onRunQuery}\n              expression={query.expression ?? ''}\n              onChange={(expression) => props.onChange({ ...query, expression })}\n              datasource={datasource}\n            ></MathExpressionQueryField>\n          )}\n        </>\n      )}\n      {query.metricQueryType === MetricQueryType.Query && (\n        <>\n          {query.metricEditorMode === MetricEditorMode.Code && (\n            <SQLCodeEditor\n              region={query.region}\n              sql={query.sqlExpression ?? ''}\n              onChange={(sqlExpression) => {\n                if (!sqlCodeEditorIsDirty) {\n                  setSQLCodeEditorIsDirty(true);\n                }\n                props.onChange({ ...preparedQuery, sqlExpression });\n              }}\n              onRunQuery={onRunQuery}\n              datasource={datasource}\n            />\n          )}\n\n          {query.metricEditorMode === MetricEditorMode.Builder && (\n            <>\n              <SQLBuilderEditor\n                query={query}\n                onChange={props.onChange}\n                onRunQuery={onRunQuery}\n                datasource={datasource}\n              ></SQLBuilderEditor>\n            </>\n          )}\n        </>\n      )}\n      <Space v={0.5} />\n      <EditorRow>\n        <EditorField\n          label=\"ID\"\n          width={26}\n          optional\n          tooltip=\"ID can be used to reference other queries in math expressions. The ID can include numbers, letters, and underscore, and must start with a lowercase letter.\"\n          invalid={!!query.id && !/^$|^[a-z][a-zA-Z0-9_]*$/.test(query.id)}\n        >\n          <Input\n            id={`${query.refId}-cloudwatch-metric-query-editor-id`}\n            onBlur={onRunQuery}\n            onChange={(event: ChangeEvent<HTMLInputElement>) => onChange({ ...preparedQuery, id: event.target.value })}\n            type=\"text\"\n            value={query.id}\n          />\n        </EditorField>\n\n        <EditorField label=\"Period\" width={26} tooltip=\"Minimum interval between points in seconds.\">\n          <Input\n            id={`${query.refId}-cloudwatch-metric-query-editor-period`}\n            value={query.period || ''}\n            placeholder=\"auto\"\n            onBlur={onRunQuery}\n            onChange={(event: ChangeEvent<HTMLInputElement>) =>\n              onChange({ ...preparedQuery, period: event.target.value })\n            }\n          />\n        </EditorField>\n\n        {config.featureToggles.cloudWatchDynamicLabels ? (\n          <EditorField\n            label=\"Label\"\n            width={26}\n            optional\n            tooltip=\"Change time series legend name using Dynamic labels. See documentation for details.\"\n          >\n            <DynamicLabelsField\n              width={52}\n              onRunQuery={onRunQuery}\n              label={preparedQuery.label ?? ''}\n              onChange={(label) => props.onChange({ ...query, label })}\n            ></DynamicLabelsField>\n          </EditorField>\n        ) : (\n          <EditorField\n            label=\"Alias\"\n            width={26}\n            optional\n            tooltip=\"Change time series legend name using this field. See documentation for replacement variable formats.\"\n          >\n            <Alias\n              id={`${query.refId}-cloudwatch-metric-query-editor-alias`}\n              value={preparedQuery.alias ?? ''}\n              onChange={(value: string) => onChange({ ...preparedQuery, alias: value })}\n            />\n          </EditorField>\n        )}\n      </EditorRow>\n    </>\n  );\n};\n","import React, { PureComponent } from 'react';\n\nimport { QueryEditorProps } from '@grafana/data';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { isCloudWatchLogsQuery, isCloudWatchMetricsQuery } from '../guards';\nimport { CloudWatchJsonData, CloudWatchQuery } from '../types';\n\nimport { MetricsQueryEditor } from '././MetricsQueryEditor/MetricsQueryEditor';\nimport LogsQueryEditor from './LogsQueryEditor';\n\nexport type Props = QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>;\n\nexport class PanelQueryEditor extends PureComponent<Props> {\n  render() {\n    const { query } = this.props;\n\n    return (\n      <>\n        {isCloudWatchMetricsQuery(query) && <MetricsQueryEditor {...this.props} query={query} />}\n        {isCloudWatchLogsQuery(query) && <LogsQueryEditor {...this.props} query={query} />}\n      </>\n    );\n  }\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { QueryEditorProps } from '@grafana/data';\nimport { EditorField, EditorHeader, EditorRow, EditorSwitch, InlineSelect, Space } from '@grafana/experimental';\nimport { Alert, Input } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { isCloudWatchAnnotationQuery } from '../guards';\nimport { useRegions } from '../hooks';\nimport { CloudWatchJsonData, CloudWatchQuery, MetricStat } from '../types';\n\nimport { MetricStatEditor } from './MetricStatEditor';\n\nexport type Props = QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>;\n\nexport const AnnotationQueryEditor = (props: Props) => {\n  const { query, onChange, datasource } = props;\n  const [regions, regionIsLoading] = useRegions(datasource);\n\n  if (!isCloudWatchAnnotationQuery(query)) {\n    return (\n      <Alert severity=\"error\" title=\"Invalid annotation query\" topSpacing={2}>\n        {JSON.stringify(query, null, 4)}\n      </Alert>\n    );\n  }\n\n  return (\n    <>\n      <EditorHeader>\n        <InlineSelect\n          label=\"Region\"\n          value={regions.find((v) => v.value === query.region)}\n          placeholder=\"Select region\"\n          allowCustomValue\n          onChange={({ value: region }) => region && onChange({ ...query, region })}\n          options={regions}\n          isLoading={regionIsLoading}\n        />\n      </EditorHeader>\n      <Space v={0.5} />\n      <MetricStatEditor\n        {...props}\n        refId={query.refId}\n        metricStat={query}\n        disableExpressions={true}\n        onChange={(metricStat: MetricStat) => onChange({ ...query, ...metricStat })}\n        onRunQuery={() => {}}\n      ></MetricStatEditor>\n      <Space v={0.5} />\n      <EditorRow>\n        <EditorField label=\"Period\" width={26} tooltip=\"Minimum interval between points in seconds.\">\n          <Input\n            value={query.period || ''}\n            placeholder=\"auto\"\n            onChange={(event: ChangeEvent<HTMLInputElement>) => onChange({ ...query, period: event.target.value })}\n          />\n        </EditorField>\n        <EditorField label=\"Enable Prefix Matching\" optional={true}>\n          <EditorSwitch\n            value={query.prefixMatching}\n            onChange={(e) => {\n              onChange({\n                ...query,\n                prefixMatching: e.currentTarget.checked,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField label=\"Action\" optional={true} disabled={!query.prefixMatching}>\n          <Input\n            value={query.actionPrefix || ''}\n            onChange={(event: ChangeEvent<HTMLInputElement>) =>\n              onChange({ ...query, actionPrefix: event.target.value })\n            }\n          />\n        </EditorField>\n        <EditorField label=\"Alarm Name\" optional={true} disabled={!query.prefixMatching}>\n          <Input\n            value={query.alarmNamePrefix || ''}\n            onChange={(event: ChangeEvent<HTMLInputElement>) =>\n              onChange({ ...query, alarmNamePrefix: event.target.value })\n            }\n          />\n        </EditorField>\n      </EditorRow>\n    </>\n  );\n};\n","import { AnnotationQuery } from '@grafana/data';\n\nimport { AnnotationQueryEditor } from './components/AnnotationQueryEditor';\nimport { isCloudWatchAnnotation } from './guards';\nimport { CloudWatchAnnotationQuery, CloudWatchQuery, LegacyAnnotationQuery } from './types';\n\nexport const CloudWatchAnnotationSupport = {\n  // converts legacy angular style queries to new format. Also sets the same default values as in the deprecated angular directive\n  prepareAnnotation: (\n    query: LegacyAnnotationQuery | AnnotationQuery<CloudWatchAnnotationQuery>\n  ): AnnotationQuery<CloudWatchAnnotationQuery> => {\n    if (isCloudWatchAnnotation(query)) {\n      return query;\n    }\n\n    return {\n      // setting AnnotationQuery props explicitly since spreading would incorrectly use props that should be on the target only\n      datasource: query.datasource,\n      enable: query.enable,\n      iconColor: query.iconColor,\n      name: query.name,\n      builtIn: query.builtIn,\n      hide: query.hide,\n      target: {\n        ...query.target,\n        ...query,\n        statistic: query.statistic || 'Average',\n        region: query.region || 'default',\n        queryMode: 'Annotations',\n        refId: query.refId || 'annotationQuery',\n      },\n    };\n  },\n  // return undefined if query is not complete so that annotation query execution is quietly skipped\n  prepareQuery: (anno: AnnotationQuery<CloudWatchAnnotationQuery>): CloudWatchQuery | undefined => {\n    if (!anno.target) {\n      return undefined;\n    }\n\n    const {\n      prefixMatching,\n      actionPrefix,\n      alarmNamePrefix,\n      statistic,\n      namespace,\n      metricName,\n      dimensions = {},\n    } = anno.target;\n    const validPrefixMatchingQuery = !!prefixMatching && !!actionPrefix && !!alarmNamePrefix;\n    const validMetricStatQuery =\n      !prefixMatching && !!namespace && !!metricName && !!statistic && !!Object.values(dimensions).length;\n\n    if (validPrefixMatchingQuery || validMetricStatQuery) {\n      return anno.target;\n    }\n\n    return undefined;\n  },\n  QueryEditor: AnnotationQueryEditor,\n};\n","import { debounce, memoize } from 'lodash';\n\nexport default (func: (...args: any[]) => void, wait = 7000) => {\n  const mem = memoize(\n    (...args) =>\n      debounce(func, wait, {\n        leading: true,\n      }),\n    (...args) => JSON.stringify(args)\n  );\n\n  return (...args: any[]) => mem(...args)(...args);\n};\n","import { Observable, map } from 'rxjs';\n\nimport { DataSourceInstanceSettings, DataSourceRef, getDataSourceRef, ScopedVars } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { TemplateSrv } from 'app/features/templating/template_srv';\nimport { store } from 'app/store/store';\nimport { AppNotificationTimeout } from 'app/types';\n\nimport memoizedDebounce from '../memoizedDebounce';\nimport { CloudWatchJsonData, Dimensions, MetricRequest, MultiFilters, TSDBResponse } from '../types';\n\nexport abstract class CloudWatchRequest {\n  templateSrv: TemplateSrv;\n  ref: DataSourceRef;\n  dsQueryEndpoint = '/api/ds/query';\n  debouncedCustomAlert: (title: string, message: string) => void = memoizedDebounce(\n    displayCustomError,\n    AppNotificationTimeout.Error\n  );\n\n  constructor(public instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>, templateSrv: TemplateSrv) {\n    this.templateSrv = templateSrv;\n    this.ref = getDataSourceRef(instanceSettings);\n  }\n\n  awsRequest(url: string, data: MetricRequest, headers: Record<string, string> = {}): Observable<TSDBResponse> {\n    const options = {\n      method: 'POST',\n      url,\n      data,\n      headers,\n    };\n\n    return getBackendSrv()\n      .fetch<TSDBResponse>(options)\n      .pipe(map((result) => result.data));\n  }\n\n  convertDimensionFormat(dimensions: Dimensions, scopedVars: ScopedVars): Dimensions {\n    return Object.entries(dimensions).reduce((result, [key, value]) => {\n      key = this.replaceVariableAndDisplayWarningIfMulti(key, scopedVars, true, 'dimension keys');\n\n      if (Array.isArray(value)) {\n        return { ...result, [key]: value };\n      }\n\n      if (!value) {\n        return { ...result, [key]: null };\n      }\n\n      const newValues = this.expandVariableToArray(value, scopedVars);\n      return { ...result, [key]: newValues };\n    }, {});\n  }\n\n  // get the value for a given template variable\n  expandVariableToArray(value: string, scopedVars: ScopedVars): string[] {\n    const variableName = this.templateSrv.getVariableName(value);\n    const valueVar = this.templateSrv.getVariables().find(({ name }) => {\n      return name === variableName;\n    });\n\n    if (variableName && valueVar) {\n      const isMultiVariable =\n        valueVar?.type === 'custom' || valueVar?.type === 'query' || valueVar?.type === 'datasource';\n      if (isMultiVariable && valueVar.multi) {\n        return this.templateSrv.replace(value, scopedVars, 'pipe').split('|');\n      }\n      return [this.templateSrv.replace(value, scopedVars)];\n    }\n    return [value];\n  }\n\n  convertMultiFilterFormat(multiFilters: MultiFilters, fieldName?: string) {\n    return Object.entries(multiFilters).reduce((result, [key, values]) => {\n      const interpolatedKey = this.replaceVariableAndDisplayWarningIfMulti(key, {}, true, fieldName);\n      if (!values) {\n        return { ...result, [interpolatedKey]: null };\n      }\n      const initialVal: string[] = [];\n      const newValues = values.reduce((result, value) => {\n        const vals = this.expandVariableToArray(value, {});\n        return [...result, ...vals];\n      }, initialVal);\n      return { ...result, [interpolatedKey]: newValues };\n    }, {});\n  }\n\n  replaceVariableAndDisplayWarningIfMulti(\n    target?: string,\n    scopedVars?: ScopedVars,\n    displayErrorIfIsMultiTemplateVariable?: boolean,\n    fieldName?: string\n  ) {\n    if (displayErrorIfIsMultiTemplateVariable && !!target) {\n      const variables = this.templateSrv.getVariables();\n      const variable = variables.find(({ name }) => name === this.templateSrv.getVariableName(target));\n      const isMultiVariable =\n        variable?.type === 'custom' || variable?.type === 'query' || variable?.type === 'datasource';\n      if (isMultiVariable && variable.multi) {\n        this.debouncedCustomAlert(\n          'CloudWatch templating error',\n          `Multi template variables are not supported for ${fieldName || target}`\n        );\n      }\n    }\n\n    return this.templateSrv.replace(target, scopedVars);\n  }\n\n  getActualRegion(region?: string) {\n    if (region === 'default' || region === undefined || region === '') {\n      return this.instanceSettings.jsonData.defaultRegion ?? '';\n    }\n    return region;\n  }\n\n  getVariables() {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n}\n\nconst displayCustomError = (title: string, message: string) =>\n  store.dispatch(notifyApp(createErrorNotification(title, message)));\n","import { memoize } from 'lodash';\n\nimport { DataSourceInstanceSettings, SelectableValue } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { TemplateSrv } from 'app/features/templating/template_srv';\n\nimport { CloudWatchRequest } from './query-runner/CloudWatchRequest';\nimport {\n  CloudWatchJsonData,\n  DescribeLogGroupsRequest,\n  GetDimensionKeysRequest,\n  GetDimensionValuesRequest,\n  GetMetricsRequest,\n  LogGroupResponse,\n  MetricResponse,\n  MultiFilters,\n  Account,\n  ResourceRequest,\n  ResourceResponse,\n} from './types';\n\nexport interface SelectableResourceValue extends SelectableValue<string> {\n  text: string;\n}\n\nexport class CloudWatchAPI extends CloudWatchRequest {\n  private memoizedGetRequest;\n\n  constructor(instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>, templateSrv: TemplateSrv) {\n    super(instanceSettings, templateSrv);\n    this.memoizedGetRequest = memoize(this.getRequest.bind(this), (path, parameters) =>\n      JSON.stringify({ path, parameters })\n    );\n  }\n\n  private getRequest<T>(subtype: string, parameters?: Record<string, string | string[] | number>): Promise<T> {\n    return getBackendSrv().get(`/api/datasources/${this.instanceSettings.id}/resources/${subtype}`, parameters);\n  }\n\n  getAccounts({ region }: ResourceRequest): Promise<Account[]> {\n    return this.memoizedGetRequest<Array<ResourceResponse<Account>>>('accounts', {\n      region: this.templateSrv.replace(region),\n    }).then((accounts) => accounts.map((a) => a.value));\n  }\n\n  isMonitoringAccount(region: string): Promise<boolean> {\n    return this.getAccounts({ region })\n      .then((accounts) => accounts.some((account) => account.isMonitoringAccount))\n      .catch(() => false);\n  }\n\n  getRegions() {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('regions').then((regions) => [\n      { label: 'default', value: 'default', text: 'default' },\n      ...regions.filter((r) => r.value),\n    ]);\n  }\n\n  getNamespaces() {\n    return this.memoizedGetRequest<Array<ResourceResponse<string>>>('namespaces').then((namespaces) =>\n      namespaces.map((n) => ({ label: n.value, value: n.value }))\n    );\n  }\n\n  async describeLogGroups(params: DescribeLogGroupsRequest) {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('log-groups', {\n      ...params,\n      region: this.templateSrv.replace(this.getActualRegion(params.region)),\n    });\n  }\n\n  async describeCrossAccountLogGroups(params: DescribeLogGroupsRequest): Promise<SelectableResourceValue[]> {\n    return this.memoizedGetRequest<Array<ResourceResponse<LogGroupResponse>>>('describe-log-groups', {\n      ...params,\n      region: this.templateSrv.replace(this.getActualRegion(params.region)),\n      accountId: this.templateSrv.replace(params.accountId),\n    }).then((resourceResponse) =>\n      resourceResponse.map((resource) => ({\n        label: resource.value.name,\n        value: resource.value.arn,\n        text: resource.accountId || '',\n      }))\n    );\n  }\n\n  async describeAllLogGroups(params: DescribeLogGroupsRequest) {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('all-log-groups', {\n      ...params,\n      region: this.templateSrv.replace(this.getActualRegion(params.region)),\n    });\n  }\n\n  async getMetrics({ region, namespace, accountId }: GetMetricsRequest): Promise<Array<SelectableValue<string>>> {\n    if (!namespace) {\n      return [];\n    }\n\n    return this.memoizedGetRequest<Array<ResourceResponse<MetricResponse>>>('metrics', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n      accountId: this.templateSrv.replace(accountId),\n    }).then((metrics) => metrics.map((m) => ({ label: m.value.name, value: m.value.name })));\n  }\n\n  async getAllMetrics({\n    region,\n    accountId,\n  }: GetMetricsRequest): Promise<Array<{ metricName?: string; namespace: string }>> {\n    return this.memoizedGetRequest<Array<ResourceResponse<MetricResponse>>>('metrics', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      accountId: this.templateSrv.replace(accountId),\n    }).then((metrics) => metrics.map((m) => ({ metricName: m.value.name, namespace: m.value.namespace })));\n  }\n\n  async getDimensionKeys({\n    region,\n    namespace = '',\n    dimensionFilters = {},\n    metricName = '',\n    accountId,\n  }: GetDimensionKeysRequest): Promise<Array<SelectableValue<string>>> {\n    return this.memoizedGetRequest<Array<ResourceResponse<string>>>('dimension-keys', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n      accountId: this.templateSrv.replace(accountId),\n      metricName: this.templateSrv.replace(metricName),\n      dimensionFilters: JSON.stringify(this.convertDimensionFormat(dimensionFilters, {})),\n    }).then((r) => r.map((r) => ({ label: r.value, value: r.value })));\n  }\n\n  async getDimensionValues({\n    dimensionKey,\n    region,\n    namespace,\n    dimensionFilters = {},\n    metricName = '',\n    accountId,\n  }: GetDimensionValuesRequest) {\n    if (!namespace || !metricName) {\n      return [];\n    }\n\n    const values = await this.memoizedGetRequest<Array<ResourceResponse<string>>>('dimension-values', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n      metricName: this.templateSrv.replace(metricName.trim()),\n      dimensionKey: this.templateSrv.replace(dimensionKey),\n      dimensionFilters: JSON.stringify(this.convertDimensionFormat(dimensionFilters, {})),\n      accountId: this.templateSrv.replace(accountId),\n    }).then((r) => r.map((r) => ({ label: r.value, value: r.value })));\n    return values;\n  }\n\n  getEbsVolumeIds(region: string, instanceId: string) {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('ebs-volume-ids', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      instanceId: this.templateSrv.replace(instanceId),\n    });\n  }\n\n  getEc2InstanceAttribute(region: string, attributeName: string, filters: MultiFilters) {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('ec2-instance-attribute', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      attributeName: this.templateSrv.replace(attributeName),\n      filters: JSON.stringify(this.convertMultiFilterFormat(filters, 'filter key')),\n    });\n  }\n\n  getResourceARNs(region: string, resourceType: string, tags: MultiFilters) {\n    return this.memoizedGetRequest<SelectableResourceValue[]>('resource-arns', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      resourceType: this.templateSrv.replace(resourceType),\n      tags: JSON.stringify(this.convertMultiFilterFormat(tags, 'tag name')),\n    });\n  }\n}\n","import { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\nimport type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { CloudWatchAPI } from '../api';\n\nimport { LinkedToken } from './LinkedToken';\nimport { linkedTokenBuilder } from './linkedTokenBuilder';\nimport { LanguageDefinition } from './register';\nimport { Completeable, StatementPosition, SuggestionKind, TokenTypes } from './types';\n\ntype CompletionItem = monacoTypes.languages.CompletionItem;\n\n/*\nCompletionItemProvider is an extendable class which needs to implement :\n- tokenTypes\n- getStatementPosition\n- getSuggestionKinds\n- getSuggestions\n*/\nexport class CompletionItemProvider implements Completeable {\n  api: CloudWatchAPI;\n  templateSrv: TemplateSrv;\n  tokenTypes: TokenTypes;\n\n  constructor(api: CloudWatchAPI, templateSrv: TemplateSrv = getTemplateSrv()) {\n    this.api = api;\n    this.templateSrv = templateSrv;\n    this.templateSrv = templateSrv;\n\n    // implement with more specific tokens when extending this class\n    this.tokenTypes = {\n      Parenthesis: 'delimiter.parenthesis',\n      Whitespace: 'white',\n      Keyword: 'keyword',\n      Delimiter: 'delimiter',\n      Operator: 'operator',\n      Identifier: 'identifier',\n      Type: 'type',\n      Function: 'predefined',\n      Number: 'number',\n      String: 'string',\n      Variable: 'variable',\n    };\n  }\n\n  // implemented by subclasses, given a token, returns a lexical position in a query\n  getStatementPosition(currentToken: LinkedToken | null): StatementPosition {\n    return StatementPosition.Unknown;\n  }\n\n  // implemented by subclasses, given a lexical statement position, returns potential kinds of suggestions\n  getSuggestionKinds(position: StatementPosition): SuggestionKind[] {\n    return [];\n  }\n\n  // implemented by subclasses, given potential suggestions kinds, returns suggestion objects for monaco aka \"CompletionItem\"\n  getSuggestions(\n    monaco: Monaco,\n    currentToken: LinkedToken | null,\n    suggestionKinds: SuggestionKind[],\n    statementPosition: StatementPosition,\n    position: monacoTypes.IPosition\n  ): Promise<CompletionItem[]> {\n    return Promise.reject([]);\n  }\n\n  // called by registerLanguage and passed to monaco with registerCompletionItemProvider\n  // returns an object that implements https://microsoft.github.io/monaco-editor/api/interfaces/monaco.languages.CompletionItemProvider.html\n  getCompletionProvider(monaco: Monaco, languageDefinition: LanguageDefinition) {\n    return {\n      triggerCharacters: [' ', '$', ',', '(', \"'\"], // one of these characters indicates that it is time to look for a suggestion\n      provideCompletionItems: async (model: monacoTypes.editor.ITextModel, position: monacoTypes.IPosition) => {\n        const currentToken = linkedTokenBuilder(monaco, languageDefinition, model, position, this.tokenTypes);\n        const statementPosition = this.getStatementPosition(currentToken);\n        const suggestionKinds = this.getSuggestionKinds(statementPosition);\n        const suggestions = await this.getSuggestions(\n          monaco,\n          currentToken,\n          suggestionKinds,\n          statementPosition,\n          position\n        );\n\n        return {\n          suggestions,\n        };\n      },\n    };\n  }\n}\n","import { TokenTypes } from '../../monarch/types';\n\nexport const SQLTokenTypes: TokenTypes = {\n  Parenthesis: 'delimiter.parenthesis.sql',\n  Whitespace: 'white.sql',\n  Keyword: 'keyword.sql',\n  Delimiter: 'delimiter.sql',\n  Operator: 'operator.sql',\n  Identifier: 'identifier.sql',\n  Type: 'type.sql',\n  Function: 'predefined.sql',\n  Number: 'number.sql',\n  String: 'string.sql',\n  Variable: 'variable.sql',\n};\n","import { LinkedToken } from '../../monarch/LinkedToken';\nimport { StatementPosition } from '../../monarch/types';\nimport { AND, ASC, BY, DESC, EQUALS, FROM, GROUP, NOT_EQUALS, ORDER, SCHEMA, SELECT, WHERE } from '../language';\n\nimport { SQLTokenTypes } from './types';\n\nexport function getStatementPosition(currentToken: LinkedToken | null): StatementPosition {\n  const previousNonWhiteSpace = currentToken?.getPreviousNonWhiteSpaceToken();\n  const previousKeyword = currentToken?.getPreviousKeyword();\n\n  const previousIsSlash = currentToken?.getPreviousNonWhiteSpaceToken()?.is(SQLTokenTypes.Operator, '/');\n  if (\n    currentToken === null ||\n    (currentToken.isWhiteSpace() && currentToken.previous === null) ||\n    (currentToken.is(SQLTokenTypes.Keyword, SELECT) && currentToken.previous === null) ||\n    previousIsSlash ||\n    (currentToken.isIdentifier() && (previousIsSlash || currentToken?.previous === null))\n  ) {\n    return StatementPosition.SelectKeyword;\n  }\n\n  if (previousNonWhiteSpace?.value === SELECT) {\n    return StatementPosition.AfterSelectKeyword;\n  }\n\n  if (\n    (previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis, '(') || currentToken?.is(SQLTokenTypes.Parenthesis, '()')) &&\n    previousKeyword?.value === SELECT\n  ) {\n    return StatementPosition.AfterSelectFuncFirstArgument;\n  }\n\n  if (previousKeyword?.value === SELECT && previousNonWhiteSpace?.isParenthesis()) {\n    return StatementPosition.FromKeyword;\n  }\n\n  if (previousNonWhiteSpace?.value === FROM) {\n    return StatementPosition.AfterFromKeyword;\n  }\n\n  if (\n    (previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis, '(') || currentToken?.is(SQLTokenTypes.Parenthesis, '()')) &&\n    previousKeyword?.value === SCHEMA\n  ) {\n    return StatementPosition.SchemaFuncFirstArgument;\n  }\n\n  if (previousKeyword?.value === SCHEMA && previousNonWhiteSpace?.is(SQLTokenTypes.Delimiter, ',')) {\n    return StatementPosition.SchemaFuncExtraArgument;\n  }\n\n  if (\n    (previousKeyword?.value === FROM && previousNonWhiteSpace?.isDoubleQuotedString()) ||\n    (previousKeyword?.value === FROM && previousNonWhiteSpace?.isVariable()) ||\n    (previousKeyword?.value === SCHEMA && previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis, ')'))\n  ) {\n    return StatementPosition.AfterFrom;\n  }\n\n  if (\n    previousKeyword?.value === WHERE &&\n    (previousNonWhiteSpace?.isKeyword() ||\n      previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis, '(') ||\n      previousNonWhiteSpace?.is(SQLTokenTypes.Operator, AND))\n  ) {\n    return StatementPosition.WhereKey;\n  }\n\n  if (\n    previousKeyword?.value === WHERE &&\n    (previousNonWhiteSpace?.isIdentifier() || previousNonWhiteSpace?.isDoubleQuotedString())\n  ) {\n    return StatementPosition.WhereComparisonOperator;\n  }\n\n  if (\n    previousKeyword?.value === WHERE &&\n    (previousNonWhiteSpace?.is(SQLTokenTypes.Operator, EQUALS) ||\n      previousNonWhiteSpace?.is(SQLTokenTypes.Operator, NOT_EQUALS))\n  ) {\n    return StatementPosition.WhereValue;\n  }\n\n  if (\n    previousKeyword?.value === WHERE &&\n    (previousNonWhiteSpace?.isString() || previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis, ')'))\n  ) {\n    return StatementPosition.AfterWhereValue;\n  }\n\n  if (\n    previousKeyword?.is(SQLTokenTypes.Keyword, BY) &&\n    previousKeyword?.getPreviousKeyword()?.is(SQLTokenTypes.Keyword, GROUP) &&\n    (previousNonWhiteSpace?.is(SQLTokenTypes.Keyword, BY) || previousNonWhiteSpace?.is(SQLTokenTypes.Delimiter, ','))\n  ) {\n    return StatementPosition.AfterGroupByKeywords;\n  }\n\n  if (\n    previousKeyword?.is(SQLTokenTypes.Keyword, BY) &&\n    previousKeyword?.getPreviousKeyword()?.is(SQLTokenTypes.Keyword, GROUP) &&\n    (previousNonWhiteSpace?.isIdentifier() || previousNonWhiteSpace?.isDoubleQuotedString())\n  ) {\n    return StatementPosition.AfterGroupBy;\n  }\n\n  if (\n    previousNonWhiteSpace?.is(SQLTokenTypes.Keyword, BY) &&\n    previousNonWhiteSpace?.getPreviousKeyword()?.is(SQLTokenTypes.Keyword, ORDER)\n  ) {\n    return StatementPosition.AfterOrderByKeywords;\n  }\n\n  if (\n    previousKeyword?.is(SQLTokenTypes.Keyword, BY) &&\n    previousKeyword?.getPreviousKeyword()?.is(SQLTokenTypes.Keyword, ORDER) &&\n    previousNonWhiteSpace?.is(SQLTokenTypes.Parenthesis) &&\n    previousNonWhiteSpace?.getPreviousNonWhiteSpaceToken()?.is(SQLTokenTypes.Function)\n  ) {\n    return StatementPosition.AfterOrderByFunction;\n  }\n\n  if (previousKeyword?.is(SQLTokenTypes.Keyword, DESC) || previousKeyword?.is(SQLTokenTypes.Keyword, ASC)) {\n    return StatementPosition.AfterOrderByDirection;\n  }\n\n  return StatementPosition.Unknown;\n}\n","import { StatementPosition, SuggestionKind } from '../../monarch/types';\n\nexport function getSuggestionKinds(statementPosition: StatementPosition): SuggestionKind[] {\n  switch (statementPosition) {\n    case StatementPosition.SelectKeyword:\n      return [SuggestionKind.SelectKeyword];\n    case StatementPosition.AfterSelectKeyword:\n      return [SuggestionKind.FunctionsWithArguments];\n    case StatementPosition.AfterSelectFuncFirstArgument:\n      return [SuggestionKind.Metrics];\n    case StatementPosition.AfterFromKeyword:\n      return [SuggestionKind.Namespaces, SuggestionKind.SchemaKeyword];\n    case StatementPosition.SchemaFuncFirstArgument:\n      return [SuggestionKind.Namespaces];\n    case StatementPosition.SchemaFuncExtraArgument:\n      return [SuggestionKind.LabelKeys];\n    case StatementPosition.FromKeyword:\n      return [SuggestionKind.FromKeyword];\n    case StatementPosition.AfterFrom:\n      return [\n        SuggestionKind.WhereKeyword,\n        SuggestionKind.GroupByKeywords,\n        SuggestionKind.OrderByKeywords,\n        SuggestionKind.LimitKeyword,\n      ];\n    case StatementPosition.WhereKey:\n      return [SuggestionKind.LabelKeys];\n    case StatementPosition.WhereComparisonOperator:\n      return [SuggestionKind.ComparisonOperators];\n    case StatementPosition.WhereValue:\n      return [SuggestionKind.LabelValues];\n    case StatementPosition.AfterWhereValue:\n      return [\n        SuggestionKind.LogicalOperators,\n        SuggestionKind.GroupByKeywords,\n        SuggestionKind.OrderByKeywords,\n        SuggestionKind.LimitKeyword,\n      ];\n    case StatementPosition.AfterGroupByKeywords:\n      return [SuggestionKind.LabelKeys];\n    case StatementPosition.AfterGroupBy:\n      return [SuggestionKind.OrderByKeywords, SuggestionKind.LimitKeyword];\n    case StatementPosition.AfterOrderByKeywords:\n      return [SuggestionKind.FunctionsWithoutArguments];\n    case StatementPosition.AfterOrderByFunction:\n      return [SuggestionKind.SortOrderDirectionKeyword, SuggestionKind.LimitKeyword];\n    case StatementPosition.AfterOrderByDirection:\n      return [SuggestionKind.LimitKeyword];\n  }\n\n  return [];\n}\n","import { LinkedToken } from '../../monarch/LinkedToken';\nimport { FROM, SCHEMA, SELECT } from '../language';\n\nimport { SQLTokenTypes } from './types';\n\nexport const getSelectToken = (currentToken: LinkedToken | null) =>\n  currentToken?.getPreviousOfType(SQLTokenTypes.Keyword, SELECT) ?? null;\n\nexport const getSelectStatisticToken = (currentToken: LinkedToken | null) => {\n  const assumedStatisticToken = getSelectToken(currentToken)?.getNextNonWhiteSpaceToken();\n  return assumedStatisticToken?.isVariable() || assumedStatisticToken?.isFunction() ? assumedStatisticToken : null;\n};\n\nexport const getMetricNameToken = (currentToken: LinkedToken | null) => {\n  // statistic function is followed by `(` and then an argument\n  const assumedMetricNameToken = getSelectStatisticToken(currentToken)?.next?.next;\n  return assumedMetricNameToken?.isVariable() || assumedMetricNameToken?.isIdentifier() ? assumedMetricNameToken : null;\n};\n\nexport const getFromKeywordToken = (currentToken: LinkedToken | null) => {\n  const selectToken = getSelectToken(currentToken);\n  return selectToken?.getNextOfType(SQLTokenTypes.Keyword, FROM);\n};\n\nexport const getNamespaceToken = (currentToken: LinkedToken | null) => {\n  const fromToken = getFromKeywordToken(currentToken);\n  const nextNonWhiteSpace = fromToken?.getNextNonWhiteSpaceToken();\n  if (\n    nextNonWhiteSpace?.isDoubleQuotedString() ||\n    (nextNonWhiteSpace?.isVariable() && nextNonWhiteSpace?.value.toUpperCase() !== SCHEMA)\n  ) {\n    // schema is not used\n    return nextNonWhiteSpace;\n  } else if (nextNonWhiteSpace?.isKeyword() && nextNonWhiteSpace.next?.is(SQLTokenTypes.Parenthesis, '(')) {\n    // schema is specified\n    const assumedNamespaceToken = nextNonWhiteSpace.next?.next;\n    if (assumedNamespaceToken?.isDoubleQuotedString() || assumedNamespaceToken?.isVariable()) {\n      return assumedNamespaceToken;\n    }\n  }\n  return null;\n};\n","import { uniq } from 'lodash';\n\nimport { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\nimport type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { CloudWatchAPI } from '../../api';\nimport { CompletionItemProvider } from '../../monarch/CompletionItemProvider';\nimport { LinkedToken } from '../../monarch/LinkedToken';\nimport { TRIGGER_SUGGEST } from '../../monarch/commands';\nimport { SuggestionKind, CompletionItemPriority, StatementPosition } from '../../monarch/types';\nimport {\n  BY,\n  FROM,\n  GROUP,\n  LIMIT,\n  ORDER,\n  SCHEMA,\n  SELECT,\n  ASC,\n  DESC,\n  WHERE,\n  COMPARISON_OPERATORS,\n  LOGICAL_OPERATORS,\n  STATISTICS,\n} from '../language';\n\nimport { getStatementPosition } from './statementPosition';\nimport { getSuggestionKinds } from './suggestionKind';\nimport { getMetricNameToken, getNamespaceToken } from './tokenUtils';\nimport { SQLTokenTypes } from './types';\n\ntype CompletionItem = monacoTypes.languages.CompletionItem;\n\nexport class SQLCompletionItemProvider extends CompletionItemProvider {\n  region: string;\n\n  constructor(api: CloudWatchAPI, templateSrv: TemplateSrv = getTemplateSrv()) {\n    super(api, templateSrv);\n    this.region = api.getActualRegion() ?? '';\n    this.getStatementPosition = getStatementPosition;\n    this.getSuggestionKinds = getSuggestionKinds;\n    this.tokenTypes = SQLTokenTypes;\n  }\n\n  setRegion(region: string) {\n    this.region = region;\n  }\n\n  async getSuggestions(\n    monaco: Monaco,\n    currentToken: LinkedToken | null,\n    suggestionKinds: SuggestionKind[],\n    statementPosition: StatementPosition,\n    position: monacoTypes.IPosition\n  ): Promise<CompletionItem[]> {\n    let suggestions: CompletionItem[] = [];\n    const invalidRangeToken = currentToken?.isWhiteSpace() || currentToken?.isParenthesis();\n    const range =\n      invalidRangeToken || !currentToken?.range ? monaco.Range.fromPositions(position) : currentToken?.range;\n\n    const toCompletionItem = (value: string, rest: Partial<CompletionItem> = {}) => {\n      const item: CompletionItem = {\n        label: value,\n        insertText: value,\n        kind: monaco.languages.CompletionItemKind.Field,\n        range,\n        sortText: CompletionItemPriority.Medium,\n        ...rest,\n      };\n      return item;\n    };\n\n    function addSuggestion(value: string, rest: Partial<CompletionItem> = {}) {\n      suggestions = [...suggestions, toCompletionItem(value, rest)];\n    }\n\n    for (const suggestion of suggestionKinds) {\n      switch (suggestion) {\n        case SuggestionKind.SelectKeyword:\n          addSuggestion(SELECT, {\n            insertText: `${SELECT} $0`,\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            kind: monaco.languages.CompletionItemKind.Keyword,\n            command: TRIGGER_SUGGEST,\n          });\n          break;\n\n        case SuggestionKind.FunctionsWithArguments:\n          STATISTICS.map((s) =>\n            addSuggestion(s, {\n              insertText: `${s}($0)`,\n              insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n              command: TRIGGER_SUGGEST,\n              kind: monaco.languages.CompletionItemKind.Function,\n            })\n          );\n          break;\n\n        case SuggestionKind.FunctionsWithoutArguments:\n          STATISTICS.map((s) =>\n            addSuggestion(s, {\n              insertText: `${s}() `,\n              insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n              command: TRIGGER_SUGGEST,\n              kind: monaco.languages.CompletionItemKind.Function,\n            })\n          );\n          break;\n\n        case SuggestionKind.Metrics:\n          {\n            const namespaceToken = getNamespaceToken(currentToken);\n            if (namespaceToken?.value) {\n              // if a namespace is specified, only suggest metrics for the namespace\n              const metrics = await this.api.getMetrics({\n                namespace: namespaceToken?.value.replace(/\\\"/g, ''),\n                region: this.region,\n              });\n              metrics.forEach((m) => m.value && addSuggestion(m.value));\n            } else {\n              // If no namespace is specified in the query, just list all metrics\n              const metrics = await this.api.getAllMetrics({ region: this.region });\n              uniq(metrics.map((m) => m.metricName)).forEach((m) => m && addSuggestion(m, { insertText: m }));\n            }\n          }\n          break;\n\n        case SuggestionKind.FromKeyword:\n          addSuggestion(FROM, {\n            insertText: `${FROM} `,\n            command: TRIGGER_SUGGEST,\n          });\n          break;\n\n        case SuggestionKind.SchemaKeyword:\n          addSuggestion(SCHEMA, {\n            sortText: CompletionItemPriority.High,\n            insertText: `${SCHEMA}($0)`,\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            command: TRIGGER_SUGGEST,\n            kind: monaco.languages.CompletionItemKind.Function,\n          });\n          break;\n\n        case SuggestionKind.Namespaces:\n          const metricNameToken = getMetricNameToken(currentToken);\n          let namespaces = [];\n          if (metricNameToken?.value) {\n            // if a metric is specified, only suggest namespaces that actually have that metric\n            const metrics = await this.api.getMetrics({ region: this.region });\n            const metricName = this.templateSrv.replace(metricNameToken.value);\n            namespaces = metrics.filter((m) => m.metricName === metricName).map((m) => m.namespace);\n          } else {\n            // if no metric is specified, just suggest all namespaces\n            const ns = await this.api.getNamespaces();\n            namespaces = ns.map((n) => n.value);\n          }\n          namespaces.map((n) => addSuggestion(`\"${n}\"`, { insertText: `\"${n}\"` }));\n          break;\n\n        case SuggestionKind.LabelKeys:\n          {\n            const metricNameToken = getMetricNameToken(currentToken);\n            const namespaceToken = getNamespaceToken(currentToken);\n            if (namespaceToken?.value) {\n              let dimensionFilters = {};\n              let labelKeyTokens;\n              if (statementPosition === StatementPosition.SchemaFuncExtraArgument) {\n                labelKeyTokens = namespaceToken?.getNextUntil(this.tokenTypes.Parenthesis, [\n                  this.tokenTypes.Delimiter,\n                  this.tokenTypes.Whitespace,\n                ]);\n              } else if (statementPosition === StatementPosition.AfterGroupByKeywords) {\n                labelKeyTokens = currentToken?.getPreviousUntil(this.tokenTypes.Keyword, [\n                  this.tokenTypes.Delimiter,\n                  this.tokenTypes.Whitespace,\n                ]);\n              }\n              dimensionFilters = (labelKeyTokens || []).reduce((acc, curr) => {\n                return { ...acc, [curr.value]: null };\n              }, {});\n              const keys = await this.api.getDimensionKeys({\n                namespace: this.templateSrv.replace(namespaceToken.value.replace(/\\\"/g, '')),\n                region: this.templateSrv.replace(this.region),\n                metricName: metricNameToken?.value,\n                dimensionFilters,\n              });\n              keys.map((m) => {\n                const key = /[\\s\\.-]/.test(m.value ?? '') ? `\"${m.value}\"` : m.value;\n                key && addSuggestion(key);\n              });\n            }\n          }\n          break;\n\n        case SuggestionKind.LabelValues:\n          {\n            const namespaceToken = getNamespaceToken(currentToken);\n            const metricNameToken = getMetricNameToken(currentToken);\n            const labelKey = currentToken?.getPreviousNonWhiteSpaceToken()?.getPreviousNonWhiteSpaceToken();\n            if (namespaceToken?.value && labelKey?.value && metricNameToken?.value) {\n              const values = await this.api.getDimensionValues({\n                region: this.region,\n                namespace: namespaceToken.value.replace(/\\\"/g, ''),\n                metricName: metricNameToken.value,\n                dimensionKey: labelKey.value,\n              });\n              values.map((o) =>\n                addSuggestion(`'${o.value}'`, { insertText: `'${o.value}' `, command: TRIGGER_SUGGEST })\n              );\n            }\n          }\n          break;\n\n        case SuggestionKind.LogicalOperators:\n          LOGICAL_OPERATORS.map((o) =>\n            addSuggestion(`${o}`, {\n              insertText: `${o} `,\n              command: TRIGGER_SUGGEST,\n              sortText: CompletionItemPriority.MediumHigh,\n            })\n          );\n          break;\n\n        case SuggestionKind.WhereKeyword:\n          addSuggestion(`${WHERE}`, {\n            insertText: `${WHERE} `,\n            command: TRIGGER_SUGGEST,\n            sortText: CompletionItemPriority.High,\n          });\n          break;\n\n        case SuggestionKind.ComparisonOperators:\n          COMPARISON_OPERATORS.map((o) => addSuggestion(`${o}`, { insertText: `${o} `, command: TRIGGER_SUGGEST }));\n          break;\n\n        case SuggestionKind.GroupByKeywords:\n          addSuggestion(`${GROUP} ${BY}`, {\n            insertText: `${GROUP} ${BY} `,\n            command: TRIGGER_SUGGEST,\n            sortText: CompletionItemPriority.MediumHigh,\n          });\n          break;\n\n        case SuggestionKind.OrderByKeywords:\n          addSuggestion(`${ORDER} ${BY}`, {\n            insertText: `${ORDER} ${BY} `,\n            command: TRIGGER_SUGGEST,\n            sortText: CompletionItemPriority.Medium,\n          });\n          break;\n\n        case SuggestionKind.LimitKeyword:\n          addSuggestion(LIMIT, { insertText: `${LIMIT} `, sortText: CompletionItemPriority.MediumLow });\n          break;\n\n        case SuggestionKind.SortOrderDirectionKeyword:\n          [ASC, DESC].map((s) =>\n            addSuggestion(s, {\n              insertText: `${s} `,\n              command: TRIGGER_SUGGEST,\n            })\n          );\n          break;\n      }\n    }\n\n    this.templateSrv.getVariables().map((v) => {\n      const variable = `$${v.name}`;\n      addSuggestion(variable, {\n        range,\n        label: variable,\n        insertText: variable,\n        kind: monaco.languages.CompletionItemKind.Variable,\n        sortText: CompletionItemPriority.Low,\n      });\n    });\n\n    return suggestions;\n  }\n}\n","import { sortedUniq } from 'lodash';\nimport Prism, { Grammar } from 'prismjs';\nimport { lastValueFrom } from 'rxjs';\n\nimport { AbsoluteTimeRange, HistoryItem, LanguageProvider } from '@grafana/data';\nimport { CompletionItemGroup, SearchFunctionType, Token, TypeaheadInput, TypeaheadOutput } from '@grafana/ui';\n\nimport { CloudWatchDatasource } from './datasource';\nimport syntax, {\n  AGGREGATION_FUNCTIONS_STATS,\n  BOOLEAN_FUNCTIONS,\n  DATETIME_FUNCTIONS,\n  FIELD_AND_FILTER_FUNCTIONS,\n  IP_FUNCTIONS,\n  NUMERIC_OPERATORS,\n  QUERY_COMMANDS,\n  STRING_FUNCTIONS,\n} from './syntax';\nimport { CloudWatchQuery, TSDBResponse } from './types';\n\nexport type CloudWatchHistoryItem = HistoryItem<CloudWatchQuery>;\n\ntype TypeaheadContext = {\n  history?: CloudWatchHistoryItem[];\n  absoluteRange?: AbsoluteTimeRange;\n  logGroupNames?: string[];\n  region: string;\n};\n\nexport class CloudWatchLanguageProvider extends LanguageProvider {\n  started = false;\n  declare initialRange: AbsoluteTimeRange;\n  datasource: CloudWatchDatasource;\n\n  constructor(datasource: CloudWatchDatasource, initialValues?: any) {\n    super();\n\n    this.datasource = datasource;\n\n    Object.assign(this, initialValues);\n  }\n\n  // Strip syntax chars\n  cleanText = (s: string) => s.replace(/[()]/g, '').trim();\n\n  getSyntax(): Grammar {\n    return syntax;\n  }\n\n  request = (url: string, params?: any): Promise<TSDBResponse> => {\n    return lastValueFrom(this.datasource.logsQueryRunner.awsRequest(url, params));\n  };\n\n  start = () => {\n    if (!this.startTask) {\n      this.startTask = Promise.resolve().then(() => {\n        this.started = true;\n        return [];\n      });\n    }\n\n    return this.startTask;\n  };\n\n  isStatsQuery(query: string): boolean {\n    const grammar = this.getSyntax();\n    const tokens = Prism.tokenize(query, grammar) ?? [];\n\n    return !!tokens.find(\n      (token) =>\n        typeof token !== 'string' &&\n        token.content.toString().toLowerCase() === 'stats' &&\n        token.type === 'query-command'\n    );\n  }\n\n  /**\n   * Return suggestions based on input that can be then plugged into a typeahead dropdown.\n   * Keep this DOM-free for testing\n   * @param input\n   * @param context Is optional in types but is required in case we are doing getLabelCompletionItems\n   * @param context.absoluteRange Required in case we are doing getLabelCompletionItems\n   * @param context.history Optional used only in getEmptyCompletionItems\n   */\n  async provideCompletionItems(input: TypeaheadInput, context?: TypeaheadContext): Promise<TypeaheadOutput> {\n    const { value } = input;\n\n    // Get tokens\n    const tokens = value?.data.get('tokens');\n\n    if (!tokens || !tokens.length) {\n      return { suggestions: [] };\n    }\n\n    const curToken: Token = tokens.filter(\n      (token: any) =>\n        token.offsets.start <= value!.selection?.start?.offset && token.offsets.end >= value!.selection?.start?.offset\n    )[0];\n\n    const isFirstToken = !curToken.prev;\n    const prevToken = prevNonWhitespaceToken(curToken);\n\n    const isCommandStart = isFirstToken || (!isFirstToken && prevToken?.types.includes('command-separator'));\n    if (isCommandStart) {\n      return this.getCommandCompletionItems();\n    }\n\n    if (isInsideFunctionParenthesis(curToken)) {\n      return await this.getFieldCompletionItems(context?.logGroupNames ?? [], context?.region || 'default');\n    }\n\n    if (isAfterKeyword('by', curToken)) {\n      return this.handleKeyword(context);\n    }\n\n    if (prevToken?.types.includes('comparison-operator')) {\n      return this.handleComparison(context);\n    }\n\n    const commandToken = previousCommandToken(curToken);\n    if (commandToken) {\n      return await this.handleCommand(commandToken, curToken, context);\n    }\n\n    return {\n      suggestions: [],\n    };\n  }\n\n  private fetchedFieldsCache:\n    | {\n        time: number;\n        logGroups: string[];\n        fields: string[];\n      }\n    | undefined;\n\n  private fetchFields = async (logGroups: string[], region: string): Promise<string[]> => {\n    if (\n      this.fetchedFieldsCache &&\n      Date.now() - this.fetchedFieldsCache.time < 30 * 1000 &&\n      sortedUniq(this.fetchedFieldsCache.logGroups).join('|') === sortedUniq(logGroups).join('|')\n    ) {\n      return this.fetchedFieldsCache.fields;\n    }\n\n    const results = await Promise.all(\n      logGroups.map((logGroup) => this.datasource.logsQueryRunner.getLogGroupFields({ logGroupName: logGroup, region }))\n    );\n\n    const fields = [\n      ...new Set<string>(\n        results.reduce((acc: string[], cur) => acc.concat(cur.logGroupFields?.map((f) => f.name) as string[]), [])\n      ).values(),\n    ];\n\n    this.fetchedFieldsCache = {\n      time: Date.now(),\n      logGroups,\n      fields,\n    };\n\n    return fields;\n  };\n\n  private handleKeyword = async (context?: TypeaheadContext): Promise<TypeaheadOutput> => {\n    const suggs = await this.getFieldCompletionItems(context?.logGroupNames ?? [], context?.region || 'default');\n    const functionSuggestions: CompletionItemGroup[] = [\n      {\n        searchFunctionType: SearchFunctionType.Prefix,\n        label: 'Functions',\n        items: STRING_FUNCTIONS.concat(DATETIME_FUNCTIONS, IP_FUNCTIONS),\n      },\n    ];\n    suggs.suggestions.push(...functionSuggestions);\n\n    return suggs;\n  };\n\n  private handleCommand = async (\n    commandToken: Token,\n    curToken: Token,\n    context?: TypeaheadContext\n  ): Promise<TypeaheadOutput> => {\n    const queryCommand = commandToken.content.toLowerCase();\n    const prevToken = prevNonWhitespaceToken(curToken);\n    const currentTokenIsFirstArg = prevToken === commandToken;\n\n    if (queryCommand === 'sort') {\n      return this.handleSortCommand(currentTokenIsFirstArg, curToken, context);\n    }\n\n    if (queryCommand === 'parse') {\n      if (currentTokenIsFirstArg) {\n        return await this.getFieldCompletionItems(context?.logGroupNames ?? [], context?.region || 'default');\n      }\n    }\n\n    const currentTokenIsAfterCommandAndEmpty = isTokenType(commandToken.next, 'whitespace') && !commandToken.next?.next;\n    const currentTokenIsAfterCommand =\n      currentTokenIsAfterCommandAndEmpty || nextNonWhitespaceToken(commandToken) === curToken;\n\n    const currentTokenIsComma = isTokenType(curToken, 'punctuation', ',');\n    const currentTokenIsCommaOrAfterComma = currentTokenIsComma || isTokenType(prevToken, 'punctuation', ',');\n\n    // We only show suggestions if we are after a command or after a comma which is a field separator\n    if (!(currentTokenIsAfterCommand || currentTokenIsCommaOrAfterComma)) {\n      return { suggestions: [] };\n    }\n\n    if (['display', 'fields'].includes(queryCommand)) {\n      const typeaheadOutput = await this.getFieldCompletionItems(\n        context?.logGroupNames ?? [],\n        context?.region || 'default'\n      );\n      typeaheadOutput.suggestions.push(...this.getFieldAndFilterFunctionCompletionItems().suggestions);\n\n      return typeaheadOutput;\n    }\n\n    if (queryCommand === 'stats') {\n      const typeaheadOutput = this.getStatsAggCompletionItems();\n      if (currentTokenIsComma || currentTokenIsAfterCommandAndEmpty) {\n        typeaheadOutput?.suggestions.forEach((group) => {\n          group.skipFilter = true;\n        });\n      }\n      return typeaheadOutput;\n    }\n\n    if (queryCommand === 'filter' && currentTokenIsFirstArg) {\n      const sugg = await this.getFieldCompletionItems(context?.logGroupNames ?? [], context?.region || 'default');\n      const boolFuncs = this.getBoolFuncCompletionItems();\n      sugg.suggestions.push(...boolFuncs.suggestions);\n      return sugg;\n    }\n    return { suggestions: [] };\n  };\n\n  private async handleSortCommand(\n    isFirstArgument: boolean,\n    curToken: Token,\n    context?: TypeaheadContext\n  ): Promise<TypeaheadOutput> {\n    if (isFirstArgument) {\n      return await this.getFieldCompletionItems(context?.logGroupNames ?? [], context?.region || 'default');\n    } else if (isTokenType(prevNonWhitespaceToken(curToken), 'field-name')) {\n      // suggest sort options\n      return {\n        suggestions: [\n          {\n            searchFunctionType: SearchFunctionType.Prefix,\n            label: 'Sort Order',\n            items: [\n              {\n                label: 'asc',\n              },\n              { label: 'desc' },\n            ],\n          },\n        ],\n      };\n    }\n\n    return { suggestions: [] };\n  }\n\n  private handleComparison = async (context?: TypeaheadContext) => {\n    const fieldsSuggestions = await this.getFieldCompletionItems(\n      context?.logGroupNames ?? [],\n      context?.region || 'default'\n    );\n    const comparisonSuggestions = this.getComparisonCompletionItems();\n    fieldsSuggestions.suggestions.push(...comparisonSuggestions.suggestions);\n    return fieldsSuggestions;\n  };\n\n  private getCommandCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [{ searchFunctionType: SearchFunctionType.Prefix, label: 'Commands', items: QUERY_COMMANDS }],\n    };\n  };\n\n  private getFieldAndFilterFunctionCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        { searchFunctionType: SearchFunctionType.Prefix, label: 'Functions', items: FIELD_AND_FILTER_FUNCTIONS },\n      ],\n    };\n  };\n\n  private getStatsAggCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        { searchFunctionType: SearchFunctionType.Prefix, label: 'Functions', items: AGGREGATION_FUNCTIONS_STATS },\n      ],\n    };\n  };\n\n  private getBoolFuncCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        {\n          searchFunctionType: SearchFunctionType.Prefix,\n          label: 'Functions',\n          items: BOOLEAN_FUNCTIONS,\n        },\n      ],\n    };\n  };\n\n  private getComparisonCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        {\n          searchFunctionType: SearchFunctionType.Prefix,\n          label: 'Functions',\n          items: NUMERIC_OPERATORS.concat(BOOLEAN_FUNCTIONS),\n        },\n      ],\n    };\n  };\n\n  private getFieldCompletionItems = async (logGroups: string[], region: string): Promise<TypeaheadOutput> => {\n    const fields = await this.fetchFields(logGroups, region);\n\n    return {\n      suggestions: [\n        {\n          label: 'Fields',\n          items: fields.map((field) => ({\n            label: field,\n            insertText: field.match(/@?[_a-zA-Z]+[_.0-9a-zA-Z]*/) ? undefined : `\\`${field}\\``,\n          })),\n        },\n      ],\n    };\n  };\n}\n\nfunction nextNonWhitespaceToken(token: Token): Token | null {\n  let curToken = token;\n\n  while (curToken.next) {\n    if (curToken.next.types.includes('whitespace')) {\n      curToken = curToken.next;\n    } else {\n      return curToken.next;\n    }\n  }\n\n  return null;\n}\n\nfunction prevNonWhitespaceToken(token: Token): Token | null {\n  let curToken = token;\n\n  while (curToken.prev) {\n    if (isTokenType(curToken.prev, 'whitespace')) {\n      curToken = curToken.prev;\n    } else {\n      return curToken.prev;\n    }\n  }\n\n  return null;\n}\n\nfunction previousCommandToken(startToken: Token): Token | null {\n  let thisToken = startToken;\n  while (!!thisToken.prev) {\n    thisToken = thisToken.prev;\n    if (\n      thisToken.types.includes('query-command') &&\n      (!thisToken.prev || isTokenType(prevNonWhitespaceToken(thisToken), 'command-separator'))\n    ) {\n      return thisToken;\n    }\n  }\n  return null;\n}\n\nconst funcsWithFieldArgs = [\n  'avg',\n  'count',\n  'count_distinct',\n  'earliest',\n  'latest',\n  'sortsFirst',\n  'sortsLast',\n  'max',\n  'min',\n  'pct',\n  'stddev',\n  'ispresent',\n  'fromMillis',\n  'toMillis',\n  'isempty',\n  'isblank',\n  'isValidIp',\n  'isValidIpV4',\n  'isValidIpV6',\n  'isIpInSubnet',\n  'isIpv4InSubnet',\n  'isIpv6InSubnet',\n].map((funcName) => funcName.toLowerCase());\n\n/**\n * Returns true if cursor is currently inside a function parenthesis for example `count(|)` or `count(@mess|)` should\n * return true.\n */\nfunction isInsideFunctionParenthesis(curToken: Token): boolean {\n  const prevToken = prevNonWhitespaceToken(curToken);\n\n  if (!prevToken) {\n    return false;\n  }\n\n  const parenthesisToken = curToken.content === '(' ? curToken : prevToken.content === '(' ? prevToken : undefined;\n  if (parenthesisToken) {\n    const maybeFunctionToken = prevNonWhitespaceToken(parenthesisToken);\n    if (maybeFunctionToken) {\n      return (\n        funcsWithFieldArgs.includes(maybeFunctionToken.content.toLowerCase()) &&\n        maybeFunctionToken.types.includes('function')\n      );\n    }\n  }\n  return false;\n}\n\nfunction isAfterKeyword(keyword: string, token: Token): boolean {\n  const maybeKeyword = getPreviousTokenExcluding(token, [\n    'whitespace',\n    'function',\n    'punctuation',\n    'field-name',\n    'number',\n  ]);\n  if (isTokenType(maybeKeyword, 'keyword', 'by')) {\n    const prev = getPreviousTokenExcluding(token, ['whitespace']);\n    if (prev === maybeKeyword || isTokenType(prev, 'punctuation', ',')) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isTokenType(token: Token | undefined | null, type: string, content?: string): boolean {\n  if (!token?.types.includes(type)) {\n    return false;\n  }\n  if (content) {\n    if (token?.content.toLowerCase() !== content) {\n      return false;\n    }\n  }\n  return true;\n}\n\ntype TokenDef = string | { type: string; value: string };\nfunction getPreviousTokenExcluding(token: Token, exclude: TokenDef[]): Token | undefined | null {\n  let curToken = token.prev;\n  main: while (curToken) {\n    for (const item of exclude) {\n      if (typeof item === 'string') {\n        if (curToken.types.includes(item)) {\n          curToken = curToken.prev;\n          continue main;\n        }\n      } else {\n        if (curToken.types.includes(item.type) && curToken.content.toLowerCase() === item.value) {\n          curToken = curToken.prev;\n          continue main;\n        }\n      }\n    }\n    break;\n  }\n  return curToken;\n}\n","import { TokenTypes } from '../../monarch/types';\n\nexport const MetricMathTokenTypes: TokenTypes = {\n  Parenthesis: 'delimiter.parenthesis.cloudwatch-MetricMath',\n  Whitespace: 'white.cloudwatch-MetricMath',\n  Keyword: 'keyword.cloudwatch-MetricMath',\n  Delimiter: 'delimiter.cloudwatch-MetricMath',\n  Operator: 'operator.cloudwatch-MetricMath',\n  Identifier: 'identifier.cloudwatch-MetricMath',\n  Type: 'type.cloudwatch-MetricMath',\n  Function: 'predefined.cloudwatch-MetricMath',\n  Number: 'number.cloudwatch-MetricMath',\n  String: 'string.cloudwatch-MetricMath',\n  Variable: 'variable.cloudwatch-MetricMath',\n};\n","import { LinkedToken } from '../../monarch/LinkedToken';\nimport { StatementPosition } from '../../monarch/types';\n\nimport { MetricMathTokenTypes } from './types';\n\nexport function getStatementPosition(currentToken: LinkedToken | null): StatementPosition {\n  const previousNonWhiteSpace = currentToken?.getPreviousNonWhiteSpaceToken();\n\n  if (currentToken && currentToken.isString()) {\n    return StatementPosition.WithinString;\n  }\n\n  if (currentToken && previousNonWhiteSpace) {\n    const currentFunction = currentToken.getPreviousOfType(MetricMathTokenTypes.Function);\n    const isAfterComma = previousNonWhiteSpace.is(MetricMathTokenTypes.Delimiter, ',');\n    const isWithinSearch = currentFunction && currentFunction.value === 'SEARCH';\n    const allTokensAfterStartOfSearch =\n      currentToken.getPreviousUntil(MetricMathTokenTypes.Function, [], 'SEARCH') || [];\n\n    if (isWithinSearch) {\n      // if there's only one ' then we're still within the first arg\n      if (allTokensAfterStartOfSearch.filter(({ value }) => value === \"'\").length === 1) {\n        return StatementPosition.WithinString;\n      }\n\n      // if there was a , before the last , and it happened after the start of SEARCH\n      const lastComma = previousNonWhiteSpace.getPreviousOfType(MetricMathTokenTypes.Delimiter, ',');\n      if (lastComma) {\n        const lastCommaIsAfterSearch =\n          lastComma.range.startColumn > currentFunction.range.startColumn &&\n          lastComma.range.startLineNumber >= currentFunction.range.startLineNumber;\n        if (lastCommaIsAfterSearch) {\n          return StatementPosition.SearchFuncThirdArg;\n        }\n      }\n\n      // otherwise assume it's the second arg\n      return StatementPosition.SearchFuncSecondArg;\n    }\n\n    if (!isWithinSearch && isAfterComma) {\n      return StatementPosition.PredefinedFuncSecondArg;\n    }\n  }\n\n  if (previousNonWhiteSpace?.endsWith(')')) {\n    return StatementPosition.AfterFunction;\n  }\n\n  if (!currentToken || !currentToken.isString()) {\n    return StatementPosition.PredefinedFunction;\n  }\n\n  return StatementPosition.Unknown;\n}\n","import { StatementPosition, SuggestionKind } from '../../monarch/types';\n\nexport function getSuggestionKinds(statementPosition: StatementPosition): SuggestionKind[] {\n  switch (statementPosition) {\n    case StatementPosition.PredefinedFunction:\n      return [SuggestionKind.FunctionsWithArguments];\n    case StatementPosition.PredefinedFuncSecondArg:\n      return [SuggestionKind.FunctionsWithArguments, SuggestionKind.KeywordArguments];\n    case StatementPosition.AfterFunction:\n      return [SuggestionKind.Operators];\n    case StatementPosition.SearchFuncSecondArg:\n      return [SuggestionKind.Statistic];\n    case StatementPosition.SearchFuncThirdArg:\n      return [SuggestionKind.Period];\n  }\n\n  return [];\n}\n","import { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\nimport type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { CloudWatchAPI } from '../../api';\nimport { CompletionItemProvider } from '../../monarch/CompletionItemProvider';\nimport { LinkedToken } from '../../monarch/LinkedToken';\nimport { TRIGGER_SUGGEST } from '../../monarch/commands';\nimport { SuggestionKind, CompletionItemPriority, StatementPosition } from '../../monarch/types';\nimport {\n  METRIC_MATH_FNS,\n  METRIC_MATH_KEYWORDS,\n  METRIC_MATH_OPERATORS,\n  METRIC_MATH_PERIODS,\n  METRIC_MATH_STATISTIC_KEYWORD_STRINGS,\n} from '../language';\n\nimport { getStatementPosition } from './statementPosition';\nimport { getSuggestionKinds } from './suggestionKind';\nimport { MetricMathTokenTypes } from './types';\n\ntype CompletionItem = monacoTypes.languages.CompletionItem;\n\nexport class MetricMathCompletionItemProvider extends CompletionItemProvider {\n  constructor(api: CloudWatchAPI, templateSrv: TemplateSrv = getTemplateSrv()) {\n    super(api, templateSrv);\n    this.getStatementPosition = getStatementPosition;\n    this.getSuggestionKinds = getSuggestionKinds;\n    this.tokenTypes = MetricMathTokenTypes;\n  }\n\n  async getSuggestions(\n    monaco: Monaco,\n    currentToken: LinkedToken | null,\n    suggestionKinds: SuggestionKind[],\n    statementPosition: StatementPosition,\n    position: monacoTypes.IPosition\n  ): Promise<CompletionItem[]> {\n    let suggestions: CompletionItem[] = [];\n    const invalidRangeToken = currentToken?.isWhiteSpace() || currentToken?.isParenthesis();\n    const range =\n      invalidRangeToken || !currentToken?.range ? monaco.Range.fromPositions(position) : currentToken?.range;\n\n    const toCompletionItem = (value: string, rest: Partial<CompletionItem> = {}) => {\n      const item: CompletionItem = {\n        label: value,\n        insertText: value,\n        kind: monaco.languages.CompletionItemKind.Field,\n        range,\n        sortText: CompletionItemPriority.Medium,\n        ...rest,\n      };\n      return item;\n    };\n\n    function addSuggestion(value: string, rest: Partial<CompletionItem> = {}) {\n      suggestions = [...suggestions, toCompletionItem(value, rest)];\n    }\n\n    for (const suggestion of suggestionKinds) {\n      switch (suggestion) {\n        case SuggestionKind.FunctionsWithArguments:\n          METRIC_MATH_FNS.map((f) =>\n            addSuggestion(f, {\n              insertText: f === 'SEARCH' ? `${f}('$0')` : `${f}($0)`,\n              insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n              command: TRIGGER_SUGGEST,\n              kind: monaco.languages.CompletionItemKind.Function,\n            })\n          );\n          break;\n\n        case SuggestionKind.KeywordArguments:\n          METRIC_MATH_KEYWORDS.map((s) =>\n            addSuggestion(s, {\n              insertText: s,\n              command: TRIGGER_SUGGEST,\n              kind: monaco.languages.CompletionItemKind.Keyword,\n              sortText: CompletionItemPriority.MediumHigh,\n            })\n          );\n          break;\n\n        case SuggestionKind.Statistic:\n          METRIC_MATH_STATISTIC_KEYWORD_STRINGS.map((s) =>\n            addSuggestion(s, {\n              insertText: `'${s}', `,\n              command: TRIGGER_SUGGEST,\n            })\n          );\n          break;\n\n        case SuggestionKind.Operators:\n          METRIC_MATH_OPERATORS.map((s) =>\n            addSuggestion(s, {\n              insertText: `${s} `,\n              command: TRIGGER_SUGGEST,\n            })\n          );\n          break;\n\n        case SuggestionKind.Period:\n          METRIC_MATH_PERIODS.map((s, idx) =>\n            addSuggestion(s.toString(), {\n              kind: monaco.languages.CompletionItemKind.Value,\n              sortText: String.fromCharCode(97 + idx), // converts index 0, 1 to \"a\", \"b\", etc needed to show the time periods in numerical order\n            })\n          );\n          break;\n      }\n    }\n\n    // always suggest template variables\n    this.templateSrv.getVariables().map((v) => {\n      const variable = `$${v.name}`;\n      addSuggestion(variable, {\n        range,\n        label: variable,\n        insertText: variable,\n        kind: monaco.languages.CompletionItemKind.Variable,\n        sortText: CompletionItemPriority.Low,\n      });\n    });\n\n    return suggestions;\n  }\n}\n","import { map, Observable } from 'rxjs';\n\nimport { DataQueryRequest, DataQueryResponse, DataSourceInstanceSettings } from '@grafana/data';\nimport { toDataQueryResponse } from '@grafana/runtime';\nimport { TemplateSrv } from 'app/features/templating/template_srv';\n\nimport { CloudWatchAnnotationQuery, CloudWatchJsonData, CloudWatchQuery } from '../types';\n\nimport { CloudWatchRequest } from './CloudWatchRequest';\n\n// This class handles execution of CloudWatch annotation queries\nexport class CloudWatchAnnotationQueryRunner extends CloudWatchRequest {\n  constructor(instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>, templateSrv: TemplateSrv) {\n    super(instanceSettings, templateSrv);\n  }\n\n  handleAnnotationQuery(\n    queries: CloudWatchAnnotationQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> {\n    return this.awsRequest(this.dsQueryEndpoint, {\n      from: options.range.from.valueOf().toString(),\n      to: options.range.to.valueOf().toString(),\n      queries: queries.map((query) => ({\n        ...query,\n        statistic: this.templateSrv.replace(query.statistic),\n        region: this.templateSrv.replace(this.getActualRegion(query.region)),\n        namespace: this.templateSrv.replace(query.namespace),\n        metricName: this.templateSrv.replace(query.metricName),\n        dimensions: this.convertDimensionFormat(query.dimensions ?? {}, {}),\n        period: query.period ?? '',\n        actionPrefix: query.actionPrefix ?? '',\n        alarmNamePrefix: query.alarmNamePrefix ?? '',\n        type: 'annotationQuery',\n        datasource: this.ref,\n      })),\n    }).pipe(\n      map((r) => {\n        const frames = toDataQueryResponse({ data: r }).data;\n        return { data: frames };\n      })\n    );\n  }\n}\n","import { DataFrame, DataLink, DataQueryRequest, DataQueryResponse, ScopedVars, TimeRange } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\n\nimport { AwsUrl, encodeUrl } from '../aws_url';\nimport { CloudWatchLogsQuery, CloudWatchQuery } from '../types';\n\ntype ReplaceFn = (\n  target?: string,\n  scopedVars?: ScopedVars,\n  displayErrorIfIsMultiTemplateVariable?: boolean,\n  fieldName?: string\n) => string;\n\nexport async function addDataLinksToLogsResponse(\n  response: DataQueryResponse,\n  request: DataQueryRequest<CloudWatchQuery>,\n  range: TimeRange,\n  replaceFn: ReplaceFn,\n  getVariableValueFn: (value: string, scopedVars: ScopedVars) => string[],\n  getRegion: (region: string) => string,\n  tracingDatasourceUid?: string\n): Promise<void> {\n  const replace = (target: string, fieldName?: string) => replaceFn(target, request.scopedVars, true, fieldName);\n  const getVariableValue = (target: string) => getVariableValueFn(target, request.scopedVars);\n\n  for (const dataFrame of response.data as DataFrame[]) {\n    const curTarget = request.targets.find((target) => target.refId === dataFrame.refId) as CloudWatchLogsQuery;\n    const interpolatedRegion = getRegion(replace(curTarget.region ?? '', 'region'));\n\n    for (const field of dataFrame.fields) {\n      if (field.name === '@xrayTraceId' && tracingDatasourceUid) {\n        getRegion(replace(curTarget.region ?? '', 'region'));\n        const xrayLink = await createInternalXrayLink(tracingDatasourceUid, interpolatedRegion);\n        if (xrayLink) {\n          field.config.links = [xrayLink];\n        }\n      } else {\n        // Right now we add generic link to open the query in xray console to every field so it shows in the logs row\n        // details. Unfortunately this also creates link for all values inside table which look weird.\n        field.config.links = [createAwsConsoleLink(curTarget, range, interpolatedRegion, replace, getVariableValue)];\n      }\n    }\n  }\n}\n\nasync function createInternalXrayLink(datasourceUid: string, region: string) {\n  let ds;\n  try {\n    ds = await getDataSourceSrv().get(datasourceUid);\n  } catch (e) {\n    console.error('Could not load linked xray data source, it was probably deleted after it was linked', e);\n    return undefined;\n  }\n\n  return {\n    title: ds.name,\n    url: '',\n    internal: {\n      query: { query: '${__value.raw}', queryType: 'getTrace', region: region },\n      datasourceUid: datasourceUid,\n      datasourceName: ds.name,\n    },\n  } as DataLink;\n}\n\nfunction createAwsConsoleLink(\n  target: CloudWatchLogsQuery,\n  range: TimeRange,\n  region: string,\n  replace: (target: string, fieldName?: string) => string,\n  getVariableValue: (value: string) => string[]\n) {\n  const arns = (target.logGroups ?? [])\n    .filter((group) => group?.value)\n    .map((group) => (group.value ?? '').replace(/:\\*$/, '')); // remove `:*` from end of arn\n  const logGroupNames = target.logGroupNames ?? [];\n  const sources = arns?.length ? arns : logGroupNames;\n  const interpolatedExpression = target.expression ? replace(target.expression) : '';\n  const interpolatedGroups = sources?.flatMap(getVariableValue);\n\n  const urlProps: AwsUrl = {\n    end: range.to.toISOString(),\n    start: range.from.toISOString(),\n    timeType: 'ABSOLUTE',\n    tz: 'UTC',\n    editorString: interpolatedExpression,\n    isLiveTail: false,\n    source: interpolatedGroups,\n  };\n\n  const encodedUrl = encodeUrl(urlProps, region);\n  return {\n    url: encodedUrl,\n    title: 'View in CloudWatch console',\n    targetBlank: true,\n  };\n}\n","import { Observable, Subscription } from 'rxjs';\n\nimport { DataFrame, DataFrameJSON, DataQueryError } from '@grafana/data';\nimport { FetchError, toDataQueryResponse } from '@grafana/runtime';\n\nimport { StartQueryRequest } from '../types';\n\ntype Result = { frames: DataFrameJSON[]; error?: string };\n\n/**\n * A retry strategy specifically for cloud watch logs query. Cloud watch logs queries need first starting the query\n * and the polling for the results. The start query can fail because of the concurrent queries rate limit,\n * and so we have to retry the start query call if there is already lot of queries running.\n *\n * As we send multiple queries in a single request some can fail and some can succeed and we have to also handle those\n * cases by only retrying the failed queries. We retry the failed queries until we hit the time limit or all queries\n * succeed and only then we pass the data forward. This means we wait longer but makes the code a bit simpler as we\n * can treat starting the query and polling as steps in a pipeline.\n * @param queryFun\n * @param targets\n * @param options\n */\nexport function runWithRetry(\n  queryFun: (targets: StartQueryRequest[]) => Observable<DataFrame[]>,\n  targets: StartQueryRequest[],\n  timeoutFunc: (retry: number, startTime: number) => boolean\n): Observable<{ frames: DataFrame[]; error?: DataQueryError }> {\n  const startTime = new Date();\n  let retries = 0;\n  let timerID: any;\n  let subscription: Subscription;\n  let collected = {};\n\n  const retryWaitFunction = (retry: number) => {\n    return Math.pow(2, retry) * 1000 + Math.random() * 100;\n  };\n\n  return new Observable((observer) => {\n    // Run function is where the logic takes place. We have it in a function so we can call it recursively.\n    function run(currentQueryParams: StartQueryRequest[]) {\n      subscription = queryFun(currentQueryParams).subscribe({\n        next(frames) {\n          // In case we successfully finished, merge the current response with whatever we already collected.\n          const collectedPreviously = toDataQueryResponse({ data: { results: collected } }).data || [];\n          observer.next({ frames: [...collectedPreviously, ...frames] });\n          observer.complete();\n        },\n        error(error: FetchError<{ results?: Record<string, Result> }> | string) {\n          // In case of error we first try to figure out what kind of error it is\n\n          // This means it was a generic 500 error probably so we just pass it on\n          if (typeof error === 'string') {\n            observer.error(error);\n            return;\n          }\n\n          // In case of multiple queries this some can error while some may be ok\n          const errorData = splitErrorData(error);\n\n          if (!errorData) {\n            // Not sure what happened but the error structure wasn't what we expected\n            observer.error(error);\n            return;\n          }\n\n          if (!errorData!.errors.length) {\n            // So there is no limit error but some other errors so nothing to retry so we just pass it as it would be\n            // otherwise.\n            observer.error(error);\n            return;\n          }\n\n          if (timeoutFunc(retries, startTime.valueOf())) {\n            // We timed out but we could have started some queries\n            if (Object.keys(collected).length || Object.keys(errorData.good).length) {\n              const dataResponse = toDataQueryResponse({\n                data: {\n                  results: {\n                    ...(errorData.good ?? {}),\n                    ...(collected ?? {}),\n                  },\n                },\n              });\n              dataResponse.error = {\n                ...(dataResponse.error ?? {}),\n                message: `Some queries timed out: ${errorData.errorMessage}`,\n              };\n              // So we consider this a partial success and pass the data forward but also with error to be shown to\n              // the user.\n              observer.next({\n                error: dataResponse.error,\n                frames: dataResponse.data,\n              });\n              observer.complete();\n            } else {\n              // So we timed out and there was no data to pass forward so we just pass the error\n              const dataResponse = toDataQueryResponse({ data: { results: error.data?.results ?? {} } });\n              observer.error(dataResponse.error);\n            }\n            return;\n          }\n\n          collected = {\n            ...collected,\n            ...errorData!.good,\n          };\n\n          timerID = setTimeout(\n            () => {\n              retries++;\n              run(errorData!.errors);\n            },\n            // We want to know how long to wait for the next retry. First time this will be 0.\n            retryWaitFunction(retries + 1)\n          );\n        },\n      });\n    }\n    run(targets);\n    return () => {\n      // We clear only the latest timer and subscription but the observable should complete after one response so\n      // there should not be more things running at the same time.\n      clearTimeout(timerID);\n      subscription.unsubscribe();\n    };\n  });\n}\n\nfunction splitErrorData(error: FetchError<{ results?: Record<string, Result> }>) {\n  const results = error.data?.results;\n  if (!results) {\n    return undefined;\n  }\n  return Object.keys(results).reduce<{\n    errors: StartQueryRequest[];\n    good: Record<string, Result>;\n    errorMessage: string;\n  }>(\n    (acc, refId) => {\n      if (results[refId].error?.startsWith('LimitExceededException')) {\n        acc.errorMessage = results[refId].error!;\n        acc.errors.push(error.config.data.queries.find((q: any) => q.refId === refId));\n      } else {\n        acc.good[refId] = results[refId];\n      }\n      return acc;\n    },\n    { errors: [], good: {}, errorMessage: '' }\n  );\n}\n","import { SchedulerLike, Observable, SchedulerAction, Subscriber, asyncScheduler } from 'rxjs';\n\n/**\n * Creates an Observable that emits sequential numbers after increasing intervals of time\n * starting with `startPeriod`, ending with `endPeriod` and incrementing by `step`.\n */\nexport const increasingInterval = (\n  { startPeriod = 0, endPeriod = 5000, step = 1000 },\n  scheduler: SchedulerLike = asyncScheduler\n): Observable<number> => {\n  return new Observable<number>((subscriber) => {\n    const state: IntervalState = {\n      subscriber,\n      counter: 0,\n      period: startPeriod,\n      step,\n      endPeriod,\n    };\n\n    subscriber.add(scheduler.schedule(dispatch, startPeriod, state));\n    return subscriber;\n  });\n};\n\nfunction dispatch(this: SchedulerAction<IntervalState>, state?: IntervalState) {\n  if (!state) {\n    return;\n  }\n  const { subscriber, counter, period, step, endPeriod } = state;\n  subscriber.next(counter);\n  const newPeriod = Math.min(period + step, endPeriod);\n  this.schedule({ subscriber, counter: counter + 1, period: newPeriod, step, endPeriod }, newPeriod);\n}\n\ninterface IntervalState {\n  subscriber: Subscriber<number>;\n  counter: number;\n  period: number;\n  endPeriod: number;\n  step: number;\n}\n","import { set } from 'lodash';\nimport {\n  Observable,\n  of,\n  mergeMap,\n  map,\n  from,\n  concatMap,\n  finalize,\n  repeat,\n  scan,\n  share,\n  takeWhile,\n  tap,\n  zip,\n  catchError,\n  lastValueFrom,\n} from 'rxjs';\n\nimport {\n  DataFrame,\n  DataQueryError,\n  DataQueryErrorType,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  LoadingState,\n  LogRowModel,\n  rangeUtil,\n  ScopedVars,\n} from '@grafana/data';\nimport { BackendDataSourceResponse, config, FetchError, FetchResponse, toDataQueryResponse } from '@grafana/runtime';\nimport { TimeSrv } from 'app/features/dashboard/services/TimeSrv';\nimport { TemplateSrv } from 'app/features/templating/template_srv';\n\nimport { RowContextOptions } from '../../../../features/logs/components/LogRowContextProvider';\nimport {\n  CloudWatchJsonData,\n  CloudWatchLogsQuery,\n  CloudWatchLogsQueryStatus,\n  CloudWatchLogsRequest,\n  CloudWatchQuery,\n  DescribeLogGroupsRequest,\n  GetLogEventsRequest,\n  GetLogGroupFieldsRequest,\n  GetLogGroupFieldsResponse,\n  LogAction,\n  StartQueryRequest,\n} from '../types';\nimport { addDataLinksToLogsResponse } from '../utils/datalinks';\nimport { runWithRetry } from '../utils/logsRetry';\nimport { increasingInterval } from '../utils/rxjs/increasingInterval';\n\nimport { CloudWatchRequest } from './CloudWatchRequest';\n\nexport const LOG_IDENTIFIER_INTERNAL = '__log__grafana_internal__';\nexport const LOGSTREAM_IDENTIFIER_INTERNAL = '__logstream__grafana_internal__';\n\n// This class handles execution of CloudWatch logs query data queries\nexport class CloudWatchLogsQueryRunner extends CloudWatchRequest {\n  logsTimeout: string;\n  defaultLogGroups: string[];\n  logQueries: Record<string, { id: string; region: string; statsQuery: boolean }> = {};\n  tracingDataSourceUid?: string;\n\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>,\n    templateSrv: TemplateSrv,\n    private readonly timeSrv: TimeSrv\n  ) {\n    super(instanceSettings, templateSrv);\n\n    this.tracingDataSourceUid = instanceSettings.jsonData.tracingDatasourceUid;\n    this.logsTimeout = instanceSettings.jsonData.logsTimeout || '15m';\n    this.defaultLogGroups = instanceSettings.jsonData.defaultLogGroups || [];\n  }\n\n  /**\n   * Handle log query. The log query works by starting the query on the CloudWatch and then periodically polling for\n   * results.\n   * @param logQueries\n   * @param options\n   */\n  handleLogQueries = (\n    logQueries: CloudWatchLogsQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> => {\n    const queryParams = logQueries.map((target: CloudWatchLogsQuery) => ({\n      queryString: target.expression || '',\n      refId: target.refId,\n      logGroupNames: target.logGroupNames || this.defaultLogGroups,\n      logGroups: target.logGroups || [], //todo handle defaults\n      region: super.replaceVariableAndDisplayWarningIfMulti(\n        this.getActualRegion(target.region),\n        options.scopedVars,\n        true,\n        'region'\n      ),\n    }));\n\n    const hasQueryWithMissingLogGroupSelection = queryParams.some((qp) => {\n      const missingLogGroupNames = qp.logGroupNames.length === 0;\n      const missingLogGroups = qp.logGroups.length === 0;\n      return missingLogGroupNames && missingLogGroups;\n    });\n\n    if (hasQueryWithMissingLogGroupSelection) {\n      return of({ data: [], error: { message: 'Log group is required' } });\n    }\n\n    const startTime = new Date();\n    const timeoutFunc = () => {\n      return Date.now() >= startTime.valueOf() + rangeUtil.intervalToMs(this.logsTimeout);\n    };\n\n    return runWithRetry(\n      (targets: StartQueryRequest[]) => {\n        return this.makeLogActionRequest('StartQuery', targets, {\n          makeReplacements: true,\n          scopedVars: options.scopedVars,\n          skipCache: true,\n        });\n      },\n      queryParams,\n      timeoutFunc\n    ).pipe(\n      mergeMap(({ frames, error }: { frames: DataFrame[]; error?: DataQueryError }) =>\n        // This queries for the results\n        this.logsQuery(\n          frames.map((dataFrame) => ({\n            queryId: dataFrame.fields[0].values.get(0),\n            region: dataFrame.meta?.custom?.['Region'] ?? 'default',\n            refId: dataFrame.refId!,\n            statsGroups: logQueries.find((target) => target.refId === dataFrame.refId)?.statsGroups,\n          })),\n          timeoutFunc\n        ).pipe(\n          map((response: DataQueryResponse) => {\n            if (!response.error && error) {\n              response.error = error;\n            }\n            return response;\n          })\n        )\n      ),\n      mergeMap((dataQueryResponse) => {\n        return from(\n          (async () => {\n            await addDataLinksToLogsResponse(\n              dataQueryResponse,\n              options,\n              this.timeSrv.timeRange(),\n              this.replaceVariableAndDisplayWarningIfMulti.bind(this),\n              this.expandVariableToArray.bind(this),\n              this.getActualRegion.bind(this),\n              this.tracingDataSourceUid\n            );\n\n            return dataQueryResponse;\n          })()\n        );\n      })\n    );\n  };\n\n  /**\n   * Checks progress and polls data of a started logs query with some retry logic.\n   * @param queryParams\n   */\n  logsQuery(\n    queryParams: Array<{\n      queryId: string;\n      refId: string;\n      limit?: number;\n      region: string;\n      statsGroups?: string[];\n    }>,\n    timeoutFunc: () => boolean\n  ): Observable<DataQueryResponse> {\n    this.logQueries = {};\n    queryParams.forEach((param) => {\n      this.logQueries[param.refId] = {\n        id: param.queryId,\n        region: param.region,\n        statsQuery: (param.statsGroups?.length ?? 0) > 0 ?? false,\n      };\n    });\n\n    const dataFrames = increasingInterval({ startPeriod: 100, endPeriod: 1000, step: 300 }).pipe(\n      concatMap((_) => this.makeLogActionRequest('GetQueryResults', queryParams, { skipCache: true })),\n      repeat(),\n      share()\n    );\n\n    const initialValue: { failures: number; prevRecordsMatched: Record<string, number> } = {\n      failures: 0,\n      prevRecordsMatched: {},\n    };\n    const consecutiveFailedAttempts = dataFrames.pipe(\n      scan(({ failures, prevRecordsMatched }, frames) => {\n        failures++;\n        for (const frame of frames) {\n          const recordsMatched = frame.meta?.stats?.find((stat) => stat.displayName === 'Records scanned')?.value!;\n          if (recordsMatched > (prevRecordsMatched[frame.refId!] ?? 0)) {\n            failures = 0;\n          }\n          prevRecordsMatched[frame.refId!] = recordsMatched;\n        }\n\n        return { failures, prevRecordsMatched };\n      }, initialValue),\n      map(({ failures }) => failures),\n      share()\n    );\n\n    const queryResponse: Observable<DataQueryResponse> = zip(dataFrames, consecutiveFailedAttempts).pipe(\n      tap(([dataFrames]) => {\n        for (const frame of dataFrames) {\n          if (\n            [\n              CloudWatchLogsQueryStatus.Complete,\n              CloudWatchLogsQueryStatus.Cancelled,\n              CloudWatchLogsQueryStatus.Failed,\n            ].includes(frame.meta?.custom?.['Status']) &&\n            this.logQueries.hasOwnProperty(frame.refId!)\n          ) {\n            delete this.logQueries[frame.refId!];\n          }\n        }\n      }),\n      map(([dataFrames, failedAttempts]) => {\n        if (timeoutFunc()) {\n          for (const frame of dataFrames) {\n            set(frame, 'meta.custom.Status', CloudWatchLogsQueryStatus.Cancelled);\n          }\n        }\n\n        return {\n          data: dataFrames,\n          key: 'test-key',\n          state: dataFrames.every((dataFrame) =>\n            [\n              CloudWatchLogsQueryStatus.Complete,\n              CloudWatchLogsQueryStatus.Cancelled,\n              CloudWatchLogsQueryStatus.Failed,\n            ].includes(dataFrame.meta?.custom?.['Status'])\n          )\n            ? LoadingState.Done\n            : LoadingState.Loading,\n          error: timeoutFunc()\n            ? {\n                message: `error: query timed out after ${failedAttempts} attempts`,\n                type: DataQueryErrorType.Timeout,\n              }\n            : undefined,\n        };\n      }),\n      takeWhile(({ state }) => state !== LoadingState.Error && state !== LoadingState.Done, true)\n    );\n\n    return withTeardown(queryResponse, () => this.stopQueries());\n  }\n\n  stopQueries() {\n    if (Object.keys(this.logQueries).length > 0) {\n      this.makeLogActionRequest(\n        'StopQuery',\n        Object.values(this.logQueries).map((logQuery) => ({ queryId: logQuery.id, region: logQuery.region })),\n        {\n          makeReplacements: false,\n          skipCache: true,\n        }\n      ).pipe(\n        finalize(() => {\n          this.logQueries = {};\n        })\n      );\n    }\n  }\n\n  makeLogActionRequest(\n    subtype: LogAction,\n    queryParams: CloudWatchLogsRequest[],\n    options: {\n      scopedVars?: ScopedVars;\n      makeReplacements?: boolean;\n      skipCache?: boolean;\n    } = {\n      makeReplacements: true,\n      skipCache: false,\n    }\n  ): Observable<DataFrame[]> {\n    const range = this.timeSrv.timeRange();\n\n    const requestParams = {\n      from: range.from.valueOf().toString(),\n      to: range.to.valueOf().toString(),\n      queries: queryParams.map((param: CloudWatchLogsRequest) => ({\n        // eslint-ignore-next-line\n        refId: (param as StartQueryRequest).refId || 'A',\n        intervalMs: 1, // dummy\n        maxDataPoints: 1, // dummy\n        datasource: this.ref,\n        type: 'logAction',\n        subtype: subtype,\n        ...param,\n      })),\n    };\n\n    if (options.makeReplacements) {\n      requestParams.queries.forEach((query: CloudWatchLogsRequest) => {\n        const fieldsToReplace: Array<\n          keyof (GetLogEventsRequest & StartQueryRequest & DescribeLogGroupsRequest & GetLogGroupFieldsRequest)\n        > = ['queryString', 'logGroupNames', 'logGroupName', 'logGroupNamePrefix'];\n\n        // eslint-ignore-next-line\n        const anyQuery: any = query;\n        for (const fieldName of fieldsToReplace) {\n          if (query.hasOwnProperty(fieldName)) {\n            if (Array.isArray(anyQuery[fieldName])) {\n              anyQuery[fieldName] = anyQuery[fieldName].flatMap((val: string) => {\n                if (fieldName === 'logGroupNames') {\n                  return this.expandVariableToArray(val, options.scopedVars || {});\n                }\n                return this.replaceVariableAndDisplayWarningIfMulti(val, options.scopedVars, true, fieldName);\n              });\n            } else {\n              anyQuery[fieldName] = this.replaceVariableAndDisplayWarningIfMulti(\n                anyQuery[fieldName],\n                options.scopedVars,\n                true,\n                fieldName\n              );\n            }\n          }\n        }\n\n        if (anyQuery.region) {\n          anyQuery.region = this.replaceVariableAndDisplayWarningIfMulti(\n            anyQuery.region,\n            options.scopedVars,\n            true,\n            'region'\n          );\n          anyQuery.region = this.getActualRegion(anyQuery.region);\n        }\n      });\n    }\n\n    const resultsToDataFrames = (\n      val:\n        | { data: BackendDataSourceResponse | undefined }\n        | FetchResponse<BackendDataSourceResponse | undefined>\n        | DataQueryError\n    ): DataFrame[] => toDataQueryResponse(val).data || [];\n    let headers = {};\n    if (options.skipCache) {\n      headers = {\n        'X-Cache-Skip': true,\n      };\n    }\n\n    return this.awsRequest(this.dsQueryEndpoint, requestParams, headers).pipe(\n      map((response) => resultsToDataFrames({ data: response })),\n      catchError((err: FetchError) => {\n        if (config.featureToggles.datasourceQueryMultiStatus && err.status === 207) {\n          throw err;\n        }\n\n        if (err.status === 400) {\n          throw err;\n        }\n\n        if (err.data?.error) {\n          throw err.data.error;\n        } else if (err.data?.message) {\n          // In PROD we do not supply .error\n          throw err.data.message;\n        }\n\n        throw err;\n      })\n    );\n  }\n\n  getLogRowContext = async (\n    row: LogRowModel,\n    { limit = 10, direction = 'BACKWARD' }: RowContextOptions = {},\n    query?: CloudWatchLogsQuery\n  ): Promise<{ data: DataFrame[] }> => {\n    let logStreamField = null;\n    let logField = null;\n\n    for (const field of row.dataFrame.fields) {\n      if (field.name === LOGSTREAM_IDENTIFIER_INTERNAL) {\n        logStreamField = field;\n        if (logField !== null) {\n          break;\n        }\n      } else if (field.name === LOG_IDENTIFIER_INTERNAL) {\n        logField = field;\n        if (logStreamField !== null) {\n          break;\n        }\n      }\n    }\n\n    const requestParams: GetLogEventsRequest = {\n      limit,\n      startFromHead: direction !== 'BACKWARD',\n      region: query?.region,\n      logGroupName: parseLogGroupName(logField!.values.get(row.rowIndex)),\n      logStreamName: logStreamField!.values.get(row.rowIndex),\n    };\n\n    if (direction === 'BACKWARD') {\n      requestParams.endTime = row.timeEpochMs;\n    } else {\n      requestParams.startTime = row.timeEpochMs;\n    }\n\n    const dataFrames = await lastValueFrom(this.makeLogActionRequest('GetLogEvents', [requestParams]));\n\n    return {\n      data: dataFrames,\n    };\n  };\n\n  async getLogGroupFields(params: GetLogGroupFieldsRequest): Promise<GetLogGroupFieldsResponse> {\n    const dataFrames = await lastValueFrom(this.makeLogActionRequest('GetLogGroupFields', [params]));\n\n    const fieldNames = dataFrames[0].fields[0].values.toArray();\n    const fieldPercentages = dataFrames[0].fields[1].values.toArray();\n    const getLogGroupFieldsResponse = {\n      logGroupFields: fieldNames.map((val, i) => ({ name: val, percent: fieldPercentages[i] })) ?? [],\n    };\n\n    return getLogGroupFieldsResponse;\n  }\n}\n\nfunction withTeardown<T = DataQueryResponse>(observable: Observable<T>, onUnsubscribe: () => void): Observable<T> {\n  return new Observable<T>((subscriber) => {\n    const innerSub = observable.subscribe({\n      next: (val) => subscriber.next(val),\n      error: (err) => subscriber.next(err),\n      complete: () => subscriber.complete(),\n    });\n\n    return () => {\n      innerSub.unsubscribe();\n      onUnsubscribe();\n    };\n  });\n}\n\nfunction parseLogGroupName(logIdentifier: string): string {\n  const colonIndex = logIdentifier.lastIndexOf(':');\n  return logIdentifier.slice(colonIndex + 1);\n}\n","import React, { FunctionComponent } from 'react';\n\nexport interface Props {\n  region: string;\n}\n\nexport const ThrottlingErrorMessage: FunctionComponent<Props> = ({ region }) => (\n  <p>\n    Please visit the&nbsp;\n    <a\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      className=\"text-link\"\n      href={`https://${region}.console.aws.amazon.com/servicequotas/home?region=${region}#!/services/monitoring/quotas/L-5E141212`}\n    >\n      AWS Service Quotas console\n    </a>\n    &nbsp;to request a quota increase or see our&nbsp;\n    <a\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      className=\"text-link\"\n      href=\"https://grafana.com/docs/grafana/latest/datasources/cloudwatch/#service-quotas\"\n    >\n      documentation\n    </a>\n    &nbsp;to learn more.\n  </p>\n);\n","import { findLast, isEmpty } from 'lodash';\nimport React from 'react';\nimport { catchError, map, Observable, of, throwError } from 'rxjs';\n\nimport {\n  DataFrame,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  dateTimeFormat,\n  FieldType,\n  rangeUtil,\n  ScopedVars,\n  TimeRange,\n} from '@grafana/data';\nimport { toDataQueryResponse } from '@grafana/runtime';\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { TemplateSrv } from 'app/features/templating/template_srv';\nimport { store } from 'app/store/store';\nimport { AppNotificationTimeout } from 'app/types';\n\nimport { ThrottlingErrorMessage } from '../components/ThrottlingErrorMessage';\nimport memoizedDebounce from '../memoizedDebounce';\nimport { migrateMetricQuery } from '../migrations/metricQueryMigrations';\nimport {\n  CloudWatchJsonData,\n  CloudWatchMetricsQuery,\n  CloudWatchQuery,\n  DataQueryError,\n  MetricQuery,\n  MetricRequest,\n} from '../types';\nimport { filterMetricsQuery } from '../utils/utils';\n\nimport { CloudWatchRequest } from './CloudWatchRequest';\n\nconst displayAlert = (datasourceName: string, region: string) =>\n  store.dispatch(\n    notifyApp(\n      createErrorNotification(\n        `CloudWatch request limit reached in ${region} for data source ${datasourceName}`,\n        '',\n        undefined,\n        React.createElement(ThrottlingErrorMessage, { region }, null)\n      )\n    )\n  );\n// This class handles execution of CloudWatch metrics query data queries\nexport class CloudWatchMetricsQueryRunner extends CloudWatchRequest {\n  debouncedAlert: (datasourceName: string, region: string) => void = memoizedDebounce(\n    displayAlert,\n    AppNotificationTimeout.Error\n  );\n\n  constructor(instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>, templateSrv: TemplateSrv) {\n    super(instanceSettings, templateSrv);\n  }\n\n  handleMetricQueries = (\n    metricQueries: CloudWatchMetricsQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> => {\n    const timezoneUTCOffset = dateTimeFormat(Date.now(), {\n      timeZone: options.timezone,\n      format: 'Z',\n    }).replace(':', '');\n\n    const validMetricsQueries = metricQueries\n      .filter(this.filterMetricQuery)\n      .map((q: CloudWatchMetricsQuery): MetricQuery => {\n        const migratedQuery = migrateMetricQuery(q);\n        const migratedAndIterpolatedQuery = this.replaceMetricQueryVars(migratedQuery, options.scopedVars);\n\n        return {\n          timezoneUTCOffset,\n          intervalMs: options.intervalMs,\n          maxDataPoints: options.maxDataPoints,\n          ...migratedAndIterpolatedQuery,\n          type: 'timeSeriesQuery',\n          datasource: this.ref,\n        };\n      });\n\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(validMetricsQueries)) {\n      return of({ data: [] });\n    }\n\n    const request = {\n      from: options?.range?.from.valueOf().toString(),\n      to: options?.range?.to.valueOf().toString(),\n      queries: validMetricsQueries,\n    };\n\n    return this.performTimeSeriesQuery(request, options.range);\n  };\n\n  interpolateMetricsQueryVariables(\n    query: CloudWatchMetricsQuery,\n    scopedVars: ScopedVars\n  ): Pick<CloudWatchMetricsQuery, 'alias' | 'metricName' | 'namespace' | 'period' | 'dimensions' | 'sqlExpression'> {\n    return {\n      alias: this.replaceVariableAndDisplayWarningIfMulti(query.alias, scopedVars),\n      metricName: this.replaceVariableAndDisplayWarningIfMulti(query.metricName, scopedVars),\n      namespace: this.replaceVariableAndDisplayWarningIfMulti(query.namespace, scopedVars),\n      period: this.replaceVariableAndDisplayWarningIfMulti(query.period, scopedVars),\n      sqlExpression: this.replaceVariableAndDisplayWarningIfMulti(query.sqlExpression, scopedVars),\n      dimensions: this.convertDimensionFormat(query.dimensions ?? {}, scopedVars),\n    };\n  }\n\n  performTimeSeriesQuery(request: MetricRequest, { from, to }: TimeRange): Observable<DataQueryResponse> {\n    return this.awsRequest(this.dsQueryEndpoint, request).pipe(\n      map((res) => {\n        const dataframes: DataFrame[] = toDataQueryResponse({ data: res }).data;\n        if (!dataframes || dataframes.length <= 0) {\n          return { data: [] };\n        }\n\n        const lastError = findLast(res.results, (v) => !!v.error);\n\n        dataframes.forEach((frame) => {\n          frame.fields.forEach((field) => {\n            if (field.type === FieldType.time) {\n              // field.config.interval is populated in order for Grafana to fill in null values at frame intervals\n              field.config.interval = frame.meta?.custom?.period * 1000;\n            }\n          });\n        });\n\n        return {\n          data: dataframes,\n          error: lastError ? { message: lastError.error } : undefined,\n        };\n      }),\n      catchError((err: DataQueryError<CloudWatchMetricsQuery>) => {\n        const isFrameError = err.data?.results;\n\n        // Error is not frame specific\n        if (!isFrameError && err.data && err.data.message === 'Metric request error' && err.data.error) {\n          err.message = err.data.error;\n          return throwError(() => err);\n        }\n\n        // The error is either for a specific frame or for all the frames\n        const results: Array<{ error?: string }> = Object.values(err.data?.results ?? {});\n        const firstErrorResult = results.find((r) => r.error);\n        if (firstErrorResult) {\n          err.message = firstErrorResult.error;\n        }\n\n        if (results.some((r) => r.error && /^Throttling:.*/.test(r.error))) {\n          const failedRedIds = Object.keys(err.data?.results ?? {});\n          const regionsAffected = Object.values(request.queries).reduce(\n            (res: string[], { refId, region }) =>\n              (refId && !failedRedIds.includes(refId)) || res.includes(region) ? res : [...res, region],\n            []\n          );\n          regionsAffected.forEach((region) => {\n            const actualRegion = this.getActualRegion(region);\n            if (actualRegion) {\n              this.debouncedAlert(this.instanceSettings.name, actualRegion);\n            }\n          });\n        }\n\n        return throwError(() => err);\n      })\n    );\n  }\n\n  filterMetricQuery(query: CloudWatchMetricsQuery): boolean {\n    return filterMetricsQuery(query);\n  }\n\n  replaceMetricQueryVars(query: CloudWatchMetricsQuery, scopedVars: ScopedVars): CloudWatchMetricsQuery {\n    query.region = this.templateSrv.replace(this.getActualRegion(query.region), scopedVars);\n    query.namespace = this.replaceVariableAndDisplayWarningIfMulti(query.namespace, scopedVars, true, 'namespace');\n    query.metricName = this.replaceVariableAndDisplayWarningIfMulti(query.metricName, scopedVars, true, 'metric name');\n    query.dimensions = this.convertDimensionFormat(query.dimensions ?? {}, scopedVars);\n    query.statistic = this.templateSrv.replace(query.statistic, scopedVars);\n    query.period = String(this.getPeriod(query, scopedVars)); // use string format for period in graph query, and alerting\n    query.id = this.templateSrv.replace(query.id, scopedVars);\n    query.expression = this.templateSrv.replace(query.expression, scopedVars);\n    query.sqlExpression = this.templateSrv.replace(query.sqlExpression, scopedVars, 'raw');\n    if (query.accountId) {\n      query.accountId = this.templateSrv.replace(query.accountId, scopedVars);\n    }\n\n    return query;\n  }\n\n  getPeriod(target: CloudWatchMetricsQuery, scopedVars: ScopedVars) {\n    let period = this.templateSrv.replace(target.period, scopedVars);\n    if (period && period.toLowerCase() !== 'auto') {\n      let p: number;\n      if (/^\\d+$/.test(period)) {\n        p = parseInt(period, 10);\n      } else {\n        p = rangeUtil.intervalToSeconds(period);\n      }\n\n      if (p < 1) {\n        p = 1;\n      }\n\n      return String(p);\n    }\n\n    return period;\n  }\n}\n","import { omit } from 'lodash';\n\nimport { Dimensions, VariableQuery, VariableQueryType, OldVariableQuery, MultiFilters } from '../types';\n\nconst jsonVariable = /\\${(\\w+):json}/g;\n\nfunction isVariableQuery(rawQuery: string | VariableQuery | OldVariableQuery): rawQuery is VariableQuery {\n  return typeof rawQuery !== 'string' && typeof rawQuery.ec2Filters !== 'string' && typeof rawQuery.tags !== 'string';\n}\n\nfunction migrateMultiFilters(oldFilters: string): MultiFilters {\n  const tempFilters = oldFilters.replace(jsonVariable, '\"$$$1\"');\n  const parsedFilters: Dimensions = JSON.parse(tempFilters);\n  const newFilters: MultiFilters = {};\n  // if the old filter was {key:value} transform it to {key:[value]}\n  Object.keys(parsedFilters).forEach((key) => {\n    const value = parsedFilters[key];\n    if (typeof value === 'string') {\n      newFilters[key] = [value];\n    } else if (value !== undefined) {\n      newFilters[key] = value;\n    }\n  });\n  return newFilters;\n}\n\nexport function migrateVariableQuery(rawQuery: string | VariableQuery | OldVariableQuery): VariableQuery {\n  if (isVariableQuery(rawQuery)) {\n    return rawQuery;\n  }\n\n  // rawQuery is OldVariableQuery\n  if (typeof rawQuery !== 'string') {\n    const newQuery: VariableQuery = omit(rawQuery, ['dimensionFilters', 'ec2Filters', 'tags']);\n    newQuery.dimensionFilters = {};\n    newQuery.ec2Filters = {};\n    newQuery.tags = {};\n\n    if (rawQuery.dimensionFilters !== '' && rawQuery.ec2Filters !== '[]') {\n      const tempFilters = rawQuery.dimensionFilters.replace(jsonVariable, '\"$$$1\"');\n      try {\n        newQuery.dimensionFilters = JSON.parse(tempFilters);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${rawQuery.dimensionFilters}`);\n      }\n    }\n    if (rawQuery.ec2Filters !== '' && rawQuery.ec2Filters !== '[]') {\n      try {\n        newQuery.ec2Filters = migrateMultiFilters(rawQuery.ec2Filters);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${rawQuery.ec2Filters}`);\n      }\n    }\n    if (rawQuery.tags !== '' && rawQuery.tags !== '[]') {\n      try {\n        newQuery.tags = migrateMultiFilters(rawQuery.tags);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${rawQuery.tags}`);\n      }\n    }\n    return newQuery;\n  }\n\n  const newQuery: VariableQuery = {\n    refId: 'CloudWatchVariableQueryEditor-VariableQuery',\n    queryType: VariableQueryType.Regions,\n    namespace: '',\n    region: '',\n    metricName: '',\n    dimensionKey: '',\n    dimensionFilters: {},\n    ec2Filters: {},\n    instanceID: '',\n    attributeName: '',\n    resourceType: '',\n    tags: {},\n  };\n\n  if (rawQuery === '') {\n    return newQuery;\n  }\n\n  if (rawQuery.match(/^regions\\(\\)/)) {\n    return newQuery;\n  }\n  if (rawQuery.match(/^namespaces\\(\\)/)) {\n    newQuery.queryType = VariableQueryType.Namespaces;\n    return newQuery;\n  }\n  const metricNameQuery = rawQuery.match(/^metrics\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\n  if (metricNameQuery) {\n    newQuery.queryType = VariableQueryType.Metrics;\n    newQuery.namespace = metricNameQuery[1];\n    newQuery.region = metricNameQuery[3] || '';\n    return newQuery;\n  }\n  const dimensionKeysQuery = rawQuery.match(/^dimension_keys\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\n  if (dimensionKeysQuery) {\n    newQuery.queryType = VariableQueryType.DimensionKeys;\n    newQuery.namespace = dimensionKeysQuery[1];\n    newQuery.region = dimensionKeysQuery[3] || '';\n    return newQuery;\n  }\n\n  const dimensionValuesQuery = rawQuery.match(\n    /^dimension_values\\(([^,]+?),\\s?([^,]+?),\\s?([^,]+?),\\s?([^,]+?)(,\\s?(.+))?\\)/\n  );\n  if (dimensionValuesQuery) {\n    newQuery.queryType = VariableQueryType.DimensionValues;\n    newQuery.region = dimensionValuesQuery[1];\n    newQuery.namespace = dimensionValuesQuery[2];\n    newQuery.metricName = dimensionValuesQuery[3];\n    newQuery.dimensionKey = dimensionValuesQuery[4];\n    newQuery.dimensionFilters = {};\n    if (!!dimensionValuesQuery[6] && dimensionValuesQuery[6] !== '[]') {\n      const tempFilters = dimensionValuesQuery[6].replace(jsonVariable, '\"$$$1\"');\n      try {\n        newQuery.dimensionFilters = JSON.parse(tempFilters);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${dimensionValuesQuery[6]}`);\n      }\n    }\n    return newQuery;\n  }\n\n  const ebsVolumeIdsQuery = rawQuery.match(/^ebs_volume_ids\\(([^,]+?),\\s?([^,]+?)\\)/);\n  if (ebsVolumeIdsQuery) {\n    newQuery.queryType = VariableQueryType.EBSVolumeIDs;\n    newQuery.region = ebsVolumeIdsQuery[1];\n    newQuery.instanceID = ebsVolumeIdsQuery[2];\n    return newQuery;\n  }\n\n  const ec2InstanceAttributeQuery = rawQuery.match(/^ec2_instance_attribute\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/);\n  if (ec2InstanceAttributeQuery) {\n    newQuery.queryType = VariableQueryType.EC2InstanceAttributes;\n    newQuery.region = ec2InstanceAttributeQuery[1];\n    newQuery.attributeName = ec2InstanceAttributeQuery[2];\n    if (ec2InstanceAttributeQuery[3] && ec2InstanceAttributeQuery[3] !== '[]') {\n      try {\n        newQuery.ec2Filters = migrateMultiFilters(ec2InstanceAttributeQuery[3]);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${ec2InstanceAttributeQuery[3]}`);\n      }\n    }\n    return newQuery;\n  }\n\n  const resourceARNsQuery = rawQuery.match(/^resource_arns\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/);\n  if (resourceARNsQuery) {\n    newQuery.queryType = VariableQueryType.ResourceArns;\n    newQuery.region = resourceARNsQuery[1];\n    newQuery.resourceType = resourceARNsQuery[2];\n    if (resourceARNsQuery[3] && resourceARNsQuery[3] !== '[]') {\n      try {\n        newQuery.tags = migrateMultiFilters(resourceARNsQuery[3]);\n      } catch {\n        throw new Error(`unable to migrate poorly formed filters: ${resourceARNsQuery[3]}`);\n      }\n    }\n    return newQuery;\n  }\n\n  const statsQuery = rawQuery.match(/^statistics\\(\\)/);\n  if (statsQuery) {\n    newQuery.queryType = VariableQueryType.Statistics;\n    return newQuery;\n  }\n  throw new Error('unable to parse old variable query');\n}\n","import { css, cx } from '@emotion/css';\nimport React, { FunctionComponent, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { AccessoryButton, InputGroup } from '@grafana/experimental';\nimport { Input, stylesFactory, useTheme2 } from '@grafana/ui';\n\nimport { MultiFilterCondition } from './MultiFilter';\n\nexport interface Props {\n  filter: MultiFilterCondition;\n  onChange: (value: MultiFilterCondition) => void;\n  onDelete: () => void;\n  keyPlaceholder?: string;\n}\n\nexport const MultiFilterItem: FunctionComponent<Props> = ({ filter, onChange, onDelete, keyPlaceholder }) => {\n  const [localKey, setLocalKey] = useState(filter.key || '');\n  const [localValue, setLocalValue] = useState(filter.value?.join(', ') || '');\n  const theme = useTheme2();\n  const styles = getOperatorStyles(theme);\n\n  return (\n    <div data-testid=\"cloudwatch-multifilter-item\">\n      <InputGroup>\n        <Input\n          data-testid=\"cloudwatch-multifilter-item-key\"\n          aria-label=\"Filter key\"\n          value={localKey}\n          placeholder={keyPlaceholder ?? 'key'}\n          onChange={(e) => setLocalKey(e.currentTarget.value)}\n          onBlur={() => {\n            if (localKey && localKey !== filter.key) {\n              onChange({ ...filter, key: localKey });\n            }\n          }}\n        />\n\n        <span className={cx(styles.root)}>=</span>\n\n        <Input\n          data-testid=\"cloudwatch-multifilter-item-value\"\n          aria-label=\"Filter value\"\n          value={localValue}\n          placeholder=\"value1, value2,...\"\n          onChange={(e) => setLocalValue(e.currentTarget.value)}\n          onBlur={() => {\n            const newValues = localValue.split(',').map((v) => v.trim());\n            if (localValue && newValues !== filter.value) {\n              onChange({ ...filter, value: newValues });\n            }\n            setLocalValue(newValues.join(', '));\n          }}\n        />\n\n        <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} type=\"button\" />\n      </InputGroup>\n    </div>\n  );\n};\n\nconst getOperatorStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    padding: theme.spacing(0, 1),\n    alignSelf: 'center',\n  }),\n}));\n","import { isEqual } from 'lodash';\nimport React, { useEffect, useState } from 'react';\n\nimport { EditorList } from '@grafana/experimental';\n\nimport { MultiFilters } from '../../types';\n\nimport { MultiFilterItem } from './MultiFilterItem';\n\nexport interface Props {\n  filters?: MultiFilters;\n  onChange: (filters: MultiFilters) => void;\n  keyPlaceholder?: string;\n}\n\nexport interface MultiFilterCondition {\n  key?: string;\n  operator?: string;\n  value?: string[];\n}\n\nconst multiFiltersToFilterConditions = (filters: MultiFilters) =>\n  Object.keys(filters).map((key) => ({ key, value: filters[key], operator: '=' }));\n\nconst filterConditionsToMultiFilters = (filters: MultiFilterCondition[]) => {\n  const res: MultiFilters = {};\n  filters.forEach(({ key, value }) => {\n    if (key && value) {\n      res[key] = value;\n    }\n  });\n  return res;\n};\n\nexport const MultiFilter = ({ filters, onChange, keyPlaceholder }: Props) => {\n  const [items, setItems] = useState<MultiFilterCondition[]>([]);\n  useEffect(() => setItems(filters ? multiFiltersToFilterConditions(filters) : []), [filters]);\n  const onFiltersChange = (newItems: Array<Partial<MultiFilterCondition>>) => {\n    setItems(newItems);\n\n    // The onChange event should only be triggered in the case there is a complete dimension object.\n    // So when a new key is added that does not yet have a value, it should not trigger an onChange event.\n    const newMultifilters = filterConditionsToMultiFilters(newItems);\n    if (!isEqual(newMultifilters, filters)) {\n      onChange(newMultifilters);\n    }\n  };\n\n  return <EditorList items={items} onChange={onFiltersChange} renderItem={makeRenderFilter(keyPlaceholder)} />;\n};\n\nfunction makeRenderFilter(keyPlaceholder?: string) {\n  function renderFilter(\n    item: MultiFilterCondition,\n    onChange: (item: MultiFilterCondition) => void,\n    onDelete: () => void\n  ) {\n    return (\n      <MultiFilterItem\n        filter={item}\n        onChange={(item) => onChange(item)}\n        onDelete={onDelete}\n        keyPlaceholder={keyPlaceholder}\n      />\n    );\n  }\n  return renderFilter;\n}\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { InlineField, Select } from '@grafana/ui';\n\nimport { VariableQueryType } from '../../types';\n\nconst LABEL_WIDTH = 20;\n\ninterface VariableQueryFieldProps<T> {\n  onChange: (value: T) => void;\n  options: SelectableValue[];\n  value: T | null;\n  label: string;\n  inputId?: string;\n  allowCustomValue?: boolean;\n  isLoading?: boolean;\n}\n\nexport const VariableQueryField = <T extends string | VariableQueryType>({\n  label,\n  onChange,\n  value,\n  options,\n  allowCustomValue = false,\n  isLoading = false,\n  inputId = label,\n}: VariableQueryFieldProps<T>) => {\n  return (\n    <InlineField label={label} labelWidth={LABEL_WIDTH} htmlFor={inputId}>\n      <Select\n        aria-label={label}\n        width={25}\n        allowCustomValue={allowCustomValue}\n        value={value}\n        onChange={({ value }) => onChange(value!)}\n        options={options}\n        isLoading={isLoading}\n        inputId={inputId}\n      />\n    </InlineField>\n  );\n};\n","import React, { FC, useState } from 'react';\n\nimport { InlineField, Input, PopoverContent } from '@grafana/ui';\n\nconst LABEL_WIDTH = 20;\n\ninterface VariableTextFieldProps {\n  onBlur: (value: string) => void;\n  value: string;\n  label: string;\n  placeholder?: string;\n  tooltip?: PopoverContent;\n  interactive?: boolean;\n}\n\nexport const VariableTextField: FC<VariableTextFieldProps> = ({\n  interactive,\n  label,\n  onBlur,\n  placeholder,\n  value,\n  tooltip,\n}) => {\n  const [localValue, setLocalValue] = useState(value);\n  return (\n    <InlineField interactive={interactive} label={label} labelWidth={LABEL_WIDTH} tooltip={tooltip} grow>\n      <Input\n        aria-label={label}\n        placeholder={placeholder}\n        value={localValue}\n        onChange={(e) => setLocalValue(e.currentTarget.value)}\n        onBlur={() => onBlur(localValue)}\n      />\n    </InlineField>\n  );\n};\n","import React from 'react';\n\nimport { QueryEditorProps, SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { InlineField } from '@grafana/ui';\n\nimport { Dimensions } from '..';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { useDimensionKeys, useMetrics, useNamespaces, useRegions } from '../../hooks';\nimport { migrateVariableQuery } from '../../migrations/variableQueryMigrations';\nimport { CloudWatchJsonData, CloudWatchQuery, VariableQuery, VariableQueryType } from '../../types';\n\nimport { MultiFilter } from './MultiFilter';\nimport { VariableQueryField } from './VariableQueryField';\nimport { VariableTextField } from './VariableTextField';\n\nexport type Props = QueryEditorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData, VariableQuery>;\n\nconst queryTypes: Array<{ value: string; label: string }> = [\n  { value: VariableQueryType.Regions, label: 'Regions' },\n  { value: VariableQueryType.Namespaces, label: 'Namespaces' },\n  { value: VariableQueryType.Metrics, label: 'Metrics' },\n  { value: VariableQueryType.DimensionKeys, label: 'Dimension Keys' },\n  { value: VariableQueryType.DimensionValues, label: 'Dimension Values' },\n  { value: VariableQueryType.EBSVolumeIDs, label: 'EBS Volume IDs' },\n  { value: VariableQueryType.EC2InstanceAttributes, label: 'EC2 Instance Attributes' },\n  { value: VariableQueryType.ResourceArns, label: 'Resource ARNs' },\n  { value: VariableQueryType.Statistics, label: 'Statistics' },\n  { value: VariableQueryType.LogGroups, label: 'Log Groups' },\n  ...(config.featureToggles.cloudWatchCrossAccountQuerying\n    ? [{ value: VariableQueryType.Accounts, label: 'Accounts' }]\n    : []),\n];\n\nexport const VariableQueryEditor = ({ query, datasource, onChange }: Props) => {\n  const parsedQuery = migrateVariableQuery(query);\n\n  const { region, namespace, metricName, dimensionKey, dimensionFilters } = parsedQuery;\n  const [regions, regionIsLoading] = useRegions(datasource);\n  const namespaces = useNamespaces(datasource);\n  const metrics = useMetrics(datasource, { region, namespace });\n  const dimensionKeys = useDimensionKeys(datasource, { region, namespace, metricName });\n  const keysForDimensionFilter = useDimensionKeys(datasource, { region, namespace, metricName, dimensionFilters });\n\n  const onRegionChange = async (region: string) => {\n    const validatedQuery = await sanitizeQuery({\n      ...parsedQuery,\n      region,\n    });\n    onQueryChange(validatedQuery);\n  };\n\n  const onNamespaceChange = async (namespace: string) => {\n    const validatedQuery = await sanitizeQuery({\n      ...parsedQuery,\n      namespace,\n    });\n    onQueryChange(validatedQuery);\n  };\n\n  const onQueryChange = (newQuery: VariableQuery) => {\n    onChange({\n      ...newQuery,\n      refId: 'CloudWatchVariableQueryEditor-VariableQuery',\n    });\n  };\n\n  // Reset dimensionValue parameters if namespace or region change\n  const sanitizeQuery = async (query: VariableQuery) => {\n    let { metricName, dimensionKey, dimensionFilters, namespace, region } = query;\n    if (metricName) {\n      await datasource.api.getMetrics({ namespace, region }).then((result: Array<SelectableValue<string>>) => {\n        if (!result.find((metric) => metric.value === metricName)) {\n          metricName = '';\n        }\n      });\n    }\n    if (dimensionKey) {\n      await datasource.api.getDimensionKeys({ namespace, region }).then((result: Array<SelectableValue<string>>) => {\n        if (!result.find((key) => key.value === dimensionKey)) {\n          dimensionKey = '';\n          dimensionFilters = {};\n        }\n      });\n    }\n    return { ...query, metricName, dimensionKey, dimensionFilters };\n  };\n\n  const hasRegionField = [\n    VariableQueryType.Metrics,\n    VariableQueryType.DimensionKeys,\n    VariableQueryType.DimensionValues,\n    VariableQueryType.EBSVolumeIDs,\n    VariableQueryType.EC2InstanceAttributes,\n    VariableQueryType.ResourceArns,\n    VariableQueryType.LogGroups,\n    VariableQueryType.Accounts,\n  ].includes(parsedQuery.queryType);\n  const hasNamespaceField = [\n    VariableQueryType.Metrics,\n    VariableQueryType.DimensionKeys,\n    VariableQueryType.DimensionValues,\n  ].includes(parsedQuery.queryType);\n  return (\n    <>\n      <VariableQueryField\n        value={parsedQuery.queryType}\n        options={queryTypes}\n        onChange={(value: VariableQueryType) => onQueryChange({ ...parsedQuery, queryType: value })}\n        label=\"Query type\"\n        inputId={`variable-query-type-${query.refId}`}\n      />\n      {hasRegionField && (\n        <VariableQueryField\n          value={region}\n          options={regions}\n          onChange={(value: string) => onRegionChange(value)}\n          label=\"Region\"\n          isLoading={regionIsLoading}\n          inputId={`variable-query-region-${query.refId}`}\n        />\n      )}\n      {hasNamespaceField && (\n        <VariableQueryField\n          value={namespace}\n          options={namespaces}\n          onChange={(value: string) => onNamespaceChange(value)}\n          label=\"Namespace\"\n          inputId={`variable-query-namespace-${query.refId}`}\n          allowCustomValue\n        />\n      )}\n      {parsedQuery.queryType === VariableQueryType.DimensionValues && (\n        <>\n          <VariableQueryField\n            value={metricName || null}\n            options={metrics}\n            onChange={(value: string) => onQueryChange({ ...parsedQuery, metricName: value })}\n            label=\"Metric\"\n            inputId={`variable-query-metric-${query.refId}`}\n            allowCustomValue\n          />\n          <VariableQueryField\n            value={dimensionKey || null}\n            options={dimensionKeys}\n            onChange={(value: string) => onQueryChange({ ...parsedQuery, dimensionKey: value })}\n            label=\"Dimension key\"\n            inputId={`variable-query-dimension-key-${query.refId}`}\n            allowCustomValue\n          />\n          <InlineField label=\"Dimensions\" labelWidth={20} tooltip=\"Dimensions to filter the returned values on\">\n            <Dimensions\n              metricStat={{ ...parsedQuery, dimensions: parsedQuery.dimensionFilters }}\n              onChange={(dimensions) => {\n                onChange({ ...parsedQuery, dimensionFilters: dimensions });\n              }}\n              dimensionKeys={keysForDimensionFilter}\n              disableExpressions={true}\n              datasource={datasource}\n            />\n          </InlineField>\n        </>\n      )}\n      {parsedQuery.queryType === VariableQueryType.EBSVolumeIDs && (\n        <VariableTextField\n          value={query.instanceID}\n          placeholder=\"i-XXXXXXXXXXXXXXXXX\"\n          onBlur={(value: string) => onQueryChange({ ...parsedQuery, instanceID: value })}\n          label=\"Instance ID\"\n        />\n      )}\n      {parsedQuery.queryType === VariableQueryType.EC2InstanceAttributes && (\n        <>\n          <VariableTextField\n            value={parsedQuery.attributeName}\n            onBlur={(value: string) => onQueryChange({ ...parsedQuery, attributeName: value })}\n            label=\"Attribute name\"\n            interactive={true}\n            tooltip={\n              <>\n                {'Attribute or tag to query on. Tags should be formatted \"Tags.<name>\". '}\n                <a\n                  href=\"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/template-queries-cloudwatch/#selecting-attributes\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  See the documentation for more details\n                </a>\n              </>\n            }\n          />\n          <InlineField\n            label=\"Filters\"\n            labelWidth={20}\n            tooltip={\n              <>\n                <a\n                  href=\"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/template-queries-cloudwatch/#selecting-attributes\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  Pre-defined ec2:DescribeInstances filters/tags\n                </a>\n                {' and the values to filter on. Tags should be formatted tag:<name>.'}\n              </>\n            }\n          >\n            <MultiFilter\n              filters={parsedQuery.ec2Filters}\n              onChange={(filters) => {\n                onChange({ ...parsedQuery, ec2Filters: filters });\n              }}\n              keyPlaceholder=\"filter/tag\"\n            />\n          </InlineField>\n        </>\n      )}\n      {parsedQuery.queryType === VariableQueryType.ResourceArns && (\n        <>\n          <VariableTextField\n            value={parsedQuery.resourceType}\n            onBlur={(value: string) => onQueryChange({ ...parsedQuery, resourceType: value })}\n            label=\"Resource type\"\n          />\n          <InlineField label=\"Tags\" labelWidth={20} tooltip=\"Tags to filter the returned values on.\">\n            <MultiFilter\n              filters={parsedQuery.tags}\n              onChange={(filters) => {\n                onChange({ ...parsedQuery, tags: filters });\n              }}\n              keyPlaceholder=\"tag\"\n            />\n          </InlineField>\n        </>\n      )}\n      {parsedQuery.queryType === VariableQueryType.LogGroups && (\n        <VariableTextField\n          value={query.logGroupPrefix ?? ''}\n          onBlur={(value: string) => onQueryChange({ ...parsedQuery, logGroupPrefix: value })}\n          label=\"Log group prefix\"\n        />\n      )}\n    </>\n  );\n};\n","import { from, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport {\n  CustomVariableSupport,\n  DataQueryRequest,\n  DataQueryResponse,\n  MetricFindValue,\n  SelectableValue,\n} from '@grafana/data';\n\nimport { CloudWatchAPI } from './api';\nimport { ALL_ACCOUNTS_OPTION } from './components/Account';\nimport { VariableQueryEditor } from './components/VariableQueryEditor/VariableQueryEditor';\nimport { CloudWatchDatasource } from './datasource';\nimport { migrateVariableQuery } from './migrations/variableQueryMigrations';\nimport { standardStatistics } from './standardStatistics';\nimport { VariableQuery, VariableQueryType } from './types';\n\nexport class CloudWatchVariableSupport extends CustomVariableSupport<CloudWatchDatasource, VariableQuery> {\n  constructor(private readonly api: CloudWatchAPI) {\n    super();\n    this.query = this.query.bind(this);\n  }\n\n  editor = VariableQueryEditor;\n\n  query(request: DataQueryRequest<VariableQuery>): Observable<DataQueryResponse> {\n    const queryObj = migrateVariableQuery(request.targets[0]);\n    return from(this.execute(queryObj)).pipe(map((data) => ({ data })));\n  }\n\n  async execute(query: VariableQuery) {\n    try {\n      switch (query.queryType) {\n        case VariableQueryType.Regions:\n          return this.handleRegionsQuery();\n        case VariableQueryType.Namespaces:\n          return this.handleNamespacesQuery();\n        case VariableQueryType.Metrics:\n          return this.handleMetricsQuery(query);\n        case VariableQueryType.DimensionKeys:\n          return this.handleDimensionKeysQuery(query);\n        case VariableQueryType.DimensionValues:\n          return this.handleDimensionValuesQuery(query);\n        case VariableQueryType.EBSVolumeIDs:\n          return this.handleEbsVolumeIdsQuery(query);\n        case VariableQueryType.EC2InstanceAttributes:\n          return this.handleEc2InstanceAttributeQuery(query);\n        case VariableQueryType.ResourceArns:\n          return this.handleResourceARNsQuery(query);\n        case VariableQueryType.Statistics:\n          return this.handleStatisticsQuery();\n        case VariableQueryType.LogGroups:\n          return this.handleLogGroupsQuery(query);\n        case VariableQueryType.Accounts:\n          return this.handleAccountsQuery(query);\n      }\n    } catch (error) {\n      console.error(`Could not run CloudWatchMetricFindQuery ${query}`, error);\n      return [];\n    }\n  }\n  async handleLogGroupsQuery({ region, logGroupPrefix }: VariableQuery) {\n    const interpolatedPrefix = this.api.templateSrv.replace(logGroupPrefix);\n    return this.api\n      .describeAllLogGroups({\n        region,\n        logGroupNamePrefix: interpolatedPrefix,\n      })\n      .then((logGroups) => logGroups.map(selectableValueToMetricFindOption));\n  }\n\n  async handleRegionsQuery() {\n    return this.api.getRegions().then((regions) => regions.map(selectableValueToMetricFindOption));\n  }\n\n  async handleNamespacesQuery() {\n    return this.api.getNamespaces().then((namespaces) => namespaces.map(selectableValueToMetricFindOption));\n  }\n\n  async handleMetricsQuery({ namespace, region }: VariableQuery) {\n    return this.api.getMetrics({ namespace, region }).then((metrics) => metrics.map(selectableValueToMetricFindOption));\n  }\n\n  async handleDimensionKeysQuery({ namespace, region }: VariableQuery) {\n    return this.api.getDimensionKeys({ namespace, region }).then((keys) => keys.map(selectableValueToMetricFindOption));\n  }\n\n  async handleDimensionValuesQuery({ namespace, region, dimensionKey, metricName, dimensionFilters }: VariableQuery) {\n    if (!dimensionKey || !metricName) {\n      return [];\n    }\n    return this.api\n      .getDimensionValues({\n        region,\n        namespace,\n        metricName,\n        dimensionKey,\n        dimensionFilters,\n      })\n      .then((values) => values.map(selectableValueToMetricFindOption));\n  }\n\n  async handleEbsVolumeIdsQuery({ region, instanceID }: VariableQuery) {\n    if (!instanceID) {\n      return [];\n    }\n    return this.api.getEbsVolumeIds(region, instanceID).then((ids) => ids.map(selectableValueToMetricFindOption));\n  }\n\n  async handleEc2InstanceAttributeQuery({ region, attributeName, ec2Filters }: VariableQuery) {\n    if (!attributeName) {\n      return [];\n    }\n    return this.api\n      .getEc2InstanceAttribute(region, attributeName, ec2Filters ?? {})\n      .then((values) => values.map(selectableValueToMetricFindOption));\n  }\n\n  async handleResourceARNsQuery({ region, resourceType, tags }: VariableQuery) {\n    if (!resourceType) {\n      return [];\n    }\n    const keys = await this.api.getResourceARNs(region, resourceType, tags ?? {});\n    return keys.map(selectableValueToMetricFindOption);\n  }\n\n  async handleStatisticsQuery() {\n    return standardStatistics.map((s: string) => ({\n      text: s,\n      value: s,\n      expandable: true,\n    }));\n  }\n\n  allMetricFindValue: MetricFindValue = { text: 'All', value: ALL_ACCOUNTS_OPTION.value, expandable: true };\n  async handleAccountsQuery({ region }: VariableQuery) {\n    return this.api.getAccounts({ region }).then((accounts) => {\n      const metricFindOptions = accounts.map((account) => ({\n        text: account.label,\n        value: account.id,\n        expandable: true,\n      }));\n\n      return metricFindOptions.length ? [this.allMetricFindValue, ...metricFindOptions] : [];\n    });\n  }\n}\n\nfunction selectableValueToMetricFindOption({ label, value }: SelectableValue<string>): MetricFindValue {\n  return { text: label ?? value ?? '', value: value, expandable: true };\n}\n","import { cloneDeep, find, isEmpty } from 'lodash';\nimport { merge, Observable, of } from 'rxjs';\n\nimport {\n  DataFrame,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceWithLogsContextSupport,\n  LoadingState,\n  LogRowModel,\n  ScopedVars,\n} from '@grafana/data';\nimport { DataSourceWithBackend } from '@grafana/runtime';\nimport { getTimeSrv, TimeSrv } from 'app/features/dashboard/services/TimeSrv';\nimport { getTemplateSrv, TemplateSrv } from 'app/features/templating/template_srv';\n\nimport { RowContextOptions } from '../../../features/logs/components/LogRowContextProvider';\n\nimport { CloudWatchAnnotationSupport } from './annotationSupport';\nimport { CloudWatchAPI } from './api';\nimport { SQLCompletionItemProvider } from './cloudwatch-sql/completion/CompletionItemProvider';\nimport { isCloudWatchAnnotationQuery, isCloudWatchLogsQuery, isCloudWatchMetricsQuery } from './guards';\nimport { CloudWatchLanguageProvider } from './language_provider';\nimport { MetricMathCompletionItemProvider } from './metric-math/completion/CompletionItemProvider';\nimport { CloudWatchAnnotationQueryRunner } from './query-runner/CloudWatchAnnotationQueryRunner';\nimport { CloudWatchLogsQueryRunner } from './query-runner/CloudWatchLogsQueryRunner';\nimport { CloudWatchMetricsQueryRunner } from './query-runner/CloudWatchMetricsQueryRunner';\nimport {\n  CloudWatchAnnotationQuery,\n  CloudWatchJsonData,\n  CloudWatchLogsQuery,\n  CloudWatchMetricsQuery,\n  CloudWatchQuery,\n} from './types';\nimport { CloudWatchVariableSupport } from './variables';\n\nexport class CloudWatchDatasource\n  extends DataSourceWithBackend<CloudWatchQuery, CloudWatchJsonData>\n  implements DataSourceWithLogsContextSupport<CloudWatchLogsQuery>\n{\n  defaultRegion?: string;\n  languageProvider: CloudWatchLanguageProvider;\n  sqlCompletionItemProvider: SQLCompletionItemProvider;\n  metricMathCompletionItemProvider: MetricMathCompletionItemProvider;\n\n  type = 'cloudwatch';\n\n  private metricsQueryRunner: CloudWatchMetricsQueryRunner;\n  private annotationQueryRunner: CloudWatchAnnotationQueryRunner;\n  logsQueryRunner: CloudWatchLogsQueryRunner;\n  api: CloudWatchAPI;\n\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>,\n    readonly templateSrv: TemplateSrv = getTemplateSrv(),\n    timeSrv: TimeSrv = getTimeSrv()\n  ) {\n    super(instanceSettings);\n    this.defaultRegion = instanceSettings.jsonData.defaultRegion;\n    this.api = new CloudWatchAPI(instanceSettings, templateSrv);\n    this.languageProvider = new CloudWatchLanguageProvider(this);\n    this.sqlCompletionItemProvider = new SQLCompletionItemProvider(this.api, this.templateSrv);\n    this.metricMathCompletionItemProvider = new MetricMathCompletionItemProvider(this.api, this.templateSrv);\n    this.metricsQueryRunner = new CloudWatchMetricsQueryRunner(instanceSettings, templateSrv);\n    this.logsQueryRunner = new CloudWatchLogsQueryRunner(instanceSettings, templateSrv, timeSrv);\n    this.annotationQueryRunner = new CloudWatchAnnotationQueryRunner(instanceSettings, templateSrv);\n    this.variables = new CloudWatchVariableSupport(this.api);\n    this.annotations = CloudWatchAnnotationSupport;\n  }\n\n  filterQuery(query: CloudWatchQuery) {\n    return query.hide !== true || (isCloudWatchMetricsQuery(query) && query.id !== '');\n  }\n\n  query(options: DataQueryRequest<CloudWatchQuery>): Observable<DataQueryResponse> {\n    options = cloneDeep(options);\n\n    let queries = options.targets.filter(this.filterQuery);\n\n    const logQueries: CloudWatchLogsQuery[] = [];\n    const metricsQueries: CloudWatchMetricsQuery[] = [];\n    const annotationQueries: CloudWatchAnnotationQuery[] = [];\n\n    queries.forEach((query) => {\n      if (isCloudWatchAnnotationQuery(query)) {\n        annotationQueries.push(query);\n      } else if (isCloudWatchLogsQuery(query)) {\n        logQueries.push(query);\n      } else {\n        metricsQueries.push(query);\n      }\n    });\n\n    const dataQueryResponses: Array<Observable<DataQueryResponse>> = [];\n    if (logQueries.length) {\n      dataQueryResponses.push(this.logsQueryRunner.handleLogQueries(logQueries, options));\n    }\n\n    if (metricsQueries.length) {\n      dataQueryResponses.push(this.metricsQueryRunner.handleMetricQueries(metricsQueries, options));\n    }\n\n    if (annotationQueries.length) {\n      dataQueryResponses.push(this.annotationQueryRunner.handleAnnotationQuery(annotationQueries, options));\n    }\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(dataQueryResponses)) {\n      return of({\n        data: [],\n        state: LoadingState.Done,\n      });\n    }\n\n    return merge(...dataQueryResponses);\n  }\n\n  interpolateVariablesInQueries(queries: CloudWatchQuery[], scopedVars: ScopedVars): CloudWatchQuery[] {\n    if (!queries.length) {\n      return queries;\n    }\n\n    return queries.map((query) => ({\n      ...query,\n      region: this.metricsQueryRunner.replaceVariableAndDisplayWarningIfMulti(\n        this.getActualRegion(query.region),\n        scopedVars\n      ),\n      ...(isCloudWatchMetricsQuery(query) &&\n        this.metricsQueryRunner.interpolateMetricsQueryVariables(query, scopedVars)),\n    }));\n  }\n\n  getLogRowContext = async (\n    row: LogRowModel,\n    context?: RowContextOptions,\n    query?: CloudWatchLogsQuery\n  ): Promise<{ data: DataFrame[] }> => {\n    return this.logsQueryRunner.getLogRowContext(row, context, query);\n  };\n\n  targetContainsTemplate(target: any) {\n    return (\n      this.templateSrv.containsTemplate(target.region) ||\n      this.templateSrv.containsTemplate(target.namespace) ||\n      this.templateSrv.containsTemplate(target.metricName) ||\n      this.templateSrv.containsTemplate(target.expression!) ||\n      target.logGroupNames?.some((logGroup: string) => this.templateSrv.containsTemplate(logGroup)) ||\n      find(target.dimensions, (v, k) => this.templateSrv.containsTemplate(k) || this.templateSrv.containsTemplate(v))\n    );\n  }\n\n  showContextToggle() {\n    return true;\n  }\n\n  getQueryDisplayText(query: CloudWatchQuery) {\n    if (query.queryMode === 'Logs') {\n      return query.expression ?? '';\n    } else {\n      return JSON.stringify(query);\n    }\n  }\n\n  // public\n  getVariables() {\n    return this.api.getVariables();\n  }\n\n  getActualRegion(region?: string) {\n    if (region === 'default' || region === undefined || region === '') {\n      return this.defaultRegion ?? '';\n    }\n    return region;\n  }\n}\n","import { DashboardLoadedEvent } from '@grafana/data';\nimport { config, reportInteraction } from '@grafana/runtime';\n\nimport { isCloudWatchLogsQuery, isCloudWatchMetricsQuery } from './guards';\nimport { migrateMetricQuery } from './migrations/metricQueryMigrations';\nimport pluginJson from './plugin.json';\nimport {\n  CloudWatchLogsQuery,\n  CloudWatchMetricsQuery,\n  CloudWatchQuery,\n  MetricEditorMode,\n  MetricQueryType,\n} from './types';\nimport { filterMetricsQuery } from './utils/utils';\n\ntype CloudWatchOnDashboardLoadedTrackingEvent = {\n  grafana_version?: string;\n  dashboard_id?: string;\n  org_id?: number;\n\n  /* The number of CloudWatch logs queries present in the dashboard*/\n  logs_queries_count: number;\n\n  /* The number of CloudWatch metrics queries present in the dashboard*/\n  metrics_queries_count: number;\n\n  /* The number of queries using the \"Search\" mode. \n  Should be measured in relation to metrics_queries_count, e.g metrics_search_count + metrics_query_count = metrics_queries_count */\n  metrics_search_count: number;\n\n  /* The number of search queries that are using the builder mode. \n  Should be measured in relation to metrics_search_count, e.g metrics_search_builder_count + metrics_search_code_count = metrics_search_count */\n  metrics_search_builder_count: number;\n\n  /* The number of search queries that are using the code mode. \n  Should be measured in relation to metrics_search_count, e.g metrics_search_builder_count + metrics_search_code_count = metrics_search_count */\n  metrics_search_code_count: number;\n\n  /* The number of search queries that have enabled the `match exact` toggle in the builder mode. \n  Should be measured in relation to metrics_search_builder_count. \n  E.g 'Out of 5 metric seach queries (metrics_search_builder_count), 2 had match exact toggle (metrics_search_match_exact_count) enabled */\n  metrics_search_match_exact_count: number;\n\n  /* The number of queries using the \"Query\" mode (AKA Metric Insights). \n  Should be measured in relation to metrics_queries_count, e.g metrics_search_count + metrics_query_count = metrics_queries_count */\n  metrics_query_count: number;\n\n  /* The number of \"Insights\" queries that are using the builder mode. \n  Should be measured in relation to metrics_query_count, e.g metrics_query_builder_count + metrics_query_code_count = metrics_query_count */\n  metrics_query_builder_count: number;\n\n  /* The number of \"Insights\" queries that are using the code mode. \n  Should be measured in relation to metrics_query_count, e.g metrics_query_builder_count + metrics_query_code_count = metrics_query_count */\n  metrics_query_code_count: number;\n\n  /* The number of CloudWatch metrics queries that have specified an account in its cross account metric stat query */\n  metrics_queries_with_account_count: number;\n};\n\nexport const onDashboardLoadedHandler = ({\n  payload: { dashboardId, orgId, grafanaVersion, queries },\n}: DashboardLoadedEvent<CloudWatchQuery>) => {\n  try {\n    const cloudWatchQueries = queries[pluginJson.id];\n\n    if (!cloudWatchQueries?.length) {\n      return;\n    }\n\n    let logsQueries: CloudWatchLogsQuery[] = [];\n    let metricsQueries: CloudWatchMetricsQuery[] = [];\n\n    for (const query of cloudWatchQueries) {\n      if (query.hide) {\n        continue;\n      }\n\n      if (isCloudWatchLogsQuery(query)) {\n        query.logGroupNames?.length && logsQueries.push(query);\n      } else if (isCloudWatchMetricsQuery(query)) {\n        const migratedQuery = migrateMetricQuery(query);\n        filterMetricsQuery(migratedQuery) && metricsQueries.push(query);\n      }\n    }\n\n    const e: CloudWatchOnDashboardLoadedTrackingEvent = {\n      grafana_version: grafanaVersion,\n      dashboard_id: dashboardId,\n      org_id: orgId,\n      logs_queries_count: logsQueries?.length,\n      metrics_queries_count: metricsQueries?.length,\n      metrics_search_count: 0,\n      metrics_search_builder_count: 0,\n      metrics_search_code_count: 0,\n      metrics_search_match_exact_count: 0,\n      metrics_query_count: 0,\n      metrics_query_builder_count: 0,\n      metrics_query_code_count: 0,\n      metrics_queries_with_account_count: 0,\n    };\n\n    for (const q of metricsQueries) {\n      e.metrics_search_count += +Boolean(q.metricQueryType === MetricQueryType.Search);\n      e.metrics_search_builder_count += +isMetricSearchBuilder(q);\n      e.metrics_search_code_count += +Boolean(\n        q.metricQueryType === MetricQueryType.Search && q.metricEditorMode === MetricEditorMode.Code\n      );\n      e.metrics_search_match_exact_count += +Boolean(isMetricSearchBuilder(q) && q.matchExact);\n      e.metrics_query_count += +Boolean(q.metricQueryType === MetricQueryType.Query);\n      e.metrics_query_builder_count += +Boolean(\n        q.metricQueryType === MetricQueryType.Query && q.metricEditorMode === MetricEditorMode.Builder\n      );\n      e.metrics_query_code_count += +Boolean(\n        q.metricQueryType === MetricQueryType.Query && q.metricEditorMode === MetricEditorMode.Code\n      );\n      e.metrics_queries_with_account_count += +Boolean(\n        config.featureToggles.cloudWatchCrossAccountQuerying && isMetricSearchBuilder(q) && q.accountId\n      );\n    }\n\n    reportInteraction('grafana_ds_cloudwatch_dashboard_loaded', e);\n  } catch (error) {\n    console.error('error in cloudwatch tracking handler', error);\n  }\n};\n\nconst isMetricSearchBuilder = (q: CloudWatchMetricsQuery) =>\n  Boolean(q.metricQueryType === MetricQueryType.Search && q.metricEditorMode === MetricEditorMode.Builder);\n","import { DashboardLoadedEvent, DataSourcePlugin } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\n\nimport { ConfigEditor } from './components/ConfigEditor';\nimport LogsCheatSheet from './components/LogsCheatSheet';\nimport { MetaInspector } from './components/MetaInspector';\nimport { PanelQueryEditor } from './components/PanelQueryEditor';\nimport { CloudWatchDatasource } from './datasource';\nimport { onDashboardLoadedHandler } from './tracking';\nimport { CloudWatchJsonData, CloudWatchQuery } from './types';\n\nexport const plugin = new DataSourcePlugin<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>(\n  CloudWatchDatasource\n)\n  .setQueryEditorHelp(LogsCheatSheet)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(PanelQueryEditor)\n  .setMetadataInspector(MetaInspector);\n\n// Subscribe to on dashboard loaded event so that we can track plugin adoption\ngetAppEvents().subscribe<DashboardLoadedEvent<CloudWatchQuery>>(DashboardLoadedEvent, onDashboardLoadedHandler);\n","import React, { FC, useEffect, useState } from 'react';\nimport { useDebounce } from 'react-use';\n\nimport { ConnectionConfig } from '@grafana/aws-sdk';\nimport {\n  rangeUtil,\n  DataSourcePluginOptionsEditorProps,\n  onUpdateDatasourceJsonDataOption,\n  updateDatasourcePluginJsonDataOption,\n  updateDatasourcePluginOption,\n} from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Input, InlineField } from '@grafana/ui';\nimport { notifyApp } from 'app/core/actions';\nimport { createWarningNotification } from 'app/core/copy/appNotification';\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\nimport { store } from 'app/store/store';\n\nimport { SelectableResourceValue } from '../api';\nimport { CloudWatchDatasource } from '../datasource';\nimport { CloudWatchJsonData, CloudWatchSecureJsonData } from '../types';\n\nimport { LogGroupSelector } from './LogGroupSelector';\nimport { XrayLinkConfig } from './XrayLinkConfig';\n\nexport type Props = DataSourcePluginOptionsEditorProps<CloudWatchJsonData, CloudWatchSecureJsonData>;\n\nexport const ConfigEditor: FC<Props> = (props: Props) => {\n  const { options } = props;\n  const { defaultLogGroups, logsTimeout, defaultRegion } = options.jsonData;\n  const [saved, setSaved] = useState(!!options.version && options.version > 1);\n\n  const datasource = useDatasource(options.name, saved);\n  useAuthenticationWarning(options.jsonData);\n  const logsTimeoutError = useTimoutValidation(logsTimeout);\n  useEffect(() => {\n    setSaved(false);\n  }, [\n    props.options.jsonData.assumeRoleArn,\n    props.options.jsonData.authType,\n    props.options.jsonData.defaultRegion,\n    props.options.jsonData.endpoint,\n    props.options.jsonData.externalId,\n    props.options.jsonData.profile,\n    props.options.secureJsonData?.accessKey,\n    props.options.secureJsonData?.secretKey,\n  ]);\n\n  const saveOptions = async (): Promise<void> => {\n    if (saved) {\n      return;\n    }\n    await getBackendSrv()\n      .put(`/api/datasources/${options.id}`, options)\n      .then((result: { datasource: any }) => {\n        updateDatasourcePluginOption(props, 'version', result.datasource.version);\n      });\n    setSaved(true);\n  };\n\n  return (\n    <>\n      <ConnectionConfig\n        {...props}\n        loadRegions={\n          datasource &&\n          (async () => {\n            return datasource.api\n              .getRegions()\n              .then((regions) =>\n                regions.reduce(\n                  (acc: string[], curr: SelectableResourceValue) => (curr.value ? [...acc, curr.value] : acc),\n                  []\n                )\n              );\n          })\n        }\n      >\n        <InlineField label=\"Namespaces of Custom Metrics\" labelWidth={28} tooltip=\"Namespaces of Custom Metrics.\">\n          <Input\n            width={60}\n            placeholder=\"Namespace1,Namespace2\"\n            value={options.jsonData.customMetricsNamespaces || ''}\n            onChange={onUpdateDatasourceJsonDataOption(props, 'customMetricsNamespaces')}\n          />\n        </InlineField>\n      </ConnectionConfig>\n\n      <h3 className=\"page-heading\">CloudWatch Logs</h3>\n      <div className=\"gf-form-group\">\n        <InlineField\n          label=\"Timeout\"\n          labelWidth={28}\n          tooltip='Custom timeout for CloudWatch Logs insights queries which have max concurrency limits. Default is 15 minutes. Must be a valid duration string, such as \"15m\" \"30s\" \"2000ms\" etc.'\n          invalid={Boolean(logsTimeoutError)}\n        >\n          <Input\n            width={60}\n            placeholder=\"15m\"\n            value={options.jsonData.logsTimeout || ''}\n            onChange={onUpdateDatasourceJsonDataOption(props, 'logsTimeout')}\n            title={'The timeout must be a valid duration string, such as \"15m\" \"30s\" \"2000ms\" etc.'}\n          />\n        </InlineField>\n        <InlineField\n          label=\"Default Log Groups\"\n          labelWidth={28}\n          tooltip=\"Optionally, specify default log groups for CloudWatch Logs queries.\"\n        >\n          <LogGroupSelector\n            region={defaultRegion ?? ''}\n            selectedLogGroups={defaultLogGroups ?? []}\n            datasource={datasource}\n            onChange={(logGroups) => {\n              updateDatasourcePluginJsonDataOption(props, 'defaultLogGroups', logGroups);\n            }}\n            onOpenMenu={saveOptions}\n            width={60}\n            saved={saved}\n          />\n        </InlineField>\n      </div>\n\n      <XrayLinkConfig\n        onChange={(uid) => updateDatasourcePluginJsonDataOption(props, 'tracingDatasourceUid', uid)}\n        datasourceUid={options.jsonData.tracingDatasourceUid}\n      />\n    </>\n  );\n};\n\nfunction useAuthenticationWarning(jsonData: CloudWatchJsonData) {\n  const addWarning = (message: string) => {\n    store.dispatch(notifyApp(createWarningNotification('CloudWatch Authentication', message)));\n  };\n\n  useEffect(() => {\n    if (jsonData.authType === 'arn') {\n      addWarning('Since grafana 7.3 authentication type \"arn\" is deprecated, falling back to default SDK provider');\n    } else if (jsonData.authType === 'credentials' && !jsonData.profile && !jsonData.database) {\n      addWarning(\n        'As of grafana 7.3 authentication type \"credentials\" should be used only for shared file credentials. \\\n             If you don\\'t have a credentials file, switch to the default SDK provider for extracting credentials \\\n             from environment variables or IAM roles'\n      );\n    }\n  }, [jsonData.authType, jsonData.database, jsonData.profile]);\n}\n\nfunction useDatasource(datasourceName: string, saved: boolean) {\n  const [datasource, setDatasource] = useState<CloudWatchDatasource>();\n\n  useEffect(() => {\n    // reload the datasource when it's saved\n    if (!saved) {\n      return;\n    }\n    getDatasourceSrv()\n      .loadDatasource(datasourceName)\n      .then((datasource) => {\n        // It's really difficult to type .loadDatasource() because it's inherently untyped as it involves two JSON.parse()'s\n        // So a \"as\" type assertion here is a necessary evil.\n        setDatasource(datasource as CloudWatchDatasource);\n      });\n  }, [datasourceName, saved]);\n\n  return datasource;\n}\n\nfunction useTimoutValidation(value: string | undefined) {\n  const [err, setErr] = useState<undefined | string>(undefined);\n  useDebounce(\n    () => {\n      if (value) {\n        try {\n          rangeUtil.describeInterval(value);\n          setErr(undefined);\n        } catch (e) {\n          if (e instanceof Error) {\n            setErr(e.toString());\n          }\n        }\n      } else {\n        setErr(undefined);\n      }\n    },\n    350,\n    [value]\n  );\n  return err;\n}\n","import { groupBy } from 'lodash';\nimport React, { useMemo } from 'react';\n\nimport { MetadataInspectorProps } from '@grafana/data';\n\nimport { CloudWatchDatasource } from '../datasource';\nimport { CloudWatchQuery, CloudWatchJsonData } from '../types';\n\nexport type Props = MetadataInspectorProps<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>;\n\nexport function MetaInspector({ data = [] }: Props) {\n  const rows = useMemo(() => groupBy(data, 'refId'), [data]);\n\n  return (\n    <>\n      <table className=\"filter-table form-inline\">\n        <thead>\n          <tr>\n            <th>RefId</th>\n            <th>Metric Data Query ID</th>\n            <th>Metric Data Query Expression</th>\n            <th>Period</th>\n            <th />\n          </tr>\n        </thead>\n        {Object.entries(rows).map(([refId, frames], idx) => {\n          if (!frames.length) {\n            return null;\n          }\n\n          const frame = frames[0];\n          const custom = frame.meta?.custom;\n          if (!custom) {\n            return null;\n          }\n\n          return (\n            <tbody key={idx}>\n              <tr>\n                <td>{refId}</td>\n                <td>{custom.id}</td>\n                <td>{frame.meta?.executedQueryString}</td>\n                <td>{custom.period}</td>\n              </tr>\n            </tbody>\n          );\n        })}\n      </table>\n    </>\n  );\n}\n","import { useEffect, useRef } from 'react';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useCustomCompareEffect = function (effect, deps, depsEqual) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useCustomCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useCustomCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n        if (typeof depsEqual !== 'function') {\n            console.warn('`useCustomCompareEffect` should be used with depsEqual callback for comparing deps list');\n        }\n    }\n    var ref = useRef(undefined);\n    if (!ref.current || !depsEqual(deps, ref.current)) {\n        ref.current = deps;\n    }\n    useEffect(effect, ref.current);\n};\nexport default useCustomCompareEffect;\n","import isDeepEqualReact from 'fast-deep-equal/react';\nexport default isDeepEqualReact;\n","import useCustomCompareEffect from './useCustomCompareEffect';\nimport isDeepEqual from './misc/isDeepEqual';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useDeepCompareEffect = function (effect, deps) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n    }\n    useCustomCompareEffect(effect, deps, isDeepEqual);\n};\nexport default useDeepCompareEffect;\n","Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t=require(\"react\"),a=(e=t)&&\"object\"==typeof e&&\"default\"in e?e.default:e,n=require(\"@grafana/ui\"),l=require(\"@grafana/data\"),o=require(\"lodash\"),s=function(){return(s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function i(e,t,a,n){return new(a||(a=Promise))((function(l,o){function s(e){try{r(n.next(e))}catch(e){o(e)}}function i(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}r((n=n.apply(e,t||[])).next())}))}function r(e,t){var a,n,l,o,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(a=1,n&&(l=2&o[0]?n.return:o[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,o[1])).done)return l;switch(n=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(l=s.trys,(l=l.length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){s.label=o[1];break}if(6===o[0]&&s.label<l[1]){s.label=l[1],l=o;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(o);break}l[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{a=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function u(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,l,o=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){l={error:e}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(l)throw l.error}}return s}var c,d=[\"af-south-1\",\"ap-east-1\",\"ap-northeast-1\",\"ap-northeast-2\",\"ap-northeast-3\",\"ap-south-1\",\"ap-southeast-1\",\"ap-southeast-2\",\"ca-central-1\",\"cn-north-1\",\"cn-northwest-1\",\"eu-central-1\",\"eu-north-1\",\"eu-west-1\",\"eu-west-2\",\"eu-west-3\",\"me-south-1\",\"sa-east-1\",\"us-east-1\",\"us-east-2\",\"us-gov-east-1\",\"us-gov-west-1\",\"us-iso-east-1\",\"us-isob-east-1\",\"us-west-1\",\"us-west-2\"];(c=exports.AwsAuthType||(exports.AwsAuthType={})).Keys=\"keys\",c.Credentials=\"credentials\",c.Default=\"default\",c.EC2IAMRole=\"ec2_iam_role\",c.ARN=\"arn\";var p,h=[{label:\"Workspace IAM Role\",value:exports.AwsAuthType.EC2IAMRole},{label:\"AWS SDK Default\",value:exports.AwsAuthType.Default},{label:\"Access & secret key\",value:exports.AwsAuthType.Keys},{label:\"Credentials file\",value:exports.AwsAuthType.Credentials}],f=function(e){return{value:e,label:e}},v=function(e){var o,i,r,c,p,v,m,g,y,b=u(t.useState((e.standardRegions||d).map(f)),2),D=b[0],w=b[1],E=e.loadRegions,A=e.onOptionsChange,S=e.skipHeader,C=void 0!==S&&S,x=e.skipEndpoint,V=void 0!==x&&x,I=e.options,F=I.jsonData.profile;void 0===F&&(F=I.database);var O=window.grafanaBootData.settings,R=null!==(o=O.awsAllowedAuthProviders)&&void 0!==o?o:[exports.AwsAuthType.Default,exports.AwsAuthType.Keys,exports.AwsAuthType.Credentials],j=null===(i=O.awsAssumeRoleEnabled)||void 0===i||i,K=h.find((function(e){return e.value===I.jsonData.authType}));return t.useEffect((function(){!K&&R.length&&A(s(s({},I),{jsonData:s(s({},I.jsonData),{authType:R[0]})}))}),[K,I,A]),t.useEffect((function(){E&&E().then((function(e){return w(e.map(f))}))}),[E]),a.createElement(n.FieldSet,{label:C?\"\":\"Connection Details\",\"data-testid\":\"connection-config\"},a.createElement(n.InlineField,{label:\"Authentication Provider\",labelWidth:28,tooltip:\"Specify which AWS credentials chain to use.\"},a.createElement(n.Select,{\"aria-label\":\"Authentication Provider\",className:\"width-30\",value:K,options:h.filter((function(e){return R.includes(e.value)})),defaultValue:I.jsonData.authType,onChange:function(t){l.onUpdateDatasourceJsonDataOptionSelect(e,\"authType\")(t)},menuShouldPortal:!0})),\"credentials\"===I.jsonData.authType&&a.createElement(n.InlineField,{label:\"Credentials Profile Name\",labelWidth:28,tooltip:\"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default.\"},a.createElement(n.Input,{\"aria-label\":\"Credentials Profile Name\",className:\"width-30\",placeholder:\"default\",value:F,onChange:l.onUpdateDatasourceJsonDataOption(e,\"profile\")})),\"keys\"===I.jsonData.authType&&a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Access Key ID\",labelWidth:28},(null===(r=e.options.secureJsonFields)||void 0===r?void 0:r.accessKey)?a.createElement(n.ButtonGroup,{className:\"width-30\"},a.createElement(n.Input,{disabled:!0,placeholder:\"Configured\"}),a.createElement(n.ToolbarButton,{icon:\"edit\",tooltip:\"Edit Access Key ID\",type:\"button\",onClick:l.onUpdateDatasourceResetOption(e,\"accessKey\")})):a.createElement(n.Input,{\"aria-label\":\"Access Key ID\",className:\"width-30\",value:null!==(p=null===(c=I.secureJsonData)||void 0===c?void 0:c.accessKey)&&void 0!==p?p:\"\",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,\"accessKey\")})),a.createElement(n.InlineField,{label:\"Secret Access Key\",labelWidth:28},(null===(v=e.options.secureJsonFields)||void 0===v?void 0:v.secretKey)?a.createElement(n.ButtonGroup,{className:\"width-30\"},a.createElement(n.Input,{disabled:!0,placeholder:\"Configured\"}),a.createElement(n.ToolbarButton,{icon:\"edit\",type:\"button\",tooltip:\"Edit Secret Access Key\",onClick:l.onUpdateDatasourceResetOption(e,\"secretKey\")})):a.createElement(n.Input,{\"aria-label\":\"Secret Access Key\",className:\"width-30\",value:null!==(g=null===(m=I.secureJsonData)||void 0===m?void 0:m.secretKey)&&void 0!==g?g:\"\",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,\"secretKey\")}))),j&&a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Assume Role ARN\",labelWidth:28,tooltip:\"Optionally, specify the ARN of a role to assume. Specifying a role here will ensure that the selected authentication provider is used to assume the specified role rather than using the credentials directly. Leave blank if you don't need to assume a role at all\"},a.createElement(n.Input,{\"aria-label\":\"Assume Role ARN\",className:\"width-30\",placeholder:\"arn:aws:iam:*\",value:I.jsonData.assumeRoleArn||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"assumeRoleArn\")})),a.createElement(n.InlineField,{label:\"External ID\",labelWidth:28,tooltip:\"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here.\"},a.createElement(n.Input,{\"aria-label\":\"External ID\",className:\"width-30\",placeholder:\"External ID\",value:I.jsonData.externalId||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"externalId\")}))),!V&&a.createElement(n.InlineField,{label:\"Endpoint\",labelWidth:28,tooltip:\"Optionally, specify a custom endpoint for the service\"},a.createElement(n.Input,{\"aria-label\":\"Endpoint\",className:\"width-30\",placeholder:null!==(y=e.defaultEndpoint)&&void 0!==y?y:\"https://{service}.{region}.amazonaws.com\",value:I.jsonData.endpoint||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"endpoint\")})),a.createElement(n.InlineField,{label:\"Default Region\",labelWidth:28,tooltip:\"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\"},a.createElement(n.Select,{\"aria-label\":\"Default Region\",className:\"width-30\",value:D.find((function(e){return e.value===I.jsonData.defaultRegion})),options:D,defaultValue:I.jsonData.defaultRegion,allowCustomValue:!0,onChange:l.onUpdateDatasourceJsonDataOptionSelect(e,\"defaultRegion\"),formatCreateLabel:function(e){return\"Use region: \"+e},menuShouldPortal:!0})),e.children)};function m(e){var l=this,c=u(t.useState(e.value||e.default||null),2),d=c[0],p=c[1],h=u(t.useState(d?[d]:[]),2),f=h[0],v=h[1],m=u(t.useState(e.dependencies),2),g=m[0],y=m[1],b=u(t.useState(!1),2),D=b[0],w=b[1],E=u(t.useState(!1),2),A=E[0],S=E[1],C=t.useMemo((function(){var t=[{label:\"default (\"+e.default+\")\",value:\"__default\",description:\"Default value set in the data source\"}];return e.value&&\"__default\"!==e.value&&t.push({label:e.value,value:e.value}),t}),[e.default,e.value]),x=u(t.useState(e.default?C:[]),2),V=x[0],I=x[1];t.useEffect((function(){void 0!==e.resources&&v(e.resources)}),[e.resources]),t.useEffect((function(){var t=e.default?C:[];f.length?(f.forEach((function(e){var a=\"string\"==typeof e?e:e.value;t.find((function(e){return e.value===a}))||(\"string\"==typeof e?t.push({label:e,value:e}):t.push(e))})),I(t)):I([])}),[f,C,e.default]),t.useEffect((function(){o.isEqual(e.dependencies,g)||(S(!1),p(null),e.onChange(null),y(e.dependencies))}),[e,g]);return a.createElement(n.InlineField,{label:e.label,labelWidth:e.labelWidth,tooltip:e.tooltip,hidden:e.hidden},a.createElement(\"div\",{\"data-testid\":e[\"data-testid\"],title:e.title},a.createElement(n.Select,s({},e,{\"aria-label\":e.label,options:V,onChange:function(t){e.onChange(t),t.value&&p(t.value)},isLoading:D,className:e.className||\"min-width-6\",onOpenMenu:function(){return e.fetch&&i(l,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:w(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,i(l,void 0,void 0,(function(){var t;return r(this,(function(a){switch(a.label){case 0:return A?[2]:e.saveOptions?[4,e.saveOptions()]:[3,2];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,e.fetch()];case 3:return t=a.sent(),v(t),[3,5];case 4:return S(!0),[7];case 5:return[2]}}))}))];case 2:return t.sent(),[3,4];case 3:return w(!1),[7];case 4:return[2]}}))}))},menuShouldPortal:!0}))))}(p=exports.FillValueOptions||(exports.FillValueOptions={}))[p.Previous=0]=\"Previous\",p[p.Null=1]=\"Null\",p[p.Value=2]=\"Value\";var g=[{label:\"Previous Value\",value:exports.FillValueOptions.Previous},{label:\"NULL\",value:exports.FillValueOptions.Null},{label:\"Value\",value:exports.FillValueOptions.Value}];function y(e){return\"string\"==typeof e?e:e.map((function(e){return function(e){return\"'\"+String(e).replace(/'/g,\"''\")+\"'\"}(e)})).join(\",\")}exports.ConfigSelect=function(e){var t,n,l=e.options.jsonData,o={title:l.defaultRegion?\"\":\"select a default region\",labelWidth:28,className:\"width-30\"},i=[e.options.jsonData.assumeRoleArn,e.options.jsonData.authType,e.options.jsonData.defaultRegion,e.options.jsonData.endpoint,e.options.jsonData.externalId,e.options.jsonData.profile,null===(t=e.options.secureJsonData)||void 0===t?void 0:t.accessKey,null===(n=e.options.secureJsonData)||void 0===n?void 0:n.secretKey].concat(e.dependencies);return a.createElement(m,s({label:e.label,\"data-testid\":e[\"data-testid\"],onChange:e.onChange,fetch:e.fetch,value:e.value,saveOptions:e.saveOptions,dependencies:i,hidden:e.hidden,disabled:e.disabled||!l.defaultRegion,allowCustomValue:e.allowCustomValue,autoFocus:e.autoFocus,backspaceRemovesValue:e.backspaceRemovesValue,className:e.className,invalid:e.invalid,isClearable:e.isClearable,isMulti:e.isMulti,inputId:e.inputId,showAllSelectedWhenOpen:e.showAllSelectedWhenOpen,maxMenuHeight:e.maxMenuHeight,minMenuHeight:e.minMenuHeight,maxVisibleValues:e.maxVisibleValues,menuPlacement:e.menuPlacement,menuPosition:e.menuPosition,noOptionsMessage:e.noOptionsMessage,onBlur:e.onBlur,onCreateOption:e.onCreateOption,onInputChange:e.onInputChange,placeholder:e.placeholder,width:e.width,isOptionDisabled:e.isOptionDisabled},o))},exports.ConnectionConfig=v,exports.FillValueSelect=function(e){var t,l,o;return a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Fill value\",tooltip:\"value to fill missing points\"},a.createElement(n.Select,{\"aria-label\":\"Fill value\",options:g,value:null!==(l=null===(t=e.query.fillMode)||void 0===t?void 0:t.mode)&&void 0!==l?l:exports.FillValueOptions.Previous,onChange:function(t){var a=t.value;e.onChange(s(s({},e.query),{fillMode:s(s({},e.query.fillMode),{mode:a})})),e.onRunQuery()},className:\"width-12\",menuShouldPortal:!0})),(null===(o=e.query.fillMode)||void 0===o?void 0:o.mode)===exports.FillValueOptions.Value&&a.createElement(n.InlineField,{label:\"Value\",labelWidth:11},a.createElement(n.Input,{type:\"number\",\"aria-label\":\"Value\",value:e.query.fillMode.value,onChange:function(t){var a=t.currentTarget;return e.onChange(s(s({},e.query),{fillMode:{mode:exports.FillValueOptions.Value,value:a.valueAsNumber}}))},onBlur:function(){return e.onRunQuery()}})))},exports.FormatSelect=function(e){return a.createElement(n.InlineField,{label:\"Format as\",labelWidth:11},a.createElement(n.Select,{\"aria-label\":\"Format as\",options:e.options,value:e.query.format,onChange:function(t){e.onChange(s(s({},e.query),{format:t.value||0})),e.onRunQuery()},className:\"width-12\",menuShouldPortal:!0}))},exports.InlineInput=function(e){return a.createElement(n.InlineField,{label:e.label,labelWidth:28,tooltip:e.tooltip,hidden:e.hidden,disabled:e.disabled},a.createElement(n.Input,{\"data-testid\":e[\"data-testid\"],className:\"width-30\",value:e.value,onChange:e.onChange,placeholder:e.placeholder,disabled:e.disabled}))},exports.QueryCodeEditor=function(e){var l=e.getSuggestions,i=e.query,r=o.defaults(e.query,{rawSQL:\"\"}).rawSQL,u=t.useRef([]);return t.useEffect((function(){u.current=l(i)}),[l,i]),a.createElement(n.CodeEditor,s({language:e.language,value:r,onBlur:function(t){var a=s(s({},e.query),{rawSQL:t});e.onChange(a),e.onRunQuery()},showMiniMap:!1,showLineNumbers:!0,getSuggestions:function(){return u.current},height:\"240px\"},e.editorProps))},exports.ResourceSelector=m,exports.SIGV4ConnectionConfig=function(e){var t,n,l,o,i=e.onOptionsChange,r=e.options,u={onOptionsChange:function(e){var t,a,n,l,o=s(s({},r),{jsonData:s(s({},r.jsonData),{sigV4AuthType:e.jsonData.authType,sigV4Profile:e.jsonData.profile,sigV4AssumeRoleArn:e.jsonData.assumeRoleArn,sigV4ExternalId:e.jsonData.externalId,sigV4Region:e.jsonData.defaultRegion,sigV4Endpoint:e.jsonData.endpoint}),secureJsonFields:{sigV4AccessKey:null===(t=e.secureJsonFields)||void 0===t?void 0:t.accessKey,sigV4SecretKey:null===(a=e.secureJsonFields)||void 0===a?void 0:a.secretKey},secureJsonData:{sigV4AccessKey:null===(n=e.secureJsonData)||void 0===n?void 0:n.accessKey,sigV4SecretKey:null===(l=e.secureJsonData)||void 0===l?void 0:l.secretKey}});i(o)},options:s(s({},r),{jsonData:s(s({},r.jsonData),{authType:r.jsonData.sigV4AuthType,profile:r.jsonData.sigV4Profile,assumeRoleArn:r.jsonData.sigV4AssumeRoleArn,externalId:r.jsonData.sigV4ExternalId,defaultRegion:r.jsonData.sigV4Region,endpoint:r.jsonData.sigV4Endpoint}),secureJsonFields:{accessKey:null===(t=r.secureJsonFields)||void 0===t?void 0:t.sigV4AccessKey,secretKey:null===(n=r.secureJsonFields)||void 0===n?void 0:n.sigV4SecretKey},secureJsonData:{accessKey:null===(l=r.secureJsonData)||void 0===l?void 0:l.sigV4AccessKey,secretKey:null===(o=r.secureJsonData)||void 0===o?void 0:o.sigV4SecretKey}})};return a.createElement(a.Fragment,null,a.createElement(\"div\",{className:\"gf-form\"},a.createElement(\"h6\",null,\"SigV4 Auth Details\")),a.createElement(v,s({},u,{skipHeader:!0,skipEndpoint:!0})))},exports.appendTemplateVariablesAsSuggestions=function(e,t){var a=e(),l=[];return a.getVariables().forEach((function(e){var t=\"$\"+e.name,o=a.replace(t);o===t&&(o=\"\"),l.push({label:t,kind:n.CodeEditorSuggestionItemKind.Text,detail:\"(Template Variable) \"+o})})),t.concat(l)},exports.applySQLTemplateVariables=function(e,t,a){var n=a();return s(s({},e),{rawSQL:n.replace(e.rawSQL,t,y)})},exports.awsAuthProviderOptions=h,exports.filterSQLQuery=function(e){return!!e.rawSQL},exports.standardRegions=d;\n//# sourceMappingURL=index.production.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/index.production.js');\n} else {\n  module.exports = require('./dist/index.development.js');\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","module.exports = require('./lib/jsurl');","/**\n * Copyright (c) 2011 Bruno Jouhier <bruno.jouhier@sage.com>\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n//\n(function(exports) {\n\t\"use strict\";\n\texports.stringify = function stringify(v) {\n\t\tfunction encode(s) {\n\t\t\treturn !/[^\\w-.]/.test(s) ? s : s.replace(/[^\\w-.]/g, function(ch) {\n\t\t\t\tif (ch === '$') return '!';\n\t\t\t\tch = ch.charCodeAt(0);\n\t\t\t\t// thanks to Douglas Crockford for the negative slice trick\n\t\t\t\treturn ch < 0x100 ? '*' + ('00' + ch.toString(16)).slice(-2) : '**' + ('0000' + ch.toString(16)).slice(-4);\n\t\t\t});\n\t\t}\n\n\t\tvar tmpAry;\n\n\t\tswitch (typeof v) {\n\t\t\tcase 'number':\n\t\t\t\treturn isFinite(v) ? '~' + v : '~null';\n\t\t\tcase 'boolean':\n\t\t\t\treturn '~' + v;\n\t\t\tcase 'string':\n\t\t\t\treturn \"~'\" + encode(v);\n\t\t\tcase 'object':\n\t\t\t\tif (!v) return '~null';\n\n\t\t\t\ttmpAry = [];\n\n\t\t\t\tif (Array.isArray(v)) {\n\t\t\t\t\tfor (var i = 0; i < v.length; i++) {\n\t\t\t\t\t\ttmpAry[i] = stringify(v[i]) || '~null';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn '~(' + (tmpAry.join('') || '~') + ')';\n\t\t\t\t} else {\n\t\t\t\t\tfor (var key in v) {\n\t\t\t\t\t\tif (v.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tvar val = stringify(v[key]);\n\n\t\t\t\t\t\t\t// skip undefined and functions\n\t\t\t\t\t\t\tif (val) {\n\t\t\t\t\t\t\t\ttmpAry.push(encode(key) + val);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn '~(' + tmpAry.join('~') + ')';\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\t// function, undefined\n\t\t\t\treturn;\n\t\t}\n\t};\n\n\tvar reserved = {\n\t\t\"true\": true,\n\t\t\"false\": false,\n\t\t\"null\": null\n\t};\n\n\texports.parse = function(s) {\n\t\tif (!s) return s;\n\t\ts = s.replace(/%(25)*27/g, \"'\");\n\t\tvar i = 0,\n\t\t\tlen = s.length;\n\n\t\tfunction eat(expected) {\n\t\t\tif (s.charAt(i) !== expected) throw new Error(\"bad JSURL syntax: expected \" + expected + \", got \" + (s && s.charAt(i)));\n\t\t\ti++;\n\t\t}\n\n\t\tfunction decode() {\n\t\t\tvar beg = i,\n\t\t\t\tch, r = \"\";\n\t\t\twhile (i < len && (ch = s.charAt(i)) !== '~' && ch !== ')') {\n\t\t\t\tswitch (ch) {\n\t\t\t\t\tcase '*':\n\t\t\t\t\t\tif (beg < i) r += s.substring(beg, i);\n\t\t\t\t\t\tif (s.charAt(i + 1) === '*') r += String.fromCharCode(parseInt(s.substring(i + 2, i + 6), 16)), beg = (i += 6);\n\t\t\t\t\t\telse r += String.fromCharCode(parseInt(s.substring(i + 1, i + 3), 16)), beg = (i += 3);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '!':\n\t\t\t\t\t\tif (beg < i) r += s.substring(beg, i);\n\t\t\t\t\t\tr += '$', beg = ++i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn r + s.substring(beg, i);\n\t\t}\n\n\t\treturn (function parseOne() {\n\t\t\tvar result, ch, beg;\n\t\t\teat('~');\n\t\t\tswitch (ch = s.charAt(i)) {\n\t\t\t\tcase '(':\n\t\t\t\t\ti++;\n\t\t\t\t\tif (s.charAt(i) === '~') {\n\t\t\t\t\t\tresult = [];\n\t\t\t\t\t\tif (s.charAt(i + 1) === ')') i++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tresult.push(parseOne());\n\t\t\t\t\t\t\t} while (s.charAt(i) === '~');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = {};\n\t\t\t\t\t\tif (s.charAt(i) !== ')') {\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tvar key = decode();\n\t\t\t\t\t\t\t\tresult[key] = parseOne();\n\t\t\t\t\t\t\t} while (s.charAt(i) === '~' && ++i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\teat(')');\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"'\":\n\t\t\t\t\ti++;\n\t\t\t\t\tresult = decode();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbeg = i++;\n\t\t\t\t\twhile (i < len && /[^)~]/.test(s.charAt(i)))\n\t\t\t\t\ti++;\n\t\t\t\t\tvar sub = s.substring(beg, i);\n\t\t\t\t\tif (/[\\d\\-]/.test(ch)) {\n\t\t\t\t\t\tresult = parseFloat(sub);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = reserved[sub];\n\t\t\t\t\t\tif (typeof result === \"undefined\") throw new Error(\"bad value keyword: \" + sub);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t})();\n\t}\n\n\texports.tryParse = function(s, def) {\n\t\ttry {\n\t\t\treturn exports.parse(s);\n\t\t} catch (ex) {\n\t\t\treturn def;\n\t\t}\n\t}\n\n})(typeof exports !== 'undefined' ? exports : (window.JSURL = window.JSURL || {}));\n"],"names":["SELECT","FROM","WHERE","GROUP","ORDER","BY","DESC","ASC","LIMIT","WITH","SCHEMA","KEYWORDS","STATISTICS","AND","LOGICAL_OPERATORS","EQUALS","NOT_EQUALS","COMPARISON_OPERATORS","language","defaultToken","tokenPostfix","ignoreCase","brackets","open","close","token","keywords","operators","builtinFunctions","tokenizer","root","include","cases","whitespace","comments","comment","numbers","strings","next","string","string_double","complexIdentifiers","bracketedIdentifier","quotedIdentifier","conf","lineComment","blockComment","autoClosingPairs","surroundingPairs","DYNAMIC_LABEL_PATTERNS","config","id","builtInFunctions","map","replace","join","METRIC_MATH_FNS","METRIC_MATH_STATISTIC_KEYWORD_STRINGS","METRIC_MATH_KEYWORDS","METRIC_MATH_OPERATORS","METRIC_MATH_PERIODS","nonNestableStates","escapeRegExp","variables","assignment","nestedCurly","nestedParens","toOption","value","label","appendTemplateVariables","datasource","values","options","getVariables","filterMetricsQuery","query","region","metricQueryType","metricEditorMode","expression","metricName","namespace","sqlExpression","statistic","MetricQueryType","MetricEditorMode","LogGroupSelector","selectedLogGroups","onChange","onRunQuery","onOpenMenu","refId","width","saved","loadingLogGroups","setLoadingLogGroups","useState","availableLogGroups","setAvailableLogGroups","logGroupOptions","useMemo","unionBy","fetchLogGroupOptions","useCallback","async","logGroupNamePrefix","api","describeLogGroups","err","dispatch","notifyApp","createErrorNotification","JSON","stringify","useEffect","getActualRegion","then","logGroups","finally","getAvailableLogGroupOptions","onLogGroupSearchDebounced","debounce","searchTerm","actionMeta","action","test","matchingLogGroups","inputId","allowCustomValue","v","filter","onBlur","closeMenuOnSelect","isClearable","isOptionDisabled","length","placeholder","maxVisibleValues","noOptionsMessage","isLoading","onInputChange","getStyles","theme","infoText","css","spacing","colors","text","secondary","xRayDsId","XrayLinkConfig","datasourceUid","hasXrayDatasource","Boolean","getDatasourceSrv","getList","pluginId","styles","useStyles2","className","Alert","title","severity","InlineField","htmlFor","labelWidth","tooltip","DataSourcePicker","ds","uid","current","noDefault","raw","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_templateObject","freeze","_classCallCheck","instance","TypeError","TemplateTag","_this","this","_len","arguments","transformers","Array","_key","tag","_len2","expressions","_key2","interimTag","bind","transformEndResult","transformString","reduce","processSubstitutions","isArray","transformer","previousTag","template","_len3","substitutions","_key3","apply","undefined","concat","resultSoFar","remainingPart","substitution","transformSubstitution","shift","str","res","transform","onString","onSubstitution","endResult","onEndResult","defaults","separator","conjunction","serial","opts","arrayLength","indent","match","separatorIndex","lastIndexOf","slice","_toConsumableArray","arr","arr2","from","type","Math","min","el","regexp","RegExp","Error","side","trim","toLowerCase","splitBy","includes","split","isValidValue","x","Number","isNaN","replaceWhat","replaceWith","toString","QUERY_COMMANDS","documentation","NUMERIC_OPERATORS","detail","STRING_FUNCTIONS","DATETIME_FUNCTIONS","IP_FUNCTIONS","BOOLEAN_FUNCTIONS","AGGREGATION_FUNCTIONS_STATS","STATS_FUNCS","FIELD_AND_FILTER_FUNCTIONS","FUNCTIONS","pattern","greedy","backticks","alias","quote","regex","command","function","f","keyword","lookbehind","number","punctuation","CLIQ_EXAMPLES","category","examples","expr","stripIndents","stripIndent","renderHighlightedMarkup","code","keyPrefix","grammar","spans","flattenTokens","Prism","types","aliases","content","exampleCategory","LogsCheatSheet","PureComponent","onClickExample","renderExpression","onClick","queryMode","logGroupNames","renderLogsCheatSheet","cat","cx","item","j","render","isCloudWatchLogsQuery","cloudwatchQuery","isCloudWatchMetricsQuery","hasOwnProperty","isCloudWatchAnnotationQuery","wildcardOption","FilterItem","metricStat","dimensions","accountId","dimensionKeys","disableExpressions","onDelete","dimensionsExcludingCurrentKey","currentKey","entries","acc","excludeCurrentKey","state","loadOptions","useAsyncFn","getDimensionValues","dimensionKey","dimensionFilters","result","some","o","unshift","useTheme2","getOperatorStyles","InputGroup","Select","change","loading","AccessoryButton","icon","variant","stylesFactory","padding","alignSelf","Dimensions","dimensionsToFilterConditions","operator","items","setItems","EditorList","newItems","newDimensions","isEqual","renderItem","makeRenderFilter","JSURL","require","encodeUrl","obj","CloudWatchLink","Component","href","prevProps","panelData","panelDataNew","panelDataOld","request","getExternalLink","setState","range","start","toISOString","end","to","timeType","tz","editorString","isLiveTail","source","rel","Icon","name","byRE","groupsRE","getStatsGroups","b","groups","g","lastIndex","index","exec","push","useRegions","regionsIsLoading","setRegionsIsLoading","regions","setRegions","variableOptionGroup","getRegions","useNamespaces","namespaces","setNamespaces","getNamespaces","useMetrics","metrics","setMetrics","templateSrv","getMetrics","useDimensionKeys","setDimensionKeys","convertDimensionFormat","useDeepCompareEffect","getDimensionKeys","useAccountOptions","doFetch","Promise","resolve","accounts","getAccounts","a","description","table","tableLayout","tableScroller","maxHeight","overflow","row","borderBottom","border","weak","borderBottomColor","medium","cell","logGroupSearchResults","textOverflow","whiteSpace","verticalAlign","modal","breakpoints","lg","selectAccountId","maxWidth","logGroupSelectionArea","display","resultLimit","margin","fontStyle","selectedLogGroup","background","borderRadius","shape","color","primary","fontSize","typography","size","sm","search","marginRight","removeButton","addBtn","searchFn","searchPhrase","searchFilter","setSearchFilter","debouncedSearch","cancel","Input","I","prefix","event","currentTarget","ALL_ACCOUNTS_OPTION","Account","accountOptions","selectedAccountExistsInOptions","find","tempVar","EditorField","CrossAccountLogsQueryField","isModalOpen","setIsModalOpen","selectableLogGroups","setSelectableLogGroups","setSelectedLogGroups","setSearchPhrase","searchAccountId","setSearchAccountId","setIsLoading","toggleModal","possibleLogGroups","fetchLogGroups","logGroupPattern","accountNameById","idsToNames","forEach","Modal","isOpen","onDismiss","phrase","LoadingPlaceholder","Checkbox","ev","isChecked","handleSelectCheckbox","checked","Button","IconButton","slg","rowGap","LogGroupSelection","accountState","params","describeCrossAccountLogGroups","inputEl","logsQueryRunner","defaultLogGroups","metricEditorModes","editorModes","sqlCodeEditorIsDirty","isMonitoringAccount","showConfirm","setShowConfirm","onEditorModeChange","newMetricEditorMode","shouldDisplayMonitoringBadge","InlineSelect","m","FlexItem","grow","Badge","RadioButtonGroup","ConfirmModal","body","confirmText","dismissText","onConfirm","apiModes","setIsMonitoringAccount","useIsMonitoringAccount","regionIsLoading","EditorHeader","onRegionChange","commonProps","pick","ExploreMode","addPaddingToButton","CloudWatchLogsQueryField","React","constructor","context","super","hint","statsGroups","languageProvider","suggestions","cloudwatchLanguageProvider","history","absoluteRange","wrapperClasses","labelKey","editor","typeahead","provideCompletionItems","plugins","BracesPlugin","SlatePrism","onlyIn","node","object","getSyntax","prismLanguages","cloudwatch","syntax","ExtraFieldElement","data","showError","error","cleanText","additionalPlugins","onChangeQuery","onTypeahead","portalOrigin","message","clearButtonStyles","fix","withTheme2","labelClass","CloudWatchLogsQueryEditor","memo","exploreId","absolute","valueOf","Date","now","standardStatistics","MetricStatEditor","onMetricStatChange","validateMetricName","metric","EditorRows","EditorRow","EditorFieldGroup","validatedQuery","onNamespaceChange","s","startsWith","optional","EditorSwitch","matchExact","e","QueryEditorPropertyType","QueryEditorExpressionType","SQLGenerator","getTemplateSrv","expressionToSqlQuery","select","where","groupBy","orderBy","orderByDirection","limit","parameters","parts","appendSelect","appendFrom","appendWhere","appendGroupBy","appendOrderBy","appendLimit","appendFunction","Function","formatValue","property","isTopLevelExpression","topLevelExpressionsCount","hasChildExpressions","And","andParts","exp","andCombined","wrapInParentheses","Or","Operator","appendOperator","orParts","orCombined","groupByParts","GroupBy","p","interpolated","getMetricNameFromExpression","selectExpression","getNamespaceFromExpression","fromExpression","Property","sanitizeOperator","String","flattenOperatorExpressions","flatMap","getFlattenedFilters","sql","getFlattenedGroupBys","setSql","setAggregation","aggregation","AGGREGATIONS","onQueryChange","schemaLabels","curr","getSchemaLabels","withSchemaEnabled","namespaceOptions","metricOptions","existingFilters","unusedDimensionKeys","queryWithNoParams","removeMetricName","namespaceParam","FunctionParameter","labelKeys","setNamespace","HTMLInputElement","withSchema","setWithSchema","disabled","isMulti","l","setSchemaLabels","param","setMetricName","OPERATORS","filtersFromQuery","filters","setFilters","cleaned","validExpressions","operatorExpression","validated","setOperatorExpressionValue","makeRenderItem","GroupByItem","fieldName","field","groupBysFromQuery","baseOptions","option","completeExpressions","orderByDirections","setOrderBy","SQLBuilderEditor","sqlString","fullQuery","sqlPreview","setSQLPreview","val","valueAsNumber","process","extensions","mimetypes","loader","TRIGGER_SUGGEST","registerLanguage","monaco","completionItemProvider","languages","getLanguages","register","monarch","setMonarchTokensProvider","setLanguageConfiguration","registerCompletionItemProvider","getCompletionProvider","MathExpressionQueryField","containerRef","useRef","onEditorMount","onDidFocusEditorText","trigger","addCommand","KeyMod","Shift","KeyCode","Enter","getValue","updateElementHeight","containerDiv","getContentHeight","pixelHeight","max","style","height","pixelWidth","clientWidth","layout","onDidContentSizeChange","ref","CodeEditor","monacoOptions","scrollBeyondLastLine","lineNumbers","renderLineHighlight","scrollbar","vertical","horizontal","suggestFontSize","wordWrap","top","onBeforeEditorMount","metricMathCompletionItemProvider","onEditorDidMount","SQLCodeEditor","sqlCompletionItemProvider","setRegion","showMiniMap","showLineNumbers","LinkedToken","previous","tokenTypes","isKeyword","Keyword","isWhiteSpace","Whitespace","isParenthesis","Parenthesis","isIdentifier","Identifier","isString","isDoubleQuotedString","Type","isVariable","Variable","isFunction","isNumber","is","isType","endsWith","getPreviousNonWhiteSpaceToken","getPreviousOfType","getPreviousUntil","ignoreTypes","tokens","t","getNextUntil","getPreviousKeyword","getNextNonWhiteSpaceToken","getNextOfType","linkedTokenBuilder","model","position","tokensPerLine","tokenize","lineIndex","offset","_tokenBrand","columnIndex","endColumn","getLineLength","startLineNumber","startColumn","endLineNumber","getValueInRange","newToken","Range","containsPosition","StatementPosition","SuggestionKind","CompletionItemPriority","dynamicLabelsCompletionItemProvider","Delimiter","languageDefinition","triggerCharacters","currentToken","fromPositions","toCompletionItem","rest","insertText","kind","CompletionItemKind","Field","sortText","Medium","High","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","DynamicLabelsField","getInputStyles","clientHeight","wrapper","containerStyles","disabledBackground","components","input","borderColor","overviewRulerLanes","Alias","setAlias","propagateOnChange","migrateMetricQuery","migratedQuery","_","aliasPatterns","migrateAliasPatterns","period","stat","DEFAULT_QUERY","preparedQuery","deepEqual","prepareQuery","MetricsQueryEditor","setSQLCodeEditorIsDirty","usePreparedMetricsQuery","newQuery","Space","invalid","PanelQueryEditor","LogsQueryEditor","CloudWatchAnnotationSupport","prepareAnnotation","isCloudWatchAnnotation","enable","iconColor","builtIn","hide","anno","prefixMatching","actionPrefix","alarmNamePrefix","validPrefixMatchingQuery","validMetricStatQuery","QueryEditor","topSpacing","func","wait","mem","memoize","leading","args","CloudWatchRequest","instanceSettings","memoizedDebounce","displayCustomError","AppNotificationTimeout","getDataSourceRef","awsRequest","url","method","headers","getBackendSrv","fetch","pipe","scopedVars","replaceVariableAndDisplayWarningIfMulti","newValues","expandVariableToArray","variableName","getVariableName","valueVar","multi","convertMultiFilterFormat","multiFilters","interpolatedKey","displayErrorIfIsMultiTemplateVariable","variable","debouncedCustomAlert","jsonData","defaultRegion","store","CloudWatchAPI","memoizedGetRequest","getRequest","path","subtype","get","account","catch","r","n","resourceResponse","resource","arn","getEbsVolumeIds","instanceId","getEc2InstanceAttribute","attributeName","getResourceARNs","resourceType","tags","CompletionItemProvider","getStatementPosition","Unknown","getSuggestionKinds","getSuggestions","suggestionKinds","statementPosition","reject","SQLTokenTypes","previousNonWhiteSpace","previousKeyword","previousIsSlash","SelectKeyword","AfterSelectKeyword","AfterSelectFuncFirstArgument","FromKeyword","AfterFromKeyword","SchemaFuncFirstArgument","SchemaFuncExtraArgument","AfterFrom","WhereKey","WhereComparisonOperator","WhereValue","AfterWhereValue","AfterGroupByKeywords","AfterGroupBy","AfterOrderByKeywords","AfterOrderByFunction","AfterOrderByDirection","FunctionsWithArguments","Metrics","Namespaces","SchemaKeyword","LabelKeys","WhereKeyword","GroupByKeywords","OrderByKeywords","LimitKeyword","ComparisonOperators","LabelValues","LogicalOperators","FunctionsWithoutArguments","SortOrderDirectionKeyword","getSelectToken","getMetricNameToken","assumedMetricNameToken","assumedStatisticToken","getSelectStatisticToken","getNamespaceToken","fromToken","selectToken","getFromKeywordToken","nextNonWhiteSpace","toUpperCase","assumedNamespaceToken","SQLCompletionItemProvider","addSuggestion","suggestion","namespaceToken","getAllMetrics","uniq","metricNameToken","labelKeyTokens","MediumHigh","MediumLow","Low","CloudWatchLanguageProvider","LanguageProvider","initialValues","lastValueFrom","startTask","started","fetchedFieldsCache","time","sortedUniq","fields","results","all","logGroup","getLogGroupFields","logGroupName","Set","cur","logGroupFields","suggs","getFieldCompletionItems","functionSuggestions","searchFunctionType","SearchFunctionType","commandToken","curToken","queryCommand","prevToken","prevNonWhitespaceToken","currentTokenIsFirstArg","handleSortCommand","currentTokenIsAfterCommandAndEmpty","isTokenType","currentTokenIsAfterCommand","nextNonWhitespaceToken","currentTokenIsComma","currentTokenIsCommaOrAfterComma","typeaheadOutput","getFieldAndFilterFunctionCompletionItems","getStatsAggCompletionItems","group","skipFilter","sugg","boolFuncs","getBoolFuncCompletionItems","fieldsSuggestions","comparisonSuggestions","getComparisonCompletionItems","fetchFields","assign","isStatsQuery","offsets","selection","isFirstToken","prev","getCommandCompletionItems","parenthesisToken","maybeFunctionToken","funcsWithFieldArgs","isInsideFunctionParenthesis","maybeKeyword","getPreviousTokenExcluding","isAfterKeyword","handleKeyword","handleComparison","startToken","thisToken","previousCommandToken","handleCommand","isFirstArgument","funcName","exclude","main","MetricMathTokenTypes","WithinString","currentFunction","isAfterComma","isWithinSearch","allTokensAfterStartOfSearch","lastComma","SearchFuncThirdArg","SearchFuncSecondArg","PredefinedFuncSecondArg","AfterFunction","PredefinedFunction","KeywordArguments","Operators","Statistic","Period","MetricMathCompletionItemProvider","idx","Value","fromCharCode","CloudWatchAnnotationQueryRunner","handleAnnotationQuery","queries","dsQueryEndpoint","toDataQueryResponse","createInternalXrayLink","getDataSourceSrv","console","internal","queryType","datasourceName","createAwsConsoleLink","getVariableValue","arns","sources","interpolatedExpression","interpolatedGroups","targetBlank","runWithRetry","queryFun","targets","timeoutFunc","startTime","timerID","subscription","retries","collected","Observable","observer","run","currentQueryParams","subscribe","frames","collectedPreviously","complete","errorData","keys","errorMessage","errors","q","good","splitErrorData","retry","dataResponse","setTimeout","pow","random","clearTimeout","unsubscribe","subscriber","counter","step","endPeriod","newPeriod","schedule","LOG_IDENTIFIER_INTERNAL","LOGSTREAM_IDENTIFIER_INTERNAL","CloudWatchLogsQueryRunner","timeSrv","logQueries","queryParams","queryString","qp","missingLogGroupNames","missingLogGroups","of","rangeUtil","logsTimeout","makeLogActionRequest","makeReplacements","skipCache","mergeMap","logsQuery","dataFrame","queryId","meta","custom","response","dataQueryResponse","replaceFn","getVariableValueFn","getRegion","tracingDatasourceUid","curTarget","interpolatedRegion","xrayLink","links","addDataLinksToLogsResponse","timeRange","tracingDataSourceUid","direction","logStreamField","logField","requestParams","startFromHead","parseLogGroupName","rowIndex","logStreamName","endTime","timeEpochMs","dataFrames","statsQuery","startPeriod","scheduler","asyncScheduler","add","increasingInterval","concatMap","repeat","share","consecutiveFailedAttempts","scan","failures","prevRecordsMatched","frame","recordsMatched","stats","displayName","queryResponse","zip","tap","CloudWatchLogsQueryStatus","failedAttempts","set","every","LoadingState","DataQueryErrorType","takeWhile","observable","onUnsubscribe","stopQueries","innerSub","logQuery","finalize","intervalMs","maxDataPoints","fieldsToReplace","anyQuery","resultsToDataFrames","catchError","status","fieldNames","toArray","fieldPercentages","percent","logIdentifier","colonIndex","ThrottlingErrorMessage","displayAlert","CloudWatchMetricsQueryRunner","metricQueries","timezoneUTCOffset","dateTimeFormat","timeZone","timezone","format","validMetricsQueries","filterMetricQuery","migratedAndIterpolatedQuery","replaceMetricQueryVars","isEmpty","performTimeSeriesQuery","interpolateMetricsQueryVariables","dataframes","lastError","findLast","FieldType","interval","throwError","firstErrorResult","failedRedIds","actualRegion","debouncedAlert","getPeriod","parseInt","jsonVariable","migrateMultiFilters","oldFilters","tempFilters","parsedFilters","parse","newFilters","migrateVariableQuery","rawQuery","ec2Filters","isVariableQuery","omit","VariableQueryType","instanceID","metricNameQuery","dimensionKeysQuery","dimensionValuesQuery","ebsVolumeIdsQuery","ec2InstanceAttributeQuery","resourceARNsQuery","MultiFilterItem","keyPlaceholder","localKey","setLocalKey","localValue","setLocalValue","MultiFilter","multiFiltersToFilterConditions","newMultifilters","filterConditionsToMultiFilters","VariableQueryField","VariableTextField","interactive","queryTypes","VariableQueryEditor","parsedQuery","keysForDimensionFilter","sanitizeQuery","hasRegionField","hasNamespaceField","logGroupPrefix","CloudWatchVariableSupport","CustomVariableSupport","expandable","queryObj","execute","handleRegionsQuery","handleNamespacesQuery","handleMetricsQuery","handleDimensionKeysQuery","handleDimensionValuesQuery","handleEbsVolumeIdsQuery","handleEc2InstanceAttributeQuery","handleResourceARNsQuery","handleStatisticsQuery","handleLogGroupsQuery","handleAccountsQuery","interpolatedPrefix","describeAllLogGroups","selectableValueToMetricFindOption","ids","metricFindOptions","allMetricFindValue","CloudWatchDatasource","DataSourceWithBackend","getTimeSrv","getLogRowContext","metricsQueryRunner","annotationQueryRunner","annotations","filterQuery","cloneDeep","metricsQueries","annotationQueries","dataQueryResponses","handleLogQueries","handleMetricQueries","merge","interpolateVariablesInQueries","targetContainsTemplate","containsTemplate","k","showContextToggle","getQueryDisplayText","isMetricSearchBuilder","plugin","DataSourcePlugin","setQueryEditorHelp","setConfigEditor","setSaved","version","setDatasource","loadDatasource","useDatasource","addWarning","createWarningNotification","authType","profile","database","useAuthenticationWarning","logsTimeoutError","setErr","useDebounce","useTimoutValidation","assumeRoleArn","endpoint","externalId","secureJsonData","accessKey","secretKey","ConnectionConfig","loadRegions","customMetricsNamespaces","onUpdateDatasourceJsonDataOption","updateDatasourcePluginJsonDataOption","put","updateDatasourcePluginOption","setQueryEditor","setMetadataInspector","rows","executedQueryString","getAppEvents","DashboardLoadedEvent","payload","dashboardId","orgId","grafanaVersion","cloudWatchQueries","pluginJson","logsQueries","grafana_version","dashboard_id","org_id","logs_queries_count","metrics_queries_count","metrics_search_count","metrics_search_builder_count","metrics_search_code_count","metrics_search_match_exact_count","metrics_query_count","metrics_query_builder_count","metrics_query_code_count","metrics_queries_with_account_count","reportInteraction","effect","deps","depsEqual","isDeepEqual","default","call","throw","done","sent","trys","ops","return","Symbol","iterator","pop","u","c","d","exports","Keys","Credentials","Default","EC2IAMRole","ARN","h","y","standardRegions","D","w","E","A","onOptionsChange","S","skipHeader","C","skipEndpoint","V","F","O","window","grafanaBootData","settings","R","awsAllowedAuthProviders","awsAssumeRoleEnabled","K","createElement","FieldSet","defaultValue","onUpdateDatasourceJsonDataOptionSelect","menuShouldPortal","Fragment","secureJsonFields","ButtonGroup","ToolbarButton","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","defaultEndpoint","formatCreateLabel","children","dependencies","resources","hidden","saveOptions","Previous","Null","SIGV4ConnectionConfig","sigV4AuthType","sigV4Profile","sigV4AssumeRoleArn","sigV4ExternalId","sigV4Region","sigV4Endpoint","sigV4AccessKey","sigV4SecretKey","module","equal","flags","$$typeof","encode","ch","charCodeAt","tmpAry","isFinite","reserved","len","eat","expected","charAt","decode","beg","substring","parseOne","sub","parseFloat","tryParse","def","ex"],"sourceRoot":""}