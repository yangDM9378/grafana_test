"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[743],{45012:(e,a,t)=>{t.r(a),t.d(a,{NotificationsPage:()=>Y,default:()=>A});var n=t(68404),s=t(37417),i=t(52423),r=t(31423),o=t(16755),l=t(99500),c=t(2843),d=t(12310),f=t(8006),u=t(10929),p=t(68900),m=t(53069),h=t(86230),x=t(93552),v=t(85719);function g(e,a){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e}function D(e){return g({},e)}var j=t(8679),y=t(29122),w=1440,b=43200;function Z(e,a,t){var n,s;(0,y.Z)(2,arguments);var i=(0,u.j)(),r=null!==(n=null!==(s=null==t?void 0:t.locale)&&void 0!==s?s:i.locale)&&void 0!==n?n:x.Z;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=(0,p.Z)(e,a);if(isNaN(o))throw new RangeError("Invalid time value");var l,c,d=g(D(t),{addSuffix:Boolean(null==t?void 0:t.addSuffix),comparison:o});o>0?(l=(0,v.Z)(a),c=(0,v.Z)(e)):(l=(0,v.Z)(e),c=(0,v.Z)(a));var f,Z=(0,h.Z)(c,l),N=((0,j.Z)(c)-(0,j.Z)(l))/1e3,I=Math.round((Z-N)/60);if(I<2)return null!=t&&t.includeSeconds?Z<5?r.formatDistance("lessThanXSeconds",5,d):Z<10?r.formatDistance("lessThanXSeconds",10,d):Z<20?r.formatDistance("lessThanXSeconds",20,d):Z<40?r.formatDistance("halfAMinute",0,d):Z<60?r.formatDistance("lessThanXMinutes",1,d):r.formatDistance("xMinutes",1,d):0===I?r.formatDistance("lessThanXMinutes",1,d):r.formatDistance("xMinutes",I,d);if(I<45)return r.formatDistance("xMinutes",I,d);if(I<90)return r.formatDistance("aboutXHours",1,d);if(I<w){var S=Math.round(I/60);return r.formatDistance("aboutXHours",S,d)}if(I<2520)return r.formatDistance("xDays",1,d);if(I<b){var M=Math.round(I/w);return r.formatDistance("xDays",M,d)}if(I<86400)return f=Math.round(I/b),r.formatDistance("aboutXMonths",f,d);if((f=(0,m.Z)(c,l))<12){var T=Math.round(I/b);return r.formatDistance("xMonths",T,d)}var X=f%12,k=Math.floor(f/12);return X<3?r.formatDistance("aboutXYears",k,d):X<9?r.formatDistance("overXYears",k,d):r.formatDistance("almostXYears",k+1,d)}function N(e,a){return(0,y.Z)(1,arguments),Z(e,Date.now(),a)}var I=t(65737),S=t(1129),M=t(45916);const T=e=>{let{children:a,className:t,isSelected:n,onClick:s,severity:i="error",title:r,traceId:l,timestamp:c}=e;const f=(0,o.l4)(),u=X(f),p=I.v.featureToggles.tracing&&l;return(0,M.jsxs)(S.Z,{className:t,onClick:s,children:[(0,M.jsx)(S.Z.Heading,{children:r}),(0,M.jsx)(S.Z.Description,{children:a}),(0,M.jsx)(S.Z.Figure,{children:(0,M.jsx)(d.X,{onChange:s,tabIndex:-1,value:n})}),(0,M.jsxs)(S.Z.Tags,{className:u.trace,children:[p&&(0,M.jsx)("span",{children:`Trace ID: ${l}`}),c&&N(c,{addSuffix:!0})]})]})},X=e=>({trace:(0,i.css)({alignItems:"flex-end",alignSelf:"flex-end",color:e.colors.text.secondary,display:"flex",flexDirection:"column",fontSize:e.typography.pxToRem(10),justifySelf:"flex-end"})});var k,C,R,E,z=t(11035),H=t(64850);function O(){const e=(0,H.I0)(),a=(0,H.v9)((e=>(0,z.mE)(e.appNotifications))),[t,s]=(0,n.useState)([]),u=a.every((e=>t.includes(e.id))),p=(0,n.useRef)((0,H.v9)((e=>(0,z.Av)(e.appNotifications)))),m=(0,o.wW)(W);(0,r.Z)((()=>{e((0,z.Jk)(Date.now()))}));return 0===a.length?(0,M.jsxs)("div",{className:m.noNotifsWrapper,children:[k||(k=(0,M.jsx)(l.J,{name:"bell",size:"xxl"})),C||(C=(0,M.jsx)("span",{children:"Notifications you have received will appear here."}))]}):(0,M.jsxs)("div",{className:m.wrapper,children:[R||(R=(0,M.jsx)(c.b,{severity:"info",title:"This page displays past errors and warnings. Once dismissed, they cannot be retrieved."})),(0,M.jsxs)("div",{className:m.topRow,children:[(0,M.jsx)(d.X,{value:u,onChange:e=>{return t=e.target.checked,void s(t?a.map((e=>e.id)):[]);var t}}),(0,M.jsx)(f.zx,{disabled:0===t.length,onClick:()=>{u?e((0,z.F6)()):t.forEach((a=>{e((0,z.hS)(a))})),s([])},children:"Dismiss notifications"})]}),(0,M.jsx)("ul",{className:m.list,children:a.map((e=>(0,M.jsx)("li",{className:m.listItem,children:(0,M.jsx)(T,{className:(0,i.cx)({[m.newItem]:e.timestamp>p.current}),isSelected:t.includes(e.id),onClick:()=>{return a=e.id,void s((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},severity:e.severity,title:e.title,timestamp:e.timestamp,traceId:e.traceId,children:(0,M.jsx)("span",{children:e.text})})},e.id)))})]})}function W(e){return{topRow:(0,i.css)({alignItems:"center",display:"flex",gap:e.spacing(2)}),list:(0,i.css)({display:"flex",flexDirection:"column"}),listItem:(0,i.css)({alignItems:"center",display:"flex",gap:e.spacing(2),listStyle:"none",position:"relative"}),newItem:(0,i.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:e.colors.gradients.brandVertical,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1)}}),noNotifsWrapper:(0,i.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}),wrapper:(0,i.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)})}}const Y=()=>E||(E=(0,M.jsx)(s.T,{navId:"profile/notifications",children:(0,M.jsx)(s.T.Contents,{children:(0,M.jsx)(O,{})})})),A=Y}}]);
//# sourceMappingURL=NotificationsPage.0e440523d52a03c500be.js.map