{"version":3,"file":"AlertingRule.ae1834d0aa280e984ee8.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/components/rule-viewer/RuleViewerVisualization.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsFederatedSources.tsx","webpack://grafana/./public/app/features/alerting/unified/utils/query.ts","webpack://grafana/./public/app/features/alerting/unified/RuleViewer.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Authorize.tsx","webpack://grafana/./public/app/features/alerting/unified/components/PanelPluginsButtonGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rule-viewer/RuleViewerLayout.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertQueriesStatus.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useCombinedRule.ts","webpack://grafana/./public/app/features/alerting/unified/utils/timeRange.ts","webpack://grafana/./public/app/features/alerting/unified/state/AlertingQueryRunner.ts","webpack://grafana/./public/app/features/expressions/guards.ts"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useCallback, useState } from 'react';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { DataSourceInstanceSettings, DateTime, dateTime, GrafanaTheme2, PanelData, urlUtil } from '@grafana/data';\nimport { config, getDataSourceSrv, PanelRenderer } from '@grafana/runtime';\nimport { Alert, CodeEditor, DateTimePicker, LinkButton, useStyles2, useTheme2 } from '@grafana/ui';\nimport { isExpressionQuery } from 'app/features/expressions/guards';\nimport { PanelOptions } from 'app/plugins/panel/table/models.gen';\nimport { AccessControlAction } from 'app/types';\nimport { AlertQuery } from 'app/types/unified-alerting-dto';\n\nimport { TABLE, TIMESERIES } from '../../utils/constants';\nimport { Authorize } from '../Authorize';\nimport { PanelPluginsButtonGroup, SupportedPanelPlugins } from '../PanelPluginsButtonGroup';\n\ntype RuleViewerVisualizationProps = {\n  data?: PanelData;\n  query: AlertQuery;\n  onChangeQuery: (query: AlertQuery) => void;\n};\n\nconst headerHeight = 4;\n\nexport function RuleViewerVisualization(props: RuleViewerVisualizationProps): JSX.Element | null {\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n  const { data, query, onChangeQuery } = props;\n  const defaultPanel = isExpressionQuery(query.model) ? TABLE : TIMESERIES;\n  const [panel, setPanel] = useState<SupportedPanelPlugins>(defaultPanel);\n  let uid = query.datasourceUid;\n  if (isExpressionQuery(query.model)) {\n    uid = query.model.datasource?.type ?? query.datasourceUid;\n  }\n  const dsSettings = getDataSourceSrv().getInstanceSettings(uid);\n  const relativeTimeRange = query.relativeTimeRange;\n  const [options, setOptions] = useState<PanelOptions>({\n    frameIndex: 0,\n    showHeader: true,\n  });\n\n  const onTimeChange = useCallback(\n    (newDateTime: DateTime) => {\n      const now = dateTime().unix() - newDateTime.unix();\n\n      if (relativeTimeRange) {\n        const interval = relativeTimeRange.from - relativeTimeRange.to;\n        onChangeQuery({\n          ...query,\n          relativeTimeRange: { from: now + interval, to: now },\n        });\n      }\n    },\n    [onChangeQuery, query, relativeTimeRange]\n  );\n\n  const setDateTime = useCallback((relativeTimeRangeTo: number) => {\n    return relativeTimeRangeTo === 0 ? dateTime() : dateTime().subtract(relativeTimeRangeTo, 'seconds');\n  }, []);\n\n  if (!data) {\n    return null;\n  }\n\n  if (!dsSettings) {\n    return (\n      <div className={styles.content}>\n        <Alert title=\"Could not find datasource for query\" />\n        <CodeEditor\n          width=\"100%\"\n          height=\"250px\"\n          language=\"json\"\n          showLineNumbers={false}\n          showMiniMap={false}\n          value={JSON.stringify(query, null, '\\t')}\n          readOnly={true}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.content}>\n      <AutoSizer>\n        {({ width, height }) => {\n          return (\n            <div style={{ width, height }}>\n              <div className={styles.header}>\n                <div>\n                  {`Query ${query.refId}`}\n                  <span className={styles.dataSource}>({dsSettings.name})</span>\n                </div>\n                <div className={styles.actions}>\n                  {!isExpressionQuery(query.model) && relativeTimeRange ? (\n                    <DateTimePicker\n                      date={setDateTime(relativeTimeRange.to)}\n                      onChange={onTimeChange}\n                      maxDate={new Date()}\n                    />\n                  ) : null}\n                  <PanelPluginsButtonGroup onChange={setPanel} value={panel} size=\"md\" />\n                  <Authorize actions={[AccessControlAction.DataSourcesExplore]}>\n                    {!isExpressionQuery(query.model) && (\n                      <>\n                        <div className={styles.spacing} />\n                        <LinkButton\n                          size=\"md\"\n                          variant=\"secondary\"\n                          icon=\"compass\"\n                          target=\"_blank\"\n                          href={createExploreLink(dsSettings, query)}\n                        >\n                          View in Explore\n                        </LinkButton>\n                      </>\n                    )}\n                  </Authorize>\n                </div>\n              </div>\n              <PanelRenderer\n                height={height - theme.spacing.gridSize * headerHeight}\n                width={width}\n                data={data}\n                pluginId={panel}\n                title=\"\"\n                onOptionsChange={setOptions}\n                options={options}\n              />\n            </div>\n          );\n        }}\n      </AutoSizer>\n    </div>\n  );\n}\n\nfunction createExploreLink(settings: DataSourceInstanceSettings, query: AlertQuery): string {\n  const { name } = settings;\n  const { refId, ...rest } = query.model;\n  const queryParams = { ...rest, datasource: name };\n\n  return urlUtil.renderUrl(`${config.appSubUrl}/explore`, {\n    left: JSON.stringify(['now-1h', 'now', name, queryParams]),\n  });\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    content: css`\n      width: 100%;\n      height: 250px;\n    `,\n    header: css`\n      height: ${theme.spacing(headerHeight)};\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      white-space: nowrap;\n    `,\n    refId: css`\n      font-weight: ${theme.typography.fontWeightMedium};\n      color: ${theme.colors.text.link};\n      overflow: hidden;\n    `,\n    dataSource: css`\n      margin-left: ${theme.spacing(1)};\n      font-style: italic;\n      color: ${theme.colors.text.secondary};\n    `,\n    actions: css`\n      display: flex;\n      align-items: center;\n    `,\n    spacing: css`\n      padding: ${theme.spacing(0, 1, 0, 0)};\n    `,\n    errorMessage: css`\n      white-space: pre-wrap;\n    `,\n  };\n};\n","import React, { FC } from 'react';\n\nimport { CombinedRuleGroup } from 'app/types/unified-alerting';\n\nimport { DetailsField } from '../DetailsField';\n\ninterface Props {\n  group: CombinedRuleGroup;\n}\n\nconst RuleDetailsFederatedSources: FC<Props> = ({ group }) => {\n  const sourceTenants = group.source_tenants ?? [];\n\n  return (\n    <DetailsField label=\"Tenant sources\">\n      <>\n        {sourceTenants.map((tenant) => (\n          <div key={tenant}>{tenant}</div>\n        ))}\n      </>\n    </DetailsField>\n  );\n};\n\nexport { RuleDetailsFederatedSources };\n","import { DataQuery, DataSourceInstanceSettings } from '@grafana/data';\nimport { LokiQuery } from 'app/plugins/datasource/loki/types';\nimport { PromQuery } from 'app/plugins/datasource/prometheus/types';\nimport { CombinedRule } from 'app/types/unified-alerting';\nimport { AlertQuery } from 'app/types/unified-alerting-dto';\n\nimport { isCloudRulesSource, isGrafanaRulesSource } from './datasource';\nimport { isGrafanaRulerRule } from './rules';\n\nexport function alertRuleToQueries(combinedRule: CombinedRule | undefined | null): AlertQuery[] {\n  if (!combinedRule) {\n    return [];\n  }\n  const { namespace, rulerRule } = combinedRule;\n  const { rulesSource } = namespace;\n\n  if (isGrafanaRulesSource(rulesSource)) {\n    if (isGrafanaRulerRule(rulerRule)) {\n      return rulerRule.grafana_alert.data;\n    }\n  }\n\n  if (isCloudRulesSource(rulesSource)) {\n    const model = cloudAlertRuleToModel(rulesSource, combinedRule);\n\n    return [dataQueryToAlertQuery(model, rulesSource.uid)];\n  }\n\n  return [];\n}\n\nexport function dataQueryToAlertQuery(dataQuery: DataQuery, dataSourceUid: string): AlertQuery {\n  return {\n    refId: dataQuery.refId,\n    datasourceUid: dataSourceUid,\n    queryType: '',\n    model: dataQuery,\n    relativeTimeRange: {\n      from: 360,\n      to: 0,\n    },\n  };\n}\n\nfunction cloudAlertRuleToModel(dsSettings: DataSourceInstanceSettings, rule: CombinedRule): DataQuery {\n  const refId = 'A';\n\n  switch (dsSettings.type) {\n    case 'prometheus': {\n      const query: PromQuery = {\n        refId,\n        expr: rule.query,\n      };\n\n      return query;\n    }\n\n    case 'loki': {\n      const query: LokiQuery = {\n        refId,\n        expr: rule.query,\n      };\n\n      return query;\n    }\n\n    default:\n      throw new Error(`Query for datasource type ${dsSettings.type} is currently not supported by cloud alert rules.`);\n  }\n}\n","import { css } from '@emotion/css';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useObservable } from 'react-use';\n\nimport { GrafanaTheme2, LoadingState, PanelData } from '@grafana/data';\nimport {\n  Alert,\n  Button,\n  Icon,\n  LoadingPlaceholder,\n  PanelChromeLoadingIndicator,\n  useStyles2,\n  VerticalGroup,\n  withErrorBoundary,\n} from '@grafana/ui';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../core/constants';\nimport { AlertQuery } from '../../../types/unified-alerting-dto';\n\nimport { AlertLabels } from './components/AlertLabels';\nimport { DetailsField } from './components/DetailsField';\nimport { ProvisionedResource, ProvisioningAlert } from './components/Provisioning';\nimport { RuleViewerLayout, RuleViewerLayoutContent } from './components/rule-viewer/RuleViewerLayout';\nimport { RuleViewerVisualization } from './components/rule-viewer/RuleViewerVisualization';\nimport { RuleDetailsActionButtons } from './components/rules/RuleDetailsActionButtons';\nimport { RuleDetailsAnnotations } from './components/rules/RuleDetailsAnnotations';\nimport { RuleDetailsDataSources } from './components/rules/RuleDetailsDataSources';\nimport { RuleDetailsExpression } from './components/rules/RuleDetailsExpression';\nimport { RuleDetailsFederatedSources } from './components/rules/RuleDetailsFederatedSources';\nimport { RuleDetailsMatchingInstances } from './components/rules/RuleDetailsMatchingInstances';\nimport { RuleHealth } from './components/rules/RuleHealth';\nimport { RuleState } from './components/rules/RuleState';\nimport { useAlertQueriesStatus } from './hooks/useAlertQueriesStatus';\nimport { useCombinedRule } from './hooks/useCombinedRule';\nimport { AlertingQueryRunner } from './state/AlertingQueryRunner';\nimport { getRulesSourceByName } from './utils/datasource';\nimport { alertRuleToQueries } from './utils/query';\nimport * as ruleId from './utils/rule-id';\nimport { isFederatedRuleGroup, isGrafanaRulerRule } from './utils/rules';\n\ntype RuleViewerProps = GrafanaRouteComponentProps<{ id?: string; sourceName?: string }>;\n\nconst errorMessage = 'Could not find data source for rule';\nconst errorTitle = 'Could not view rule';\nconst pageTitle = 'View rule';\n\nexport function RuleViewer({ match }: RuleViewerProps) {\n  const styles = useStyles2(getStyles);\n  const { id } = match.params;\n  const identifier = ruleId.tryParse(id, true);\n\n  const { loading, error, result: rule } = useCombinedRule(identifier, identifier?.ruleSourceName);\n  const runner = useMemo(() => new AlertingQueryRunner(), []);\n  const data = useObservable(runner.get());\n  const queries2 = useMemo(() => alertRuleToQueries(rule), [rule]);\n  const [queries, setQueries] = useState<AlertQuery[]>([]);\n\n  const { allDataSourcesAvailable } = useAlertQueriesStatus(queries2);\n\n  const onRunQueries = useCallback(() => {\n    if (queries.length > 0 && allDataSourcesAvailable) {\n      runner.run(queries);\n    }\n  }, [queries, runner, allDataSourcesAvailable]);\n\n  useEffect(() => {\n    setQueries(queries2);\n  }, [queries2]);\n\n  useEffect(() => {\n    if (allDataSourcesAvailable) {\n      onRunQueries();\n    }\n  }, [onRunQueries, allDataSourcesAvailable]);\n\n  useEffect(() => {\n    return () => runner.destroy();\n  }, [runner]);\n\n  const onChangeQuery = useCallback((query: AlertQuery) => {\n    setQueries((queries) =>\n      queries.map((q) => {\n        if (q.refId === query.refId) {\n          return query;\n        }\n        return q;\n      })\n    );\n  }, []);\n\n  if (!identifier?.ruleSourceName) {\n    return (\n      <RuleViewerLayout title={pageTitle}>\n        <Alert title={errorTitle}>\n          <details className={styles.errorMessage}>{errorMessage}</details>\n        </Alert>\n      </RuleViewerLayout>\n    );\n  }\n\n  const rulesSource = getRulesSourceByName(identifier.ruleSourceName);\n\n  if (loading) {\n    return (\n      <RuleViewerLayout title={pageTitle}>\n        <LoadingPlaceholder text=\"Loading rule...\" />\n      </RuleViewerLayout>\n    );\n  }\n\n  if (error || !rulesSource) {\n    return (\n      <RuleViewerLayout title={pageTitle}>\n        <Alert title={errorTitle}>\n          <details className={styles.errorMessage}>\n            {error?.message ?? errorMessage}\n            <br />\n            {!!error?.stack && error.stack}\n          </details>\n        </Alert>\n      </RuleViewerLayout>\n    );\n  }\n\n  if (!rule) {\n    return (\n      <RuleViewerLayout title={pageTitle}>\n        <span>Rule could not be found.</span>\n      </RuleViewerLayout>\n    );\n  }\n\n  const annotations = Object.entries(rule.annotations).filter(([_, value]) => !!value.trim());\n  const isFederatedRule = isFederatedRuleGroup(rule.group);\n  const isProvisioned = isGrafanaRulerRule(rule.rulerRule) && Boolean(rule.rulerRule.grafana_alert.provenance);\n\n  return (\n    <RuleViewerLayout wrapInContent={false} title={pageTitle}>\n      {isFederatedRule && (\n        <Alert severity=\"info\" title=\"This rule is part of a federated rule group.\">\n          <VerticalGroup>\n            Federated rule groups are currently an experimental feature.\n            <Button fill=\"text\" icon=\"book\">\n              <a href=\"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation\">\n                Read documentation\n              </a>\n            </Button>\n          </VerticalGroup>\n        </Alert>\n      )}\n      {isProvisioned && <ProvisioningAlert resource={ProvisionedResource.AlertRule} />}\n      <RuleViewerLayoutContent>\n        <div>\n          <h4>\n            <Icon name=\"bell\" size=\"lg\" /> {rule.name}\n          </h4>\n          <RuleState rule={rule} isCreating={false} isDeleting={false} />\n          <RuleDetailsActionButtons rule={rule} rulesSource={rulesSource} isViewMode={true} />\n        </div>\n        <div className={styles.details}>\n          <div className={styles.leftSide}>\n            {rule.promRule && (\n              <DetailsField label=\"Health\" horizontal={true}>\n                <RuleHealth rule={rule.promRule} />\n              </DetailsField>\n            )}\n            {!!rule.labels && !!Object.keys(rule.labels).length && (\n              <DetailsField label=\"Labels\" horizontal={true}>\n                <AlertLabels labels={rule.labels} />\n              </DetailsField>\n            )}\n            <RuleDetailsExpression rulesSource={rulesSource} rule={rule} annotations={annotations} />\n            <RuleDetailsAnnotations annotations={annotations} />\n          </div>\n          <div className={styles.rightSide}>\n            <RuleDetailsDataSources rule={rule} rulesSource={rulesSource} />\n            {isFederatedRule && <RuleDetailsFederatedSources group={rule.group} />}\n            <DetailsField label=\"Namespace / Group\">{`${rule.namespace.name} / ${rule.group.name}`}</DetailsField>\n          </div>\n        </div>\n        <div>\n          <RuleDetailsMatchingInstances rule={rule} pagination={{ itemsPerPage: DEFAULT_PER_PAGE_PAGINATION }} />\n        </div>\n      </RuleViewerLayoutContent>\n      {!isFederatedRule && data && Object.keys(data).length > 0 && (\n        <>\n          <div className={styles.queriesTitle}>\n            Query results <PanelChromeLoadingIndicator loading={isLoading(data)} onCancel={() => runner.cancel()} />\n          </div>\n          <RuleViewerLayoutContent padding={0}>\n            <div className={styles.queries}>\n              {queries.map((query) => {\n                return (\n                  <div key={query.refId} className={styles.query}>\n                    <RuleViewerVisualization\n                      query={query}\n                      data={data && data[query.refId]}\n                      onChangeQuery={onChangeQuery}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </RuleViewerLayoutContent>\n        </>\n      )}\n      {!isFederatedRule && !allDataSourcesAvailable && (\n        <Alert title=\"Query not available\" severity=\"warning\" className={styles.queryWarning}>\n          Cannot display the query preview. Some of the data sources used in the queries are not available.\n        </Alert>\n      )}\n    </RuleViewerLayout>\n  );\n}\n\nfunction isLoading(data: Record<string, PanelData>): boolean {\n  return !!Object.values(data).find((d) => d.state === LoadingState.Loading);\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    errorMessage: css`\n      white-space: pre-wrap;\n    `,\n    queries: css`\n      height: 100%;\n      width: 100%;\n    `,\n    queriesTitle: css`\n      padding: ${theme.spacing(2, 0.5)};\n      font-size: ${theme.typography.h5.fontSize};\n      font-weight: ${theme.typography.fontWeightBold};\n      font-family: ${theme.typography.h5.fontFamily};\n    `,\n    query: css`\n      border-bottom: 1px solid ${theme.colors.border.medium};\n      padding: ${theme.spacing(2)};\n    `,\n    queryWarning: css`\n      margin: ${theme.spacing(4, 0)};\n    `,\n    details: css`\n      display: flex;\n      flex-direction: row;\n    `,\n    leftSide: css`\n      flex: 1;\n    `,\n    rightSide: css`\n      padding-left: 90px;\n      width: 300px;\n    `,\n  };\n};\n\nexport default withErrorBoundary(RuleViewer, { style: 'page' });\n","import React from 'react';\n\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { AccessControlAction } from 'app/types';\n\ntype Props = {\n  actions: AccessControlAction[];\n  fallback?: boolean;\n};\n\nexport const Authorize = ({ actions, children, fallback = true }: React.PropsWithChildren<Props>) => {\n  if (actions.some((action) => contextSrv.hasAccess(action, fallback))) {\n    return <>{children}</>;\n  } else {\n    return null;\n  }\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { RadioButtonGroup } from '@grafana/ui';\n\nimport { STAT, TABLE, TIMESERIES } from '../utils/constants';\n\nexport type SupportedPanelPlugins = 'timeseries' | 'table' | 'stat';\n\ntype Props = {\n  value: SupportedPanelPlugins;\n  onChange: (value: SupportedPanelPlugins) => void;\n  size?: 'sm' | 'md';\n};\n\nexport function PanelPluginsButtonGroup(props: Props): JSX.Element | null {\n  const { value, onChange, size = 'md' } = props;\n  const panels = useMemo(() => getSupportedPanels(), []);\n\n  return <RadioButtonGroup options={panels} value={value} onChange={onChange} size={size} />;\n}\n\nfunction getSupportedPanels(): Array<SelectableValue<SupportedPanelPlugins>> {\n  return Object.values(config.panels).reduce((panels: Array<SelectableValue<SupportedPanelPlugins>>, panel) => {\n    if (isSupportedPanelPlugin(panel.id)) {\n      panels.push({\n        value: panel.id,\n        label: panel.name,\n        imgUrl: panel.info.logos.small,\n      });\n    }\n    return panels;\n  }, []);\n}\n\nfunction isSupportedPanelPlugin(id: string): id is SupportedPanelPlugins {\n  switch (id) {\n    case TIMESERIES:\n    case TABLE:\n    case STAT:\n      return true;\n    default:\n      return false;\n  }\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, NavModelItem } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\n\ntype Props = {\n  children: React.ReactNode | React.ReactNode[];\n  title: string;\n  wrapInContent?: boolean;\n};\n\nconst defaultPageNav: Partial<NavModelItem> = {\n  icon: 'bell',\n  id: 'alert-rule-view',\n  breadcrumbs: [{ title: 'Alert rules', url: 'alerting/list' }],\n};\n\nexport function RuleViewerLayout(props: Props): JSX.Element | null {\n  const { wrapInContent = true, children, title } = props;\n  const styles = useStyles2(getPageStyles);\n\n  return (\n    <Page pageNav={{ ...defaultPageNav, text: title }} navId=\"alert-list\">\n      <Page.Contents>\n        <div className={styles.content}>{wrapInContent ? <RuleViewerLayoutContent {...props} /> : children}</div>\n      </Page.Contents>\n    </Page>\n  );\n}\n\ntype ContentProps = {\n  children: React.ReactNode | React.ReactNode[];\n  padding?: number;\n};\n\nexport function RuleViewerLayoutContent({ children, padding = 2 }: ContentProps): JSX.Element | null {\n  const styles = useStyles2(getContentStyles(padding));\n  return <div className={styles.wrapper}>{children}</div>;\n}\n\nconst getPageStyles = (theme: GrafanaTheme2) => {\n  return {\n    content: css`\n      max-width: ${theme.breakpoints.values.xxl}px;\n    `,\n  };\n};\n\nconst getContentStyles = (padding: number) => (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css`\n      background: ${theme.colors.background.primary};\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: ${theme.shape.borderRadius()};\n      padding: ${theme.spacing(padding)};\n    `,\n  };\n};\n","import { useMemo } from 'react';\n\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { isExpressionReference } from '@grafana/runtime/src/utils/DataSourceWithBackend';\nimport { AlertQuery } from 'app/types/unified-alerting-dto';\n\nexport function useAlertQueriesStatus(queries: AlertQuery[]) {\n  const allDataSourcesAvailable = useMemo(\n    () =>\n      queries\n        .filter((query) => !isExpressionReference(query.datasourceUid))\n        .every((query) => {\n          const instanceSettings = getDataSourceSrv().getInstanceSettings(query.datasourceUid);\n          return Boolean(instanceSettings);\n        }),\n    [queries]\n  );\n\n  return { allDataSourcesAvailable };\n}\n","import { useMemo } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { useDispatch } from 'app/types';\nimport { CombinedRule, RuleIdentifier, RuleNamespace } from 'app/types/unified-alerting';\nimport { RulerRulesConfigDTO } from 'app/types/unified-alerting-dto';\n\nimport { fetchPromAndRulerRulesAction } from '../state/actions';\nimport { AsyncRequestMapSlice, AsyncRequestState, initialAsyncRequestState } from '../utils/redux';\nimport * as ruleId from '../utils/rule-id';\nimport { isRulerNotSupportedResponse } from '../utils/rules';\n\nimport { useCombinedRuleNamespaces } from './useCombinedRuleNamespaces';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\n\nexport function useCombinedRule(\n  identifier: RuleIdentifier | undefined,\n  ruleSourceName: string | undefined\n): AsyncRequestState<CombinedRule> {\n  const requestState = useCombinedRulesLoader(ruleSourceName);\n  const combinedRules = useCombinedRuleNamespaces(ruleSourceName);\n\n  const rule = useMemo(() => {\n    if (!identifier || !ruleSourceName || combinedRules.length === 0) {\n      return;\n    }\n\n    for (const namespace of combinedRules) {\n      for (const group of namespace.groups) {\n        for (const rule of group.rules) {\n          const id = ruleId.fromCombinedRule(ruleSourceName, rule);\n\n          if (ruleId.equal(id, identifier)) {\n            return rule;\n          }\n        }\n      }\n    }\n\n    return;\n  }, [identifier, ruleSourceName, combinedRules]);\n\n  return {\n    ...requestState,\n    result: rule,\n  };\n}\n\nexport function useCombinedRulesMatching(\n  ruleName: string | undefined,\n  ruleSourceName: string | undefined\n): AsyncRequestState<CombinedRule[]> {\n  const requestState = useCombinedRulesLoader(ruleSourceName);\n  const combinedRules = useCombinedRuleNamespaces(ruleSourceName);\n\n  const rules = useMemo(() => {\n    if (!ruleName || !ruleSourceName || combinedRules.length === 0) {\n      return [];\n    }\n\n    const rules: CombinedRule[] = [];\n\n    for (const namespace of combinedRules) {\n      for (const group of namespace.groups) {\n        for (const rule of group.rules) {\n          if (rule.name === ruleName) {\n            rules.push(rule);\n          }\n        }\n      }\n    }\n\n    return rules;\n  }, [ruleName, ruleSourceName, combinedRules]);\n\n  return {\n    ...requestState,\n    result: rules,\n  };\n}\n\nfunction useCombinedRulesLoader(rulesSourceName: string | undefined): AsyncRequestState<void> {\n  const dispatch = useDispatch();\n  const promRuleRequests = useUnifiedAlertingSelector((state) => state.promRules);\n  const promRuleRequest = getRequestState(rulesSourceName, promRuleRequests);\n  const rulerRuleRequests = useUnifiedAlertingSelector((state) => state.rulerRules);\n  const rulerRuleRequest = getRequestState(rulesSourceName, rulerRuleRequests);\n\n  const { loading } = useAsync(async () => {\n    if (!rulesSourceName) {\n      return;\n    }\n\n    await dispatch(fetchPromAndRulerRulesAction({ rulesSourceName }));\n  }, [dispatch, rulesSourceName]);\n\n  return {\n    loading,\n    error: promRuleRequest.error ?? isRulerNotSupportedResponse(rulerRuleRequest) ? undefined : rulerRuleRequest.error,\n    dispatched: promRuleRequest.dispatched && rulerRuleRequest.dispatched,\n  };\n}\n\nfunction getRequestState(\n  ruleSourceName: string | undefined,\n  slice: AsyncRequestMapSlice<RulerRulesConfigDTO | RuleNamespace[] | null>\n): AsyncRequestState<RulerRulesConfigDTO | RuleNamespace[] | null> {\n  if (!ruleSourceName) {\n    return initialAsyncRequestState;\n  }\n\n  const state = slice[ruleSourceName];\n\n  if (!state) {\n    return initialAsyncRequestState;\n  }\n\n  return state;\n}\n","import { RelativeTimeRange } from '@grafana/data';\nimport { AlertQuery } from 'app/types/unified-alerting-dto';\n\nimport { ExpressionQuery, ExpressionQueryType } from '../../../expressions/types';\n\nconst FALL_BACK_TIME_RANGE = { from: 21600, to: 0 };\n\nexport const getTimeRangeForExpression = (query: ExpressionQuery, queries: AlertQuery[]): RelativeTimeRange => {\n  const referencedRefIds: string[] | undefined = getReferencedIds(query, queries);\n\n  if (!referencedRefIds) {\n    return FALL_BACK_TIME_RANGE;\n  }\n\n  const { from, to } = getTimeRanges(referencedRefIds, queries);\n\n  if (!from.length && !to.length) {\n    return FALL_BACK_TIME_RANGE;\n  }\n\n  return {\n    from: Math.max(...from),\n    to: Math.min(...to),\n  };\n};\n\nconst getReferencedIds = (model: ExpressionQuery, queries: AlertQuery[]): string[] | undefined => {\n  switch (model.type) {\n    case ExpressionQueryType.classic:\n      return getReferencedIdsForClassicCondition(model);\n    case ExpressionQueryType.math:\n      return getReferencedIdsForMath(model, queries);\n    case ExpressionQueryType.resample:\n    case ExpressionQueryType.reduce:\n    case ExpressionQueryType.threshold:\n      return getReferencedIdsForReduce(model);\n  }\n};\n\nconst getReferencedIdsForClassicCondition = (model: ExpressionQuery) => {\n  return model.conditions?.map((condition) => {\n    return condition.query.params[0];\n  });\n};\n\nconst getTimeRanges = (referencedRefIds: string[], queries: AlertQuery[]) => {\n  let from: number[] = [];\n  let to = [FALL_BACK_TIME_RANGE.to];\n  for (const referencedRefIdsKey of referencedRefIds) {\n    const query = queries.find((query) => query.refId === referencedRefIdsKey);\n\n    if (!query || !query.relativeTimeRange) {\n      continue;\n    }\n    from.push(query.relativeTimeRange.from);\n    to.push(query.relativeTimeRange.to);\n  }\n\n  return {\n    from,\n    to,\n  };\n};\n\nconst getReferencedIdsForMath = (model: ExpressionQuery, queries: AlertQuery[]) => {\n  return (\n    queries\n      // filter queries of type query and filter expression on if it includes any refIds\n      .filter((q) => q.queryType === 'query' && model.expression?.includes(q.refId))\n      .map((q) => {\n        return q.refId;\n      })\n  );\n};\n\nconst getReferencedIdsForReduce = (model: ExpressionQuery) => {\n  return model.expression ? [model.expression] : undefined;\n};\n","import { Observable, of, OperatorFunction, ReplaySubject, Unsubscribable } from 'rxjs';\nimport { catchError, map, share } from 'rxjs/operators';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  dataFrameFromJSON,\n  DataFrameJSON,\n  getDefaultTimeRange,\n  LoadingState,\n  PanelData,\n  rangeUtil,\n  TimeRange,\n  withLoadingIndicator,\n} from '@grafana/data';\nimport { FetchResponse, getDataSourceSrv, toDataQueryError } from '@grafana/runtime';\nimport { BackendSrv, getBackendSrv } from 'app/core/services/backend_srv';\nimport { isExpressionQuery } from 'app/features/expressions/guards';\nimport { cancelNetworkRequestsOnUnsubscribe } from 'app/features/query/state/processing/canceler';\nimport { setStructureRevision } from 'app/features/query/state/processing/revision';\nimport { preProcessPanelData } from 'app/features/query/state/runRequest';\nimport { AlertQuery } from 'app/types/unified-alerting-dto';\n\nimport { getTimeRangeForExpression } from '../utils/timeRange';\n\nexport interface AlertingQueryResult {\n  frames: DataFrameJSON[];\n}\n\nexport interface AlertingQueryResponse {\n  results: Record<string, AlertingQueryResult>;\n}\nexport class AlertingQueryRunner {\n  private subject: ReplaySubject<Record<string, PanelData>>;\n  private subscription?: Unsubscribable;\n  private lastResult: Record<string, PanelData>;\n\n  constructor(private backendSrv = getBackendSrv(), private dataSourceSrv = getDataSourceSrv()) {\n    this.subject = new ReplaySubject(1);\n    this.lastResult = {};\n  }\n\n  get(): Observable<Record<string, PanelData>> {\n    return this.subject.asObservable();\n  }\n\n  async run(queries: AlertQuery[]) {\n    if (queries.length === 0) {\n      const empty = initialState(queries, LoadingState.Done);\n      return this.subject.next(empty);\n    }\n\n    // do not execute if one more of the queries are not runnable,\n    // for example not completely configured\n    for (const query of queries) {\n      if (!isExpressionQuery(query.model)) {\n        const ds = await this.dataSourceSrv.get(query.datasourceUid);\n        if (ds.filterQuery && !ds.filterQuery(query.model)) {\n          const empty = initialState(queries, LoadingState.Done);\n          return this.subject.next(empty);\n        }\n      }\n    }\n\n    this.subscription = runRequest(this.backendSrv, queries).subscribe({\n      next: (dataPerQuery) => {\n        const nextResult = applyChange(dataPerQuery, (refId, data) => {\n          const previous = this.lastResult[refId];\n          const preProcessed = preProcessPanelData(data, previous);\n          return setStructureRevision(preProcessed, previous);\n        });\n\n        this.lastResult = nextResult;\n        this.subject.next(this.lastResult);\n      },\n\n      error: (error: Error) => {\n        this.lastResult = mapErrorToPanelData(this.lastResult, error);\n        this.subject.next(this.lastResult);\n      },\n    });\n  }\n\n  cancel() {\n    if (!this.subscription) {\n      return;\n    }\n    this.subscription.unsubscribe();\n\n    let requestIsRunning = false;\n\n    const nextResult = applyChange(this.lastResult, (refId, data) => {\n      if (data.state === LoadingState.Loading) {\n        requestIsRunning = true;\n      }\n\n      return {\n        ...data,\n        state: LoadingState.Done,\n      };\n    });\n\n    if (requestIsRunning) {\n      this.subject.next(nextResult);\n    }\n  }\n\n  destroy() {\n    if (this.subject) {\n      this.subject.complete();\n    }\n\n    this.cancel();\n  }\n}\n\nconst runRequest = (backendSrv: BackendSrv, queries: AlertQuery[]): Observable<Record<string, PanelData>> => {\n  const initial = initialState(queries, LoadingState.Loading);\n  const request = {\n    data: { data: queries },\n    url: '/api/v1/eval',\n    method: 'POST',\n    requestId: uuidv4(),\n  };\n\n  return withLoadingIndicator({\n    whileLoading: initial,\n    source: backendSrv.fetch<AlertingQueryResponse>(request).pipe(\n      mapToPanelData(initial),\n      catchError((error) => of(mapErrorToPanelData(initial, error))),\n      cancelNetworkRequestsOnUnsubscribe(backendSrv, request.requestId),\n      share()\n    ),\n  });\n};\n\nconst initialState = (queries: AlertQuery[], state: LoadingState): Record<string, PanelData> => {\n  return queries.reduce((dataByQuery: Record<string, PanelData>, query) => {\n    dataByQuery[query.refId] = {\n      state,\n      series: [],\n      timeRange: getTimeRange(query, queries),\n    };\n\n    return dataByQuery;\n  }, {});\n};\n\nconst getTimeRange = (query: AlertQuery, queries: AlertQuery[]): TimeRange => {\n  if (isExpressionQuery(query.model)) {\n    const relative = getTimeRangeForExpression(query.model, queries);\n    return rangeUtil.relativeToTimeRange(relative);\n  }\n\n  if (!query.relativeTimeRange) {\n    console.warn(`Query with refId: ${query.refId} did not have any relative time range, using default.`);\n    return getDefaultTimeRange();\n  }\n\n  return rangeUtil.relativeToTimeRange(query.relativeTimeRange);\n};\n\nconst mapToPanelData = (\n  dataByQuery: Record<string, PanelData>\n): OperatorFunction<FetchResponse<AlertingQueryResponse>, Record<string, PanelData>> => {\n  return map((response) => {\n    const { data } = response;\n    const results: Record<string, PanelData> = {};\n\n    for (const [refId, result] of Object.entries(data.results)) {\n      results[refId] = {\n        timeRange: dataByQuery[refId].timeRange,\n        state: LoadingState.Done,\n        series: result.frames.map(dataFrameFromJSON),\n      };\n    }\n\n    return results;\n  });\n};\n\nconst mapErrorToPanelData = (lastResult: Record<string, PanelData>, error: Error): Record<string, PanelData> => {\n  const queryError = toDataQueryError(error);\n\n  return applyChange(lastResult, (refId, data) => {\n    return {\n      ...data,\n      state: LoadingState.Error,\n      error: queryError,\n    };\n  });\n};\n\nconst applyChange = (\n  initial: Record<string, PanelData>,\n  change: (refId: string, data: PanelData) => PanelData\n): Record<string, PanelData> => {\n  const nextResult: Record<string, PanelData> = {};\n\n  for (const [refId, data] of Object.entries(initial)) {\n    nextResult[refId] = change(refId, data);\n  }\n\n  return nextResult;\n};\n","import { DataQuery } from '@grafana/data';\nimport { isExpressionReference } from '@grafana/runtime/src/utils/DataSourceWithBackend';\n\nimport { ExpressionQuery, ExpressionQueryType } from './types';\n\nexport const isExpressionQuery = (dataQuery?: DataQuery): dataQuery is ExpressionQuery => {\n  if (!dataQuery) {\n    return false;\n  }\n\n  if (isExpressionReference(dataQuery.datasource)) {\n    return true;\n  }\n\n  const expression = dataQuery as ExpressionQuery;\n\n  if (typeof expression.type !== 'string') {\n    return false;\n  }\n  return Object.values(ExpressionQueryType).includes(expression.type);\n};\n"],"names":["RuleViewerVisualization","props","theme","useTheme2","styles","useStyles2","getStyles","data","query","onChangeQuery","defaultPanel","isExpressionQuery","model","TABLE","TIMESERIES","panel","setPanel","useState","uid","datasourceUid","datasource","type","dsSettings","getDataSourceSrv","getInstanceSettings","relativeTimeRange","options","setOptions","frameIndex","showHeader","onTimeChange","useCallback","newDateTime","now","dateTime","unix","interval","from","to","setDateTime","relativeTimeRangeTo","subtract","className","content","width","height","style","header","refId","dataSource","name","actions","DateTimePicker","date","onChange","maxDate","Date","PanelPluginsButtonGroup","value","size","Authorize","AccessControlAction","spacing","variant","icon","target","href","createExploreLink","PanelRenderer","gridSize","pluginId","title","onOptionsChange","Alert","CodeEditor","language","showLineNumbers","showMiniMap","JSON","stringify","readOnly","settings","rest","queryParams","urlUtil","config","left","css","typography","fontWeightMedium","colors","text","link","secondary","errorMessage","RuleDetailsFederatedSources","group","sourceTenants","source_tenants","DetailsField","label","map","tenant","alertRuleToQueries","combinedRule","namespace","rulerRule","rulesSource","isGrafanaRulesSource","isGrafanaRulerRule","grafana_alert","isCloudRulesSource","rule","expr","Error","cloudAlertRuleToModel","dataQuery","dataSourceUid","queryType","errorTitle","pageTitle","RuleViewer","match","id","params","identifier","ruleId","loading","error","result","useCombinedRule","ruleSourceName","runner","useMemo","AlertingQueryRunner","useObservable","get","queries2","queries","setQueries","allDataSourcesAvailable","useAlertQueriesStatus","onRunQueries","length","run","useEffect","destroy","q","RuleViewerLayout","getRulesSourceByName","LoadingPlaceholder","message","stack","annotations","Object","entries","filter","_","trim","isFederatedRule","isFederatedRuleGroup","isProvisioned","Boolean","provenance","wrapInContent","severity","Button","fill","Provisioning","resource","ProvisionedResource","Icon","RuleState","isCreating","isDeleting","RuleDetailsActionButtons","isViewMode","details","leftSide","promRule","horizontal","RuleHealth","labels","keys","AlertLabels","RuleDetailsExpression","RuleDetailsAnnotations","rightSide","RuleDetailsDataSources","RuleDetailsMatchingInstances","pagination","itemsPerPage","DEFAULT_PER_PAGE_PAGINATION","queriesTitle","isLoading","onCancel","cancel","padding","queryWarning","values","find","d","state","LoadingState","h5","fontSize","fontWeightBold","fontFamily","border","medium","withErrorBoundary","children","fallback","some","action","contextSrv","panels","reduce","STAT","isSupportedPanelPlugin","push","imgUrl","info","logos","small","defaultPageNav","breadcrumbs","url","getPageStyles","pageNav","navId","RuleViewerLayoutContent","getContentStyles","wrapper","breakpoints","xxl","background","primary","weak","shape","borderRadius","isExpressionReference","every","instanceSettings","requestState","useCombinedRulesLoader","combinedRules","useCombinedRuleNamespaces","groups","rules","useCombinedRulesMatching","ruleName","rulesSourceName","dispatch","useDispatch","promRuleRequests","useUnifiedAlertingSelector","promRules","promRuleRequest","getRequestState","rulerRuleRequests","rulerRules","rulerRuleRequest","useAsync","async","fetchPromAndRulerRulesAction","isRulerNotSupportedResponse","undefined","dispatched","slice","initialAsyncRequestState","FALL_BACK_TIME_RANGE","getReferencedIds","ExpressionQueryType","getReferencedIdsForClassicCondition","getReferencedIdsForMath","getReferencedIdsForReduce","conditions","condition","getTimeRanges","referencedRefIds","referencedRefIdsKey","expression","includes","constructor","backendSrv","getBackendSrv","dataSourceSrv","this","subject","ReplaySubject","lastResult","asObservable","empty","initialState","next","ds","filterQuery","subscription","runRequest","subscribe","dataPerQuery","nextResult","applyChange","previous","preProcessed","preProcessPanelData","setStructureRevision","mapErrorToPanelData","unsubscribe","requestIsRunning","complete","initial","request","method","requestId","uuidv4","withLoadingIndicator","whileLoading","source","fetch","pipe","mapToPanelData","catchError","of","cancelNetworkRequestsOnUnsubscribe","share","dataByQuery","series","timeRange","getTimeRange","relative","Math","max","min","getTimeRangeForExpression","rangeUtil","console","warn","getDefaultTimeRange","response","results","frames","dataFrameFromJSON","queryError","toDataQueryError","change"],"sourceRoot":""}