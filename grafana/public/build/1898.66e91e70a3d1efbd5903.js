"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1898],{6288:(e,a,t)=>{t.d(a,{n:()=>d});var s,o=t(52423),n=(t(68404),t(70332)),i=t(34117),l=t(46889),r=t(70800),c=t(45916);function d(e){var a;let{options:t,onOptionsChange:o}=e;return(0,c.jsxs)("div",{className:h.container,children:[s||(s=(0,c.jsx)("h3",{className:"page-heading",children:"Node Graph"})),(0,c.jsx)(i.Z,{className:h.row,children:(0,c.jsx)(l._,{tooltip:"Enables the Node Graph visualization in the trace viewer.",label:"Enable Node Graph",labelWidth:26,children:(0,c.jsx)(r.x,{id:"enableNodeGraph",value:null===(a=t.jsonData.nodeGraph)||void 0===a?void 0:a.enabled,onChange:e=>(0,n.tp)({onOptionsChange:o,options:t},"nodeGraph",Object.assign({},t.jsonData.nodeGraph,{enabled:e.currentTarget.checked}))})})})]})}const h={container:o.css`
    label: container;
    width: 100%;
  `,row:o.css`
    label: row;
    align-items: baseline;
  `}},78405:(e,a,t)=>{t.d(a,{Z:()=>p});var s,o,n,i=t(52423),l=(t(68404),t(16755)),r=t(34297),c=t(66946),d=t(99500),h=t(45916);const p=e=>{let{values:a,onChange:t,id:i,keyPlaceholder:p="Key",valuePlaceholder:g="Value (optional)"}=e;const j=(0,l.wW)(u);return(0,h.jsx)("div",{className:j.wrapper,children:a.length?a.map(((e,n)=>(0,h.jsxs)("div",{className:j.pair,children:[(0,h.jsx)(r.X,{id:`${i}-key-${n}`,placeholder:p,value:e.key,onChange:e=>{t(a.map(((a,t)=>(t===n&&(a.key=String(e)),a))))}}),(0,h.jsx)(c.W,{"aria-label":"equals",className:j.operator,width:3,children:"="}),(0,h.jsx)(r.X,{id:`${i}-value-${n}`,placeholder:g,value:e.value,onChange:e=>{t(a.map(((a,t)=>(t===n&&(a.value=String(e)),a))))}}),(0,h.jsx)("button",{onClick:()=>t([...a.slice(0,n),...a.slice(n+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button",children:s||(s=(0,h.jsx)(d.J,{name:"times"}))}),n===a.length-1?(0,h.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button",children:o||(o=(0,h.jsx)(d.J,{name:"plus"}))}):null]},n))):(0,h.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button",children:n||(n=(0,h.jsx)(d.J,{name:"plus"}))})})},u=e=>({wrapper:i.css`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing(.5)} 0;
  `,pair:i.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:i.css`
    color: ${e.v1.palette.orange};
  `})},11753:(e,a,t)=>{t.d(a,{Z:()=>j});var s,o=t(52423),n=(t(68404),t(70332)),i=t(94570),l=t(16755),r=t(34117),c=t(46889),d=t(89716),h=t(70800),p=t(4645),u=t(78405),g=t(45916);function j(e){var a,t,j,T,b,m,x,f,y,D,C,w,O,k;let{options:L,onOptionsChange:M}=e;const q=(0,l.wW)(v),S=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource"];return(0,g.jsxs)("div",{className:(0,o.css)({width:"100%"}),children:[s||(s=(0,g.jsx)("h3",{className:"page-heading",children:"Trace to logs"})),(0,g.jsx)("div",{className:q.infoText,children:"Trace to logs lets you navigate from a trace span to the selected data source's logs."}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,g.jsx)(i.q,{inputId:"trace-to-logs-data-source-picker",filter:e=>S.includes(e.type),current:null===(a=L.jsonData.tracesToLogs)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>{var a;return(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{datasourceUid:e.uid,tags:null===(a=L.jsonData.tracesToLogs)||void 0===a?void 0:a.tags}))}})})}),null!==(t=L.jsonData.tracesToLogs)&&void 0!==t&&t.mapTagNamesEnabled?(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,g.jsx)(u.Z,{keyPlaceholder:"Tag",values:null!==(j=null!==(T=null===(b=L.jsonData.tracesToLogs)||void 0===b?void 0:b.mappedTags)&&void 0!==T?T:null===(m=L.jsonData.tracesToLogs)||void 0===m||null===(x=m.tags)||void 0===x?void 0:x.map((e=>({key:e}))))&&void 0!==j?j:[],onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{mappedTags:e}))})})}):(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,g.jsx)(d.B,{tags:null===(f=L.jsonData.tracesToLogs)||void 0===f?void 0:f.tags,width:40,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{tags:e}))})})}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{label:"Map tag names",labelWidth:26,grow:!0,tooltip:"Map trace tag names to log label names. Ex: k8s.pod.name -> pod",children:(0,g.jsx)(h.x,{id:"mapTagNames",value:null!==(y=null===(D=L.jsonData.tracesToLogs)||void 0===D?void 0:D.mapTagNamesEnabled)&&void 0!==y&&y,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{mapTagNamesEnabled:e.currentTarget.checked}))})})}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{label:"Span start time shift",labelWidth:26,grow:!0,tooltip:"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)",children:(0,g.jsx)(p.I,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{spanStartTimeShift:e.currentTarget.value})),value:(null===(C=L.jsonData.tracesToLogs)||void 0===C?void 0:C.spanStartTimeShift)||""})})}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{label:"Span end time shift",labelWidth:26,grow:!0,tooltip:"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h",children:(0,g.jsx)(p.I,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{spanEndTimeShift:e.currentTarget.value})),value:(null===(w=L.jsonData.tracesToLogs)||void 0===w?void 0:w.spanEndTimeShift)||""})})}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{label:"Filter by Trace ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Trace ID. Appends '|=<trace id>' to the query.",children:(0,g.jsx)(h.x,{id:"filterByTraceID",value:null===(O=L.jsonData.tracesToLogs)||void 0===O?void 0:O.filterByTraceID,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{filterByTraceID:e.currentTarget.checked}))})})}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(c._,{label:"Filter by Span ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Span ID. Appends '|=<span id>' to the query.",children:(0,g.jsx)(h.x,{id:"filterBySpanID",value:null===(k=L.jsonData.tracesToLogs)||void 0===k?void 0:k.filterBySpanID,onChange:e=>(0,n.tp)({onOptionsChange:M,options:L},"tracesToLogs",Object.assign({},L.jsonData.tracesToLogs,{filterBySpanID:e.currentTarget.checked}))})})})]})}const v=e=>({infoText:o.css`
    padding-bottom: ${e.spacing(2)};
    color: ${e.colors.text.secondary};
  `})},23218:(e,a,t)=>{t.d(a,{F:()=>g});var s,o=t(52423),n=(t(68404),t(70332)),i=t(94570),l=t(16755),r=t(34117),c=t(46889),d=t(8006),h=t(4645),p=t(78405),u=t(45916);function g(e){var a,t,g,v,T,b,m,x;let{options:f,onOptionsChange:y}=e;const D=(0,l.wW)(j);return(0,u.jsxs)("div",{className:(0,o.css)({width:"100%"}),children:[s||(s=(0,u.jsx)("h3",{className:"page-heading",children:"Trace to metrics"})),(0,u.jsx)("div",{className:D.infoText,children:"Trace to metrics lets you navigate from a trace span to the selected data source."}),(0,u.jsxs)(r.Z,{className:D.row,children:[(0,u.jsx)(c._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,u.jsx)(i.q,{inputId:"trace-to-metrics-data-source-picker",pluginId:"prometheus",current:null===(a=f.jsonData.tracesToMetrics)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{datasourceUid:e.uid}))})}),null!==(t=f.jsonData.tracesToMetrics)&&void 0!==t&&t.datasourceUid?(0,u.jsx)(d.zx,{type:"button",variant:"secondary",size:"sm",fill:"text",onClick:()=>{(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{datasourceUid:void 0}))},children:"Clear"}):null]}),(0,u.jsx)(r.Z,{children:(0,u.jsx)(c._,{tooltip:"Tags that will be used in the metrics query.",label:"Tags",labelWidth:26,children:(0,u.jsx)(p.Z,{keyPlaceholder:"Tag",values:null!==(g=null===(v=f.jsonData.tracesToMetrics)||void 0===v?void 0:v.tags)&&void 0!==g?g:[],onChange:e=>(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{tags:e}))})})}),(0,u.jsx)(r.Z,{children:(0,u.jsx)(c._,{label:"Span start time shift",labelWidth:26,grow:!0,tooltip:"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)",children:(0,u.jsx)(h.I,{type:"text",placeholder:"-1h",width:40,onChange:e=>(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{spanStartTimeShift:e.currentTarget.value})),value:(null===(T=f.jsonData.tracesToMetrics)||void 0===T?void 0:T.spanStartTimeShift)||""})})}),(0,u.jsx)(r.Z,{children:(0,u.jsx)(c._,{label:"Span end time shift",labelWidth:26,grow:!0,tooltip:"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h",children:(0,u.jsx)(h.I,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{spanEndTimeShift:e.currentTarget.value})),value:(null===(b=f.jsonData.tracesToMetrics)||void 0===b?void 0:b.spanEndTimeShift)||""})})}),null===(m=f.jsonData.tracesToMetrics)||void 0===m||null===(x=m.queries)||void 0===x?void 0:x.map(((e,a)=>(0,u.jsxs)("div",{className:D.queryRow,children:[(0,u.jsx)(c._,{label:"Link Label",labelWidth:10,children:(0,u.jsx)(h.I,{label:"Link Label",type:"text",allowFullScreen:!0,value:e.name,onChange:e=>{var t,s;let o=null!==(t=null===(s=f.jsonData.tracesToMetrics)||void 0===s?void 0:s.queries.slice())&&void 0!==t?t:[];o[a].name=e.currentTarget.value,(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{queries:o}))}})}),(0,u.jsx)(c._,{label:"Query",labelWidth:10,tooltip:"The Prometheus query that will run when navigating from a trace to metrics. Interpolate tags using the `$__tags` keyword.",grow:!0,children:(0,u.jsx)(h.I,{label:"Query",type:"text",allowFullScreen:!0,value:e.query,onChange:e=>{var t,s;let o=null!==(t=null===(s=f.jsonData.tracesToMetrics)||void 0===s?void 0:s.queries.slice())&&void 0!==t?t:[];o[a].query=e.currentTarget.value,(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{queries:o}))}})}),(0,u.jsx)(d.zx,{variant:"destructive",title:"Remove query",icon:"times",type:"button",onClick:()=>{var e;let t=null===(e=f.jsonData.tracesToMetrics)||void 0===e?void 0:e.queries.slice();null==t||t.splice(a,1),(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{queries:t}))}})]},a))),(0,u.jsx)(d.zx,{variant:"secondary",title:"Add query",icon:"plus",type:"button",onClick:()=>{var e,a;(0,n.tp)({onOptionsChange:y,options:f},"tracesToMetrics",Object.assign({},f.jsonData.tracesToMetrics,{queries:[...null!==(e=null===(a=f.jsonData.tracesToMetrics)||void 0===a?void 0:a.queries)&&void 0!==e?e:[],{query:""}]}))},children:"Add query"})]})}const j=e=>({infoText:o.css`
    padding-bottom: ${e.spacing(2)};
    color: ${e.colors.text.secondary};
  `,row:o.css`
    label: row;
    align-items: baseline;
  `,queryRow:o.css`
    display: flex;
  `})}}]);
//# sourceMappingURL=1898.66e91e70a3d1efbd5903.js.map